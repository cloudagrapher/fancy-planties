0885fdb9b8e14bad2c08b1050fae3097
/**
 * @jest-environment node
 */ "use strict";
// Mock dependencies
jest.mock('@/lib/auth/middleware');
jest.mock('@/lib/services/email-verification-cleanup');
jest.mock('@/lib/services/email-service-monitor');
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _server = require("next/server");
const _route = require("../../../app/api/admin/email-verification-monitor/route");
const _middleware = require("../../../lib/auth/middleware");
const _emailverificationcleanup = require("../../../lib/services/email-verification-cleanup");
const _emailservicemonitor = require("../../../lib/services/email-service-monitor");
const mockRequireAuth = _middleware.requireAuth;
const mockCleanupService = _emailverificationcleanup.emailVerificationCleanupService;
const mockEmailServiceMonitor = _emailservicemonitor.emailServiceMonitor;
describe('/api/admin/email-verification-monitor', ()=>{
    const mockUser = {
        id: 1,
        email: 'admin@example.com',
        name: 'Admin'
    };
    beforeEach(()=>{
        jest.clearAllMocks();
        // Mock authentication
        mockRequireAuth.mockResolvedValue({
            user: mockUser
        });
        // Mock system status
        mockCleanupService.getSystemStatus.mockResolvedValue({
            verificationCodes: {
                totalActive: 10,
                expiredCount: 2,
                highAttemptCount: 1
            },
            rateLimits: {
                verificationAttempts: 5,
                resendRequests: 3,
                emailVerificationActivity: 8,
                resendCooldowns: 1,
                securityEvents: 0
            },
            emailService: {
                health: 'healthy',
                quotaUsage: 45,
                successRate: 98.5,
                totalSent: 200,
                totalFailed: 3,
                averageResponseTime: 150,
                issues: [],
                recommendations: []
            },
            cleanup: {
                lastCleanup: Date.now() - 30 * 60 * 1000,
                isRunning: false,
                nextCleanupDue: Date.now() + 30 * 60 * 1000
            }
        });
        // Mock email service monitor
        mockEmailServiceMonitor.getStats.mockReturnValue({
            totalSent: 200,
            totalFailed: 3,
            quotaUsed: 45,
            quotaLimit: 100,
            errorsByType: {
                API_ERROR: 2,
                NETWORK_ERROR: 1
            },
            successRate: 98.5,
            averageResponseTime: 150,
            lastResetTime: Date.now() - 2 * 60 * 60 * 1000
        });
        mockEmailServiceMonitor.getHealthStatus.mockReturnValue({
            status: 'healthy',
            issues: [],
            recommendations: []
        });
        mockEmailServiceMonitor.getRecentEvents.mockReturnValue([
            {
                type: 'success',
                timestamp: Date.now() - 5 * 60 * 1000,
                responseTime: 120
            },
            {
                type: 'error',
                timestamp: Date.now() - 10 * 60 * 1000,
                responseTime: 300,
                error: {
                    message: 'API Error',
                    code: 'API_ERROR'
                }
            }
        ]);
        mockEmailServiceMonitor.getErrorSummary.mockReturnValue({
            totalErrors: 3,
            errorsByType: {
                API_ERROR: 2,
                NETWORK_ERROR: 1
            },
            recentErrors: [
                {
                    type: 'error',
                    timestamp: Date.now() - 10 * 60 * 1000,
                    responseTime: 300,
                    error: {
                        message: 'API Error',
                        code: 'API_ERROR'
                    }
                }
            ],
            criticalErrors: []
        });
        mockEmailServiceMonitor.isQuotaNearLimit.mockReturnValue(false);
        mockCleanupService.getCleanupStats.mockReturnValue({
            lastCleanup: Date.now() - 30 * 60 * 1000,
            isRunning: false,
            recentStats: [
                {
                    expiredCodes: 5,
                    rateLimitData: 3,
                    timestamp: Date.now() - 30 * 60 * 1000
                }
            ],
            totalExpiredCodes: 25,
            totalRateLimitData: 15
        });
    });
    describe('GET', ()=>{
        it('should return comprehensive monitoring data', async ()=>{
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor');
            const response = await (0, _route.GET)(request);
            expect(response.status).toBe(200);
            const data = await response.json();
            expect(data).toMatchObject({
                timestamp: expect.any(Number),
                systemStatus: expect.objectContaining({
                    verificationCodes: expect.any(Object),
                    rateLimits: expect.any(Object),
                    emailService: expect.any(Object),
                    cleanup: expect.any(Object)
                }),
                emailService: expect.objectContaining({
                    stats: expect.any(Object),
                    health: expect.any(Object),
                    recentEvents: expect.any(Array),
                    errorSummary: expect.any(Object),
                    quotaWarning: expect.any(Boolean),
                    quotaCritical: expect.any(Boolean)
                }),
                cleanup: expect.any(Object),
                alerts: expect.any(Array)
            });
            expect(mockRequireAuth).toHaveBeenCalledWith();
            expect(mockCleanupService.getSystemStatus).toHaveBeenCalledWith();
            expect(mockEmailServiceMonitor.getStats).toHaveBeenCalledWith();
            expect(mockEmailServiceMonitor.getHealthStatus).toHaveBeenCalledWith();
            expect(mockEmailServiceMonitor.getRecentEvents).toHaveBeenCalledWith(50);
            expect(mockEmailServiceMonitor.getErrorSummary).toHaveBeenCalledWith();
        });
        it('should generate alerts for critical conditions', async ()=>{
            // Mock critical email service health
            mockCleanupService.getSystemStatus.mockResolvedValue({
                verificationCodes: {
                    totalActive: 10,
                    expiredCount: 2,
                    highAttemptCount: 1
                },
                rateLimits: {
                    verificationAttempts: 5,
                    resendRequests: 3,
                    emailVerificationActivity: 8,
                    resendCooldowns: 1,
                    securityEvents: 15
                },
                emailService: {
                    health: 'critical',
                    quotaUsage: 96,
                    successRate: 75,
                    totalSent: 200,
                    totalFailed: 50,
                    averageResponseTime: 150,
                    issues: [
                        'Critical quota usage',
                        'Low success rate'
                    ],
                    recommendations: [
                        'Immediate action required'
                    ]
                },
                cleanup: {
                    lastCleanup: Date.now() - 30 * 60 * 1000,
                    isRunning: false,
                    nextCleanupDue: Date.now() + 30 * 60 * 1000
                }
            });
            mockEmailServiceMonitor.getHealthStatus.mockReturnValue({
                status: 'critical',
                issues: [
                    'Critical quota usage',
                    'Low success rate'
                ],
                recommendations: [
                    'Immediate action required'
                ]
            });
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor');
            const response = await (0, _route.GET)(request);
            expect(response.status).toBe(200);
            const data = await response.json();
            expect(data.alerts.length).toBeGreaterThan(0);
            // Should have critical alerts
            const criticalAlerts = data.alerts.filter((alert)=>alert.level === 'critical');
            expect(criticalAlerts.length).toBeGreaterThan(0);
            // Should have quota alert
            const quotaAlert = data.alerts.find((alert)=>alert.message.includes('quota'));
            expect(quotaAlert).toBeDefined();
            expect(quotaAlert.level).toBe('critical');
            // Should have success rate alert
            const successRateAlert = data.alerts.find((alert)=>alert.message.includes('success rate'));
            expect(successRateAlert).toBeDefined();
            expect(successRateAlert.level).toBe('critical');
            // Should have security events alert
            const securityAlert = data.alerts.find((alert)=>alert.message.includes('security events'));
            expect(securityAlert).toBeDefined();
            expect(securityAlert.level).toBe('warning');
        });
        it('should handle authentication errors', async ()=>{
            mockRequireAuth.mockRejectedValue(new Error('Unauthorized'));
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor');
            const response = await (0, _route.GET)(request);
            expect(response.status).toBe(500);
            const data = await response.json();
            expect(data.error).toBe('Failed to fetch monitoring data');
        });
        it('should handle system status errors', async ()=>{
            mockCleanupService.getSystemStatus.mockRejectedValue(new Error('Database error'));
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor');
            const response = await (0, _route.GET)(request);
            expect(response.status).toBe(500);
            const data = await response.json();
            expect(data.error).toBe('Failed to fetch monitoring data');
            expect(data.details).toBe('Database error');
        });
    });
    describe('POST', ()=>{
        it('should handle force-cleanup action', async ()=>{
            const cleanupResult = {
                expiredCodes: 10,
                rateLimitData: 5,
                timestamp: Date.now()
            };
            mockCleanupService.forceCleanup.mockResolvedValue(cleanupResult);
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor', {
                method: 'POST',
                body: JSON.stringify({
                    action: 'force-cleanup'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(200);
            const data = await response.json();
            expect(data).toEqual({
                success: true,
                message: 'Cleanup completed successfully',
                result: cleanupResult
            });
            expect(mockCleanupService.forceCleanup).toHaveBeenCalledWith();
        });
        it('should handle reset-email-stats action', async ()=>{
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor', {
                method: 'POST',
                body: JSON.stringify({
                    action: 'reset-email-stats'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(200);
            const data = await response.json();
            expect(data).toEqual({
                success: true,
                message: 'Email service statistics reset successfully'
            });
            expect(mockEmailServiceMonitor.forceReset).toHaveBeenCalledWith();
        });
        it('should handle get-error-details action', async ()=>{
            const errorDetails = {
                totalErrors: 5,
                errorsByType: {
                    API_ERROR: 3,
                    NETWORK_ERROR: 2
                },
                recentErrors: [],
                criticalErrors: []
            };
            const recentEvents = [
                {
                    type: 'error',
                    timestamp: Date.now(),
                    responseTime: 200,
                    error: {
                        message: 'Error',
                        code: 'API_ERROR'
                    }
                }
            ];
            mockEmailServiceMonitor.getErrorSummary.mockReturnValue(errorDetails);
            mockEmailServiceMonitor.getRecentEvents.mockReturnValue(recentEvents);
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor', {
                method: 'POST',
                body: JSON.stringify({
                    action: 'get-error-details'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(200);
            const data = await response.json();
            expect(data).toEqual({
                success: true,
                errorDetails,
                recentEvents
            });
            expect(mockEmailServiceMonitor.getErrorSummary).toHaveBeenCalledWith();
            expect(mockEmailServiceMonitor.getRecentEvents).toHaveBeenCalledWith(200);
        });
        it('should handle invalid action', async ()=>{
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor', {
                method: 'POST',
                body: JSON.stringify({
                    action: 'invalid-action'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(400);
            const data = await response.json();
            expect(data.error).toBe('Invalid action specified');
        });
        it('should handle authentication errors', async ()=>{
            mockRequireAuth.mockRejectedValue(new Error('Unauthorized'));
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor', {
                method: 'POST',
                body: JSON.stringify({
                    action: 'force-cleanup'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(500);
            const data = await response.json();
            expect(data.error).toBe('Failed to perform admin action');
        });
        it('should handle cleanup errors', async ()=>{
            mockCleanupService.forceCleanup.mockRejectedValue(new Error('Cleanup failed'));
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor', {
                method: 'POST',
                body: JSON.stringify({
                    action: 'force-cleanup'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(500);
            const data = await response.json();
            expect(data.error).toBe('Failed to perform admin action');
            expect(data.details).toBe('Cleanup failed');
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdGVmYW5iZWtrZXIvcHJvamVjdHMvZmFuY3ktcGxhbnRpZXMvc3JjL19fdGVzdHNfXy9hcGkvYWRtaW4vZW1haWwtdmVyaWZpY2F0aW9uLW1vbml0b3IudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBqZXN0LWVudmlyb25tZW50IG5vZGVcbiAqL1xuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IEdFVCwgUE9TVCB9IGZyb20gJ0AvYXBwL2FwaS9hZG1pbi9lbWFpbC12ZXJpZmljYXRpb24tbW9uaXRvci9yb3V0ZSc7XG5pbXBvcnQgeyByZXF1aXJlQXV0aCB9IGZyb20gJ0AvbGliL2F1dGgvbWlkZGxld2FyZSc7XG5pbXBvcnQgeyBlbWFpbFZlcmlmaWNhdGlvbkNsZWFudXBTZXJ2aWNlIH0gZnJvbSAnQC9saWIvc2VydmljZXMvZW1haWwtdmVyaWZpY2F0aW9uLWNsZWFudXAnO1xuaW1wb3J0IHsgZW1haWxTZXJ2aWNlTW9uaXRvciB9IGZyb20gJ0AvbGliL3NlcnZpY2VzL2VtYWlsLXNlcnZpY2UtbW9uaXRvcic7XG5cbi8vIE1vY2sgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJ0AvbGliL2F1dGgvbWlkZGxld2FyZScpO1xuamVzdC5tb2NrKCdAL2xpYi9zZXJ2aWNlcy9lbWFpbC12ZXJpZmljYXRpb24tY2xlYW51cCcpO1xuamVzdC5tb2NrKCdAL2xpYi9zZXJ2aWNlcy9lbWFpbC1zZXJ2aWNlLW1vbml0b3InKTtcblxuY29uc3QgbW9ja1JlcXVpcmVBdXRoID0gcmVxdWlyZUF1dGggYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgcmVxdWlyZUF1dGg+O1xuY29uc3QgbW9ja0NsZWFudXBTZXJ2aWNlID0gZW1haWxWZXJpZmljYXRpb25DbGVhbnVwU2VydmljZSBhcyBqZXN0Lk1vY2tlZDx0eXBlb2YgZW1haWxWZXJpZmljYXRpb25DbGVhbnVwU2VydmljZT47XG5jb25zdCBtb2NrRW1haWxTZXJ2aWNlTW9uaXRvciA9IGVtYWlsU2VydmljZU1vbml0b3IgYXMgamVzdC5Nb2NrZWQ8dHlwZW9mIGVtYWlsU2VydmljZU1vbml0b3I+O1xuXG5kZXNjcmliZSgnL2FwaS9hZG1pbi9lbWFpbC12ZXJpZmljYXRpb24tbW9uaXRvcicsICgpID0+IHtcbiAgY29uc3QgbW9ja1VzZXIgPSB7IGlkOiAxLCBlbWFpbDogJ2FkbWluQGV4YW1wbGUuY29tJywgbmFtZTogJ0FkbWluJyB9O1xuICBcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgXG4gICAgLy8gTW9jayBhdXRoZW50aWNhdGlvblxuICAgIG1vY2tSZXF1aXJlQXV0aC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHVzZXI6IG1vY2tVc2VyIH0pO1xuICAgIFxuICAgIC8vIE1vY2sgc3lzdGVtIHN0YXR1c1xuICAgIG1vY2tDbGVhbnVwU2VydmljZS5nZXRTeXN0ZW1TdGF0dXMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgdmVyaWZpY2F0aW9uQ29kZXM6IHtcbiAgICAgICAgdG90YWxBY3RpdmU6IDEwLFxuICAgICAgICBleHBpcmVkQ291bnQ6IDIsXG4gICAgICAgIGhpZ2hBdHRlbXB0Q291bnQ6IDEsXG4gICAgICB9LFxuICAgICAgcmF0ZUxpbWl0czoge1xuICAgICAgICB2ZXJpZmljYXRpb25BdHRlbXB0czogNSxcbiAgICAgICAgcmVzZW5kUmVxdWVzdHM6IDMsXG4gICAgICAgIGVtYWlsVmVyaWZpY2F0aW9uQWN0aXZpdHk6IDgsXG4gICAgICAgIHJlc2VuZENvb2xkb3duczogMSxcbiAgICAgICAgc2VjdXJpdHlFdmVudHM6IDAsXG4gICAgICB9LFxuICAgICAgZW1haWxTZXJ2aWNlOiB7XG4gICAgICAgIGhlYWx0aDogJ2hlYWx0aHknLFxuICAgICAgICBxdW90YVVzYWdlOiA0NSxcbiAgICAgICAgc3VjY2Vzc1JhdGU6IDk4LjUsXG4gICAgICAgIHRvdGFsU2VudDogMjAwLFxuICAgICAgICB0b3RhbEZhaWxlZDogMyxcbiAgICAgICAgYXZlcmFnZVJlc3BvbnNlVGltZTogMTUwLFxuICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtdLFxuICAgICAgfSxcbiAgICAgIGNsZWFudXA6IHtcbiAgICAgICAgbGFzdENsZWFudXA6IERhdGUubm93KCkgLSAzMCAqIDYwICogMTAwMCwgLy8gMzAgbWludXRlcyBhZ29cbiAgICAgICAgaXNSdW5uaW5nOiBmYWxzZSxcbiAgICAgICAgbmV4dENsZWFudXBEdWU6IERhdGUubm93KCkgKyAzMCAqIDYwICogMTAwMCwgLy8gMzAgbWludXRlcyBmcm9tIG5vd1xuICAgICAgfSxcbiAgICB9KTtcbiAgICBcbiAgICAvLyBNb2NrIGVtYWlsIHNlcnZpY2UgbW9uaXRvclxuICAgIG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yLmdldFN0YXRzLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICB0b3RhbFNlbnQ6IDIwMCxcbiAgICAgIHRvdGFsRmFpbGVkOiAzLFxuICAgICAgcXVvdGFVc2VkOiA0NSxcbiAgICAgIHF1b3RhTGltaXQ6IDEwMCxcbiAgICAgIGVycm9yc0J5VHlwZTogeyBBUElfRVJST1I6IDIsIE5FVFdPUktfRVJST1I6IDEgfSxcbiAgICAgIHN1Y2Nlc3NSYXRlOiA5OC41LFxuICAgICAgYXZlcmFnZVJlc3BvbnNlVGltZTogMTUwLFxuICAgICAgbGFzdFJlc2V0VGltZTogRGF0ZS5ub3coKSAtIDIgKiA2MCAqIDYwICogMTAwMCwgLy8gMiBob3VycyBhZ29cbiAgICB9KTtcbiAgICBcbiAgICBtb2NrRW1haWxTZXJ2aWNlTW9uaXRvci5nZXRIZWFsdGhTdGF0dXMubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIHN0YXR1czogJ2hlYWx0aHknLFxuICAgICAgaXNzdWVzOiBbXSxcbiAgICAgIHJlY29tbWVuZGF0aW9uczogW10sXG4gICAgfSk7XG4gICAgXG4gICAgbW9ja0VtYWlsU2VydmljZU1vbml0b3IuZ2V0UmVjZW50RXZlbnRzLm1vY2tSZXR1cm5WYWx1ZShbXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIC0gNSAqIDYwICogMTAwMCxcbiAgICAgICAgcmVzcG9uc2VUaW1lOiAxMjAsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCkgLSAxMCAqIDYwICogMTAwMCxcbiAgICAgICAgcmVzcG9uc2VUaW1lOiAzMDAsXG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdBUEkgRXJyb3InLCBjb2RlOiAnQVBJX0VSUk9SJyB9LFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBcbiAgICBtb2NrRW1haWxTZXJ2aWNlTW9uaXRvci5nZXRFcnJvclN1bW1hcnkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIHRvdGFsRXJyb3JzOiAzLFxuICAgICAgZXJyb3JzQnlUeXBlOiB7IEFQSV9FUlJPUjogMiwgTkVUV09SS19FUlJPUjogMSB9LFxuICAgICAgcmVjZW50RXJyb3JzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSAtIDEwICogNjAgKiAxMDAwLFxuICAgICAgICAgIHJlc3BvbnNlVGltZTogMzAwLFxuICAgICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdBUEkgRXJyb3InLCBjb2RlOiAnQVBJX0VSUk9SJyB9LFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGNyaXRpY2FsRXJyb3JzOiBbXSxcbiAgICB9KTtcbiAgICBcbiAgICBtb2NrRW1haWxTZXJ2aWNlTW9uaXRvci5pc1F1b3RhTmVhckxpbWl0Lm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XG4gICAgXG4gICAgbW9ja0NsZWFudXBTZXJ2aWNlLmdldENsZWFudXBTdGF0cy5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgbGFzdENsZWFudXA6IERhdGUubm93KCkgLSAzMCAqIDYwICogMTAwMCxcbiAgICAgIGlzUnVubmluZzogZmFsc2UsXG4gICAgICByZWNlbnRTdGF0czogW1xuICAgICAgICB7XG4gICAgICAgICAgZXhwaXJlZENvZGVzOiA1LFxuICAgICAgICAgIHJhdGVMaW1pdERhdGE6IDMsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIC0gMzAgKiA2MCAqIDEwMDAsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgdG90YWxFeHBpcmVkQ29kZXM6IDI1LFxuICAgICAgdG90YWxSYXRlTGltaXREYXRhOiAxNSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBjb21wcmVoZW5zaXZlIG1vbml0b3JpbmcgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3QvYXBpL2FkbWluL2VtYWlsLXZlcmlmaWNhdGlvbi1tb25pdG9yJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgZXhwZWN0KGRhdGEpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICB0aW1lc3RhbXA6IGV4cGVjdC5hbnkoTnVtYmVyKSxcbiAgICAgICAgc3lzdGVtU3RhdHVzOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdmVyaWZpY2F0aW9uQ29kZXM6IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgICAgICByYXRlTGltaXRzOiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgICAgZW1haWxTZXJ2aWNlOiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgICAgY2xlYW51cDogZXhwZWN0LmFueShPYmplY3QpLFxuICAgICAgICB9KSxcbiAgICAgICAgZW1haWxTZXJ2aWNlOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgc3RhdHM6IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgICAgICBoZWFsdGg6IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgICAgICByZWNlbnRFdmVudHM6IGV4cGVjdC5hbnkoQXJyYXkpLFxuICAgICAgICAgIGVycm9yU3VtbWFyeTogZXhwZWN0LmFueShPYmplY3QpLFxuICAgICAgICAgIHF1b3RhV2FybmluZzogZXhwZWN0LmFueShCb29sZWFuKSxcbiAgICAgICAgICBxdW90YUNyaXRpY2FsOiBleHBlY3QuYW55KEJvb2xlYW4pLFxuICAgICAgICB9KSxcbiAgICAgICAgY2xlYW51cDogZXhwZWN0LmFueShPYmplY3QpLFxuICAgICAgICBhbGVydHM6IGV4cGVjdC5hbnkoQXJyYXkpLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrUmVxdWlyZUF1dGgpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCk7XG4gICAgICBleHBlY3QobW9ja0NsZWFudXBTZXJ2aWNlLmdldFN5c3RlbVN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoKTtcbiAgICAgIGV4cGVjdChtb2NrRW1haWxTZXJ2aWNlTW9uaXRvci5nZXRTdGF0cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoKTtcbiAgICAgIGV4cGVjdChtb2NrRW1haWxTZXJ2aWNlTW9uaXRvci5nZXRIZWFsdGhTdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCk7XG4gICAgICBleHBlY3QobW9ja0VtYWlsU2VydmljZU1vbml0b3IuZ2V0UmVjZW50RXZlbnRzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg1MCk7XG4gICAgICBleHBlY3QobW9ja0VtYWlsU2VydmljZU1vbml0b3IuZ2V0RXJyb3JTdW1tYXJ5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBhbGVydHMgZm9yIGNyaXRpY2FsIGNvbmRpdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGNyaXRpY2FsIGVtYWlsIHNlcnZpY2UgaGVhbHRoXG4gICAgICBtb2NrQ2xlYW51cFNlcnZpY2UuZ2V0U3lzdGVtU3RhdHVzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdmVyaWZpY2F0aW9uQ29kZXM6IHsgdG90YWxBY3RpdmU6IDEwLCBleHBpcmVkQ291bnQ6IDIsIGhpZ2hBdHRlbXB0Q291bnQ6IDEgfSxcbiAgICAgICAgcmF0ZUxpbWl0czogeyB2ZXJpZmljYXRpb25BdHRlbXB0czogNSwgcmVzZW5kUmVxdWVzdHM6IDMsIGVtYWlsVmVyaWZpY2F0aW9uQWN0aXZpdHk6IDgsIHJlc2VuZENvb2xkb3duczogMSwgc2VjdXJpdHlFdmVudHM6IDE1IH0sXG4gICAgICAgIGVtYWlsU2VydmljZToge1xuICAgICAgICAgIGhlYWx0aDogJ2NyaXRpY2FsJyxcbiAgICAgICAgICBxdW90YVVzYWdlOiA5NixcbiAgICAgICAgICBzdWNjZXNzUmF0ZTogNzUsXG4gICAgICAgICAgdG90YWxTZW50OiAyMDAsXG4gICAgICAgICAgdG90YWxGYWlsZWQ6IDUwLFxuICAgICAgICAgIGF2ZXJhZ2VSZXNwb25zZVRpbWU6IDE1MCxcbiAgICAgICAgICBpc3N1ZXM6IFsnQ3JpdGljYWwgcXVvdGEgdXNhZ2UnLCAnTG93IHN1Y2Nlc3MgcmF0ZSddLFxuICAgICAgICAgIHJlY29tbWVuZGF0aW9uczogWydJbW1lZGlhdGUgYWN0aW9uIHJlcXVpcmVkJ10sXG4gICAgICAgIH0sXG4gICAgICAgIGNsZWFudXA6IHsgbGFzdENsZWFudXA6IERhdGUubm93KCkgLSAzMCAqIDYwICogMTAwMCwgaXNSdW5uaW5nOiBmYWxzZSwgbmV4dENsZWFudXBEdWU6IERhdGUubm93KCkgKyAzMCAqIDYwICogMTAwMCB9LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yLmdldEhlYWx0aFN0YXR1cy5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzdGF0dXM6ICdjcml0aWNhbCcsXG4gICAgICAgIGlzc3VlczogWydDcml0aWNhbCBxdW90YSB1c2FnZScsICdMb3cgc3VjY2VzcyByYXRlJ10sXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogWydJbW1lZGlhdGUgYWN0aW9uIHJlcXVpcmVkJ10sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdC9hcGkvYWRtaW4vZW1haWwtdmVyaWZpY2F0aW9uLW1vbml0b3InKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBleHBlY3QoZGF0YS5hbGVydHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBoYXZlIGNyaXRpY2FsIGFsZXJ0c1xuICAgICAgY29uc3QgY3JpdGljYWxBbGVydHMgPSBkYXRhLmFsZXJ0cy5maWx0ZXIoKGFsZXJ0OiBhbnkpID0+IGFsZXJ0LmxldmVsID09PSAnY3JpdGljYWwnKTtcbiAgICAgIGV4cGVjdChjcml0aWNhbEFsZXJ0cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGhhdmUgcXVvdGEgYWxlcnRcbiAgICAgIGNvbnN0IHF1b3RhQWxlcnQgPSBkYXRhLmFsZXJ0cy5maW5kKChhbGVydDogYW55KSA9PiBhbGVydC5tZXNzYWdlLmluY2x1ZGVzKCdxdW90YScpKTtcbiAgICAgIGV4cGVjdChxdW90YUFsZXJ0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHF1b3RhQWxlcnQubGV2ZWwpLnRvQmUoJ2NyaXRpY2FsJyk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBoYXZlIHN1Y2Nlc3MgcmF0ZSBhbGVydFxuICAgICAgY29uc3Qgc3VjY2Vzc1JhdGVBbGVydCA9IGRhdGEuYWxlcnRzLmZpbmQoKGFsZXJ0OiBhbnkpID0+IGFsZXJ0Lm1lc3NhZ2UuaW5jbHVkZXMoJ3N1Y2Nlc3MgcmF0ZScpKTtcbiAgICAgIGV4cGVjdChzdWNjZXNzUmF0ZUFsZXJ0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHN1Y2Nlc3NSYXRlQWxlcnQubGV2ZWwpLnRvQmUoJ2NyaXRpY2FsJyk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBoYXZlIHNlY3VyaXR5IGV2ZW50cyBhbGVydFxuICAgICAgY29uc3Qgc2VjdXJpdHlBbGVydCA9IGRhdGEuYWxlcnRzLmZpbmQoKGFsZXJ0OiBhbnkpID0+IGFsZXJ0Lm1lc3NhZ2UuaW5jbHVkZXMoJ3NlY3VyaXR5IGV2ZW50cycpKTtcbiAgICAgIGV4cGVjdChzZWN1cml0eUFsZXJ0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHNlY3VyaXR5QWxlcnQubGV2ZWwpLnRvQmUoJ3dhcm5pbmcnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGF1dGhlbnRpY2F0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSZXF1aXJlQXV0aC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1VuYXV0aG9yaXplZCcpKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdC9hcGkvYWRtaW4vZW1haWwtdmVyaWZpY2F0aW9uLW1vbml0b3InKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDUwMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvcikudG9CZSgnRmFpbGVkIHRvIGZldGNoIG1vbml0b3JpbmcgZGF0YScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc3lzdGVtIHN0YXR1cyBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2xlYW51cFNlcnZpY2UuZ2V0U3lzdGVtU3RhdHVzLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3InKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3QvYXBpL2FkbWluL2VtYWlsLXZlcmlmaWNhdGlvbi1tb25pdG9yJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IpLnRvQmUoJ0ZhaWxlZCB0byBmZXRjaCBtb25pdG9yaW5nIGRhdGEnKTtcbiAgICAgIGV4cGVjdChkYXRhLmRldGFpbHMpLnRvQmUoJ0RhdGFiYXNlIGVycm9yJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQT1NUJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGZvcmNlLWNsZWFudXAgYWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY2xlYW51cFJlc3VsdCA9IHtcbiAgICAgICAgZXhwaXJlZENvZGVzOiAxMCxcbiAgICAgICAgcmF0ZUxpbWl0RGF0YTogNSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgbW9ja0NsZWFudXBTZXJ2aWNlLmZvcmNlQ2xlYW51cC5tb2NrUmVzb2x2ZWRWYWx1ZShjbGVhbnVwUmVzdWx0KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdC9hcGkvYWRtaW4vZW1haWwtdmVyaWZpY2F0aW9uLW1vbml0b3InLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGFjdGlvbjogJ2ZvcmNlLWNsZWFudXAnIH0pLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIFxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGV4cGVjdChkYXRhKS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ0NsZWFudXAgY29tcGxldGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICAgIHJlc3VsdDogY2xlYW51cFJlc3VsdCxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QobW9ja0NsZWFudXBTZXJ2aWNlLmZvcmNlQ2xlYW51cCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHJlc2V0LWVtYWlsLXN0YXRzIGFjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3QvYXBpL2FkbWluL2VtYWlsLXZlcmlmaWNhdGlvbi1tb25pdG9yJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhY3Rpb246ICdyZXNldC1lbWFpbC1zdGF0cycgfSksXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUE9TVChyZXF1ZXN0KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgZXhwZWN0KGRhdGEpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnRW1haWwgc2VydmljZSBzdGF0aXN0aWNzIHJlc2V0IHN1Y2Nlc3NmdWxseScsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yLmZvcmNlUmVzZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBnZXQtZXJyb3ItZGV0YWlscyBhY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvckRldGFpbHMgPSB7XG4gICAgICAgIHRvdGFsRXJyb3JzOiA1LFxuICAgICAgICBlcnJvcnNCeVR5cGU6IHsgQVBJX0VSUk9SOiAzLCBORVRXT1JLX0VSUk9SOiAyIH0sXG4gICAgICAgIHJlY2VudEVycm9yczogW10sXG4gICAgICAgIGNyaXRpY2FsRXJyb3JzOiBbXSxcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IHJlY2VudEV2ZW50cyA9IFtcbiAgICAgICAgeyB0eXBlOiAnZXJyb3InLCB0aW1lc3RhbXA6IERhdGUubm93KCksIHJlc3BvbnNlVGltZTogMjAwLCBlcnJvcjogeyBtZXNzYWdlOiAnRXJyb3InLCBjb2RlOiAnQVBJX0VSUk9SJyB9IH0sXG4gICAgICBdO1xuICAgICAgXG4gICAgICBtb2NrRW1haWxTZXJ2aWNlTW9uaXRvci5nZXRFcnJvclN1bW1hcnkubW9ja1JldHVyblZhbHVlKGVycm9yRGV0YWlscyk7XG4gICAgICBtb2NrRW1haWxTZXJ2aWNlTW9uaXRvci5nZXRSZWNlbnRFdmVudHMubW9ja1JldHVyblZhbHVlKHJlY2VudEV2ZW50cyk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3QvYXBpL2FkbWluL2VtYWlsLXZlcmlmaWNhdGlvbi1tb25pdG9yJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhY3Rpb246ICdnZXQtZXJyb3ItZGV0YWlscycgfSksXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUE9TVChyZXF1ZXN0KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgZXhwZWN0KGRhdGEpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBlcnJvckRldGFpbHMsXG4gICAgICAgIHJlY2VudEV2ZW50cyxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QobW9ja0VtYWlsU2VydmljZU1vbml0b3IuZ2V0RXJyb3JTdW1tYXJ5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgpO1xuICAgICAgZXhwZWN0KG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yLmdldFJlY2VudEV2ZW50cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoMjAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgYWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdC9hcGkvYWRtaW4vZW1haWwtdmVyaWZpY2F0aW9uLW1vbml0b3InLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGFjdGlvbjogJ2ludmFsaWQtYWN0aW9uJyB9KSxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvcikudG9CZSgnSW52YWxpZCBhY3Rpb24gc3BlY2lmaWVkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhdXRoZW50aWNhdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmVxdWlyZUF1dGgubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3QvYXBpL2FkbWluL2VtYWlsLXZlcmlmaWNhdGlvbi1tb25pdG9yJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhY3Rpb246ICdmb3JjZS1jbGVhbnVwJyB9KSxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDUwMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvcikudG9CZSgnRmFpbGVkIHRvIHBlcmZvcm0gYWRtaW4gYWN0aW9uJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjbGVhbnVwIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGVhbnVwU2VydmljZS5mb3JjZUNsZWFudXAubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdDbGVhbnVwIGZhaWxlZCcpKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdC9hcGkvYWRtaW4vZW1haWwtdmVyaWZpY2F0aW9uLW1vbml0b3InLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGFjdGlvbjogJ2ZvcmNlLWNsZWFudXAnIH0pLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIFxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yKS50b0JlKCdGYWlsZWQgdG8gcGVyZm9ybSBhZG1pbiBhY3Rpb24nKTtcbiAgICAgIGV4cGVjdChkYXRhLmRldGFpbHMpLnRvQmUoJ0NsZWFudXAgZmFpbGVkJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwibW9ja1JlcXVpcmVBdXRoIiwicmVxdWlyZUF1dGgiLCJtb2NrQ2xlYW51cFNlcnZpY2UiLCJlbWFpbFZlcmlmaWNhdGlvbkNsZWFudXBTZXJ2aWNlIiwibW9ja0VtYWlsU2VydmljZU1vbml0b3IiLCJlbWFpbFNlcnZpY2VNb25pdG9yIiwiZGVzY3JpYmUiLCJtb2NrVXNlciIsImlkIiwiZW1haWwiLCJuYW1lIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInVzZXIiLCJnZXRTeXN0ZW1TdGF0dXMiLCJ2ZXJpZmljYXRpb25Db2RlcyIsInRvdGFsQWN0aXZlIiwiZXhwaXJlZENvdW50IiwiaGlnaEF0dGVtcHRDb3VudCIsInJhdGVMaW1pdHMiLCJ2ZXJpZmljYXRpb25BdHRlbXB0cyIsInJlc2VuZFJlcXVlc3RzIiwiZW1haWxWZXJpZmljYXRpb25BY3Rpdml0eSIsInJlc2VuZENvb2xkb3ducyIsInNlY3VyaXR5RXZlbnRzIiwiZW1haWxTZXJ2aWNlIiwiaGVhbHRoIiwicXVvdGFVc2FnZSIsInN1Y2Nlc3NSYXRlIiwidG90YWxTZW50IiwidG90YWxGYWlsZWQiLCJhdmVyYWdlUmVzcG9uc2VUaW1lIiwiaXNzdWVzIiwicmVjb21tZW5kYXRpb25zIiwiY2xlYW51cCIsImxhc3RDbGVhbnVwIiwiRGF0ZSIsIm5vdyIsImlzUnVubmluZyIsIm5leHRDbGVhbnVwRHVlIiwiZ2V0U3RhdHMiLCJtb2NrUmV0dXJuVmFsdWUiLCJxdW90YVVzZWQiLCJxdW90YUxpbWl0IiwiZXJyb3JzQnlUeXBlIiwiQVBJX0VSUk9SIiwiTkVUV09SS19FUlJPUiIsImxhc3RSZXNldFRpbWUiLCJnZXRIZWFsdGhTdGF0dXMiLCJzdGF0dXMiLCJnZXRSZWNlbnRFdmVudHMiLCJ0eXBlIiwidGltZXN0YW1wIiwicmVzcG9uc2VUaW1lIiwiZXJyb3IiLCJtZXNzYWdlIiwiY29kZSIsImdldEVycm9yU3VtbWFyeSIsInRvdGFsRXJyb3JzIiwicmVjZW50RXJyb3JzIiwiY3JpdGljYWxFcnJvcnMiLCJpc1F1b3RhTmVhckxpbWl0IiwiZ2V0Q2xlYW51cFN0YXRzIiwicmVjZW50U3RhdHMiLCJleHBpcmVkQ29kZXMiLCJyYXRlTGltaXREYXRhIiwidG90YWxFeHBpcmVkQ29kZXMiLCJ0b3RhbFJhdGVMaW1pdERhdGEiLCJpdCIsInJlcXVlc3QiLCJOZXh0UmVxdWVzdCIsInJlc3BvbnNlIiwiR0VUIiwiZXhwZWN0IiwidG9CZSIsImRhdGEiLCJqc29uIiwidG9NYXRjaE9iamVjdCIsImFueSIsIk51bWJlciIsInN5c3RlbVN0YXR1cyIsIm9iamVjdENvbnRhaW5pbmciLCJPYmplY3QiLCJzdGF0cyIsInJlY2VudEV2ZW50cyIsIkFycmF5IiwiZXJyb3JTdW1tYXJ5IiwicXVvdGFXYXJuaW5nIiwiQm9vbGVhbiIsInF1b3RhQ3JpdGljYWwiLCJhbGVydHMiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsImNyaXRpY2FsQWxlcnRzIiwiZmlsdGVyIiwiYWxlcnQiLCJsZXZlbCIsInF1b3RhQWxlcnQiLCJmaW5kIiwiaW5jbHVkZXMiLCJ0b0JlRGVmaW5lZCIsInN1Y2Nlc3NSYXRlQWxlcnQiLCJzZWN1cml0eUFsZXJ0IiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsImRldGFpbHMiLCJjbGVhbnVwUmVzdWx0IiwiZm9yY2VDbGVhbnVwIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhY3Rpb24iLCJoZWFkZXJzIiwiUE9TVCIsInRvRXF1YWwiLCJzdWNjZXNzIiwicmVzdWx0IiwiZm9yY2VSZXNldCIsImVycm9yRGV0YWlscyJdLCJtYXBwaW5ncyI6IkFBQUE7O0NBRUM7QUFRRCxvQkFBb0I7QUFDcEJBLEtBQUtDLElBQUksQ0FBQztBQUNW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