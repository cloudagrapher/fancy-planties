{
  "enabled": true,
  "name": "Test Coverage Generator",
  "description": "Monitors source file changes to identify new or modified functions, checks test coverage, generates missing test cases, runs tests, and updates coverage reports",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "src/**/*.ts",
      "src/**/*.tsx",
      "src/**/*.js",
      "src/**/*.jsx"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "A source file has been modified. Please:\n\n1. Analyze the changed file to identify new or modified functions and methods\n2. Check if corresponding tests exist in the appropriate test directory (__tests__ folders or .test/.spec files)\n3. Evaluate current test coverage for the modified code\n4. If coverage is missing or insufficient:\n   - Generate comprehensive test cases for new/modified functions\n   - Include unit tests, integration tests, and edge cases as appropriate\n   - Follow the existing test patterns and use the test utilities in src/test-utils/\n5. Run the test suite to verify all tests pass\n6. Update coverage reports and highlight any coverage gaps\n7. Provide a summary of:\n   - What was tested\n   - Coverage percentage changes\n   - Any remaining coverage gaps\n   - Recommendations for additional testing\n\nFocus on maintaining high code quality and comprehensive test coverage across the codebase."
  }
}