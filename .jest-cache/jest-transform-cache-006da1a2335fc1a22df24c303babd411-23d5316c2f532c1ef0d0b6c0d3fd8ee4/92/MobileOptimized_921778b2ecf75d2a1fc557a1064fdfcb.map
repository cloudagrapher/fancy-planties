{"version":3,"names":["cov_ez7idgm0w","actualCoverage","s","default","f","MobileOptimized","useMobileOptimization","withMobileOptimization","children","enableTouchFeedback","b","ensureTouchTargets","className","touchActiveClass","hapticFeedback","containerRef","_react","useRef","useEffect","_responsivelayout","initializeMobileOptimizations","document","getElementById","styleElement","createElement","id","textContent","_mobiletouch","TOUCH_STYLES","head","appendChild","container","current","cleanupFunctions","isTouchDevice","interactiveElements","querySelectorAll","forEach","element","htmlElement","addTouchStyles","ensureTouchTargetSize","cleanup","addTouchFeedback","activeClass","push","resizeCleanup","addResizeHandler","_jsxruntime","jsx","ref","style","touchAction","userSelect","isMobile","WebkitUserSelect","WebkitTouchCallout","WebkitTapHighlightColor","Component","options","MobileOptimizedComponent","props"],"sources":["/Users/stefanbekker/projects/fancy-planties/src/components/shared/MobileOptimized.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, ReactNode } from 'react';\nimport { \n  addTouchFeedback, \n  addTouchStyles, \n  ensureTouchTargetSize,\n  isTouchDevice,\n  TOUCH_STYLES \n} from '@/lib/utils/mobile-touch';\nimport { \n  initializeMobileOptimizations,\n  isMobile,\n  addResizeHandler \n} from '@/lib/utils/responsive-layout';\n\ninterface MobileOptimizedProps {\n  children: ReactNode;\n  enableTouchFeedback?: boolean;\n  ensureTouchTargets?: boolean;\n  className?: string;\n  touchActiveClass?: string;\n  hapticFeedback?: boolean;\n}\n\nexport default function MobileOptimized({\n  children,\n  enableTouchFeedback = true,\n  ensureTouchTargets = true,\n  className = '',\n  touchActiveClass = 'touch-active',\n  hapticFeedback = true,\n}: MobileOptimizedProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    // Initialize mobile optimizations once\n    initializeMobileOptimizations();\n\n    // Add touch styles to document head if not already present\n    if (!document.getElementById('mobile-touch-styles')) {\n      const styleElement = document.createElement('style');\n      styleElement.id = 'mobile-touch-styles';\n      styleElement.textContent = TOUCH_STYLES;\n      document.head.appendChild(styleElement);\n    }\n  }, []);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    const cleanupFunctions: (() => void)[] = [];\n\n    // Only apply mobile optimizations on touch devices\n    if (isTouchDevice()) {\n      // Find all interactive elements\n      const interactiveElements = container.querySelectorAll(\n        'button, [role=\"button\"], a, input, textarea, select, [tabindex]:not([tabindex=\"-1\"])'\n      );\n\n      interactiveElements.forEach((element) => {\n        const htmlElement = element as HTMLElement;\n\n        // Add touch styles\n        addTouchStyles(htmlElement);\n\n        // Ensure minimum touch target size\n        if (ensureTouchTargets) {\n          ensureTouchTargetSize(htmlElement);\n        }\n\n        // Add touch feedback\n        if (enableTouchFeedback) {\n          const cleanup = addTouchFeedback(htmlElement, {\n            activeClass: touchActiveClass,\n            hapticFeedback,\n          });\n          cleanupFunctions.push(cleanup);\n        }\n      });\n    }\n\n    // Handle resize events\n    const resizeCleanup = addResizeHandler(() => {\n      // Re-optimize on resize (orientation change, etc.)\n      if (ensureTouchTargets && isTouchDevice()) {\n        const interactiveElements = container.querySelectorAll(\n          'button, [role=\"button\"], a, input, textarea, select, [tabindex]:not([tabindex=\"-1\"])'\n        );\n        \n        interactiveElements.forEach((element) => {\n          ensureTouchTargetSize(element as HTMLElement);\n        });\n      }\n    });\n\n    cleanupFunctions.push(resizeCleanup);\n\n    // Cleanup function\n    return () => {\n      cleanupFunctions.forEach(cleanup => cleanup());\n    };\n  }, [enableTouchFeedback, ensureTouchTargets, touchActiveClass, hapticFeedback]);\n\n  return (\n    <div \n      ref={containerRef}\n      className={`mobile-optimized ${className}`}\n      style={{\n        // Ensure proper touch behavior\n        touchAction: 'manipulation',\n        // Prevent text selection on mobile\n        userSelect: isMobile() ? 'none' : 'auto',\n        WebkitUserSelect: isMobile() ? 'none' : 'auto',\n        // Prevent callout on touch and hold\n        WebkitTouchCallout: 'none',\n        // Prevent tap highlight\n        WebkitTapHighlightColor: 'transparent',\n      }}\n    >\n      {children}\n    </div>\n  );\n}\n\n/**\n * Hook for mobile-specific behavior\n */\nexport function useMobileOptimization() {\n  useEffect(() => {\n    initializeMobileOptimizations();\n  }, []);\n\n  return {\n    isMobile: isMobile(),\n    isTouchDevice: isTouchDevice(),\n  };\n}\n\n/**\n * Higher-order component for mobile optimization\n */\nexport function withMobileOptimization<P extends object>(\n  Component: React.ComponentType<P>,\n  options: Omit<MobileOptimizedProps, 'children'> = {}\n) {\n  return function MobileOptimizedComponent(props: P) {\n    return (\n      <MobileOptimized {...options}>\n        <Component {...props} />\n      </MobileOptimized>\n    );\n  };\n}"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}