f78d389959aa9becdf756cfc7a914363
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get GET () {
        return GET;
    },
    get POST () {
        return POST;
    }
});
const _server = require("next/server");
const _zod = require("zod");
const _plantinstances = require("../../../lib/db/queries/plant-instances");
const _plantschemas = require("../../../lib/validation/plant-schemas");
const _server1 = require("../../../lib/auth/server");
async function GET(request) {
    try {
        const authResult = await (0, _server1.validateVerifiedRequest)();
        if (!authResult.user) {
            return _server.NextResponse.json({
                success: false,
                error: authResult.error
            }, {
                status: authResult.error === 'Email verification required' ? 403 : 401
            });
        }
        const { user } = authResult;
        const { searchParams } = new URL(request.url);
        // Parse filter parameters
        const filterParams = {
            userId: user.id,
            location: searchParams.get('location') || undefined,
            plantId: searchParams.get('plantId') ? parseInt(searchParams.get('plantId'), 10) : undefined,
            isActive: searchParams.get('isActive') ? searchParams.get('isActive') === 'true' : undefined,
            overdueOnly: searchParams.get('overdueOnly') === 'true',
            dueSoonDays: searchParams.get('dueSoonDays') ? parseInt(searchParams.get('dueSoonDays'), 10) : undefined,
            createdAfter: searchParams.get('createdAfter') ? new Date(searchParams.get('createdAfter')) : undefined,
            createdBefore: searchParams.get('createdBefore') ? new Date(searchParams.get('createdBefore')) : undefined,
            lastFertilizedAfter: searchParams.get('lastFertilizedAfter') ? new Date(searchParams.get('lastFertilizedAfter')) : undefined,
            lastFertilizedBefore: searchParams.get('lastFertilizedBefore') ? new Date(searchParams.get('lastFertilizedBefore')) : undefined,
            limit: searchParams.get('limit') ? parseInt(searchParams.get('limit'), 10) : 20,
            offset: searchParams.get('offset') ? parseInt(searchParams.get('offset'), 10) : 0
        };
        // Validate filter parameters
        const validatedFilters = _plantschemas.plantInstanceFilterSchema.parse(filterParams);
        // Get plant instances with filters
        const result = await _plantinstances.PlantInstanceQueries.getWithFilters(validatedFilters);
        return _server.NextResponse.json(result);
    } catch (error) {
        console.error('Failed to get plant instances:', error);
        return _server.NextResponse.json({
            success: false,
            error: 'Internal server error'
        }, {
            status: 500
        });
    }
}
async function POST(request) {
    try {
        const authResult = await (0, _server1.validateVerifiedRequest)();
        if (!authResult.user) {
            return _server.NextResponse.json({
                success: false,
                error: authResult.error
            }, {
                status: authResult.error === 'Email verification required' ? 403 : 401
            });
        }
        const { user } = authResult;
        // Check if request is FormData or JSON
        const contentType = request.headers.get('content-type');
        let body;
        if (contentType?.includes('multipart/form-data')) {
            // Handle FormData (for file uploads)
            const formData = await request.formData();
            body = {};
            // Helper function to convert file to base64
            const fileToBase64 = async (file)=>{
                const bytes = await file.arrayBuffer();
                const buffer = Buffer.from(bytes);
                const base64 = buffer.toString('base64');
                return `data:${file.type};base64,${base64}`;
            };
            const imageFiles = [];
            const existingImages = [];
            // Extract form fields
            for (const [key, value] of formData.entries()){
                if (key.startsWith('imageFiles[')) {
                    // Handle new image files
                    if (value instanceof File) {
                        imageFiles.push(value);
                    }
                } else if (key.startsWith('existingImages[')) {
                    // Handle existing images
                    existingImages.push(value);
                } else {
                    // Convert form values to appropriate types
                    if (key === 'plantId') {
                        body[key] = parseInt(value, 10);
                    } else if (key === 'isActive') {
                        body[key] = value === 'true';
                    } else {
                        body[key] = value;
                    }
                }
            }
            // Convert new image files to base64
            const newImageBase64s = await Promise.all(imageFiles.map((file)=>fileToBase64(file)));
            // Combine existing images with new images
            body.images = [
                ...existingImages,
                ...newImageBase64s
            ];
        } else {
            // Handle JSON
            try {
                body = await request.json();
                if (!body || Object.keys(body).length === 0) {
                    return _server.NextResponse.json({
                        success: false,
                        error: 'Request body is required'
                    }, {
                        status: 400
                    });
                }
            } catch (jsonError) {
                return _server.NextResponse.json({
                    success: false,
                    error: 'Invalid JSON in request body'
                }, {
                    status: 400
                });
            }
        }
        // Add user ID to the request body and convert date strings to Date objects
        const instanceData = {
            ...body,
            userId: user.id,
            // Convert date strings to Date objects if they exist and are not empty
            lastFertilized: body.lastFertilized && body.lastFertilized !== '' ? new Date(body.lastFertilized) : null,
            lastRepot: body.lastRepot && body.lastRepot !== '' ? new Date(body.lastRepot) : null
        };
        // Validate the plant instance data
        let validatedData;
        try {
            validatedData = _plantschemas.createPlantInstanceSchema.parse(instanceData);
        } catch (validationError) {
            if (validationError instanceof _zod.z.ZodError) {
                return _server.NextResponse.json({
                    success: false,
                    error: 'Validation failed',
                    details: validationError.issues
                }, {
                    status: 400
                });
            }
            return _server.NextResponse.json({
                success: false,
                error: 'Validation failed',
                details: validationError instanceof Error ? validationError.message : 'Invalid data'
            }, {
                status: 400
            });
        }
        // Calculate initial fertilizer due date if schedule is provided
        if (validatedData.fertilizerSchedule && !validatedData.fertilizerDue) {
            const now = new Date();
            const scheduleMatch = validatedData.fertilizerSchedule.match(/(\d+)\s*(day|week|month)s?/i);
            if (scheduleMatch) {
                const [, amount, unit] = scheduleMatch;
                const dueDate = new Date(now);
                switch(unit.toLowerCase()){
                    case 'day':
                        dueDate.setDate(dueDate.getDate() + parseInt(amount, 10));
                        break;
                    case 'week':
                        dueDate.setDate(dueDate.getDate() + parseInt(amount, 10) * 7);
                        break;
                    case 'month':
                        dueDate.setMonth(dueDate.getMonth() + parseInt(amount, 10));
                        break;
                }
                validatedData.fertilizerDue = dueDate;
            }
        }
        // Create the plant instance
        const plantInstance = await _plantinstances.PlantInstanceQueries.create(validatedData);
        // Get the enhanced plant instance with plant data
        const enhancedInstance = await _plantinstances.PlantInstanceQueries.getEnhancedById(plantInstance.id);
        return _server.NextResponse.json({
            success: true,
            data: enhancedInstance
        }, {
            status: 201
        });
    } catch (error) {
        console.error('Failed to create plant instance:', error);
        if (error instanceof Error && error.message.includes('validation')) {
            return _server.NextResponse.json({
                success: false,
                error: 'Invalid plant instance data',
                details: error.message
            }, {
                status: 400
            });
        }
        return _server.NextResponse.json({
            success: false,
            error: 'Failed to create plant instance'
        }, {
            status: 500
        });
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdGVmYW5iZWtrZXIvcHJvamVjdHMvZmFuY3ktcGxhbnRpZXMvc3JjL2FwcC9hcGkvcGxhbnQtaW5zdGFuY2VzL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IFBsYW50SW5zdGFuY2VRdWVyaWVzIH0gZnJvbSAnQC9saWIvZGIvcXVlcmllcy9wbGFudC1pbnN0YW5jZXMnO1xuaW1wb3J0IHsgY3JlYXRlUGxhbnRJbnN0YW5jZVNjaGVtYSwgcGxhbnRJbnN0YW5jZUZpbHRlclNjaGVtYSB9IGZyb20gJ0AvbGliL3ZhbGlkYXRpb24vcGxhbnQtc2NoZW1hcyc7XG5pbXBvcnQgeyB2YWxpZGF0ZVZlcmlmaWVkUmVxdWVzdCB9IGZyb20gJ0AvbGliL2F1dGgvc2VydmVyJztcblxuLy8gR0VUIC9hcGkvcGxhbnQtaW5zdGFuY2VzIC0gR2V0IHBsYW50IGluc3RhbmNlcyB3aXRoIG9wdGlvbmFsIGZpbHRlcmluZ1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGF1dGhSZXN1bHQgPSBhd2FpdCB2YWxpZGF0ZVZlcmlmaWVkUmVxdWVzdCgpO1xuICAgIGlmICghYXV0aFJlc3VsdC51c2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBhdXRoUmVzdWx0LmVycm9yIFxuICAgICAgfSwgeyBzdGF0dXM6IGF1dGhSZXN1bHQuZXJyb3IgPT09ICdFbWFpbCB2ZXJpZmljYXRpb24gcmVxdWlyZWQnID8gNDAzIDogNDAxIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB7IHVzZXIgfSA9IGF1dGhSZXN1bHQ7XG5cbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgXG4gICAgLy8gUGFyc2UgZmlsdGVyIHBhcmFtZXRlcnNcbiAgICBjb25zdCBmaWx0ZXJQYXJhbXMgPSB7XG4gICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICBsb2NhdGlvbjogc2VhcmNoUGFyYW1zLmdldCgnbG9jYXRpb24nKSB8fCB1bmRlZmluZWQsXG4gICAgICBwbGFudElkOiBzZWFyY2hQYXJhbXMuZ2V0KCdwbGFudElkJykgPyBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KCdwbGFudElkJykhLCAxMCkgOiB1bmRlZmluZWQsXG4gICAgICBpc0FjdGl2ZTogc2VhcmNoUGFyYW1zLmdldCgnaXNBY3RpdmUnKSA/IHNlYXJjaFBhcmFtcy5nZXQoJ2lzQWN0aXZlJykgPT09ICd0cnVlJyA6IHVuZGVmaW5lZCxcbiAgICAgIG92ZXJkdWVPbmx5OiBzZWFyY2hQYXJhbXMuZ2V0KCdvdmVyZHVlT25seScpID09PSAndHJ1ZScsXG4gICAgICBkdWVTb29uRGF5czogc2VhcmNoUGFyYW1zLmdldCgnZHVlU29vbkRheXMnKSA/IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ2R1ZVNvb25EYXlzJykhLCAxMCkgOiB1bmRlZmluZWQsXG4gICAgICBjcmVhdGVkQWZ0ZXI6IHNlYXJjaFBhcmFtcy5nZXQoJ2NyZWF0ZWRBZnRlcicpID8gbmV3IERhdGUoc2VhcmNoUGFyYW1zLmdldCgnY3JlYXRlZEFmdGVyJykhKSA6IHVuZGVmaW5lZCxcbiAgICAgIGNyZWF0ZWRCZWZvcmU6IHNlYXJjaFBhcmFtcy5nZXQoJ2NyZWF0ZWRCZWZvcmUnKSA/IG5ldyBEYXRlKHNlYXJjaFBhcmFtcy5nZXQoJ2NyZWF0ZWRCZWZvcmUnKSEpIDogdW5kZWZpbmVkLFxuICAgICAgbGFzdEZlcnRpbGl6ZWRBZnRlcjogc2VhcmNoUGFyYW1zLmdldCgnbGFzdEZlcnRpbGl6ZWRBZnRlcicpID8gbmV3IERhdGUoc2VhcmNoUGFyYW1zLmdldCgnbGFzdEZlcnRpbGl6ZWRBZnRlcicpISkgOiB1bmRlZmluZWQsXG4gICAgICBsYXN0RmVydGlsaXplZEJlZm9yZTogc2VhcmNoUGFyYW1zLmdldCgnbGFzdEZlcnRpbGl6ZWRCZWZvcmUnKSA/IG5ldyBEYXRlKHNlYXJjaFBhcmFtcy5nZXQoJ2xhc3RGZXJ0aWxpemVkQmVmb3JlJykhKSA6IHVuZGVmaW5lZCxcbiAgICAgIGxpbWl0OiBzZWFyY2hQYXJhbXMuZ2V0KCdsaW1pdCcpID8gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnbGltaXQnKSEsIDEwKSA6IDIwLFxuICAgICAgb2Zmc2V0OiBzZWFyY2hQYXJhbXMuZ2V0KCdvZmZzZXQnKSA/IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ29mZnNldCcpISwgMTApIDogMCxcbiAgICB9O1xuXG4gICAgLy8gVmFsaWRhdGUgZmlsdGVyIHBhcmFtZXRlcnNcbiAgICBjb25zdCB2YWxpZGF0ZWRGaWx0ZXJzID0gcGxhbnRJbnN0YW5jZUZpbHRlclNjaGVtYS5wYXJzZShmaWx0ZXJQYXJhbXMpO1xuICAgIFxuICAgIC8vIEdldCBwbGFudCBpbnN0YW5jZXMgd2l0aCBmaWx0ZXJzXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUGxhbnRJbnN0YW5jZVF1ZXJpZXMuZ2V0V2l0aEZpbHRlcnModmFsaWRhdGVkRmlsdGVycyk7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3VsdCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBwbGFudCBpbnN0YW5jZXM6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4vLyBQT1NUIC9hcGkvcGxhbnQtaW5zdGFuY2VzIC0gQ3JlYXRlIGEgbmV3IHBsYW50IGluc3RhbmNlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGF1dGhSZXN1bHQgPSBhd2FpdCB2YWxpZGF0ZVZlcmlmaWVkUmVxdWVzdCgpO1xuICAgIGlmICghYXV0aFJlc3VsdC51c2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBhdXRoUmVzdWx0LmVycm9yIFxuICAgICAgfSwgeyBzdGF0dXM6IGF1dGhSZXN1bHQuZXJyb3IgPT09ICdFbWFpbCB2ZXJpZmljYXRpb24gcmVxdWlyZWQnID8gNDAzIDogNDAxIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB7IHVzZXIgfSA9IGF1dGhSZXN1bHQ7XG5cbiAgICAvLyBDaGVjayBpZiByZXF1ZXN0IGlzIEZvcm1EYXRhIG9yIEpTT05cbiAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICAgIGxldCBib2R5OiBhbnk7XG4gICAgXG4gICAgaWYgKGNvbnRlbnRUeXBlPy5pbmNsdWRlcygnbXVsdGlwYXJ0L2Zvcm0tZGF0YScpKSB7XG4gICAgICAvLyBIYW5kbGUgRm9ybURhdGEgKGZvciBmaWxlIHVwbG9hZHMpXG4gICAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcXVlc3QuZm9ybURhdGEoKTtcbiAgICAgIGJvZHkgPSB7fTtcbiAgICAgIFxuICAgICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgZmlsZSB0byBiYXNlNjRcbiAgICAgIGNvbnN0IGZpbGVUb0Jhc2U2NCA9IGFzeW5jIChmaWxlOiBGaWxlKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgICAgICAgY29uc3QgYnl0ZXMgPSBhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCk7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJ5dGVzKTtcbiAgICAgICAgY29uc3QgYmFzZTY0ID0gYnVmZmVyLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICAgICAgcmV0dXJuIGBkYXRhOiR7ZmlsZS50eXBlfTtiYXNlNjQsJHtiYXNlNjR9YDtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGltYWdlRmlsZXM6IEZpbGVbXSA9IFtdO1xuICAgICAgY29uc3QgZXhpc3RpbmdJbWFnZXM6IHN0cmluZ1tdID0gW107XG4gICAgICBcbiAgICAgIC8vIEV4dHJhY3QgZm9ybSBmaWVsZHNcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGZvcm1EYXRhLmVudHJpZXMoKSkge1xuICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ2ltYWdlRmlsZXNbJykpIHtcbiAgICAgICAgICAvLyBIYW5kbGUgbmV3IGltYWdlIGZpbGVzXG4gICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRmlsZSkge1xuICAgICAgICAgICAgaW1hZ2VGaWxlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5LnN0YXJ0c1dpdGgoJ2V4aXN0aW5nSW1hZ2VzWycpKSB7XG4gICAgICAgICAgLy8gSGFuZGxlIGV4aXN0aW5nIGltYWdlc1xuICAgICAgICAgIGV4aXN0aW5nSW1hZ2VzLnB1c2godmFsdWUgYXMgc3RyaW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDb252ZXJ0IGZvcm0gdmFsdWVzIHRvIGFwcHJvcHJpYXRlIHR5cGVzXG4gICAgICAgICAgaWYgKGtleSA9PT0gJ3BsYW50SWQnKSB7XG4gICAgICAgICAgICBib2R5W2tleV0gPSBwYXJzZUludCh2YWx1ZSBhcyBzdHJpbmcsIDEwKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2lzQWN0aXZlJykge1xuICAgICAgICAgICAgYm9keVtrZXldID0gdmFsdWUgPT09ICd0cnVlJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYm9keVtrZXldID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENvbnZlcnQgbmV3IGltYWdlIGZpbGVzIHRvIGJhc2U2NFxuICAgICAgY29uc3QgbmV3SW1hZ2VCYXNlNjRzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIGltYWdlRmlsZXMubWFwKGZpbGUgPT4gZmlsZVRvQmFzZTY0KGZpbGUpKVxuICAgICAgKTtcblxuICAgICAgLy8gQ29tYmluZSBleGlzdGluZyBpbWFnZXMgd2l0aCBuZXcgaW1hZ2VzXG4gICAgICBib2R5LmltYWdlcyA9IFsuLi5leGlzdGluZ0ltYWdlcywgLi4ubmV3SW1hZ2VCYXNlNjRzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSGFuZGxlIEpTT05cbiAgICAgIHRyeSB7XG4gICAgICAgIGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICAgICAgaWYgKCFib2R5IHx8IE9iamVjdC5rZXlzKGJvZHkpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICBlcnJvcjogJ1JlcXVlc3QgYm9keSBpcyByZXF1aXJlZCcgXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoanNvbkVycm9yKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IFxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgSlNPTiBpbiByZXF1ZXN0IGJvZHknIFxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZCB1c2VyIElEIHRvIHRoZSByZXF1ZXN0IGJvZHkgYW5kIGNvbnZlcnQgZGF0ZSBzdHJpbmdzIHRvIERhdGUgb2JqZWN0c1xuICAgIGNvbnN0IGluc3RhbmNlRGF0YSA9IHtcbiAgICAgIC4uLmJvZHksXG4gICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAvLyBDb252ZXJ0IGRhdGUgc3RyaW5ncyB0byBEYXRlIG9iamVjdHMgaWYgdGhleSBleGlzdCBhbmQgYXJlIG5vdCBlbXB0eVxuICAgICAgbGFzdEZlcnRpbGl6ZWQ6IGJvZHkubGFzdEZlcnRpbGl6ZWQgJiYgYm9keS5sYXN0RmVydGlsaXplZCAhPT0gJycgPyBuZXcgRGF0ZShib2R5Lmxhc3RGZXJ0aWxpemVkKSA6IG51bGwsXG4gICAgICBsYXN0UmVwb3Q6IGJvZHkubGFzdFJlcG90ICYmIGJvZHkubGFzdFJlcG90ICE9PSAnJyA/IG5ldyBEYXRlKGJvZHkubGFzdFJlcG90KSA6IG51bGwsXG4gICAgfTtcblxuICAgIC8vIFZhbGlkYXRlIHRoZSBwbGFudCBpbnN0YW5jZSBkYXRhXG4gICAgbGV0IHZhbGlkYXRlZERhdGE7XG4gICAgdHJ5IHtcbiAgICAgIHZhbGlkYXRlZERhdGEgPSBjcmVhdGVQbGFudEluc3RhbmNlU2NoZW1hLnBhcnNlKGluc3RhbmNlRGF0YSk7XG4gICAgfSBjYXRjaCAodmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICBpZiAodmFsaWRhdGlvbkVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uRXJyb3IuaXNzdWVzXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHZhbGlkYXRpb25FcnJvci5tZXNzYWdlIDogJ0ludmFsaWQgZGF0YSdcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgaW5pdGlhbCBmZXJ0aWxpemVyIGR1ZSBkYXRlIGlmIHNjaGVkdWxlIGlzIHByb3ZpZGVkXG4gICAgaWYgKHZhbGlkYXRlZERhdGEuZmVydGlsaXplclNjaGVkdWxlICYmICF2YWxpZGF0ZWREYXRhLmZlcnRpbGl6ZXJEdWUpIHtcbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICBjb25zdCBzY2hlZHVsZU1hdGNoID0gdmFsaWRhdGVkRGF0YS5mZXJ0aWxpemVyU2NoZWR1bGUubWF0Y2goLyhcXGQrKVxccyooZGF5fHdlZWt8bW9udGgpcz8vaSk7XG4gICAgICBcbiAgICAgIGlmIChzY2hlZHVsZU1hdGNoKSB7XG4gICAgICAgIGNvbnN0IFssIGFtb3VudCwgdW5pdF0gPSBzY2hlZHVsZU1hdGNoO1xuICAgICAgICBjb25zdCBkdWVEYXRlID0gbmV3IERhdGUobm93KTtcbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCAodW5pdC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgY2FzZSAnZGF5JzpcbiAgICAgICAgICAgIGR1ZURhdGUuc2V0RGF0ZShkdWVEYXRlLmdldERhdGUoKSArIHBhcnNlSW50KGFtb3VudCwgMTApKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3dlZWsnOlxuICAgICAgICAgICAgZHVlRGF0ZS5zZXREYXRlKGR1ZURhdGUuZ2V0RGF0ZSgpICsgKHBhcnNlSW50KGFtb3VudCwgMTApICogNykpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgICAgZHVlRGF0ZS5zZXRNb250aChkdWVEYXRlLmdldE1vbnRoKCkgKyBwYXJzZUludChhbW91bnQsIDEwKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFsaWRhdGVkRGF0YS5mZXJ0aWxpemVyRHVlID0gZHVlRGF0ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgdGhlIHBsYW50IGluc3RhbmNlXG4gICAgY29uc3QgcGxhbnRJbnN0YW5jZSA9IGF3YWl0IFBsYW50SW5zdGFuY2VRdWVyaWVzLmNyZWF0ZSh2YWxpZGF0ZWREYXRhKTtcbiAgICBcbiAgICAvLyBHZXQgdGhlIGVuaGFuY2VkIHBsYW50IGluc3RhbmNlIHdpdGggcGxhbnQgZGF0YVxuICAgIGNvbnN0IGVuaGFuY2VkSW5zdGFuY2UgPSBhd2FpdCBQbGFudEluc3RhbmNlUXVlcmllcy5nZXRFbmhhbmNlZEJ5SWQocGxhbnRJbnN0YW5jZS5pZCk7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBlbmhhbmNlZEluc3RhbmNlXG4gICAgfSwgeyBzdGF0dXM6IDIwMSB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHBsYW50IGluc3RhbmNlOicsIGVycm9yKTtcbiAgICBcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCd2YWxpZGF0aW9uJykpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgcGxhbnQgaW5zdGFuY2UgZGF0YScsIFxuICAgICAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBwbGFudCBpbnN0YW5jZScgXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJHRVQiLCJQT1NUIiwicmVxdWVzdCIsImF1dGhSZXN1bHQiLCJ2YWxpZGF0ZVZlcmlmaWVkUmVxdWVzdCIsInVzZXIiLCJOZXh0UmVzcG9uc2UiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiZmlsdGVyUGFyYW1zIiwidXNlcklkIiwiaWQiLCJsb2NhdGlvbiIsImdldCIsInVuZGVmaW5lZCIsInBsYW50SWQiLCJwYXJzZUludCIsImlzQWN0aXZlIiwib3ZlcmR1ZU9ubHkiLCJkdWVTb29uRGF5cyIsImNyZWF0ZWRBZnRlciIsIkRhdGUiLCJjcmVhdGVkQmVmb3JlIiwibGFzdEZlcnRpbGl6ZWRBZnRlciIsImxhc3RGZXJ0aWxpemVkQmVmb3JlIiwibGltaXQiLCJvZmZzZXQiLCJ2YWxpZGF0ZWRGaWx0ZXJzIiwicGxhbnRJbnN0YW5jZUZpbHRlclNjaGVtYSIsInBhcnNlIiwicmVzdWx0IiwiUGxhbnRJbnN0YW5jZVF1ZXJpZXMiLCJnZXRXaXRoRmlsdGVycyIsImNvbnNvbGUiLCJjb250ZW50VHlwZSIsImhlYWRlcnMiLCJib2R5IiwiaW5jbHVkZXMiLCJmb3JtRGF0YSIsImZpbGVUb0Jhc2U2NCIsImZpbGUiLCJieXRlcyIsImFycmF5QnVmZmVyIiwiYnVmZmVyIiwiQnVmZmVyIiwiZnJvbSIsImJhc2U2NCIsInRvU3RyaW5nIiwidHlwZSIsImltYWdlRmlsZXMiLCJleGlzdGluZ0ltYWdlcyIsImtleSIsInZhbHVlIiwiZW50cmllcyIsInN0YXJ0c1dpdGgiLCJGaWxlIiwicHVzaCIsIm5ld0ltYWdlQmFzZTY0cyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJpbWFnZXMiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwianNvbkVycm9yIiwiaW5zdGFuY2VEYXRhIiwibGFzdEZlcnRpbGl6ZWQiLCJsYXN0UmVwb3QiLCJ2YWxpZGF0ZWREYXRhIiwiY3JlYXRlUGxhbnRJbnN0YW5jZVNjaGVtYSIsInZhbGlkYXRpb25FcnJvciIsInoiLCJab2RFcnJvciIsImRldGFpbHMiLCJpc3N1ZXMiLCJFcnJvciIsIm1lc3NhZ2UiLCJmZXJ0aWxpemVyU2NoZWR1bGUiLCJmZXJ0aWxpemVyRHVlIiwibm93Iiwic2NoZWR1bGVNYXRjaCIsIm1hdGNoIiwiYW1vdW50IiwidW5pdCIsImR1ZURhdGUiLCJ0b0xvd2VyQ2FzZSIsInNldERhdGUiLCJnZXREYXRlIiwic2V0TW9udGgiLCJnZXRNb250aCIsInBsYW50SW5zdGFuY2UiLCJjcmVhdGUiLCJlbmhhbmNlZEluc3RhbmNlIiwiZ2V0RW5oYW5jZWRCeUlkIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7UUFPc0JBO2VBQUFBOztRQWtEQUM7ZUFBQUE7Ozt3QkF6RG9CO3FCQUN4QjtnQ0FDbUI7OEJBQ2dDO3lCQUM3QjtBQUdqQyxlQUFlRCxJQUFJRSxPQUFvQjtJQUM1QyxJQUFJO1FBQ0YsTUFBTUMsYUFBYSxNQUFNQyxJQUFBQSxnQ0FBdUI7UUFDaEQsSUFBSSxDQUFDRCxXQUFXRSxJQUFJLEVBQUU7WUFDcEIsT0FBT0Msb0JBQVksQ0FBQ0MsSUFBSSxDQUFDO2dCQUN2QkMsU0FBUztnQkFDVEMsT0FBT04sV0FBV00sS0FBSztZ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