{"version":3,"sources":["/Users/stefanbekker/projects/fancy-planties/src/app/api/care/quick-log/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { requireAuthSession } from '@/lib/auth/server';\nimport { CareService } from '@/lib/services/care-service';\nimport { careValidation } from '@/lib/validation/care-schemas';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { user } = await requireAuthSession();\n    const body = await request.json();\n    \n    // Validate the quick care log data\n    const validation = careValidation.validateQuickCareLog({\n      ...body,\n      careDate: new Date(body.careDate || new Date()),\n    });\n    \n    if (!validation.success) {\n      console.error('Quick care validation error:', validation.error.issues);\n      return NextResponse.json(\n        { \n          error: validation.error.issues[0]?.message || 'Invalid quick care data',\n          details: validation.error.issues \n        },\n        { status: 400 }\n      );\n    }\n    \n    const result = await CareService.quickCareLog(user.id, validation.data);\n    \n    if (!result.success) {\n      return NextResponse.json(\n        { error: result.error },\n        { status: 400 }\n      );\n    }\n    \n    return NextResponse.json(result.careHistory);\n  } catch (error) {\n    console.error('Error with quick care log:', error);\n    return NextResponse.json(\n      { error: 'Failed to log quick care' },\n      { status: 500 }\n    );\n  }\n}"],"names":["POST","request","user","requireAuthSession","body","json","validation","careValidation","validateQuickCareLog","careDate","Date","success","console","error","issues","NextResponse","message","details","status","result","CareService","quickCareLog","id","data","careHistory"],"mappings":";;;;+BAKsBA;;;eAAAA;;;wBALoB;yBACP;6BACP;6BACG;AAExB,eAAeA,KAAKC,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAEC,IAAI,EAAE,GAAG,MAAMC,IAAAA,2BAAkB;QACzC,MAAMC,OAAO,MAAMH,QAAQI,IAAI;QAE/B,mCAAmC;QACnC,MAAMC,aAAaC,2BAAc,CAACC,oBAAoB,CAAC;YACrD,GAAGJ,IAAI;YACPK,UAAU,IAAIC,KAAKN,KAAKK,QAAQ,IAAI,IAAIC;QAC1C;QAEA,IAAI,CAACJ,WAAWK,OAAO,EAAE;YACvBC,QAAQC,KAAK,CAAC,gCAAgCP,WAAWO,KAAK,CAACC,MAAM;YACrE,OAAOC,oBAAY,CAACV,IAAI,CACtB;gBACEQ,OAAOP,WAAWO,KAAK,CAACC,MAAM,CAAC,EAAE,EAAEE,WAAW;gBAC9CC,SAASX,WAAWO,KAAK,CAACC,MAAM;YAClC,GACA;gBAAEI,QAAQ;YAAI;QAElB;QAEA,MAAMC,SAAS,MAAMC,wBAAW,CAACC,YAAY,CAACnB,KAAKoB,EAAE,EAAEhB,WAAWiB,IAAI;QAEtE,IAAI,CAACJ,OAAOR,OAAO,EAAE;YACnB,OAAOI,oBAAY,CAACV,IAAI,CACtB;gBAAEQ,OAAOM,OAAON,KAAK;YAAC,GACtB;gBAAEK,QAAQ;YAAI;QAElB;QAEA,OAAOH,oBAAY,CAACV,IAAI,CAACc,OAAOK,WAAW;IAC7C,EAAE,OAAOX,OAAO;QACdD,QAAQC,KAAK,CAAC,8BAA8BA;QAC5C,OAAOE,oBAAY,CAACV,IAAI,CACtB;YAAEQ,OAAO;QAA2B,GACpC;YAAEK,QAAQ;QAAI;IAElB;AACF"}