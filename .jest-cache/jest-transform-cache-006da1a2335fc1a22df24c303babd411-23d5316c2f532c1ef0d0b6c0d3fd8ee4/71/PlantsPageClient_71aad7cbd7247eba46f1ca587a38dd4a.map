{"version":3,"names":["cov_1n0pbhbv0j","actualCoverage","s","PlantsPageClient","userId","f","queryClient","_reactquery","useQueryClient","selectedPlant","setSelectedPlant","_react","useState","isDetailModalOpen","setIsDetailModalOpen","isFormModalOpen","setIsFormModalOpen","editingPlant","setEditingPlant","handlePlantSelect","plant","handlePlantEdit","handleCareAction","action","handleBulkAction","plants","handleAddPlant","handleFormSuccess","invalidateQueries","queryKey","refetchType","_jsxruntime","jsxs","className","jsx","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","_plants","PlantsGrid","onPlantSelect","onCareAction","onEdit","onBulkAction","showSearch","showFilters","showAdvancedSearch","showSearchResults","showPresets","showHistory","cardSize","b","PlantDetailModal","plantId","id","isOpen","onClose","onCareLog","careType","PlantInstanceForm","plantInstance","undefined","onSuccess"],"sources":["/Users/stefanbekker/projects/fancy-planties/src/app/dashboard/plants/PlantsPageClient.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { PlantsGrid, PlantDetailModal, PlantInstanceForm } from '@/components/plants';\nimport type { EnhancedPlantInstance } from '@/lib/types/plant-instance-types';\n\ninterface PlantsPageClientProps {\n  userId: number;\n}\n\nexport default function PlantsPageClient({ userId }: PlantsPageClientProps) {\n  const queryClient = useQueryClient();\n  const [selectedPlant, setSelectedPlant] = useState<EnhancedPlantInstance | null>(null);\n  const [isDetailModalOpen, setIsDetailModalOpen] = useState(false);\n  const [isFormModalOpen, setIsFormModalOpen] = useState(false);\n  const [editingPlant, setEditingPlant] = useState<EnhancedPlantInstance | null>(null);\n\n  // Handle plant selection (open detail modal)\n  const handlePlantSelect = (plant: EnhancedPlantInstance) => {\n    setSelectedPlant(plant);\n    setIsDetailModalOpen(true);\n  };\n\n  // Handle plant editing\n  const handlePlantEdit = (plant: EnhancedPlantInstance) => {\n    setEditingPlant(plant);\n    setIsFormModalOpen(true);\n    setIsDetailModalOpen(false);\n  };\n\n  // Handle care actions\n  const handleCareAction = (plant: EnhancedPlantInstance, action: 'fertilize' | 'repot') => {\n    // This will be handled by the quick care system\n  };\n\n  // Handle bulk actions\n  const handleBulkAction = (plants: EnhancedPlantInstance[], action: string) => {\n    // Bulk action logic will be implemented here\n  };\n\n  // Handle add new plant\n  const handleAddPlant = () => {\n    setEditingPlant(null);\n    setIsFormModalOpen(true);\n  };\n\n  // Handle form success\n  const handleFormSuccess = async () => {\n    setIsFormModalOpen(false);\n    setEditingPlant(null);\n    \n    // Force a grid refresh to ensure immediate updates\n    // Form success, forcing grid refresh\n    await queryClient.invalidateQueries({ \n      queryKey: ['plant-instances', userId],\n      refetchType: 'all'\n    });\n    \n    // Don't automatically open detail modal - let user decide\n    // This prevents the white line issue from modal conflicts\n  };\n\n  return (\n    <div className=\"page\">\n      <div className=\"container\">\n        <div className=\"page-content\">\n          {/* Main Plants Card */}\n          <div className=\"card card--dreamy\">\n            {/* Header */}\n            <div className=\"card-header\">\n              <div className=\"flex-between\">\n                <div>\n                  <h1 className=\"text-3xl font-bold text-neutral-900\">My Plants</h1>\n                  <p className=\"text-neutral-600 mt-2\">Manage your plant collection</p>\n                </div>\n\n                <button\n                  onClick={handleAddPlant}\n                  className=\"btn btn--primary\"\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                  </svg>\n                  Add Plant\n                </button>\n              </div>\n            </div>\n\n            {/* Plants Grid */}\n            <div className=\"card-body\">\n              <div className=\"card card--flat\">\n                <PlantsGrid\n                  userId={userId}\n                  onPlantSelect={handlePlantSelect}\n                  onCareAction={handleCareAction}\n                  onEdit={handlePlantEdit}\n                  onBulkAction={handleBulkAction}\n                  showSearch={true}\n                  showFilters={true}\n                  showAdvancedSearch={true}\n                  showSearchResults={true}\n                  showPresets={true}\n                  showHistory={true}\n                  cardSize=\"medium\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Plant Detail Modal */}\n      {selectedPlant && (\n        <PlantDetailModal\n          plantId={selectedPlant.id}\n          isOpen={isDetailModalOpen}\n          onClose={() => {\n            setIsDetailModalOpen(false);\n            setSelectedPlant(null);\n          }}\n          onEdit={handlePlantEdit}\n          onCareLog={(plantId, careType) => {\n            // Care logged successfully\n          }}\n        />\n      )}\n\n      {/* Plant Form Modal */}\n      <PlantInstanceForm\n        plantInstance={editingPlant || undefined}\n        isOpen={isFormModalOpen}\n        onClose={() => {\n          setIsFormModalOpen(false);\n          setEditingPlant(null);\n        }}\n        onSuccess={handleFormSuccess}\n        userId={userId}\n      />\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]}