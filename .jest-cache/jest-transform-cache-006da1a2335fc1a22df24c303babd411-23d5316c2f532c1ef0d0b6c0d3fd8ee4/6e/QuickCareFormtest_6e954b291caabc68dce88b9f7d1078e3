831db582a2c60441215b99c9469718c9
/**
 * @jest-environment jsdom
 */ "use strict";
jest.mock('@/hooks/useOffline', ()=>({
        useOffline: ()=>({
                isOnline: true,
                addPendingCareEntry: mockAddPendingCareEntry
            })
    }));
jest.mock('@/lib/utils/service-worker', ()=>({
        useServiceWorker: ()=>({
                registerBackgroundSync: mockRegisterBackgroundSync
            })
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _userevent = /*#__PURE__*/ _interop_require_default(require("@testing-library/user-event"));
const _renderhelpers = require("../../../test-utils/helpers/render-helpers.js");
const _QuickCareForm = /*#__PURE__*/ _interop_require_default(require("../../../components/care/QuickCareForm"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock the offline hook
const mockAddPendingCareEntry = jest.fn();
const mockRegisterBackgroundSync = jest.fn();
describe('QuickCareForm', ()=>{
    const defaultProps = {
        plantInstanceId: 1,
        onSuccess: jest.fn(),
        onCancel: jest.fn(),
        defaultCareType: 'fertilizer'
    };
    beforeEach(()=>{
        jest.clearAllMocks();
        // Mock successful API response by default
        (0, _renderhelpers.mockApiResponses)({
            '/api/care/log': {
                success: true,
                data: {
                    id: 1
                }
            }
        });
        // Reset offline hook to online state
        jest.mocked(require('@/hooks/useOffline').useOffline).mockReturnValue({
            isOnline: true,
            addPendingCareEntry: mockAddPendingCareEntry
        });
    });
    describe('Form Rendering', ()=>{
        it('renders all care type options', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByText('🌱')).toBeInTheDocument(); // Fertilizer
            expect(_react1.screen.getByText('💧')).toBeInTheDocument(); // Water
            expect(_react1.screen.getByText('🪴')).toBeInTheDocument(); // Repot
            expect(_react1.screen.getByText('✂️')).toBeInTheDocument(); // Prune
            expect(_react1.screen.getByText('🔍')).toBeInTheDocument(); // Inspect
            expect(_react1.screen.getByText('📝')).toBeInTheDocument(); // Other
            expect(_react1.screen.getByText('Fertilizer')).toBeInTheDocument();
            expect(_react1.screen.getByText('Water')).toBeInTheDocument();
            expect(_react1.screen.getByText('Repot')).toBeInTheDocument();
            expect(_react1.screen.getByText('Prune')).toBeInTheDocument();
            expect(_react1.screen.getByText('Inspect')).toBeInTheDocument();
            expect(_react1.screen.getByText('Other')).toBeInTheDocument();
        });
        it('renders care date field with today as default', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const dateInput = _react1.screen.getByLabelText(/care date/i);
            const today = new Date().toISOString().split('T')[0];
            expect(dateInput).toBeInTheDocument();
            expect(dateInput).toHaveValue(today);
            expect(dateInput).toHaveAttribute('max', today); // Cannot be in future
        });
        it('renders notes field', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const notesField = _react1.screen.getByLabelText(/notes/i);
            expect(notesField).toBeInTheDocument();
            expect(notesField).toHaveAttribute('placeholder', 'Any additional observations or notes...');
        });
        it('renders submit button', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByRole('button', {
                name: /log care/i
            })).toBeInTheDocument();
        });
        it('selects default care type', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps,
                defaultCareType: "water"
            }));
            const waterButton = _react1.screen.getByRole('button', {
                name: /water/i
            });
            expect(waterButton).toHaveClass('btn--primary');
        });
    });
    describe('Care Type Selection', ()=>{
        it('allows selecting different care types', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const waterButton = _react1.screen.getByRole('button', {
                name: /water/i
            });
            await user.click(waterButton);
            expect(waterButton).toHaveClass('btn--primary');
        });
        it('shows conditional fields for fertilizer type', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps,
                defaultCareType: "fertilizer"
            }));
            expect(_react1.screen.getByLabelText(/fertilizer type/i)).toBeInTheDocument();
            expect(_react1.screen.getByPlaceholderText(/liquid fertilizer, slow-release pellets/i)).toBeInTheDocument();
        });
        it('shows conditional fields for repotting', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const repotButton = _react1.screen.getByRole('button', {
                name: /repot/i
            });
            await user.click(repotButton);
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByLabelText(/pot size/i)).toBeInTheDocument();
                expect(_react1.screen.getByLabelText(/soil type/i)).toBeInTheDocument();
            });
        });
        it('hides conditional fields when switching care types', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps,
                defaultCareType: "fertilizer"
            }));
            // Initially shows fertilizer field
            expect(_react1.screen.getByLabelText(/fertilizer type/i)).toBeInTheDocument();
            // Switch to water
            const waterButton = _react1.screen.getByRole('button', {
                name: /water/i
            });
            await user.click(waterButton);
            // Fertilizer field should be hidden
            expect(_react1.screen.queryByLabelText(/fertilizer type/i)).not.toBeInTheDocument();
        });
        it('shows care type description', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps,
                defaultCareType: "fertilizer"
            }));
            const description = _react1.screen.getByText(/🌱 fertilizer:/i);
            expect(description).toBeInTheDocument();
        });
    });
    describe('Date Validation', ()=>{
        it('prevents selecting future dates', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const dateInput = _react1.screen.getByLabelText(/care date/i);
            const today = new Date().toISOString().split('T')[0];
            expect(dateInput).toHaveAttribute('max', today);
        });
        it('allows selecting past dates', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const dateInput = _react1.screen.getByLabelText(/care date/i);
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayString = yesterday.toISOString().split('T')[0];
            await user.clear(dateInput);
            await user.type(dateInput, yesterdayString);
            expect(dateInput).toHaveValue(yesterdayString);
        });
    });
    describe('Form Submission', ()=>{
        it('submits form with correct data', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            // Fill form
            await user.type(_react1.screen.getByLabelText(/notes/i), 'Plant looks healthy');
            // Submit
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/care/log', expect.objectContaining({
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: expect.stringContaining('fertilizer')
                }));
            });
            expect(defaultProps.onSuccess).toHaveBeenCalled();
        });
        it('includes conditional field data in submission', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps,
                defaultCareType: "fertilizer"
            }));
            await user.type(_react1.screen.getByLabelText(/fertilizer type/i), 'Liquid fertilizer');
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                const fetchCall = global.fetch.mock.calls[0];
                const requestBody = JSON.parse(fetchCall[1].body);
                expect(requestBody.fertilizerType).toBe('Liquid fertilizer');
            });
        });
        it('includes repot-specific data in submission', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            // Select repot care type
            await user.click(_react1.screen.getByRole('button', {
                name: /repot/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByLabelText(/pot size/i)).toBeInTheDocument();
            });
            await user.type(_react1.screen.getByLabelText(/pot size/i), '6 inch');
            await user.type(_react1.screen.getByLabelText(/soil type/i), 'Potting mix');
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                const fetchCall = global.fetch.mock.calls[0];
                const requestBody = JSON.parse(fetchCall[1].body);
                expect(requestBody.potSize).toBe('6 inch');
                expect(requestBody.soilType).toBe('Potting mix');
            });
        });
        it('resets form after successful submission', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            // Fill form
            await user.type(_react1.screen.getByLabelText(/notes/i), 'Test notes');
            // Submit
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(defaultProps.onSuccess).toHaveBeenCalled();
            });
            // Form should be reset
            expect(_react1.screen.getByLabelText(/notes/i)).toHaveValue('');
        });
        it('shows loading state during submission', async ()=>{
            const user = _userevent.default.setup();
            // Mock delayed response
            global.fetch = jest.fn(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: ()=>Promise.resolve({
                                    success: true
                                })
                        }), 100)));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const submitButton = _react1.screen.getByRole('button', {
                name: /log care/i
            });
            await user.click(submitButton);
            // Check loading state
            expect(submitButton).toBeDisabled();
            expect(_react1.screen.getByText(/logging/i)).toBeInTheDocument();
        });
    });
    describe('Offline Mode', ()=>{
        beforeEach(()=>{
            // Mock offline state
            jest.mocked(require('@/hooks/useOffline').useOffline).mockReturnValue({
                isOnline: false,
                addPendingCareEntry: mockAddPendingCareEntry
            });
        });
        it('shows offline mode indicator', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByText(/offline mode/i)).toBeInTheDocument();
            expect(_react1.screen.getByText(/care will be logged when you're back online/i)).toBeInTheDocument();
        });
        it('changes submit button text in offline mode', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByRole('button', {
                name: /queue for sync/i
            })).toBeInTheDocument();
        });
        it('queues care entry when offline', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            await user.type(_react1.screen.getByLabelText(/notes/i), 'Offline care entry');
            await user.click(_react1.screen.getByRole('button', {
                name: /queue for sync/i
            }));
            expect(mockAddPendingCareEntry).toHaveBeenCalledWith({
                plantInstanceId: 1,
                careType: 'fertilizer',
                notes: 'Offline care entry'
            });
            expect(mockRegisterBackgroundSync).toHaveBeenCalled();
            expect(defaultProps.onSuccess).toHaveBeenCalled();
        });
        it('does not make API call when offline', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            await user.click(_react1.screen.getByRole('button', {
                name: /queue for sync/i
            }));
            expect(global.fetch).not.toHaveBeenCalled();
        });
    });
    describe('Error Handling', ()=>{
        it('displays API error messages', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.mockApiError)('/api/care/log', 400, {
                error: 'Invalid care data'
            });
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText('Invalid care data')).toBeInTheDocument();
            });
            expect(defaultProps.onSuccess).not.toHaveBeenCalled();
        });
        it('handles network errors gracefully', async ()=>{
            const user = _userevent.default.setup();
            // Mock network error
            global.fetch = jest.fn(()=>Promise.reject(new Error('Network error')));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText(/failed to log care/i)).toBeInTheDocument();
            });
        });
        it('clears errors on retry', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.mockApiError)('/api/care/log', 400, {
                error: 'Invalid care data'
            });
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            // First submission with error
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText('Invalid care data')).toBeInTheDocument();
            });
            // Mock successful response for retry
            (0, _renderhelpers.mockApiResponses)({
                '/api/care/log': {
                    success: true
                }
            });
            // Retry submission
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            // Error should be cleared
            expect(_react1.screen.queryByText('Invalid care data')).not.toBeInTheDocument();
        });
    });
    describe('Plant Selection (when no plantInstanceId provided)', ()=>{
        it('shows plant selection dropdown when plantInstanceId not provided', ()=>{
            const propsWithoutPlant = {
                ...defaultProps
            };
            delete propsWithoutPlant.plantInstanceId;
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...propsWithoutPlant
            }));
            expect(_react1.screen.getByLabelText(/plant/i)).toBeInTheDocument();
            expect(_react1.screen.getByText(/select a plant/i)).toBeInTheDocument();
        });
        it('disables submit button when no plant selected', ()=>{
            const propsWithoutPlant = {
                ...defaultProps
            };
            delete propsWithoutPlant.plantInstanceId;
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...propsWithoutPlant
            }));
            const submitButton = _react1.screen.getByRole('button', {
                name: /log care/i
            });
            expect(submitButton).toBeDisabled();
        });
        it('shows implementation note for plant selection', ()=>{
            const propsWithoutPlant = {
                ...defaultProps
            };
            delete propsWithoutPlant.plantInstanceId;
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...propsWithoutPlant
            }));
            expect(_react1.screen.getByText(/plant selection will be implemented when plant instances are available/i)).toBeInTheDocument();
        });
    });
    describe('Cancel Functionality', ()=>{
        it('shows cancel button when onCancel provided', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByRole('button', {
                name: /cancel/i
            })).toBeInTheDocument();
        });
        it('calls onCancel when cancel button clicked', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            await user.click(_react1.screen.getByRole('button', {
                name: /cancel/i
            }));
            expect(defaultProps.onCancel).toHaveBeenCalled();
        });
        it('does not show cancel button when onCancel not provided', ()=>{
            const propsWithoutCancel = {
                ...defaultProps
            };
            delete propsWithoutCancel.onCancel;
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...propsWithoutCancel
            }));
            expect(_react1.screen.queryByRole('button', {
                name: /cancel/i
            })).not.toBeInTheDocument();
        });
    });
    describe('Accessibility', ()=>{
        it('has proper form structure', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByRole('form', {
                hidden: true
            })).toBeInTheDocument();
        });
        it('has proper labels for all inputs', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByLabelText(/care type/i)).toBeInTheDocument();
            expect(_react1.screen.getByLabelText(/care date/i)).toBeInTheDocument();
            expect(_react1.screen.getByLabelText(/notes/i)).toBeInTheDocument();
        });
        it('has required attribute on date field', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const dateInput = _react1.screen.getByLabelText(/care date/i);
            expect(dateInput).toHaveAttribute('required');
        });
        it('disables form elements during submission', async ()=>{
            const user = _userevent.default.setup();
            // Mock delayed response
            global.fetch = jest.fn(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: ()=>Promise.resolve({
                                    success: true
                                })
                        }), 100)));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const submitButton = _react1.screen.getByRole('button', {
                name: /log care/i
            });
            await user.click(submitButton);
            // All care type buttons should be disabled
            const careTypeButtons = _react1.screen.getAllByRole('button').filter((btn)=>btn.textContent?.includes('Fertilizer') || btn.textContent?.includes('Water') || btn.textContent?.includes('Repot'));
            careTypeButtons.forEach((button)=>{
                expect(button).toBeDisabled();
            });
            // Date input should be disabled
            expect(_react1.screen.getByLabelText(/care date/i)).toBeDisabled();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdGVmYW5iZWtrZXIvcHJvamVjdHMvZmFuY3ktcGxhbnRpZXMvc3JjL19fdGVzdHNfXy9jb21wb25lbnRzL2Zvcm1zL1F1aWNrQ2FyZUZvcm0udGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBqZXN0LWVudmlyb25tZW50IGpzZG9tXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHNjcmVlbiwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHVzZXJFdmVudCBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3VzZXItZXZlbnQnO1xuaW1wb3J0IHsgcmVuZGVyV2l0aFByb3ZpZGVycywgbW9ja0FwaVJlc3BvbnNlcywgbW9ja0FwaUVycm9yIH0gZnJvbSAnQC90ZXN0LXV0aWxzL2hlbHBlcnMvcmVuZGVyLWhlbHBlcnMnO1xuaW1wb3J0IFF1aWNrQ2FyZUZvcm0gZnJvbSAnQC9jb21wb25lbnRzL2NhcmUvUXVpY2tDYXJlRm9ybSc7XG5cbi8vIE1vY2sgdGhlIG9mZmxpbmUgaG9va1xuY29uc3QgbW9ja0FkZFBlbmRpbmdDYXJlRW50cnkgPSBqZXN0LmZuKCk7XG5jb25zdCBtb2NrUmVnaXN0ZXJCYWNrZ3JvdW5kU3luYyA9IGplc3QuZm4oKTtcblxuamVzdC5tb2NrKCdAL2hvb2tzL3VzZU9mZmxpbmUnLCAoKSA9PiAoe1xuICB1c2VPZmZsaW5lOiAoKSA9PiAoe1xuICAgIGlzT25saW5lOiB0cnVlLFxuICAgIGFkZFBlbmRpbmdDYXJlRW50cnk6IG1vY2tBZGRQZW5kaW5nQ2FyZUVudHJ5LFxuICB9KSxcbn0pKTtcblxuamVzdC5tb2NrKCdAL2xpYi91dGlscy9zZXJ2aWNlLXdvcmtlcicsICgpID0+ICh7XG4gIHVzZVNlcnZpY2VXb3JrZXI6ICgpID0+ICh7XG4gICAgcmVnaXN0ZXJCYWNrZ3JvdW5kU3luYzogbW9ja1JlZ2lzdGVyQmFja2dyb3VuZFN5bmMsXG4gIH0pLFxufSkpO1xuXG5kZXNjcmliZSgnUXVpY2tDYXJlRm9ybScsICgpID0+IHtcbiAgY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICAgIHBsYW50SW5zdGFuY2VJZDogMSxcbiAgICBvblN1Y2Nlc3M6IGplc3QuZm4oKSxcbiAgICBvbkNhbmNlbDogamVzdC5mbigpLFxuICAgIGRlZmF1bHRDYXJlVHlwZTogJ2ZlcnRpbGl6ZXInLFxuICB9O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIFxuICAgIC8vIE1vY2sgc3VjY2Vzc2Z1bCBBUEkgcmVzcG9uc2UgYnkgZGVmYXVsdFxuICAgIG1vY2tBcGlSZXNwb25zZXMoe1xuICAgICAgJy9hcGkvY2FyZS9sb2cnOiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHsgaWQ6IDEgfSB9LFxuICAgIH0pO1xuXG4gICAgLy8gUmVzZXQgb2ZmbGluZSBob29rIHRvIG9ubGluZSBzdGF0ZVxuICAgIGplc3QubW9ja2VkKHJlcXVpcmUoJ0AvaG9va3MvdXNlT2ZmbGluZScpLnVzZU9mZmxpbmUpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBpc09ubGluZTogdHJ1ZSxcbiAgICAgIGFkZFBlbmRpbmdDYXJlRW50cnk6IG1vY2tBZGRQZW5kaW5nQ2FyZUVudHJ5LFxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRm9ybSBSZW5kZXJpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3JlbmRlcnMgYWxsIGNhcmUgdHlwZSBvcHRpb25zJywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfwn4yxJykpLnRvQmVJblRoZURvY3VtZW50KCk7IC8vIEZlcnRpbGl6ZXJcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfwn5KnJykpLnRvQmVJblRoZURvY3VtZW50KCk7IC8vIFdhdGVyXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn8J+qtCcpKS50b0JlSW5UaGVEb2N1bWVudCgpOyAvLyBSZXBvdFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ+Kcgu+4jycpKS50b0JlSW5UaGVEb2N1bWVudCgpOyAvLyBQcnVuZVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ/CflI0nKSkudG9CZUluVGhlRG9jdW1lbnQoKTsgLy8gSW5zcGVjdFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ/Cfk50nKSkudG9CZUluVGhlRG9jdW1lbnQoKTsgLy8gT3RoZXJcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0ZlcnRpbGl6ZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdXYXRlcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1JlcG90JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUHJ1bmUnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJbnNwZWN0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnT3RoZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdyZW5kZXJzIGNhcmUgZGF0ZSBmaWVsZCB3aXRoIHRvZGF5IGFzIGRlZmF1bHQnLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgY29uc3QgZGF0ZUlucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9jYXJlIGRhdGUvaSk7XG4gICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgXG4gICAgICBleHBlY3QoZGF0ZUlucHV0KS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KGRhdGVJbnB1dCkudG9IYXZlVmFsdWUodG9kYXkpO1xuICAgICAgZXhwZWN0KGRhdGVJbnB1dCkudG9IYXZlQXR0cmlidXRlKCdtYXgnLCB0b2RheSk7IC8vIENhbm5vdCBiZSBpbiBmdXR1cmVcbiAgICB9KTtcblxuICAgIGl0KCdyZW5kZXJzIG5vdGVzIGZpZWxkJywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGNvbnN0IG5vdGVzRmllbGQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL25vdGVzL2kpO1xuICAgICAgZXhwZWN0KG5vdGVzRmllbGQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qobm90ZXNGaWVsZCkudG9IYXZlQXR0cmlidXRlKCdwbGFjZWhvbGRlcicsICdBbnkgYWRkaXRpb25hbCBvYnNlcnZhdGlvbnMgb3Igbm90ZXMuLi4nKTtcbiAgICB9KTtcblxuICAgIGl0KCdyZW5kZXJzIHN1Ym1pdCBidXR0b24nLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2xvZyBjYXJlL2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2VsZWN0cyBkZWZhdWx0IGNhcmUgdHlwZScsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gZGVmYXVsdENhcmVUeXBlPVwid2F0ZXJcIiAvPik7XG5cbiAgICAgIGNvbnN0IHdhdGVyQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvd2F0ZXIvaSB9KTtcbiAgICAgIGV4cGVjdCh3YXRlckJ1dHRvbikudG9IYXZlQ2xhc3MoJ2J0bi0tcHJpbWFyeScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2FyZSBUeXBlIFNlbGVjdGlvbicsICgpID0+IHtcbiAgICBpdCgnYWxsb3dzIHNlbGVjdGluZyBkaWZmZXJlbnQgY2FyZSB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBjb25zdCB3YXRlckJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3dhdGVyL2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHdhdGVyQnV0dG9uKTtcblxuICAgICAgZXhwZWN0KHdhdGVyQnV0dG9uKS50b0hhdmVDbGFzcygnYnRuLS1wcmltYXJ5Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvd3MgY29uZGl0aW9uYWwgZmllbGRzIGZvciBmZXJ0aWxpemVyIHR5cGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IGRlZmF1bHRDYXJlVHlwZT1cImZlcnRpbGl6ZXJcIiAvPik7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2ZlcnRpbGl6ZXIgdHlwZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoL2xpcXVpZCBmZXJ0aWxpemVyLCBzbG93LXJlbGVhc2UgcGVsbGV0cy9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG93cyBjb25kaXRpb25hbCBmaWVsZHMgZm9yIHJlcG90dGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBjb25zdCByZXBvdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3JlcG90L2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHJlcG90QnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3BvdCBzaXplL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9zb2lsIHR5cGUvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdoaWRlcyBjb25kaXRpb25hbCBmaWVsZHMgd2hlbiBzd2l0Y2hpbmcgY2FyZSB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gZGVmYXVsdENhcmVUeXBlPVwiZmVydGlsaXplclwiIC8+KTtcblxuICAgICAgLy8gSW5pdGlhbGx5IHNob3dzIGZlcnRpbGl6ZXIgZmllbGRcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2ZlcnRpbGl6ZXIgdHlwZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgICAgLy8gU3dpdGNoIHRvIHdhdGVyXG4gICAgICBjb25zdCB3YXRlckJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3dhdGVyL2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHdhdGVyQnV0dG9uKTtcblxuICAgICAgLy8gRmVydGlsaXplciBmaWVsZCBzaG91bGQgYmUgaGlkZGVuXG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlMYWJlbFRleHQoL2ZlcnRpbGl6ZXIgdHlwZS9pKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvd3MgY2FyZSB0eXBlIGRlc2NyaXB0aW9uJywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSBkZWZhdWx0Q2FyZVR5cGU9XCJmZXJ0aWxpemVyXCIgLz4pO1xuXG4gICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHNjcmVlbi5nZXRCeVRleHQoL/CfjLEgZmVydGlsaXplcjovaSk7XG4gICAgICBleHBlY3QoZGVzY3JpcHRpb24pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdEYXRlIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3ByZXZlbnRzIHNlbGVjdGluZyBmdXR1cmUgZGF0ZXMnLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgY29uc3QgZGF0ZUlucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9jYXJlIGRhdGUvaSk7XG4gICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgXG4gICAgICBleHBlY3QoZGF0ZUlucHV0KS50b0hhdmVBdHRyaWJ1dGUoJ21heCcsIHRvZGF5KTtcbiAgICB9KTtcblxuICAgIGl0KCdhbGxvd3Mgc2VsZWN0aW5nIHBhc3QgZGF0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgY29uc3QgZGF0ZUlucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9jYXJlIGRhdGUvaSk7XG4gICAgICBjb25zdCB5ZXN0ZXJkYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgeWVzdGVyZGF5LnNldERhdGUoeWVzdGVyZGF5LmdldERhdGUoKSAtIDEpO1xuICAgICAgY29uc3QgeWVzdGVyZGF5U3RyaW5nID0geWVzdGVyZGF5LnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcblxuICAgICAgYXdhaXQgdXNlci5jbGVhcihkYXRlSW5wdXQpO1xuICAgICAgYXdhaXQgdXNlci50eXBlKGRhdGVJbnB1dCwgeWVzdGVyZGF5U3RyaW5nKTtcblxuICAgICAgZXhwZWN0KGRhdGVJbnB1dCkudG9IYXZlVmFsdWUoeWVzdGVyZGF5U3RyaW5nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Zvcm0gU3VibWlzc2lvbicsICgpID0+IHtcbiAgICBpdCgnc3VibWl0cyBmb3JtIHdpdGggY29ycmVjdCBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIC8vIEZpbGwgZm9ybVxuICAgICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvbm90ZXMvaSksICdQbGFudCBsb29rcyBoZWFsdGh5Jyk7XG4gICAgICBcbiAgICAgIC8vIFN1Ym1pdFxuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9sb2cgY2FyZS9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICcvYXBpL2NhcmUvbG9nJyxcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnZmVydGlsaXplcicpLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGRlZmF1bHRQcm9wcy5vblN1Y2Nlc3MpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdpbmNsdWRlcyBjb25kaXRpb25hbCBmaWVsZCBkYXRhIGluIHN1Ym1pc3Npb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IGRlZmF1bHRDYXJlVHlwZT1cImZlcnRpbGl6ZXJcIiAvPik7XG5cbiAgICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2ZlcnRpbGl6ZXIgdHlwZS9pKSwgJ0xpcXVpZCBmZXJ0aWxpemVyJyk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2xvZyBjYXJlL2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgZmV0Y2hDYWxsID0gZ2xvYmFsLmZldGNoLm1vY2suY2FsbHNbMF07XG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gSlNPTi5wYXJzZShmZXRjaENhbGxbMV0uYm9keSk7XG4gICAgICAgIGV4cGVjdChyZXF1ZXN0Qm9keS5mZXJ0aWxpemVyVHlwZSkudG9CZSgnTGlxdWlkIGZlcnRpbGl6ZXInKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2luY2x1ZGVzIHJlcG90LXNwZWNpZmljIGRhdGEgaW4gc3VibWlzc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICAvLyBTZWxlY3QgcmVwb3QgY2FyZSB0eXBlXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3JlcG90L2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvcG90IHNpemUvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvcG90IHNpemUvaSksICc2IGluY2gnKTtcbiAgICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3NvaWwgdHlwZS9pKSwgJ1BvdHRpbmcgbWl4Jyk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2xvZyBjYXJlL2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgZmV0Y2hDYWxsID0gZ2xvYmFsLmZldGNoLm1vY2suY2FsbHNbMF07XG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gSlNPTi5wYXJzZShmZXRjaENhbGxbMV0uYm9keSk7XG4gICAgICAgIGV4cGVjdChyZXF1ZXN0Qm9keS5wb3RTaXplKS50b0JlKCc2IGluY2gnKTtcbiAgICAgICAgZXhwZWN0KHJlcXVlc3RCb2R5LnNvaWxUeXBlKS50b0JlKCdQb3R0aW5nIG1peCcpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgncmVzZXRzIGZvcm0gYWZ0ZXIgc3VjY2Vzc2Z1bCBzdWJtaXNzaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIC8vIEZpbGwgZm9ybVxuICAgICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvbm90ZXMvaSksICdUZXN0IG5vdGVzJyk7XG4gICAgICBcbiAgICAgIC8vIFN1Ym1pdFxuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9sb2cgY2FyZS9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChkZWZhdWx0UHJvcHMub25TdWNjZXNzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gRm9ybSBzaG91bGQgYmUgcmVzZXRcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL25vdGVzL2kpKS50b0hhdmVWYWx1ZSgnJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvd3MgbG9hZGluZyBzdGF0ZSBkdXJpbmcgc3VibWlzc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIFxuICAgICAgLy8gTW9jayBkZWxheWVkIHJlc3BvbnNlXG4gICAgICBnbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCgpID0+IFxuICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IFxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUgfSlcbiAgICAgICAgICB9KSwgMTAwKVxuICAgICAgICApXG4gICAgICApO1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvbG9nIGNhcmUvaSB9KTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc3VibWl0QnV0dG9uKTtcblxuICAgICAgLy8gQ2hlY2sgbG9hZGluZyBzdGF0ZVxuICAgICAgZXhwZWN0KHN1Ym1pdEJ1dHRvbikudG9CZURpc2FibGVkKCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvbG9nZ2luZy9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ09mZmxpbmUgTW9kZScsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIC8vIE1vY2sgb2ZmbGluZSBzdGF0ZVxuICAgICAgamVzdC5tb2NrZWQocmVxdWlyZSgnQC9ob29rcy91c2VPZmZsaW5lJykudXNlT2ZmbGluZSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaXNPbmxpbmU6IGZhbHNlLFxuICAgICAgICBhZGRQZW5kaW5nQ2FyZUVudHJ5OiBtb2NrQWRkUGVuZGluZ0NhcmVFbnRyeSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3dzIG9mZmxpbmUgbW9kZSBpbmRpY2F0b3InLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL29mZmxpbmUgbW9kZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9jYXJlIHdpbGwgYmUgbG9nZ2VkIHdoZW4geW91J3JlIGJhY2sgb25saW5lL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2NoYW5nZXMgc3VibWl0IGJ1dHRvbiB0ZXh0IGluIG9mZmxpbmUgbW9kZScsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvcXVldWUgZm9yIHN5bmMvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdxdWV1ZXMgY2FyZSBlbnRyeSB3aGVuIG9mZmxpbmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvbm90ZXMvaSksICdPZmZsaW5lIGNhcmUgZW50cnknKTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvcXVldWUgZm9yIHN5bmMvaSB9KSk7XG5cbiAgICAgIGV4cGVjdChtb2NrQWRkUGVuZGluZ0NhcmVFbnRyeSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBwbGFudEluc3RhbmNlSWQ6IDEsXG4gICAgICAgIGNhcmVUeXBlOiAnZmVydGlsaXplcicsXG4gICAgICAgIG5vdGVzOiAnT2ZmbGluZSBjYXJlIGVudHJ5JyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1JlZ2lzdGVyQmFja2dyb3VuZFN5bmMpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChkZWZhdWx0UHJvcHMub25TdWNjZXNzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZG9lcyBub3QgbWFrZSBBUEkgY2FsbCB3aGVuIG9mZmxpbmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9xdWV1ZSBmb3Igc3luYy9pIH0pKTtcblxuICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdkaXNwbGF5cyBBUEkgZXJyb3IgbWVzc2FnZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICBtb2NrQXBpRXJyb3IoJy9hcGkvY2FyZS9sb2cnLCA0MDAsIHsgZXJyb3I6ICdJbnZhbGlkIGNhcmUgZGF0YScgfSk7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2xvZyBjYXJlL2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0ludmFsaWQgY2FyZSBkYXRhJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGRlZmF1bHRQcm9wcy5vblN1Y2Nlc3MpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnaGFuZGxlcyBuZXR3b3JrIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgXG4gICAgICAvLyBNb2NrIG5ldHdvcmsgZXJyb3JcbiAgICAgIGdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdOZXR3b3JrIGVycm9yJykpKTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvbG9nIGNhcmUvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvZmFpbGVkIHRvIGxvZyBjYXJlL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnY2xlYXJzIGVycm9ycyBvbiByZXRyeScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIG1vY2tBcGlFcnJvcignL2FwaS9jYXJlL2xvZycsIDQwMCwgeyBlcnJvcjogJ0ludmFsaWQgY2FyZSBkYXRhJyB9KTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIC8vIEZpcnN0IHN1Ym1pc3Npb24gd2l0aCBlcnJvclxuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9sb2cgY2FyZS9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJbnZhbGlkIGNhcmUgZGF0YScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIE1vY2sgc3VjY2Vzc2Z1bCByZXNwb25zZSBmb3IgcmV0cnlcbiAgICAgIG1vY2tBcGlSZXNwb25zZXMoe1xuICAgICAgICAnL2FwaS9jYXJlL2xvZyc6IHsgc3VjY2VzczogdHJ1ZSB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFJldHJ5IHN1Ym1pc3Npb25cbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvbG9nIGNhcmUvaSB9KSk7XG5cbiAgICAgIC8vIEVycm9yIHNob3VsZCBiZSBjbGVhcmVkXG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdJbnZhbGlkIGNhcmUgZGF0YScpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BsYW50IFNlbGVjdGlvbiAod2hlbiBubyBwbGFudEluc3RhbmNlSWQgcHJvdmlkZWQpJywgKCkgPT4ge1xuICAgIGl0KCdzaG93cyBwbGFudCBzZWxlY3Rpb24gZHJvcGRvd24gd2hlbiBwbGFudEluc3RhbmNlSWQgbm90IHByb3ZpZGVkJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcHNXaXRob3V0UGxhbnQgPSB7IC4uLmRlZmF1bHRQcm9wcyB9O1xuICAgICAgZGVsZXRlIHByb3BzV2l0aG91dFBsYW50LnBsYW50SW5zdGFuY2VJZDtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4ucHJvcHNXaXRob3V0UGxhbnR9IC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvcGxhbnQvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvc2VsZWN0IGEgcGxhbnQvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGlzYWJsZXMgc3VibWl0IGJ1dHRvbiB3aGVuIG5vIHBsYW50IHNlbGVjdGVkJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcHNXaXRob3V0UGxhbnQgPSB7IC4uLmRlZmF1bHRQcm9wcyB9O1xuICAgICAgZGVsZXRlIHByb3BzV2l0aG91dFBsYW50LnBsYW50SW5zdGFuY2VJZDtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4ucHJvcHNXaXRob3V0UGxhbnR9IC8+KTtcblxuICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvbG9nIGNhcmUvaSB9KTtcbiAgICAgIGV4cGVjdChzdWJtaXRCdXR0b24pLnRvQmVEaXNhYmxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3dzIGltcGxlbWVudGF0aW9uIG5vdGUgZm9yIHBsYW50IHNlbGVjdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BzV2l0aG91dFBsYW50ID0geyAuLi5kZWZhdWx0UHJvcHMgfTtcbiAgICAgIGRlbGV0ZSBwcm9wc1dpdGhvdXRQbGFudC5wbGFudEluc3RhbmNlSWQ7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLnByb3BzV2l0aG91dFBsYW50fSAvPik7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9wbGFudCBzZWxlY3Rpb24gd2lsbCBiZSBpbXBsZW1lbnRlZCB3aGVuIHBsYW50IGluc3RhbmNlcyBhcmUgYXZhaWxhYmxlL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2FuY2VsIEZ1bmN0aW9uYWxpdHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3dzIGNhbmNlbCBidXR0b24gd2hlbiBvbkNhbmNlbCBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvY2FuY2VsL2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnY2FsbHMgb25DYW5jZWwgd2hlbiBjYW5jZWwgYnV0dG9uIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9jYW5jZWwvaSB9KSk7XG5cbiAgICAgIGV4cGVjdChkZWZhdWx0UHJvcHMub25DYW5jZWwpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkb2VzIG5vdCBzaG93IGNhbmNlbCBidXR0b24gd2hlbiBvbkNhbmNlbCBub3QgcHJvdmlkZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wc1dpdGhvdXRDYW5jZWwgPSB7IC4uLmRlZmF1bHRQcm9wcyB9O1xuICAgICAgZGVsZXRlIHByb3BzV2l0aG91dENhbmNlbC5vbkNhbmNlbDtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4ucHJvcHNXaXRob3V0Q2FuY2VsfSAvPik7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2NhbmNlbC9pIH0pKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FjY2Vzc2liaWxpdHknLCAoKSA9PiB7XG4gICAgaXQoJ2hhcyBwcm9wZXIgZm9ybSBzdHJ1Y3R1cmUnLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2Zvcm0nLCB7IGhpZGRlbjogdHJ1ZSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdoYXMgcHJvcGVyIGxhYmVscyBmb3IgYWxsIGlucHV0cycsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9jYXJlIHR5cGUvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9jYXJlIGRhdGUvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9ub3Rlcy9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdoYXMgcmVxdWlyZWQgYXR0cmlidXRlIG9uIGRhdGUgZmllbGQnLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgY29uc3QgZGF0ZUlucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9jYXJlIGRhdGUvaSk7XG4gICAgICBleHBlY3QoZGF0ZUlucHV0KS50b0hhdmVBdHRyaWJ1dGUoJ3JlcXVpcmVkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGlzYWJsZXMgZm9ybSBlbGVtZW50cyBkdXJpbmcgc3VibWlzc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIFxuICAgICAgLy8gTW9jayBkZWxheWVkIHJlc3BvbnNlXG4gICAgICBnbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCgpID0+IFxuICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IFxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUgfSlcbiAgICAgICAgICB9KSwgMTAwKVxuICAgICAgICApXG4gICAgICApO1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvbG9nIGNhcmUvaSB9KTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc3VibWl0QnV0dG9uKTtcblxuICAgICAgLy8gQWxsIGNhcmUgdHlwZSBidXR0b25zIHNob3VsZCBiZSBkaXNhYmxlZFxuICAgICAgY29uc3QgY2FyZVR5cGVCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJykuZmlsdGVyKGJ0biA9PiBcbiAgICAgICAgYnRuLnRleHRDb250ZW50Py5pbmNsdWRlcygnRmVydGlsaXplcicpIHx8IFxuICAgICAgICBidG4udGV4dENvbnRlbnQ/LmluY2x1ZGVzKCdXYXRlcicpIHx8XG4gICAgICAgIGJ0bi50ZXh0Q29udGVudD8uaW5jbHVkZXMoJ1JlcG90JylcbiAgICAgICk7XG5cbiAgICAgIGNhcmVUeXBlQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgIGV4cGVjdChidXR0b24pLnRvQmVEaXNhYmxlZCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIERhdGUgaW5wdXQgc2hvdWxkIGJlIGRpc2FibGVkXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9jYXJlIGRhdGUvaSkpLnRvQmVEaXNhYmxlZCgpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZU9mZmxpbmUiLCJpc09ubGluZSIsImFkZFBlbmRpbmdDYXJlRW50cnkiLCJtb2NrQWRkUGVuZGluZ0NhcmVFbnRyeSIsInVzZVNlcnZpY2VXb3JrZXIiLCJyZWdpc3RlckJhY2tncm91bmRTeW5jIiwibW9ja1JlZ2lzdGVyQmFja2dyb3VuZFN5bmMiLCJmbiIsImRlc2NyaWJlIiwiZGVmYXVsdFByb3BzIiwicGxhbnRJbnN0YW5jZUlkIiwib25TdWNjZXNzIiwib25DYW5jZWwiLCJkZWZhdWx0Q2FyZVR5cGUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tBcGlSZXNwb25zZXMiLCJzdWNjZXNzIiwiZGF0YSIsImlkIiwibW9ja2VkIiwicmVxdWlyZSIsIm1vY2tSZXR1cm5WYWx1ZSIsIml0IiwicmVuZGVyV2l0aFByb3ZpZGVycyIsIlF1aWNrQ2FyZUZvcm0iLCJleHBlY3QiLCJzY3JlZW4iLCJnZXRCeVRleHQiLCJ0b0JlSW5UaGVEb2N1bWVudCIsImRhdGVJbnB1dCIsImdldEJ5TGFiZWxUZXh0IiwidG9kYXkiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzcGxpdCIsInRvSGF2ZVZhbHVlIiwidG9IYXZlQXR0cmlidXRlIiwibm90ZXNGaWVsZCIsImdldEJ5Um9sZSIsIm5hbWUiLCJ3YXRlckJ1dHRvbiIsInRvSGF2ZUNsYXNzIiwidXNlciIsInVzZXJFdmVudCIsInNldHVwIiwiY2xpY2siLCJnZXRCeVBsYWNlaG9sZGVyVGV4dCIsInJlcG90QnV0dG9uIiwid2FpdEZvciIsInF1ZXJ5QnlMYWJlbFRleHQiLCJub3QiLCJkZXNjcmlwdGlvbiIsInllc3RlcmRheSIsInNldERhdGUiLCJnZXREYXRlIiwieWVzdGVyZGF5U3RyaW5nIiwiY2xlYXIiLCJ0eXBlIiwiZ2xvYmFsIiwiZmV0Y2giLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIm9iamVjdENvbnRhaW5pbmciLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsInN0cmluZ0NvbnRhaW5pbmciLCJ0b0hhdmVCZWVuQ2FsbGVkIiwiZmV0Y2hDYWxsIiwiY2FsbHMiLCJyZXF1ZXN0Qm9keSIsIkpTT04iLCJwYXJzZSIsImZlcnRpbGl6ZXJUeXBlIiwidG9CZSIsInBvdFNpemUiLCJzb2lsVHlwZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsIm9rIiwianNvbiIsInN1Ym1pdEJ1dHRvbiIsInRvQmVEaXNhYmxlZCIsImNhcmVUeXBlIiwibm90ZXMiLCJtb2NrQXBpRXJyb3IiLCJlcnJvciIsInJlamVjdCIsIkVycm9yIiwicXVlcnlCeVRleHQiLCJwcm9wc1dpdGhvdXRQbGFudCIsInByb3BzV2l0aG91dENhbmNlbCIsInF1ZXJ5QnlSb2xlIiwiaGlkZGVuIiwiY2FyZVR5cGVCdXR0b25zIiwiZ2V0QWxsQnlSb2xlIiwiZmlsdGVyIiwiYnRuIiwidGV4dENvbnRlbnQiLCJpbmNsdWRlcyIsImZvckVhY2giLCJidXR0b24iXSwibWFwcGluZ3MiOiJBQUFBOztDQUVDO0FBWURBLEtBQUtDLElBQUksQ0FBQyxzQkFBc0IsSUFBTyxDQUFBO1FBQ3JDQyxZQUFZLElBQU8sQ0FBQTtnQkFDakJDLFVBQVU7Z0JBQ1ZDLHFCQUFxQkM7WUFDdkIsQ0FBQTtJQUNGLENBQUE7QUFFQUwsS0FBS0MsSUFBSSxDQUFDLDhCQUE4QixJQUFPLENBQUE7UUFDN0NLLGtCQUFrQixJQUFPLENBQUE7Z0JBQ3ZCQyx3QkFBd0JDO1lBQzFCLENBQUE7SUFDRixDQUFBOzs7Ozs4REFyQmtCO3dCQUNjO2tFQUNWOytCQUM4QztzRUFDMUM7Ozs7OztBQUUxQix3QkFBd0I7QUFDeEIsTUFBTUgs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