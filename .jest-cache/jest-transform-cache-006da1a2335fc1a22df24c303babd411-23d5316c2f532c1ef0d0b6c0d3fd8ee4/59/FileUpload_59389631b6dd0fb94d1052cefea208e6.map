{"version":3,"sources":["/Users/stefanbekker/projects/fancy-planties/src/components/import/FileUpload.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, DragEvent, ChangeEvent } from 'react';\nimport { Upload, File, X, AlertCircle } from 'lucide-react';\n\ninterface FileUploadProps {\n  onFileSelect: (file: File) => void;\n  acceptedTypes?: string[];\n  maxSize?: number; // in bytes\n  className?: string;\n}\n\nexport function FileUpload({\n  onFileSelect,\n  acceptedTypes = ['.csv', 'text/csv', 'application/vnd.ms-excel'],\n  maxSize = 5 * 1024 * 1024, // 5MB\n  className = '',\n}: FileUploadProps) {\n  const [isDragOver, setIsDragOver] = useState(false);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const validateFile = (file: File): string | null => {\n    // Check file size\n    if (file.size > maxSize) {\n      return `File size must be less than ${Math.round(maxSize / 1024 / 1024)}MB`;\n    }\n\n    // Check file type\n    const isValidType = acceptedTypes.some(type => {\n      if (type.startsWith('.')) {\n        return file.name.toLowerCase().endsWith(type.toLowerCase());\n      }\n      return file.type === type;\n    });\n\n    if (!isValidType) {\n      return 'Please select a CSV file';\n    }\n\n    return null;\n  };\n\n  const handleFileSelect = (file: File) => {\n    const validationError = validateFile(file);\n    if (validationError) {\n      setError(validationError);\n      return;\n    }\n\n    setError(null);\n    setSelectedFile(file);\n    onFileSelect(file);\n  };\n\n  const handleDragOver = (e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    setIsDragOver(true);\n  };\n\n  const handleDragLeave = (e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    setIsDragOver(false);\n  };\n\n  const handleDrop = (e: DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    setIsDragOver(false);\n\n    const files = Array.from(e.dataTransfer.files);\n    if (files.length > 0) {\n      handleFileSelect(files[0]);\n    }\n  };\n\n  const handleInputChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    if (files.length > 0) {\n      handleFileSelect(files[0]);\n    }\n  };\n\n  const handleClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleRemoveFile = () => {\n    setSelectedFile(null);\n    setError(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  return (\n    <div className={`w-full ${className}`}>\n      {!selectedFile ? (\n        <div\n          onClick={handleClick}\n          onDragOver={handleDragOver}\n          onDragLeave={handleDragLeave}\n          onDrop={handleDrop}\n          className={`\n            relative border-2 border-dashed rounded-xl p-8 text-center cursor-pointer\n            transition-all duration-200 hover:border-primary-300 hover:bg-primary-50\n            ${isDragOver \n              ? 'border-primary-400 bg-primary-100' \n              : error \n                ? 'border-red-300 bg-red-50' \n                : 'border-gray-300 bg-gray-50'\n            }\n          `}\n        >\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept={acceptedTypes.join(',')}\n            onChange={handleInputChange}\n            className=\"hidden\"\n            aria-label=\"Select CSV file to upload\"\n            title=\"Select CSV file to upload\"\n          />\n          \n          <div className=\"flex flex-col items-center space-y-4\">\n            <div className={`\n              p-3 rounded-full \n              ${error ? 'bg-red-100' : 'bg-primary-100'}\n            `}>\n              {error ? (\n                <AlertCircle className=\"w-8 h-8 text-red-500\" />\n              ) : (\n                <Upload className=\"w-8 h-8 text-primary-500\" />\n              )}\n            </div>\n            \n            <div>\n              <p className=\"text-lg font-medium text-gray-900 mb-1\">\n                {isDragOver ? 'Drop your CSV file here' : 'Upload CSV file'}\n              </p>\n              <p className=\"text-sm text-gray-500\">\n                Drag and drop or click to browse\n              </p>\n              <p className=\"text-xs text-gray-400 mt-2\">\n                Max size: {Math.round(maxSize / 1024 / 1024)}MB\n              </p>\n            </div>\n          </div>\n        </div>\n      ) : (\n        <div className=\"border border-gray-200 rounded-xl p-4 bg-white\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"p-2 bg-primary-100 rounded-lg\">\n                <File className=\"w-5 h-5 text-primary-600\" />\n              </div>\n              <div>\n                <p className=\"font-medium text-gray-900\">{selectedFile.name}</p>\n                <p className=\"text-sm text-gray-500\">\n                  {(selectedFile.size / 1024).toFixed(1)} KB\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={handleRemoveFile}\n              className=\"p-1 hover:bg-gray-100 rounded-full transition-colors\"\n              aria-label=\"Remove selected file\"\n              title=\"Remove selected file\"\n            >\n              <X className=\"w-5 h-5 text-gray-400\" />\n            </button>\n          </div>\n        </div>\n      )}\n\n      {error && (\n        <div className=\"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg\">\n          <div className=\"flex items-center space-x-2\">\n            <AlertCircle className=\"w-4 h-4 text-red-500 flex-shrink-0\" />\n            <p className=\"text-sm text-red-700\">{error}</p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":["FileUpload","onFileSelect","acceptedTypes","maxSize","className","isDragOver","setIsDragOver","useState","selectedFile","setSelectedFile","error","setError","fileInputRef","useRef","validateFile","file","size","Math","round","isValidType","some","type","startsWith","name","toLowerCase","endsWith","handleFileSelect","validationError","handleDragOver","e","preventDefault","handleDragLeave","handleDrop","files","Array","from","dataTransfer","length","handleInputChange","target","handleClick","current","click","handleRemoveFile","value","div","onClick","onDragOver","onDragLeave","onDrop","input","ref","accept","join","onChange","aria-label","title","AlertCircle","Upload","p","File","toFixed","button","X"],"mappings":"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"}