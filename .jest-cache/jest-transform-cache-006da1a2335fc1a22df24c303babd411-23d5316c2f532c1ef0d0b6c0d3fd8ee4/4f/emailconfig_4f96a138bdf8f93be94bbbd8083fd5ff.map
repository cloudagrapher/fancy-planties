{"version":3,"names":["getEmailVerificationConfig","cov_2jagglg8wr","f","s","loadEmailVerificationConfig","config","apiKey","b","process","env","RESEND_API_KEY","fromEmail","FROM_EMAIL","fromName","FROM_NAME","codeExpiryMinutes","parseInt","VERIFICATION_CODE_EXPIRY_MINUTES","maxVerificationAttempts","MAX_VERIFICATION_ATTEMPTS","resendCooldownSeconds","RESEND_COOLDOWN_SECONDS","maxResendPerHour","MAX_RESEND_PER_HOUR","errors","push","length","Error","join","error","NODE_ENV","console","warn"],"sources":["/Users/stefanbekker/projects/fancy-planties/src/lib/services/email-config.ts"],"sourcesContent":["import 'server-only';\n\nexport interface EmailVerificationConfig {\n  // Email service settings\n  apiKey: string;\n  fromEmail: string;\n  fromName: string;\n  \n  // Verification settings\n  codeExpiryMinutes: number;\n  maxVerificationAttempts: number;\n  resendCooldownSeconds: number;\n  maxResendPerHour: number;\n}\n\n/**\n * Load and validate email verification configuration from environment variables\n */\nexport function loadEmailVerificationConfig(): EmailVerificationConfig {\n  const config: EmailVerificationConfig = {\n    // Email service\n    apiKey: process.env.RESEND_API_KEY || '',\n    fromEmail: process.env.FROM_EMAIL || 'send.mail.fancy-planties.cloudagrapher.com',\n    fromName: process.env.FROM_NAME || 'Fancy Planties',\n    \n    // Verification settings with defaults\n    codeExpiryMinutes: parseInt(process.env.VERIFICATION_CODE_EXPIRY_MINUTES || '10'),\n    maxVerificationAttempts: parseInt(process.env.MAX_VERIFICATION_ATTEMPTS || '5'),\n    resendCooldownSeconds: parseInt(process.env.RESEND_COOLDOWN_SECONDS || '60'),\n    maxResendPerHour: parseInt(process.env.MAX_RESEND_PER_HOUR || '5'),\n  };\n\n  // Validate required fields\n  const errors: string[] = [];\n  \n  if (!config.apiKey || config.apiKey === 're_xxxxxxxxxx') {\n    errors.push('RESEND_API_KEY is required and must be a valid API key');\n  }\n  \n  if (!config.fromEmail) {\n    errors.push('FROM_EMAIL is required');\n  }\n  \n  if (config.codeExpiryMinutes < 1 || config.codeExpiryMinutes > 60) {\n    errors.push('VERIFICATION_CODE_EXPIRY_MINUTES must be between 1 and 60');\n  }\n  \n  if (config.maxVerificationAttempts < 1 || config.maxVerificationAttempts > 10) {\n    errors.push('MAX_VERIFICATION_ATTEMPTS must be between 1 and 10');\n  }\n  \n  if (config.resendCooldownSeconds < 30 || config.resendCooldownSeconds > 300) {\n    errors.push('RESEND_COOLDOWN_SECONDS must be between 30 and 300');\n  }\n  \n  if (config.maxResendPerHour < 1 || config.maxResendPerHour > 20) {\n    errors.push('MAX_RESEND_PER_HOUR must be between 1 and 20');\n  }\n\n  if (errors.length > 0) {\n    throw new Error(`Email verification configuration errors:\\n${errors.join('\\n')}`);\n  }\n\n  return config;\n}\n\n/**\n * Get configuration with safe defaults for development\n */\nexport function getEmailVerificationConfig(): EmailVerificationConfig {\n  try {\n    return loadEmailVerificationConfig();\n  } catch (error) {\n    if (process.env.NODE_ENV === 'development') {\n      console.warn('Email verification config error (using defaults):', error);\n      \n      // Return safe defaults for development\n      return {\n        apiKey: 're_development_key',\n        fromEmail: 'send.mail.fancy-planties.cloudagrapher.com',\n        fromName: 'Fancy Planties',\n        codeExpiryMinutes: 10,\n        maxVerificationAttempts: 5,\n        resendCooldownSeconds: 60,\n        maxResendPerHour: 5,\n      };\n    }\n    \n    throw error;\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}