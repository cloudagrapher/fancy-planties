0b80e7cc1914df2d2be1cdc992f7e3f2
"use strict";

/* istanbul ignore next */
function cov_1fquel92zb() {
  var path = "/Users/stefanbekker/projects/fancy-planties/src/app/api/auth/verify-email/route.ts";
  var hash = "8cd6aadd9c76b10bcb2c8819063b15c0c5cb9966";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/stefanbekker/projects/fancy-planties/src/app/api/auth/verify-email/route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 10,
          column: 3
        }
      },
      "2": {
        start: {
          line: 8,
          column: 8
        },
        end: {
          line: 8,
          column: 20
        }
      },
      "3": {
        start: {
          line: 11,
          column: 16
        },
        end: {
          line: 11,
          column: 38
        }
      },
      "4": {
        start: {
          line: 12,
          column: 13
        },
        end: {
          line: 12,
          column: 27
        }
      },
      "5": {
        start: {
          line: 13,
          column: 38
        },
        end: {
          line: 13,
          column: 105
        }
      },
      "6": {
        start: {
          line: 14,
          column: 37
        },
        end: {
          line: 14,
          column: 98
        }
      },
      "7": {
        start: {
          line: 16,
          column: 26
        },
        end: {
          line: 19,
          column: 2
        }
      },
      "8": {
        start: {
          line: 21,
          column: 4
        },
        end: {
          line: 118,
          column: 7
        }
      },
      "9": {
        start: {
          line: 23,
          column: 21
        },
        end: {
          line: 23,
          column: 56
        }
      },
      "10": {
        start: {
          line: 24,
          column: 8
        },
        end: {
          line: 117,
          column: 9
        }
      },
      "11": {
        start: {
          line: 26,
          column: 31
        },
        end: {
          line: 26,
          column: 64
        }
      },
      "12": {
        start: {
          line: 27,
          column: 12
        },
        end: {
          line: 37,
          column: 13
        }
      },
      "13": {
        start: {
          line: 28,
          column: 16
        },
        end: {
          line: 36,
          column: 19
        }
      },
      "14": {
        start: {
          line: 30,
          column: 67
        },
        end: {
          line: 33,
          column: 25
        }
      },
      "15": {
        start: {
          line: 38,
          column: 36
        },
        end: {
          line: 38,
          column: 51
        }
      },
      "16": {
        start: {
          line: 39,
          column: 12
        },
        end: {
          line: 109,
          column: 13
        }
      },
      "17": {
        start: {
          line: 41,
          column: 32
        },
        end: {
          line: 41,
          column: 122
        }
      },
      "18": {
        start: {
          line: 42,
          column: 16
        },
        end: {
          line: 49,
          column: 17
        }
      },
      "19": {
        start: {
          line: 43,
          column: 20
        },
        end: {
          line: 43,
          column: 78
        }
      },
      "20": {
        start: {
          line: 44,
          column: 20
        },
        end: {
          line: 48,
          column: 23
        }
      },
      "21": {
        start: {
          line: 51,
          column: 16
        },
        end: {
          line: 55,
          column: 19
        }
      },
      "22": {
        start: {
          line: 57,
          column: 16
        },
        end: {
          line: 101,
          column: 17
        }
      },
      "23": {
        start: {
          line: 59,
          column: 20
        },
        end: {
          line: 65,
          column: 21
        }
      },
      "24": {
        start: {
          line: 60,
          column: 24
        },
        end: {
          line: 64,
          column: 25
        }
      },
      "25": {
        start: {
          line: 61,
          column: 28
        },
        end: {
          line: 61,
          column: 124
        }
      },
      "26": {
        start: {
          line: 63,
          column: 28
        },
        end: {
          line: 63,
          column: 104
        }
      },
      "27": {
        start: {
          line: 68,
          column: 37
        },
        end: {
          line: 68,
          column: 40
        }
      },
      "28": {
        start: {
          line: 69,
          column: 20
        },
        end: {
          line: 93,
          column: 21
        }
      },
      "29": {
        start: {
          line: 71,
          column: 28
        },
        end: {
          line: 71,
          column: 102
        }
      },
      "30": {
        start: {
          line: 72,
          column: 28
        },
        end: {
          line: 72,
          column: 34
        }
      },
      "31": {
        start: {
          line: 74,
          column: 28
        },
        end: {
          line: 74,
          column: 100
        }
      },
      "32": {
        start: {
          line: 75,
          column: 28
        },
        end: {
          line: 75,
          column: 34
        }
      },
      "33": {
        start: {
          line: 77,
          column: 28
        },
        end: {
          line: 77,
          column: 104
        }
      },
      "34": {
        start: {
          line: 78,
          column: 28
        },
        end: {
          line: 78,
          column: 45
        }
      },
      "35": {
        start: {
          line: 79,
          column: 28
        },
        end: {
          line: 79,
          column: 34
        }
      },
      "36": {
        start: {
          line: 81,
          column: 28
        },
        end: {
          line: 81,
          column: 83
        }
      },
      "37": {
        start: {
          line: 82,
          column: 28
        },
        end: {
          line: 82,
          column: 45
        }
      },
      "38": {
        start: {
          line: 83,
          column: 28
        },
        end: {
          line: 83,
          column: 34
        }
      },
      "39": {
        start: {
          line: 85,
          column: 28
        },
        end: {
          line: 85,
          column: 105
        }
      },
      "40": {
        start: {
          line: 86,
          column: 28
        },
        end: {
          line: 90,
          column: 31
        }
      },
      "41": {
        start: {
          line: 92,
          column: 28
        },
        end: {
          line: 92,
          column: 84
        }
      },
      "42": {
        start: {
          line: 94,
          column: 20
        },
        end: {
          line: 94,
          column: 107
        }
      },
      "43": {
        start: {
          line: 95,
          column: 20
        },
        end: {
          line: 100,
          column: 23
        }
      },
      "44": {
        start: {
          line: 103,
          column: 16
        },
        end: {
          line: 103,
          column: 84
        }
      },
      "45": {
        start: {
          line: 104,
          column: 16
        },
        end: {
          line: 108,
          column: 19
        }
      },
      "46": {
        start: {
          line: 111,
          column: 12
        },
        end: {
          line: 111,
          column: 71
        }
      },
      "47": {
        start: {
          line: 112,
          column: 12
        },
        end: {
          line: 116,
          column: 15
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 7,
            column: 9
          },
          end: {
            line: 7,
            column: 10
          }
        },
        loc: {
          start: {
            line: 7,
            column: 20
          },
          end: {
            line: 9,
            column: 5
          }
        },
        line: 7
      },
      "1": {
        name: "POST",
        decl: {
          start: {
            line: 20,
            column: 15
          },
          end: {
            line: 20,
            column: 19
          }
        },
        loc: {
          start: {
            line: 20,
            column: 29
          },
          end: {
            line: 119,
            column: 1
          }
        },
        line: 20
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 21,
            column: 80
          },
          end: {
            line: 21,
            column: 81
          }
        },
        loc: {
          start: {
            line: 21,
            column: 93
          },
          end: {
            line: 118,
            column: 5
          }
        },
        line: 21
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 30,
            column: 57
          },
          end: {
            line: 30,
            column: 58
          }
        },
        loc: {
          start: {
            line: 30,
            column: 67
          },
          end: {
            line: 33,
            column: 25
          }
        },
        line: 30
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 23,
            column: 21
          },
          end: {
            line: 23,
            column: 56
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 23,
            column: 21
          },
          end: {
            line: 23,
            column: 36
          }
        }, {
          start: {
            line: 23,
            column: 40
          },
          end: {
            line: 23,
            column: 56
          }
        }],
        line: 23
      },
      "1": {
        loc: {
          start: {
            line: 27,
            column: 12
          },
          end: {
            line: 37,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 27,
            column: 12
          },
          end: {
            line: 37,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 27
      },
      "2": {
        loc: {
          start: {
            line: 42,
            column: 16
          },
          end: {
            line: 49,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 42,
            column: 16
          },
          end: {
            line: 49,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 42
      },
      "3": {
        loc: {
          start: {
            line: 57,
            column: 16
          },
          end: {
            line: 101,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 57,
            column: 16
          },
          end: {
            line: 101,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 57
      },
      "4": {
        loc: {
          start: {
            line: 59,
            column: 20
          },
          end: {
            line: 65,
            column: 21
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 59,
            column: 20
          },
          end: {
            line: 65,
            column: 21
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 59
      },
      "5": {
        loc: {
          start: {
            line: 69,
            column: 20
          },
          end: {
            line: 93,
            column: 21
          }
        },
        type: "switch",
        locations: [{
          start: {
            line: 70,
            column: 24
          },
          end: {
            line: 72,
            column: 34
          }
        }, {
          start: {
            line: 73,
            column: 24
          },
          end: {
            line: 75,
            column: 34
          }
        }, {
          start: {
            line: 76,
            column: 24
          },
          end: {
            line: 79,
            column: 34
          }
        }, {
          start: {
            line: 80,
            column: 24
          },
          end: {
            line: 83,
            column: 34
          }
        }, {
          start: {
            line: 84,
            column: 24
          },
          end: {
            line: 90,
            column: 31
          }
        }, {
          start: {
            line: 91,
            column: 24
          },
          end: {
            line: 92,
            column: 84
          }
        }],
        line: 69
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0, 0, 0, 0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["/Users/stefanbekker/projects/fancy-planties/src/app/api/auth/verify-email/route.ts"],
      sourcesContent: ["import { NextRequest, NextResponse } from 'next/server';\nimport { z } from 'zod';\nimport { emailVerificationCodeService, VerificationCodeError, VerificationError } from '@/lib/services/email-verification-code-service';\nimport { withVerificationRateLimit } from '@/lib/auth/email-verification-middleware';\n\n// Validation schema for email verification request\nconst verifyEmailSchema = z.object({\n  email: z.string().email('Invalid email address'),\n  code: z.string().length(6, 'Verification code must be 6 digits').regex(/^\\d{6}$/, 'Verification code must contain only digits'),\n});\n\n// Note: Rate limiting is handled by the withVerificationRateLimit middleware with enhanced email verification limits\n\nexport async function POST(request: NextRequest) {\n  return withVerificationRateLimit(request, async (req) => {\n    // Extract parsed body from middleware\n    const body = (req as any)._parsedBody || await req.json();\n    try {\n      // Validate input\n      const validation = verifyEmailSchema.safeParse(body);\n      if (!validation.success) {\n        return NextResponse.json(\n          { \n            error: 'Validation failed', \n            details: validation.error.issues.map(issue => ({\n              field: issue.path.join('.'),\n              message: issue.message\n            }))\n          },\n          { status: 400 }\n        );\n      }\n      \n      const { email, code } = validation.data;\n      \n      try {\n        // Validate the verification code\n        const isValid = await emailVerificationCodeService.validateCode(email, code);\n        \n        if (isValid) {\n          console.log(`Email verification successful for ${email}`);\n          \n          return NextResponse.json({\n            success: true,\n            message: 'Email verified successfully! You can now access your account.',\n            redirectTo: '/dashboard'\n          });\n        }\n        \n        // This shouldn't happen if validateCode works correctly, but just in case\n        return NextResponse.json(\n          { error: 'Verification failed' },\n          { status: 400 }\n        );\n        \n      } catch (error) {\n        if (error instanceof VerificationCodeError) {\n          // Increment attempts for invalid codes (but not for other errors)\n          if (error.code === VerificationError.CODE_INVALID) {\n            try {\n              await emailVerificationCodeService.incrementAttempts(email, code);\n            } catch (incrementError) {\n              console.error('Failed to increment verification attempts:', incrementError);\n            }\n          }\n          \n          // Map verification errors to user-friendly messages\n          let errorMessage: string;\n          let statusCode = 400;\n          \n          switch (error.code) {\n            case VerificationError.CODE_EXPIRED:\n              errorMessage = 'Verification code has expired. Please request a new one.';\n              break;\n            case VerificationError.CODE_INVALID:\n              errorMessage = 'Invalid verification code. Please check and try again.';\n              break;\n            case VerificationError.TOO_MANY_ATTEMPTS:\n              errorMessage = 'Too many verification attempts. Please request a new code.';\n              statusCode = 429;\n              break;\n            case VerificationError.USER_NOT_FOUND:\n              errorMessage = 'User not found. Please sign up first.';\n              statusCode = 404;\n              break;\n            case VerificationError.ALREADY_VERIFIED:\n              errorMessage = 'Email is already verified. You can sign in to your account.';\n              return NextResponse.json({\n                success: true,\n                message: errorMessage,\n                redirectTo: '/auth/signin'\n              });\n            default:\n              errorMessage = 'Verification failed. Please try again.';\n          }\n          \n          console.log(`Email verification failed for ${email}: ${error.code} - ${errorMessage}`);\n          \n          return NextResponse.json(\n            { \n              error: errorMessage,\n              code: error.code\n            },\n            { status: statusCode }\n          );\n        }\n        \n        // Log unexpected errors\n        console.error('Unexpected error during email verification:', error);\n        \n        return NextResponse.json(\n          { error: 'Internal server error' },\n          { status: 500 }\n        );\n      }\n      \n    } catch (error) {\n      console.error('Email verification endpoint error:', error);\n      \n      return NextResponse.json(\n        { error: 'Internal server error' },\n        { status: 500 }\n      );\n    }\n  });\n}"],
      names: ["POST", "verifyEmailSchema", "z", "object", "email", "string", "code", "length", "regex", "request", "withVerificationRateLimit", "req", "body", "_parsedBody", "json", "validation", "safeParse", "success", "NextResponse", "error", "details", "issues", "map", "issue", "field", "path", "join", "message", "status", "data", "isValid", "emailVerificationCodeService", "validateCode", "console", "log", "redirectTo", "VerificationCodeError", "VerificationError", "CODE_INVALID", "incrementAttempts", "incrementError", "errorMessage", "statusCode", "CODE_EXPIRED", "TOO_MANY_ATTEMPTS", "USER_NOT_FOUND", "ALREADY_VERIFIED"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "8cd6aadd9c76b10bcb2c8819063b15c0c5cb9966"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1fquel92zb = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1fquel92zb();
cov_1fquel92zb().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_1fquel92zb().s[1]++;
Object.defineProperty(exports, "POST", {
  enumerable: true,
  get: function () {
    /* istanbul ignore next */
    cov_1fquel92zb().f[0]++;
    cov_1fquel92zb().s[2]++;
    return POST;
  }
});
const _server =
/* istanbul ignore next */
(cov_1fquel92zb().s[3]++, require("next/server"));
const _zod =
/* istanbul ignore next */
(cov_1fquel92zb().s[4]++, require("zod"));
const _emailverificationcodeservice =
/* istanbul ignore next */
(cov_1fquel92zb().s[5]++, require("../../../../lib/services/email-verification-code-service"));
const _emailverificationmiddleware =
/* istanbul ignore next */
(cov_1fquel92zb().s[6]++, require("../../../../lib/auth/email-verification-middleware"));
// Validation schema for email verification request
const verifyEmailSchema =
/* istanbul ignore next */
(cov_1fquel92zb().s[7]++, _zod.z.object({
  email: _zod.z.string().email('Invalid email address'),
  code: _zod.z.string().length(6, 'Verification code must be 6 digits').regex(/^\d{6}$/, 'Verification code must contain only digits')
}));
async function POST(request) {
  /* istanbul ignore next */
  cov_1fquel92zb().f[1]++;
  cov_1fquel92zb().s[8]++;
  return (0, _emailverificationmiddleware.withVerificationRateLimit)(request, async req => {
    /* istanbul ignore next */
    cov_1fquel92zb().f[2]++;
    // Extract parsed body from middleware
    const body =
    /* istanbul ignore next */
    (cov_1fquel92zb().s[9]++,
    /* istanbul ignore next */
    (cov_1fquel92zb().b[0][0]++, req._parsedBody) ||
    /* istanbul ignore next */
    (cov_1fquel92zb().b[0][1]++, await req.json()));
    /* istanbul ignore next */
    cov_1fquel92zb().s[10]++;
    try {
      // Validate input
      const validation =
      /* istanbul ignore next */
      (cov_1fquel92zb().s[11]++, verifyEmailSchema.safeParse(body));
      /* istanbul ignore next */
      cov_1fquel92zb().s[12]++;
      if (!validation.success) {
        /* istanbul ignore next */
        cov_1fquel92zb().b[1][0]++;
        cov_1fquel92zb().s[13]++;
        return _server.NextResponse.json({
          error: 'Validation failed',
          details: validation.error.issues.map(issue => {
            /* istanbul ignore next */
            cov_1fquel92zb().f[3]++;
            cov_1fquel92zb().s[14]++;
            return {
              field: issue.path.join('.'),
              message: issue.message
            };
          })
        }, {
          status: 400
        });
      } else
      /* istanbul ignore next */
      {
        cov_1fquel92zb().b[1][1]++;
      }
      const {
        email,
        code
      } =
      /* istanbul ignore next */
      (cov_1fquel92zb().s[15]++, validation.data);
      /* istanbul ignore next */
      cov_1fquel92zb().s[16]++;
      try {
        // Validate the verification code
        const isValid =
        /* istanbul ignore next */
        (cov_1fquel92zb().s[17]++, await _emailverificationcodeservice.emailVerificationCodeService.validateCode(email, code));
        /* istanbul ignore next */
        cov_1fquel92zb().s[18]++;
        if (isValid) {
          /* istanbul ignore next */
          cov_1fquel92zb().b[2][0]++;
          cov_1fquel92zb().s[19]++;
          console.log(`Email verification successful for ${email}`);
          /* istanbul ignore next */
          cov_1fquel92zb().s[20]++;
          return _server.NextResponse.json({
            success: true,
            message: 'Email verified successfully! You can now access your account.',
            redirectTo: '/dashboard'
          });
        } else
        /* istanbul ignore next */
        {
          cov_1fquel92zb().b[2][1]++;
        }
        // This shouldn't happen if validateCode works correctly, but just in case
        cov_1fquel92zb().s[21]++;
        return _server.NextResponse.json({
          error: 'Verification failed'
        }, {
          status: 400
        });
      } catch (error) {
        /* istanbul ignore next */
        cov_1fquel92zb().s[22]++;
        if (error instanceof _emailverificationcodeservice.VerificationCodeError) {
          /* istanbul ignore next */
          cov_1fquel92zb().b[3][0]++;
          cov_1fquel92zb().s[23]++;
          // Increment attempts for invalid codes (but not for other errors)
          if (error.code === _emailverificationcodeservice.VerificationError.CODE_INVALID) {
            /* istanbul ignore next */
            cov_1fquel92zb().b[4][0]++;
            cov_1fquel92zb().s[24]++;
            try {
              /* istanbul ignore next */
              cov_1fquel92zb().s[25]++;
              await _emailverificationcodeservice.emailVerificationCodeService.incrementAttempts(email, code);
            } catch (incrementError) {
              /* istanbul ignore next */
              cov_1fquel92zb().s[26]++;
              console.error('Failed to increment verification attempts:', incrementError);
            }
          } else
          /* istanbul ignore next */
          {
            cov_1fquel92zb().b[4][1]++;
          }
          // Map verification errors to user-friendly messages
          let errorMessage;
          let statusCode =
          /* istanbul ignore next */
          (cov_1fquel92zb().s[27]++, 400);
          /* istanbul ignore next */
          cov_1fquel92zb().s[28]++;
          switch (error.code) {
            case _emailverificationcodeservice.VerificationError.CODE_EXPIRED:
              /* istanbul ignore next */
              cov_1fquel92zb().b[5][0]++;
              cov_1fquel92zb().s[29]++;
              errorMessage = 'Verification code has expired. Please request a new one.';
              /* istanbul ignore next */
              cov_1fquel92zb().s[30]++;
              break;
            case _emailverificationcodeservice.VerificationError.CODE_INVALID:
              /* istanbul ignore next */
              cov_1fquel92zb().b[5][1]++;
              cov_1fquel92zb().s[31]++;
              errorMessage = 'Invalid verification code. Please check and try again.';
              /* istanbul ignore next */
              cov_1fquel92zb().s[32]++;
              break;
            case _emailverificationcodeservice.VerificationError.TOO_MANY_ATTEMPTS:
              /* istanbul ignore next */
              cov_1fquel92zb().b[5][2]++;
              cov_1fquel92zb().s[33]++;
              errorMessage = 'Too many verification attempts. Please request a new code.';
              /* istanbul ignore next */
              cov_1fquel92zb().s[34]++;
              statusCode = 429;
              /* istanbul ignore next */
              cov_1fquel92zb().s[35]++;
              break;
            case _emailverificationcodeservice.VerificationError.USER_NOT_FOUND:
              /* istanbul ignore next */
              cov_1fquel92zb().b[5][3]++;
              cov_1fquel92zb().s[36]++;
              errorMessage = 'User not found. Please sign up first.';
              /* istanbul ignore next */
              cov_1fquel92zb().s[37]++;
              statusCode = 404;
              /* istanbul ignore next */
              cov_1fquel92zb().s[38]++;
              break;
            case _emailverificationcodeservice.VerificationError.ALREADY_VERIFIED:
              /* istanbul ignore next */
              cov_1fquel92zb().b[5][4]++;
              cov_1fquel92zb().s[39]++;
              errorMessage = 'Email is already verified. You can sign in to your account.';
              /* istanbul ignore next */
              cov_1fquel92zb().s[40]++;
              return _server.NextResponse.json({
                success: true,
                message: errorMessage,
                redirectTo: '/auth/signin'
              });
            default:
              /* istanbul ignore next */
              cov_1fquel92zb().b[5][5]++;
              cov_1fquel92zb().s[41]++;
              errorMessage = 'Verification failed. Please try again.';
          }
          /* istanbul ignore next */
          cov_1fquel92zb().s[42]++;
          console.log(`Email verification failed for ${email}: ${error.code} - ${errorMessage}`);
          /* istanbul ignore next */
          cov_1fquel92zb().s[43]++;
          return _server.NextResponse.json({
            error: errorMessage,
            code: error.code
          }, {
            status: statusCode
          });
        } else
        /* istanbul ignore next */
        {
          cov_1fquel92zb().b[3][1]++;
        }
        // Log unexpected errors
        cov_1fquel92zb().s[44]++;
        console.error('Unexpected error during email verification:', error);
        /* istanbul ignore next */
        cov_1fquel92zb().s[45]++;
        return _server.NextResponse.json({
          error: 'Internal server error'
        }, {
          status: 500
        });
      }
    } catch (error) {
      /* istanbul ignore next */
      cov_1fquel92zb().s[46]++;
      console.error('Email verification endpoint error:', error);
      /* istanbul ignore next */
      cov_1fquel92zb().s[47]++;
      return _server.NextResponse.json({
        error: 'Internal server error'
      }, {
        status: 500
      });
    }
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWZxdWVsOTJ6YiIsImFjdHVhbENvdmVyYWdlIiwicyIsIlBPU1QiLCJ2ZXJpZnlFbWFpbFNjaGVtYSIsIl96b2QiLCJ6Iiwib2JqZWN0IiwiZW1haWwiLCJzdHJpbmciLCJjb2RlIiwibGVuZ3RoIiwicmVnZXgiLCJyZXF1ZXN0IiwiZiIsIl9lbWFpbHZlcmlmaWNhdGlvbm1pZGRsZXdhcmUiLCJ3aXRoVmVyaWZpY2F0aW9uUmF0ZUxpbWl0IiwicmVxIiwiYm9keSIsImIiLCJfcGFyc2VkQm9keSIsImpzb24iLCJ2YWxpZGF0aW9uIiwic2FmZVBhcnNlIiwic3VjY2VzcyIsIl9zZXJ2ZXIiLCJOZXh0UmVzcG9uc2UiLCJlcnJvciIsImRldGFpbHMiLCJpc3N1ZXMiLCJtYXAiLCJpc3N1ZSIsImZpZWxkIiwicGF0aCIsImpvaW4iLCJtZXNzYWdlIiwic3RhdHVzIiwiZGF0YSIsImlzVmFsaWQiLCJfZW1haWx2ZXJpZmljYXRpb25jb2Rlc2VydmljZSIsImVtYWlsVmVyaWZpY2F0aW9uQ29kZVNlcnZpY2UiLCJ2YWxpZGF0ZUNvZGUiLCJjb25zb2xlIiwibG9nIiwicmVkaXJlY3RUbyIsIlZlcmlmaWNhdGlvbkNvZGVFcnJvciIsIlZlcmlmaWNhdGlvbkVycm9yIiwiQ09ERV9JTlZBTElEIiwiaW5jcmVtZW50QXR0ZW1wdHMiLCJpbmNyZW1lbnRFcnJvciIsImVycm9yTWVzc2FnZSIsInN0YXR1c0NvZGUiLCJDT0RFX0VYUElSRUQiLCJUT09fTUFOWV9BVFRFTVBUUyIsIlVTRVJfTk9UX0ZPVU5EIiwiQUxSRUFEWV9WRVJJRklFRCJdLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdGVmYW5iZWtrZXIvcHJvamVjdHMvZmFuY3ktcGxhbnRpZXMvc3JjL2FwcC9hcGkvYXV0aC92ZXJpZnktZW1haWwvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgZW1haWxWZXJpZmljYXRpb25Db2RlU2VydmljZSwgVmVyaWZpY2F0aW9uQ29kZUVycm9yLCBWZXJpZmljYXRpb25FcnJvciB9IGZyb20gJ0AvbGliL3NlcnZpY2VzL2VtYWlsLXZlcmlmaWNhdGlvbi1jb2RlLXNlcnZpY2UnO1xuaW1wb3J0IHsgd2l0aFZlcmlmaWNhdGlvblJhdGVMaW1pdCB9IGZyb20gJ0AvbGliL2F1dGgvZW1haWwtdmVyaWZpY2F0aW9uLW1pZGRsZXdhcmUnO1xuXG4vLyBWYWxpZGF0aW9uIHNjaGVtYSBmb3IgZW1haWwgdmVyaWZpY2F0aW9uIHJlcXVlc3RcbmNvbnN0IHZlcmlmeUVtYWlsU2NoZW1hID0gei5vYmplY3Qoe1xuICBlbWFpbDogei5zdHJpbmcoKS5lbWFpbCgnSW52YWxpZCBlbWFpbCBhZGRyZXNzJyksXG4gIGNvZGU6IHouc3RyaW5nKCkubGVuZ3RoKDYsICdWZXJpZmljYXRpb24gY29kZSBtdXN0IGJlIDYgZGlnaXRzJykucmVnZXgoL15cXGR7Nn0kLywgJ1ZlcmlmaWNhdGlvbiBjb2RlIG11c3QgY29udGFpbiBvbmx5IGRpZ2l0cycpLFxufSk7XG5cbi8vIE5vdGU6IFJhdGUgbGltaXRpbmcgaXMgaGFuZGxlZCBieSB0aGUgd2l0aFZlcmlmaWNhdGlvblJhdGVMaW1pdCBtaWRkbGV3YXJlIHdpdGggZW5oYW5jZWQgZW1haWwgdmVyaWZpY2F0aW9uIGxpbWl0c1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICByZXR1cm4gd2l0aFZlcmlmaWNhdGlvblJhdGVMaW1pdChyZXF1ZXN0LCBhc3luYyAocmVxKSA9PiB7XG4gICAgLy8gRXh0cmFjdCBwYXJzZWQgYm9keSBmcm9tIG1pZGRsZXdhcmVcbiAgICBjb25zdCBib2R5ID0gKHJlcSBhcyBhbnkpLl9wYXJzZWRCb2R5IHx8IGF3YWl0IHJlcS5qc29uKCk7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFZhbGlkYXRlIGlucHV0XG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gdmVyaWZ5RW1haWxTY2hlbWEuc2FmZVBhcnNlKGJvZHkpO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgXG4gICAgICAgICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gZmFpbGVkJywgXG4gICAgICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uLmVycm9yLmlzc3Vlcy5tYXAoaXNzdWUgPT4gKHtcbiAgICAgICAgICAgICAgZmllbGQ6IGlzc3VlLnBhdGguam9pbignLicpLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBpc3N1ZS5tZXNzYWdlXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB7IGVtYWlsLCBjb2RlIH0gPSB2YWxpZGF0aW9uLmRhdGE7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFZhbGlkYXRlIHRoZSB2ZXJpZmljYXRpb24gY29kZVxuICAgICAgICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgZW1haWxWZXJpZmljYXRpb25Db2RlU2VydmljZS52YWxpZGF0ZUNvZGUoZW1haWwsIGNvZGUpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgRW1haWwgdmVyaWZpY2F0aW9uIHN1Y2Nlc3NmdWwgZm9yICR7ZW1haWx9YCk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiAnRW1haWwgdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5ISBZb3UgY2FuIG5vdyBhY2Nlc3MgeW91ciBhY2NvdW50LicsXG4gICAgICAgICAgICByZWRpcmVjdFRvOiAnL2Rhc2hib2FyZCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVGhpcyBzaG91bGRuJ3QgaGFwcGVuIGlmIHZhbGlkYXRlQ29kZSB3b3JrcyBjb3JyZWN0bHksIGJ1dCBqdXN0IGluIGNhc2VcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgZXJyb3I6ICdWZXJpZmljYXRpb24gZmFpbGVkJyB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFZlcmlmaWNhdGlvbkNvZGVFcnJvcikge1xuICAgICAgICAgIC8vIEluY3JlbWVudCBhdHRlbXB0cyBmb3IgaW52YWxpZCBjb2RlcyAoYnV0IG5vdCBmb3Igb3RoZXIgZXJyb3JzKVxuICAgICAgICAgIGlmIChlcnJvci5jb2RlID09PSBWZXJpZmljYXRpb25FcnJvci5DT0RFX0lOVkFMSUQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGF3YWl0IGVtYWlsVmVyaWZpY2F0aW9uQ29kZVNlcnZpY2UuaW5jcmVtZW50QXR0ZW1wdHMoZW1haWwsIGNvZGUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoaW5jcmVtZW50RXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGluY3JlbWVudCB2ZXJpZmljYXRpb24gYXR0ZW1wdHM6JywgaW5jcmVtZW50RXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBNYXAgdmVyaWZpY2F0aW9uIGVycm9ycyB0byB1c2VyLWZyaWVuZGx5IG1lc3NhZ2VzXG4gICAgICAgICAgbGV0IGVycm9yTWVzc2FnZTogc3RyaW5nO1xuICAgICAgICAgIGxldCBzdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICAgIFxuICAgICAgICAgIHN3aXRjaCAoZXJyb3IuY29kZSkge1xuICAgICAgICAgICAgY2FzZSBWZXJpZmljYXRpb25FcnJvci5DT0RFX0VYUElSRUQ6XG4gICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICdWZXJpZmljYXRpb24gY29kZSBoYXMgZXhwaXJlZC4gUGxlYXNlIHJlcXVlc3QgYSBuZXcgb25lLic7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBWZXJpZmljYXRpb25FcnJvci5DT0RFX0lOVkFMSUQ6XG4gICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICdJbnZhbGlkIHZlcmlmaWNhdGlvbiBjb2RlLiBQbGVhc2UgY2hlY2sgYW5kIHRyeSBhZ2Fpbi4nO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVmVyaWZpY2F0aW9uRXJyb3IuVE9PX01BTllfQVRURU1QVFM6XG4gICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICdUb28gbWFueSB2ZXJpZmljYXRpb24gYXR0ZW1wdHMuIFBsZWFzZSByZXF1ZXN0IGEgbmV3IGNvZGUuJztcbiAgICAgICAgICAgICAgc3RhdHVzQ29kZSA9IDQyOTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFZlcmlmaWNhdGlvbkVycm9yLlVTRVJfTk9UX0ZPVU5EOlxuICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAnVXNlciBub3QgZm91bmQuIFBsZWFzZSBzaWduIHVwIGZpcnN0Lic7XG4gICAgICAgICAgICAgIHN0YXR1c0NvZGUgPSA0MDQ7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBWZXJpZmljYXRpb25FcnJvci5BTFJFQURZX1ZFUklGSUVEOlxuICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAnRW1haWwgaXMgYWxyZWFkeSB2ZXJpZmllZC4gWW91IGNhbiBzaWduIGluIHRvIHlvdXIgYWNjb3VudC4nO1xuICAgICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86ICcvYXV0aC9zaWduaW4nXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gJ1ZlcmlmaWNhdGlvbiBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uJztcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coYEVtYWlsIHZlcmlmaWNhdGlvbiBmYWlsZWQgZm9yICR7ZW1haWx9OiAke2Vycm9yLmNvZGV9IC0gJHtlcnJvck1lc3NhZ2V9YCk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgICAgY29kZTogZXJyb3IuY29kZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgc3RhdHVzOiBzdGF0dXNDb2RlIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBMb2cgdW5leHBlY3RlZCBlcnJvcnNcbiAgICAgICAgY29uc29sZS5lcnJvcignVW5leHBlY3RlZCBlcnJvciBkdXJpbmcgZW1haWwgdmVyaWZpY2F0aW9uOicsIGVycm9yKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0VtYWlsIHZlcmlmaWNhdGlvbiBlbmRwb2ludCBlcnJvcjonLCBlcnJvcik7XG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cbiAgfSk7XG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QUFuRCxjQUFBLEdBQUFFLENBQUE7Y0FDYjtZQUNGLEtBQUtxQyw2QkFBQSxDQUFBTyxpQkFBaUIsQ0FBQ1MsZ0JBQWdCO2NBQUE7Y0FBQXZELGNBQUEsR0FBQW1CLENBQUE7Y0FBQW5CLGNBQUEsR0FBQUUsQ0FBQTtjQUNyQ2dELFlBQUEsR0FBZTtjQUFBO2NBQUFsRCxjQUFBLEdBQUFFLENBQUE7Y0FDZixPQUFPdUIsT0FBQSxDQUFBQyxZQUFZLENBQUNMLElBQUksQ0FBQztnQkFDdkJHLE9BQUEsRUFBUztnQkFDVFcsT0FBQSxFQUFTZSxZQUFBO2dCQUNUTixVQUFBLEVBQVk7Y0FDZDtZQUNGO2NBQUE7Y0FBQTVDLGNBQUEsR0FBQW1CLENBQUE7Y0FBQW5CLGNBQUEsR0FBQUUsQ0FBQTtjQUNFZ0QsWUFBQSxHQUFlO1VBQ25CO1VBQUE7VUFBQWxELGNBQUEsR0FBQUUsQ0FBQTtVQUVBd0MsT0FBQSxDQUFRQyxHQUFHLENBQUMsaUNBQWlDbkMsS0FBQSxLQUFVbUIsS0FBQSxDQUFNakIsSUFBSSxNQUFNd0MsWUFBQSxFQUFjO1VBQUE7VUFBQWxELGNBQUEsR0FBQUUsQ0FBQTtVQUVyRixPQUFPdUIsT0FBQSxDQUFBQyxZQUFZLENBQUNMLElBQUksQ0FDdEI7WUFDRU0sS0FBQSxFQUFPdUIsWUFBQTtZQUNQeEMsSUFBQSxFQUFNaUIsS0FBQSxDQUFNakI7VUFDZCxHQUNBO1lBQUUwQixNQUFBLEVBQVFlO1VBQVc7UUFFekI7UUFBQTtRQUFBO1VBQUFuRCxjQUFBLEdBQUFtQixDQUFBO1FBQUE7UUFFQTtRQUFBbkIsY0FBQSxHQUFBRSxDQUFBO1FBQ0F3QyxPQUFBLENBQVFmLEtBQUssQ0FBQywrQ0FBK0NBLEtBQUE7UUFBQTtRQUFBM0IsY0FBQSxHQUFBRSxDQUFBO1FBRTdELE9BQU91QixPQUFBLENBQUFDLFlBQVksQ0FBQ0wsSUFBSSxDQUN0QjtVQUFFTSxLQUFBLEVBQU87UUFBd0IsR0FDakM7VUFBRVMsTUFBQSxFQUFRO1FBQUk7TUFFbEI7SUFFRixFQUFFLE9BQU9ULEtBQUEsRUFBTztNQUFBO01BQUEzQixjQUFBLEdBQUFFLENBQUE7TUFDZHdDLE9BQUEsQ0FBUWYsS0FBSyxDQUFDLHNDQUFzQ0EsS0FBQTtNQUFBO01BQUEzQixjQUFBLEdBQUFFLENBQUE7TUFFcEQsT0FBT3VCLE9BQUEsQ0FBQUMsWUFBWSxDQUFDTCxJQUFJLENBQ3RCO1FBQUVNLEtBQUEsRUFBTztNQUF3QixHQUNqQztRQUFFUyxNQUFBLEVBQVE7TUFBSTtJQUVsQjtFQUNGO0FBQ0YiLCJpZ25vcmVMaXN0IjpbXX0=