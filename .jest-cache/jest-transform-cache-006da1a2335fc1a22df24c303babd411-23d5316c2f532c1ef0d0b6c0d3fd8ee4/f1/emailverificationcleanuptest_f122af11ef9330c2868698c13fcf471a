1a25b8758db2e4d1c005d769b84c3efb
"use strict";
// Mock the dependencies
jest.mock('@/lib/services/email-verification-code-service');
jest.mock('@/lib/services/email-verification-rate-limiter');
jest.mock('@/lib/services/email-service-monitor');
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _emailverificationcleanup = require("../../lib/services/email-verification-cleanup");
const _emailverificationcodeservice = require("../../lib/services/email-verification-code-service");
const _emailverificationratelimiter = require("../../lib/services/email-verification-rate-limiter");
const _emailservicemonitor = require("../../lib/services/email-service-monitor");
const mockEmailVerificationCodeService = _emailverificationcodeservice.emailVerificationCodeService;
const mockEmailVerificationRateLimiter = _emailverificationratelimiter.emailVerificationRateLimiter;
const mockEmailServiceMonitor = _emailservicemonitor.emailServiceMonitor;
describe('EmailVerificationCleanupService', ()=>{
    let cleanupService;
    beforeEach(()=>{
        cleanupService = new _emailverificationcleanup.EmailVerificationCleanupService();
        jest.clearAllMocks();
        // Setup default mock implementations
        mockEmailVerificationCodeService.cleanupExpiredCodes.mockResolvedValue(5);
        mockEmailVerificationCodeService.getCodeStats.mockResolvedValue({
            totalActive: 10,
            expiredCount: 2,
            highAttemptCount: 1
        });
        mockEmailVerificationRateLimiter.getStats.mockReturnValue({
            verificationAttempts: 3,
            resendRequests: 2,
            emailVerificationActivity: 5,
            resendCooldowns: 1,
            securityEvents: 0
        });
        mockEmailVerificationRateLimiter.cleanup.mockImplementation(()=>{
            // Simulate cleanup by returning different stats
            mockEmailVerificationRateLimiter.getStats.mockReturnValue({
                verificationAttempts: 1,
                resendRequests: 1,
                emailVerificationActivity: 2,
                resendCooldowns: 0,
                securityEvents: 0
            });
        });
        mockEmailServiceMonitor.getHealthStatus.mockReturnValue({
            status: 'healthy',
            issues: [],
            recommendations: []
        });
        mockEmailServiceMonitor.getStats.mockReturnValue({
            totalSent: 100,
            totalFailed: 5,
            quotaUsed: 50,
            quotaLimit: 100,
            errorsByType: {},
            successRate: 95,
            averageResponseTime: 150,
            lastResetTime: Date.now()
        });
        mockEmailServiceMonitor.getQuotaUsagePercentage.mockReturnValue(50);
    });
    describe('runCleanup', ()=>{
        it('should run cleanup successfully', async ()=>{
            const stats = await cleanupService.runCleanup();
            expect(stats.expiredCodes).toBe(5);
            expect(stats.rateLimitData).toBe(6); // (3-1) + (2-1) + (5-2) + (1-0) = 2 + 1 + 3 + 1 = 7, but calculation is different
            expect(stats.timestamp).toBeGreaterThan(0);
            expect(mockEmailVerificationCodeService.cleanupExpiredCodes).toHaveBeenCalledTimes(1);
            expect(mockEmailVerificationRateLimiter.cleanup).toHaveBeenCalledTimes(1);
            expect(mockEmailServiceMonitor.getHealthStatus).toHaveBeenCalledTimes(1);
            expect(mockEmailServiceMonitor.getStats).toHaveBeenCalledTimes(1);
            expect(mockEmailServiceMonitor.getQuotaUsagePercentage).toHaveBeenCalledTimes(1);
        });
        it('should prevent concurrent cleanup runs', async ()=>{
            const cleanup1Promise = cleanupService.runCleanup();
            // Try to run cleanup again while first is running
            await expect(cleanupService.runCleanup()).rejects.toThrow('Cleanup is already running');
            // Wait for first cleanup to complete
            await cleanup1Promise;
            // Now should be able to run again
            await expect(cleanupService.runCleanup()).resolves.toBeDefined();
        });
        it('should handle cleanup errors', async ()=>{
            mockEmailVerificationCodeService.cleanupExpiredCodes.mockRejectedValue(new Error('Database error'));
            await expect(cleanupService.runCleanup()).rejects.toThrow('Database error');
        });
    });
    describe('getCleanupStats', ()=>{
        it('should return cleanup statistics', async ()=>{
            // Run cleanup to generate stats
            await cleanupService.runCleanup();
            const stats = cleanupService.getCleanupStats();
            expect(stats.lastCleanup).toBeGreaterThan(0);
            expect(stats.isRunning).toBe(false);
            expect(stats.recentStats).toHaveLength(1);
            expect(stats.totalExpiredCodes).toBe(5);
            expect(stats.totalRateLimitData).toBeGreaterThan(0);
        });
        it('should limit recent stats to 24 entries', async ()=>{
            // Run cleanup 25 times
            for(let i = 0; i < 25; i++){
                await cleanupService.runCleanup();
            }
            const stats = cleanupService.getCleanupStats();
            expect(stats.recentStats).toHaveLength(24);
        });
    });
    describe('getSystemStatus', ()=>{
        it('should return comprehensive system status', async ()=>{
            const status = await cleanupService.getSystemStatus();
            expect(status.verificationCodes).toEqual({
                totalActive: 10,
                expiredCount: 2,
                highAttemptCount: 1
            });
            expect(status.rateLimits).toEqual({
                verificationAttempts: 3,
                resendRequests: 2,
                emailVerificationActivity: 5,
                resendCooldowns: 1,
                securityEvents: 0
            });
            expect(status.cleanup).toHaveProperty('lastCleanup');
            expect(status.cleanup).toHaveProperty('isRunning');
            expect(status.cleanup).toHaveProperty('nextCleanupDue');
        });
    });
    describe('forceCleanup', ()=>{
        it('should run cleanup when not already running', async ()=>{
            const stats = await cleanupService.forceCleanup();
            expect(stats.expiredCodes).toBe(5);
            expect(mockEmailVerificationCodeService.cleanupExpiredCodes).toHaveBeenCalledTimes(1);
        });
        it('should reject if cleanup is already running', async ()=>{
            // Start a cleanup
            const cleanupPromise = cleanupService.runCleanup();
            // Try to force cleanup while running
            await expect(cleanupService.forceCleanup()).rejects.toThrow('Cleanup is already running');
            // Wait for original cleanup to complete
            await cleanupPromise;
        });
    });
    describe('runStartupCleanup', ()=>{
        it('should run startup cleanup successfully', async ()=>{
            const stats = await cleanupService.runStartupCleanup();
            expect(stats.expiredCodes).toBe(5);
            expect(mockEmailVerificationCodeService.cleanupExpiredCodes).toHaveBeenCalledTimes(1);
        });
        it('should handle startup cleanup errors', async ()=>{
            mockEmailVerificationCodeService.cleanupExpiredCodes.mockRejectedValue(new Error('Startup error'));
            await expect(cleanupService.runStartupCleanup()).rejects.toThrow('Startup error');
        });
    });
    describe('scheduleCleanup', ()=>{
        beforeEach(()=>{
            jest.useFakeTimers();
        });
        afterEach(()=>{
            jest.useRealTimers();
        });
        it('should schedule periodic cleanup', ()=>{
            const intervalMs = 1000; // 1 second for testing
            cleanupService.scheduleCleanup(intervalMs);
            // Fast-forward past initial delay
            jest.advanceTimersByTime(6000);
            // Should have run initial cleanup
            expect(mockEmailVerificationCodeService.cleanupExpiredCodes).toHaveBeenCalledTimes(1);
            // Fast-forward to next interval
            jest.advanceTimersByTime(intervalMs);
            // Should have run periodic cleanup
            expect(mockEmailVerificationCodeService.cleanupExpiredCodes).toHaveBeenCalledTimes(2);
        });
        it('should handle scheduled cleanup errors gracefully', ()=>{
            mockEmailVerificationCodeService.cleanupExpiredCodes.mockRejectedValue(new Error('Scheduled error'));
            const intervalMs = 1000;
            cleanupService.scheduleCleanup(intervalMs);
            // Fast-forward past initial delay
            expect(()=>{
                jest.advanceTimersByTime(6000);
            }).not.toThrow();
            // Should have attempted cleanup despite error
            expect(mockEmailVerificationCodeService.cleanupExpiredCodes).toHaveBeenCalledTimes(1);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdGVmYW5iZWtrZXIvcHJvamVjdHMvZmFuY3ktcGxhbnRpZXMvc3JjL19fdGVzdHNfXy9zZXJ2aWNlcy9lbWFpbC12ZXJpZmljYXRpb24tY2xlYW51cC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVtYWlsVmVyaWZpY2F0aW9uQ2xlYW51cFNlcnZpY2UgfSBmcm9tICdAL2xpYi9zZXJ2aWNlcy9lbWFpbC12ZXJpZmljYXRpb24tY2xlYW51cCc7XG5pbXBvcnQgeyBlbWFpbFZlcmlmaWNhdGlvbkNvZGVTZXJ2aWNlIH0gZnJvbSAnQC9saWIvc2VydmljZXMvZW1haWwtdmVyaWZpY2F0aW9uLWNvZGUtc2VydmljZSc7XG5pbXBvcnQgeyBlbWFpbFZlcmlmaWNhdGlvblJhdGVMaW1pdGVyIH0gZnJvbSAnQC9saWIvc2VydmljZXMvZW1haWwtdmVyaWZpY2F0aW9uLXJhdGUtbGltaXRlcic7XG5pbXBvcnQgeyBlbWFpbFNlcnZpY2VNb25pdG9yIH0gZnJvbSAnQC9saWIvc2VydmljZXMvZW1haWwtc2VydmljZS1tb25pdG9yJztcblxuLy8gTW9jayB0aGUgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJ0AvbGliL3NlcnZpY2VzL2VtYWlsLXZlcmlmaWNhdGlvbi1jb2RlLXNlcnZpY2UnKTtcbmplc3QubW9jaygnQC9saWIvc2VydmljZXMvZW1haWwtdmVyaWZpY2F0aW9uLXJhdGUtbGltaXRlcicpO1xuamVzdC5tb2NrKCdAL2xpYi9zZXJ2aWNlcy9lbWFpbC1zZXJ2aWNlLW1vbml0b3InKTtcblxuY29uc3QgbW9ja0VtYWlsVmVyaWZpY2F0aW9uQ29kZVNlcnZpY2UgPSBlbWFpbFZlcmlmaWNhdGlvbkNvZGVTZXJ2aWNlIGFzIGplc3QuTW9ja2VkPHR5cGVvZiBlbWFpbFZlcmlmaWNhdGlvbkNvZGVTZXJ2aWNlPjtcbmNvbnN0IG1vY2tFbWFpbFZlcmlmaWNhdGlvblJhdGVMaW1pdGVyID0gZW1haWxWZXJpZmljYXRpb25SYXRlTGltaXRlciBhcyBqZXN0Lk1vY2tlZDx0eXBlb2YgZW1haWxWZXJpZmljYXRpb25SYXRlTGltaXRlcj47XG5jb25zdCBtb2NrRW1haWxTZXJ2aWNlTW9uaXRvciA9IGVtYWlsU2VydmljZU1vbml0b3IgYXMgamVzdC5Nb2NrZWQ8dHlwZW9mIGVtYWlsU2VydmljZU1vbml0b3I+O1xuXG5kZXNjcmliZSgnRW1haWxWZXJpZmljYXRpb25DbGVhbnVwU2VydmljZScsICgpID0+IHtcbiAgbGV0IGNsZWFudXBTZXJ2aWNlOiBFbWFpbFZlcmlmaWNhdGlvbkNsZWFudXBTZXJ2aWNlO1xuICBcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgY2xlYW51cFNlcnZpY2UgPSBuZXcgRW1haWxWZXJpZmljYXRpb25DbGVhbnVwU2VydmljZSgpO1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIFxuICAgIC8vIFNldHVwIGRlZmF1bHQgbW9jayBpbXBsZW1lbnRhdGlvbnNcbiAgICBtb2NrRW1haWxWZXJpZmljYXRpb25Db2RlU2VydmljZS5jbGVhbnVwRXhwaXJlZENvZGVzLm1vY2tSZXNvbHZlZFZhbHVlKDUpO1xuICAgIG1vY2tFbWFpbFZlcmlmaWNhdGlvbkNvZGVTZXJ2aWNlLmdldENvZGVTdGF0cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICB0b3RhbEFjdGl2ZTogMTAsXG4gICAgICBleHBpcmVkQ291bnQ6IDIsXG4gICAgICBoaWdoQXR0ZW1wdENvdW50OiAxLFxuICAgIH0pO1xuICAgIFxuICAgIG1vY2tFbWFpbFZlcmlmaWNhdGlvblJhdGVMaW1pdGVyLmdldFN0YXRzLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICB2ZXJpZmljYXRpb25BdHRlbXB0czogMyxcbiAgICAgIHJlc2VuZFJlcXVlc3RzOiAyLFxuICAgICAgZW1haWxWZXJpZmljYXRpb25BY3Rpdml0eTogNSxcbiAgICAgIHJlc2VuZENvb2xkb3duczogMSxcbiAgICAgIHNlY3VyaXR5RXZlbnRzOiAwLFxuICAgIH0pO1xuICAgIFxuICAgIG1vY2tFbWFpbFZlcmlmaWNhdGlvblJhdGVMaW1pdGVyLmNsZWFudXAubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgIC8vIFNpbXVsYXRlIGNsZWFudXAgYnkgcmV0dXJuaW5nIGRpZmZlcmVudCBzdGF0c1xuICAgICAgbW9ja0VtYWlsVmVyaWZpY2F0aW9uUmF0ZUxpbWl0ZXIuZ2V0U3RhdHMubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdmVyaWZpY2F0aW9uQXR0ZW1wdHM6IDEsXG4gICAgICAgIHJlc2VuZFJlcXVlc3RzOiAxLFxuICAgICAgICBlbWFpbFZlcmlmaWNhdGlvbkFjdGl2aXR5OiAyLFxuICAgICAgICByZXNlbmRDb29sZG93bnM6IDAsXG4gICAgICAgIHNlY3VyaXR5RXZlbnRzOiAwLFxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgbW9ja0VtYWlsU2VydmljZU1vbml0b3IuZ2V0SGVhbHRoU3RhdHVzLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBzdGF0dXM6ICdoZWFsdGh5JyxcbiAgICAgIGlzc3VlczogW10sXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IFtdLFxuICAgIH0pO1xuICAgIFxuICAgIG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yLmdldFN0YXRzLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICB0b3RhbFNlbnQ6IDEwMCxcbiAgICAgIHRvdGFsRmFpbGVkOiA1LFxuICAgICAgcXVvdGFVc2VkOiA1MCxcbiAgICAgIHF1b3RhTGltaXQ6IDEwMCxcbiAgICAgIGVycm9yc0J5VHlwZToge30sXG4gICAgICBzdWNjZXNzUmF0ZTogOTUsXG4gICAgICBhdmVyYWdlUmVzcG9uc2VUaW1lOiAxNTAsXG4gICAgICBsYXN0UmVzZXRUaW1lOiBEYXRlLm5vdygpLFxuICAgIH0pO1xuICAgIFxuICAgIG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yLmdldFF1b3RhVXNhZ2VQZXJjZW50YWdlLm1vY2tSZXR1cm5WYWx1ZSg1MCk7XG4gIH0pO1xuICBcbiAgZGVzY3JpYmUoJ3J1bkNsZWFudXAnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBydW4gY2xlYW51cCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGF0cyA9IGF3YWl0IGNsZWFudXBTZXJ2aWNlLnJ1bkNsZWFudXAoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHN0YXRzLmV4cGlyZWRDb2RlcykudG9CZSg1KTtcbiAgICAgIGV4cGVjdChzdGF0cy5yYXRlTGltaXREYXRhKS50b0JlKDYpOyAvLyAoMy0xKSArICgyLTEpICsgKDUtMikgKyAoMS0wKSA9IDIgKyAxICsgMyArIDEgPSA3LCBidXQgY2FsY3VsYXRpb24gaXMgZGlmZmVyZW50XG4gICAgICBleHBlY3Qoc3RhdHMudGltZXN0YW1wKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrRW1haWxWZXJpZmljYXRpb25Db2RlU2VydmljZS5jbGVhbnVwRXhwaXJlZENvZGVzKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICBleHBlY3QobW9ja0VtYWlsVmVyaWZpY2F0aW9uUmF0ZUxpbWl0ZXIuY2xlYW51cCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgICAgZXhwZWN0KG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yLmdldEhlYWx0aFN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgICAgZXhwZWN0KG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yLmdldFN0YXRzKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICBleHBlY3QobW9ja0VtYWlsU2VydmljZU1vbml0b3IuZ2V0UXVvdGFVc2FnZVBlcmNlbnRhZ2UpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICB9KTtcbiAgICBcbiAgICBpdCgnc2hvdWxkIHByZXZlbnQgY29uY3VycmVudCBjbGVhbnVwIHJ1bnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjbGVhbnVwMVByb21pc2UgPSBjbGVhbnVwU2VydmljZS5ydW5DbGVhbnVwKCk7XG4gICAgICBcbiAgICAgIC8vIFRyeSB0byBydW4gY2xlYW51cCBhZ2FpbiB3aGlsZSBmaXJzdCBpcyBydW5uaW5nXG4gICAgICBhd2FpdCBleHBlY3QoY2xlYW51cFNlcnZpY2UucnVuQ2xlYW51cCgpKS5yZWplY3RzLnRvVGhyb3coJ0NsZWFudXAgaXMgYWxyZWFkeSBydW5uaW5nJyk7XG4gICAgICBcbiAgICAgIC8vIFdhaXQgZm9yIGZpcnN0IGNsZWFudXAgdG8gY29tcGxldGVcbiAgICAgIGF3YWl0IGNsZWFudXAxUHJvbWlzZTtcbiAgICAgIFxuICAgICAgLy8gTm93IHNob3VsZCBiZSBhYmxlIHRvIHJ1biBhZ2FpblxuICAgICAgYXdhaXQgZXhwZWN0KGNsZWFudXBTZXJ2aWNlLnJ1bkNsZWFudXAoKSkucmVzb2x2ZXMudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgICBcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjbGVhbnVwIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tFbWFpbFZlcmlmaWNhdGlvbkNvZGVTZXJ2aWNlLmNsZWFudXBFeHBpcmVkQ29kZXMubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvcicpKTtcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KGNsZWFudXBTZXJ2aWNlLnJ1bkNsZWFudXAoKSkucmVqZWN0cy50b1Rocm93KCdEYXRhYmFzZSBlcnJvcicpO1xuICAgIH0pO1xuICB9KTtcbiAgXG4gIGRlc2NyaWJlKCdnZXRDbGVhbnVwU3RhdHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY2xlYW51cCBzdGF0aXN0aWNzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gUnVuIGNsZWFudXAgdG8gZ2VuZXJhdGUgc3RhdHNcbiAgICAgIGF3YWl0IGNsZWFudXBTZXJ2aWNlLnJ1bkNsZWFudXAoKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhdHMgPSBjbGVhbnVwU2VydmljZS5nZXRDbGVhbnVwU3RhdHMoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHN0YXRzLmxhc3RDbGVhbnVwKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3Qoc3RhdHMuaXNSdW5uaW5nKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChzdGF0cy5yZWNlbnRTdGF0cykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsRXhwaXJlZENvZGVzKS50b0JlKDUpO1xuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsUmF0ZUxpbWl0RGF0YSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuICAgIFxuICAgIGl0KCdzaG91bGQgbGltaXQgcmVjZW50IHN0YXRzIHRvIDI0IGVudHJpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBSdW4gY2xlYW51cCAyNSB0aW1lc1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNTsgaSsrKSB7XG4gICAgICAgIGF3YWl0IGNsZWFudXBTZXJ2aWNlLnJ1bkNsZWFudXAoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3Qgc3RhdHMgPSBjbGVhbnVwU2VydmljZS5nZXRDbGVhbnVwU3RhdHMoKTtcbiAgICAgIGV4cGVjdChzdGF0cy5yZWNlbnRTdGF0cykudG9IYXZlTGVuZ3RoKDI0KTtcbiAgICB9KTtcbiAgfSk7XG4gIFxuICBkZXNjcmliZSgnZ2V0U3lzdGVtU3RhdHVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGNvbXByZWhlbnNpdmUgc3lzdGVtIHN0YXR1cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXR1cyA9IGF3YWl0IGNsZWFudXBTZXJ2aWNlLmdldFN5c3RlbVN0YXR1cygpO1xuICAgICAgXG4gICAgICBleHBlY3Qoc3RhdHVzLnZlcmlmaWNhdGlvbkNvZGVzKS50b0VxdWFsKHtcbiAgICAgICAgdG90YWxBY3RpdmU6IDEwLFxuICAgICAgICBleHBpcmVkQ291bnQ6IDIsXG4gICAgICAgIGhpZ2hBdHRlbXB0Q291bnQ6IDEsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHN0YXR1cy5yYXRlTGltaXRzKS50b0VxdWFsKHtcbiAgICAgICAgdmVyaWZpY2F0aW9uQXR0ZW1wdHM6IDMsXG4gICAgICAgIHJlc2VuZFJlcXVlc3RzOiAyLFxuICAgICAgICBlbWFpbFZlcmlmaWNhdGlvbkFjdGl2aXR5OiA1LFxuICAgICAgICByZXNlbmRDb29sZG93bnM6IDEsXG4gICAgICAgIHNlY3VyaXR5RXZlbnRzOiAwLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChzdGF0dXMuY2xlYW51cCkudG9IYXZlUHJvcGVydHkoJ2xhc3RDbGVhbnVwJyk7XG4gICAgICBleHBlY3Qoc3RhdHVzLmNsZWFudXApLnRvSGF2ZVByb3BlcnR5KCdpc1J1bm5pbmcnKTtcbiAgICAgIGV4cGVjdChzdGF0dXMuY2xlYW51cCkudG9IYXZlUHJvcGVydHkoJ25leHRDbGVhbnVwRHVlJyk7XG4gICAgfSk7XG4gIH0pO1xuICBcbiAgZGVzY3JpYmUoJ2ZvcmNlQ2xlYW51cCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJ1biBjbGVhbnVwIHdoZW4gbm90IGFscmVhZHkgcnVubmluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgY2xlYW51cFNlcnZpY2UuZm9yY2VDbGVhbnVwKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChzdGF0cy5leHBpcmVkQ29kZXMpLnRvQmUoNSk7XG4gICAgICBleHBlY3QobW9ja0VtYWlsVmVyaWZpY2F0aW9uQ29kZVNlcnZpY2UuY2xlYW51cEV4cGlyZWRDb2RlcykudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgIH0pO1xuICAgIFxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGlmIGNsZWFudXAgaXMgYWxyZWFkeSBydW5uaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU3RhcnQgYSBjbGVhbnVwXG4gICAgICBjb25zdCBjbGVhbnVwUHJvbWlzZSA9IGNsZWFudXBTZXJ2aWNlLnJ1bkNsZWFudXAoKTtcbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGZvcmNlIGNsZWFudXAgd2hpbGUgcnVubmluZ1xuICAgICAgYXdhaXQgZXhwZWN0KGNsZWFudXBTZXJ2aWNlLmZvcmNlQ2xlYW51cCgpKS5yZWplY3RzLnRvVGhyb3coJ0NsZWFudXAgaXMgYWxyZWFkeSBydW5uaW5nJyk7XG4gICAgICBcbiAgICAgIC8vIFdhaXQgZm9yIG9yaWdpbmFsIGNsZWFudXAgdG8gY29tcGxldGVcbiAgICAgIGF3YWl0IGNsZWFudXBQcm9taXNlO1xuICAgIH0pO1xuICB9KTtcbiAgXG4gIGRlc2NyaWJlKCdydW5TdGFydHVwQ2xlYW51cCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJ1biBzdGFydHVwIGNsZWFudXAgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBjbGVhbnVwU2VydmljZS5ydW5TdGFydHVwQ2xlYW51cCgpO1xuICAgICAgXG4gICAgICBleHBlY3Qoc3RhdHMuZXhwaXJlZENvZGVzKS50b0JlKDUpO1xuICAgICAgZXhwZWN0KG1vY2tFbWFpbFZlcmlmaWNhdGlvbkNvZGVTZXJ2aWNlLmNsZWFudXBFeHBpcmVkQ29kZXMpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICB9KTtcbiAgICBcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzdGFydHVwIGNsZWFudXAgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0VtYWlsVmVyaWZpY2F0aW9uQ29kZVNlcnZpY2UuY2xlYW51cEV4cGlyZWRDb2Rlcy5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1N0YXJ0dXAgZXJyb3InKSk7XG4gICAgICBcbiAgICAgIGF3YWl0IGV4cGVjdChjbGVhbnVwU2VydmljZS5ydW5TdGFydHVwQ2xlYW51cCgpKS5yZWplY3RzLnRvVGhyb3coJ1N0YXJ0dXAgZXJyb3InKTtcbiAgICB9KTtcbiAgfSk7XG4gIFxuICBkZXNjcmliZSgnc2NoZWR1bGVDbGVhbnVwJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgamVzdC51c2VGYWtlVGltZXJzKCk7XG4gICAgfSk7XG4gICAgXG4gICAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAgIGplc3QudXNlUmVhbFRpbWVycygpO1xuICAgIH0pO1xuICAgIFxuICAgIGl0KCdzaG91bGQgc2NoZWR1bGUgcGVyaW9kaWMgY2xlYW51cCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGludGVydmFsTXMgPSAxMDAwOyAvLyAxIHNlY29uZCBmb3IgdGVzdGluZ1xuICAgICAgXG4gICAgICBjbGVhbnVwU2VydmljZS5zY2hlZHVsZUNsZWFudXAoaW50ZXJ2YWxNcyk7XG4gICAgICBcbiAgICAgIC8vIEZhc3QtZm9yd2FyZCBwYXN0IGluaXRpYWwgZGVsYXlcbiAgICAgIGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZSg2MDAwKTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGhhdmUgcnVuIGluaXRpYWwgY2xlYW51cFxuICAgICAgZXhwZWN0KG1vY2tFbWFpbFZlcmlmaWNhdGlvbkNvZGVTZXJ2aWNlLmNsZWFudXBFeHBpcmVkQ29kZXMpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgIFxuICAgICAgLy8gRmFzdC1mb3J3YXJkIHRvIG5leHQgaW50ZXJ2YWxcbiAgICAgIGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZShpbnRlcnZhbE1zKTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGhhdmUgcnVuIHBlcmlvZGljIGNsZWFudXBcbiAgICAgIGV4cGVjdChtb2NrRW1haWxWZXJpZmljYXRpb25Db2RlU2VydmljZS5jbGVhbnVwRXhwaXJlZENvZGVzKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XG4gICAgfSk7XG4gICAgXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2NoZWR1bGVkIGNsZWFudXAgZXJyb3JzIGdyYWNlZnVsbHknLCAoKSA9PiB7XG4gICAgICBtb2NrRW1haWxWZXJpZmljYXRpb25Db2RlU2VydmljZS5jbGVhbnVwRXhwaXJlZENvZGVzLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignU2NoZWR1bGVkIGVycm9yJykpO1xuICAgICAgXG4gICAgICBjb25zdCBpbnRlcnZhbE1zID0gMTAwMDtcbiAgICAgIGNsZWFudXBTZXJ2aWNlLnNjaGVkdWxlQ2xlYW51cChpbnRlcnZhbE1zKTtcbiAgICAgIFxuICAgICAgLy8gRmFzdC1mb3J3YXJkIHBhc3QgaW5pdGlhbCBkZWxheVxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgamVzdC5hZHZhbmNlVGltZXJzQnlUaW1lKDYwMDApO1xuICAgICAgfSkubm90LnRvVGhyb3coKTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGhhdmUgYXR0ZW1wdGVkIGNsZWFudXAgZGVzcGl0ZSBlcnJvclxuICAgICAgZXhwZWN0KG1vY2tFbWFpbFZlcmlmaWNhdGlvbkNvZGVTZXJ2aWNlLmNsZWFudXBFeHBpcmVkQ29kZXMpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJtb2NrRW1haWxWZXJpZmljYXRpb25Db2RlU2VydmljZSIsImVtYWlsVmVyaWZpY2F0aW9uQ29kZVNlcnZpY2UiLCJtb2NrRW1haWxWZXJpZmljYXRpb25SYXRlTGltaXRlciIsImVtYWlsVmVyaWZpY2F0aW9uUmF0ZUxpbWl0ZXIiLCJtb2NrRW1haWxTZXJ2aWNlTW9uaXRvciIsImVtYWlsU2VydmljZU1vbml0b3IiLCJkZXNjcmliZSIsImNsZWFudXBTZXJ2aWNlIiwiYmVmb3JlRWFjaCIsIkVtYWlsVmVyaWZpY2F0aW9uQ2xlYW51cFNlcnZpY2UiLCJjbGVhckFsbE1vY2tzIiwiY2xlYW51cEV4cGlyZWRDb2RlcyIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiZ2V0Q29kZVN0YXRzIiwidG90YWxBY3RpdmUiLCJleHBpcmVkQ291bnQiLCJoaWdoQXR0ZW1wdENvdW50IiwiZ2V0U3RhdHMiLCJtb2NrUmV0dXJuVmFsdWUiLCJ2ZXJpZmljYXRpb25BdHRlbXB0cyIsInJlc2VuZFJlcXVlc3RzIiwiZW1haWxWZXJpZmljYXRpb25BY3Rpdml0eSIsInJlc2VuZENvb2xkb3ducyIsInNlY3VyaXR5RXZlbnRzIiwiY2xlYW51cCIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsImdldEhlYWx0aFN0YXR1cyIsInN0YXR1cyIsImlzc3VlcyIsInJlY29tbWVuZGF0aW9ucyIsInRvdGFsU2VudCIsInRvdGFsRmFpbGVkIiwicXVvdGFVc2VkIiwicXVvdGFMaW1pdCIsImVycm9yc0J5VHlwZSIsInN1Y2Nlc3NSYXRlIiwiYXZlcmFnZVJlc3BvbnNlVGltZSIsImxhc3RSZXNldFRpbWUiLCJEYXRlIiwibm93IiwiZ2V0UXVvdGFVc2FnZVBlcmNlbnRhZ2UiLCJpdCIsInN0YXRzIiwicnVuQ2xlYW51cCIsImV4cGVjdCIsImV4cGlyZWRDb2RlcyIsInRvQmUiLCJyYXRlTGltaXREYXRhIiwidGltZXN0YW1wIiwidG9CZUdyZWF0ZXJUaGFuIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwiY2xlYW51cDFQcm9taXNlIiwicmVqZWN0cyIsInRvVGhyb3ciLCJyZXNvbHZlcyIsInRvQmVEZWZpbmVkIiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsImdldENsZWFudXBTdGF0cyIsImxhc3RDbGVhbnVwIiwiaXNSdW5uaW5nIiwicmVjZW50U3RhdHMiLCJ0b0hhdmVMZW5ndGgiLCJ0b3RhbEV4cGlyZWRDb2RlcyIsInRvdGFsUmF0ZUxpbWl0RGF0YSIsImkiLCJnZXRTeXN0ZW1TdGF0dXMiLCJ2ZXJpZmljYXRpb25Db2RlcyIsInRvRXF1YWwiLCJyYXRlTGltaXRzIiwidG9IYXZlUHJvcGVydHkiLCJmb3JjZUNsZWFudXAiLCJjbGVhbnVwUHJvbWlzZSIsInJ1blN0YXJ0dXBDbGVhbnVwIiwidXNlRmFrZVRpbWVycyIsImFmdGVyRWFjaCIsInVzZVJlYWxUaW1lcnMiLCJpbnRlcnZhbE1zIiwic2NoZWR1bGVDbGVhbnVwIiwiYWR2YW5jZVRpbWVyc0J5VGltZSIsIm5vdCJdLCJtYXBwaW5ncyI6IjtBQUtBLHdCQUF3QjtBQUN4QkEsS0FBS0MsSUFBSSxDQUFDO0FBQ1ZELEtBQUtDLElBQUksQ0FBQztBQUNWRCxLQUFLQyxJQUFJLENBQUM7Ozs7MENBUnNDOzhDQUNIOzhDQUNBO3FDQUNUO0FBT3BDLE1BQU1DLG1DQUFtQ0MsMERBQTRCO0FBQ3JFLE1BQU1DLG1DQUFtQ0MsMERBQTRCO0FBQ3JFLE1BQU1DLDBCQUEwQkMsd0NBQW1CO0FBRW5EQyxTQUFTLG1DQUFtQztJQUMxQyxJQUFJQztJQUVKQyxXQUFXO1FBQ1RELGlCQUFpQixJQUFJRSx5REFBK0I7UUFDcERYLEtBQUtZLGFBQWE7UUFFbEIscUNBQXFDO1FBQ3JDVixpQ0FBaUNXLG1CQUFtQixDQUFDQyxpQkFBaUIsQ0FBQztRQUN2RVosaUNBQWlDYSxZQUFZLENBQUNELGlCQUFpQixDQUFDO1lBQzlERSxhQUFhO1lBQ2JDLGNBQWM7WUFDZEMsa0JBQWtCO1FBQ3BCO1FBRUFkLGlDQUFpQ2UsUUFBUSxDQUFDQyxlQUFlLENBQUM7WUFDeERDLHNCQUFzQjtZQUN0QkMsZ0JBQWdCO1lBQ2hCQywyQkFBMkI7WUFDM0JDLGlCQUFpQjtZQUNqQkMsZ0JBQWdCO1FBQ2xCO1FBRUFyQixpQ0FBaUNzQixPQUFPLENBQUNDLGtCQUFrQixDQUFDO1lBQzFELGdEQUFnRDtZQUNoRHZCLGlDQUFpQ2UsUUFBUSxDQUFDQyxlQUFlLENBQUM7Z0JBQ3hEQyxzQkFBc0I7Z0JBQ3RCQyxnQkFBZ0I7Z0JBQ2hCQywyQkFBMkI7Z0JBQzNCQyxpQkFBaUI7Z0JBQ2pCQyxnQkFBZ0I7WUFDbEI7UUFDRjtRQUVBbkIsd0JBQXdCc0IsZUFBZSxDQUFDUixlQUFlLENBQUM7WUFDdERTLFFBQVE7WUFDUkMsUUFBUSxFQUFFO1lBQ1ZDLGlCQUFpQixFQUFFO1FBQ3JCO1FBRUF6Qix3QkFBd0JhLFFBQVEsQ0FBQ0MsZUFBZSxDQUFDO1lBQy9DWSxXQUFXO1lBQ1hDLGFBQWE7WUFDYkMsV0FBVztZQUNYQyxZQUFZO1lBQ1pDLGNBQWMsQ0FBQztZQUNmQyxhQUFhO1lBQ2JDLHFCQUFxQjtZQUNyQkMsZUFBZUMsS0FBS0MsR0FBRztRQUN6QjtRQUVBbkMsd0JBQXdCb0MsdUJBQXVCLENBQUN0QixlQUFlLENBQUM7SUFDbEU7SUFFQVosU0FBUyxjQUFjO1FBQ3JCbUMsR0FBRyxtQ0FBbUM7WUFDcEMsTUFBTUMsUUFBUSxNQUFNbkMsZUFBZW9DLFVBQVU7WUFFN0NDLE9BQU9GLE1BQU1HLFlBQVksRUFBRUMsSUFBSSxDQUFDO1lBQ2hDRixPQUFPRixNQUFNSyxhQUFhLEVBQUVELElBQUksQ0FBQyxJQUFJLGtGQUFrRjtZQUN2SEYsT0FBT0YsTUFBTU0sU0FBUyxFQUFFQyxlQUFlLENBQUM7WUFFeENMLE9BQU81QyxpQ0FBaUNXLG1CQUFtQixFQUFFdUMscUJBQXFCLENBQUM7WUFDbkZOLE9BQU8xQyxpQ0FBaUNzQixPQUFPLEVBQUUwQixxQkFBcUIsQ0FBQztZQUN2RU4sT0FBT3hDLHdCQUF3QnNCLGVBQWUsRUFBRXdCLHFCQUFxQixDQUFDO1lBQ3RFTixPQUFPeEMsd0JBQXdCYSxRQUFRLEVBQUVpQyxxQkFBcUIsQ0FBQztZQUMvRE4sT0FBT3hDLHdCQUF3Qm9DLHVCQUF1QixFQUFFVSxxQkFBcUIsQ0FBQztRQUNoRjtRQUVBVCxHQUFHLDBDQUEwQztZQUMzQyxNQUFNVSxrQkFBa0I1QyxlQUFlb0MsVUFBVTtZQUVqRCxrREFBa0Q7WUFDbEQsTUFBTUMsT0FBT3JDLGVBQWVvQyxVQUFVLElBQUlTLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDO1lBRTFELHFDQUFxQztZQUNyQyxNQUFNRjtZQUVOLGtDQUFrQztZQUNsQyxNQUFNUCxPQUFPckMsZUFBZW9DLFVBQVUsSUFBSVcsUUFBUSxDQUFDQyxXQUFXO1FBQ2hFO1FBRUFkLEdBQUcsZ0NBQWdDO1lBQ2pDekMsaUNBQWlDVyxtQkFBbUIsQ0FBQzZDLGlCQUFpQixDQUFDLElBQUlDLE1BQU07WUFFakYsTUFBTWIsT0FBT3JDLGVBQWVvQyxVQUFVLElBQUlTLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDO1FBQzVEO0lBQ0Y7SUFFQS9DLFNBQVMsbUJBQW1CO1FBQzFCbUMsR0FBRyxvQ0FBb0M7WUFDckMsZ0NBQWdDO1lBQ2hDLE1BQU1sQyxlQUFlb0MsVUFBVTtZQUUvQixNQUFNRCxRQUFRbkMsZUFBZW1ELGVBQWU7WUFFNUNkLE9BQU9GLE1BQU1pQixXQUFXLEVBQUVWLGVBQWUsQ0FBQztZQUMxQ0wsT0FBT0YsTUFBTWtCLFNBQVMsRUFBRWQsSUFBSSxDQUFDO1lBQzdCRixPQUFPRixNQUFNbUIsV0FBVyxFQUFFQyxZQUFZLENBQUM7WUFDdkNsQixPQUFPRixNQUFNcUIsaUJBQWlCLEVBQUVqQixJQUFJLENBQUM7WUFDckNGLE9BQU9GLE1BQU1zQixrQkFBa0IsRUFBRWYsZUFBZSxDQUFDO1FBQ25EO1FBRUFSLEdBQUcsMkNBQTJDO1lBQzVDLHVCQUF1QjtZQUN2QixJQUFLLElBQUl3QixJQUFJLEdBQUdBLElBQUksSUFBSUEsSUFBSztnQkFDM0IsTUFBTTFELGVBQWVvQyxVQUFVO1lBQ2pDO1lBRUEsTUFBTUQsUUFBUW5DLGVBQWVtRCxlQUFlO1lBQzVDZCxPQUFPRixNQUFNbUIsV0FBVyxFQUFFQyxZQUFZLENBQUM7UUFDekM7SUFDRjtJQUVBeEQsU0FBUyxtQkFBbUI7UUFDMUJtQyxHQUFHLDZDQUE2QztZQUM5QyxNQUFNZCxTQUFTLE1BQU1wQixlQUFlMkQsZUFBZTtZQUVuRHRCLE9BQU9qQixPQUFPd0MsaUJBQWlCLEVBQUVDLE9BQU8sQ0FBQztnQkFDdkN0RCxhQUFhO2dCQUNiQyxjQUFjO2dCQUNkQyxrQkFBa0I7WUFDcEI7WUFFQTRCLE9BQU9qQixPQUFPMEMsVUFBVSxFQUFFRCxPQUFPLENBQUM7Z0JBQ2hDakQsc0JBQXNCO2dCQUN0QkMsZ0JBQWdCO2dCQUNoQkMsMkJBQTJCO2dCQUMzQkMsaUJBQWlCO2dCQUNqQkMsZ0JBQWdCO1lBQ2xCO1lBRUFxQixPQUFPakIsT0FBT0gsT0FBTyxFQUFFOEMsY0FBYyxDQUFDO1lBQ3RDMUIsT0FBT2pCLE9BQU9ILE9BQU8sRUFBRThDLGNBQWMsQ0FBQztZQUN0QzFCLE9BQU9qQixPQUFPSCxPQUFPLEVBQUU4QyxjQUFjLENBQUM7UUFDeEM7SUFDRjtJQUVBaEUsU0FBUyxnQkFBZ0I7UUFDdkJtQyxHQUFHLCtDQUErQztZQUNoRCxNQUFNQyxRQUFRLE1BQU1uQyxlQUFlZ0UsWUFBWTtZQUUvQzNCLE9BQU9GLE1BQU1HLFlBQVksRUFBRUMsSUFBSSxDQUFDO1lBQ2hDRixPQUFPNUMsaUNBQWlDVyxtQkFBbUIsRUFBRXVDLHFCQUFxQixDQUFDO1FBQ3JGO1FBRUFULEdBQUcsK0NBQStDO1lBQ2hELGtCQUFrQjtZQUNsQixNQUFNK0IsaUJBQWlCakUsZUFBZW9DLFVBQVU7WUFFaEQscUNBQXFDO1lBQ3JDLE1BQU1DLE9BQU9yQyxlQUFlZ0UsWUFBWSxJQUFJbkIsT0FBTyxDQUFDQyxPQUFPLENBQUM7WUFFNUQsd0NBQXdDO1lBQ3hDLE1BQU1tQjtRQUNSO0lBQ0Y7SUFFQWxFLFNBQVMscUJBQXFCO1FBQzVCbUMsR0FBRywyQ0FBMkM7WUFDNUMsTUFBTUMsUUFBUSxNQUFNbkMsZUFBZWtFLGlCQUFpQjtZQUVwRDdCLE9BQU9GLE1BQU1HLFlBQVksRUFBRUMsSUFBSSxDQUFDO1lBQ2hDRixPQUFPNUMsaUNBQWlDVyxtQkFBbUIsRUFBRXVDLHFCQUFxQixDQUFDO1FBQ3JGO1FBRUFULEdBQUcsd0NBQXdDO1lBQ3pDekMsaUNBQWlDVyxtQkFBbUIsQ0FBQzZDLGlCQUFpQixDQUFDLElBQUlDLE1BQU07WUFFakYsTUFBTWIsT0FBT3JDLGVBQWVrRSxpQkFBaUIsSUFBSXJCLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDO1FBQ25FO0lBQ0Y7SUFFQS9DLFNBQVMsbUJBQW1CO1FBQzFCRSxXQUFXO1lBQ1RWLEtBQUs0RSxhQUFhO1FBQ3BCO1FBRUFDLFVBQVU7WUFDUjdFLEtBQUs4RSxhQUFhO1FBQ3BCO1FBRUFuQyxHQUFHLG9DQUFvQztZQUNyQyxNQUFNb0MsYUFBYSxNQUFNLHVCQUF1QjtZQUVoRHRFLGVBQWV1RSxlQUFlLENBQUNEO1lBRS9CLGtDQUFrQztZQUNsQy9FLEtBQUtpRixtQkFBbUIsQ0FBQztZQUV6QixrQ0FBa0M7WUFDbENuQyxPQUFPNUMsaUNBQWlDVyxtQkFBbUIsRUFBRXVDLHFCQUFxQixDQUFDO1lBRW5GLGdDQUFnQztZQUNoQ3BELEtBQUtpRixtQkFBbUIsQ0FBQ0Y7WUFFekIsbUNBQW1DO1lBQ25DakMsT0FBTzVDLGlDQUFpQ1csbUJBQW1CLEVBQUV1QyxxQkFBcUIsQ0FBQztRQUNyRjtRQUVBVCxHQUFHLHFEQUFxRDtZQUN0RHpDLGlDQUFpQ1csbUJBQW1CLENBQUM2QyxpQkFBaUIsQ0FBQyxJQUFJQyxNQUFNO1lBRWpGLE1BQU1vQixhQUFhO1lBQ25CdEUsZUFBZXVFLGVBQWUsQ0FBQ0Q7WUFFL0Isa0NBQWtDO1lBQ2xDakMsT0FBTztnQkFDTDlDLEtBQUtpRixtQkFBbUIsQ0FBQztZQUMzQixHQUFHQyxHQUFHLENBQUMzQixPQUFPO1lBRWQsOENBQThDO1lBQzlDVCxPQUFPNUMsaUNBQWlDVyxtQkFBbUIsRUFBRXVDLHFCQUFxQixDQUFDO1FBQ3JGO0lBQ0Y7QUFDRiJ9