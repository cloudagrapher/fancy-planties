{"version":3,"names":["lucia","connectionString","cov_1m2m67t79i","s","b","process","env","DATABASE_URL","client","_postgres","default","adapter","_adapterpostgresql","PostgresJsAdapter","session","user","_lucia","Lucia","sessionCookie","expires","attributes","secure","sameSite","getUserAttributes","f","id","email","name"],"sources":["/Users/stefanbekker/projects/fancy-planties/src/lib/auth/lucia.ts"],"sourcesContent":["import 'server-only';\n\nimport { Lucia } from 'lucia';\nimport { PostgresJsAdapter } from '@lucia-auth/adapter-postgresql';\nimport postgres from 'postgres';\n\n// Create postgres client for Lucia adapter\nconst connectionString = process.env.DATABASE_URL || 'postgresql://postgres:postgres@localhost:5433/fancy_planties';\nconst client = postgres(connectionString);\n\n// Initialize PostgreSQL adapter for Lucia\nconst adapter = new PostgresJsAdapter(client, {\n  session: 'sessions',\n  user: 'users',\n});\n\n// Initialize Lucia with configuration\nexport const lucia = new Lucia(adapter, {\n  sessionCookie: {\n    expires: false,\n    attributes: {\n      secure: false, // Allow non-secure cookies for local development\n      sameSite: 'lax',\n    },\n  },\n  getUserAttributes: (attributes) => {\n    return {\n      id: attributes.id,\n      email: attributes.email,\n      name: attributes.name,\n    };\n  },\n});\n\n// Extend Lucia types\ndeclare module 'lucia' {\n  interface Register {\n    Lucia: typeof lucia;\n    DatabaseUserAttributes: DatabaseUserAttributes;\n  }\n}\n\ninterface DatabaseUserAttributes {\n  id: number;\n  email: string;\n  name: string;\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BAiBa;;;;;;WAAAA,KAAA;;;;;QAjBN;;;kCAEe;;;kCACY;;;wEACb;;;;;;;;;;;;;;;AAErB;AACA,MAAMC,gBAAA;AAAA;AAAA,CAAAC,cAAA,GAAAC,CAAA;AAAmB;AAAA,CAAAD,cAAA,GAAAE,CAAA,UAAAC,OAAA,CAAQC,GAAG,CAACC,YAAY;AAAA;AAAA,CAAAL,cAAA,GAAAE,CAAA,UAAI;AACrD,MAAMI,MAAA;AAAA;AAAA,CAAAN,cAAA,GAAAC,CAAA,OAAS,IAAAM,SAAA,CAAAC,OAAQ,EAACT,gBAAA;AAExB;AACA,MAAMU,OAAA;AAAA;AAAA,CAAAT,cAAA,GAAAC,CAAA,QAAU,IAAIS,kBAAA,CAAAC,iBAAiB,CAACL,MAAA,EAAQ;EAC5CM,OAAA,EAAS;EACTC,IAAA,EAAM;AACR;AAGO,MAAMf,KAAA;AAAA;AAAA,CAAAE,cAAA,GAAAC,CAAA,QAAQ,IAAIa,MAAA,CAAAC,KAAK,CAACN,OAAA,EAAS;EACtCO,aAAA,EAAe;IACbC,OAAA,EAAS;IACTC,UAAA,EAAY;MACVC,MAAA,EAAQ;MACRC,QAAA,EAAU;IACZ;EACF;EACAC,iBAAA,EAAoBH,UAAA;IAAA;IAAAlB,cAAA,GAAAsB,CAAA;IAAAtB,cAAA,GAAAC,CAAA;IAClB,OAAO;MACLsB,EAAA,EAAIL,UAAA,CAAWK,EAAE;MACjBC,KAAA,EAAON,UAAA,CAAWM,KAAK;MACvBC,IAAA,EAAMP,UAAA,CAAWO;IACnB;EACF;AACF","ignoreList":[]}