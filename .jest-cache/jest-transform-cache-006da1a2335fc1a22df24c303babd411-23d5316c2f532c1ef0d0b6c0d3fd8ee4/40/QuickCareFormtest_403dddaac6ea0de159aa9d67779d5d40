3398435c8177b4b87b27b96360ff34e4
/**
 * @jest-environment jsdom
 */ "use strict";
jest.mock('@/hooks/useOffline', ()=>({
        useOffline: jest.fn()
    }));
jest.mock('@/lib/utils/service-worker', ()=>({
        useServiceWorker: ()=>({
                registerBackgroundSync: mockRegisterBackgroundSync
            })
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _userevent = /*#__PURE__*/ _interop_require_default(require("@testing-library/user-event"));
const _renderhelpers = require("../../../test-utils/helpers/render-helpers.js");
const _QuickCareForm = /*#__PURE__*/ _interop_require_default(require("../../../components/care/QuickCareForm"));
const _useOffline = require("../../../hooks/useOffline");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock the offline hook
const mockAddPendingCareEntry = jest.fn();
const mockRegisterBackgroundSync = jest.fn();
describe('QuickCareForm', ()=>{
    const defaultProps = {
        plantInstanceId: 1,
        onSuccess: jest.fn(),
        onCancel: jest.fn(),
        defaultCareType: 'fertilizer'
    };
    beforeEach(()=>{
        jest.clearAllMocks();
        // Mock successful API response by default
        (0, _renderhelpers.mockApiResponses)({
            '/api/care/log': {
                success: true,
                data: {
                    id: 1
                }
            }
        });
        // Reset offline hook to online state
        _useOffline.useOffline.mockReturnValue({
            isOnline: true,
            addPendingCareEntry: mockAddPendingCareEntry
        });
    });
    describe('Form Rendering', ()=>{
        it('renders all care type options', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByText('ðŸŒ±')).toBeInTheDocument(); // Fertilizer
            expect(_react1.screen.getByText('ðŸ’§')).toBeInTheDocument(); // Water
            expect(_react1.screen.getByText('ðŸª´')).toBeInTheDocument(); // Repot
            expect(_react1.screen.getByText('âœ‚ï¸')).toBeInTheDocument(); // Prune
            expect(_react1.screen.getByText('ðŸ”')).toBeInTheDocument(); // Inspect
            expect(_react1.screen.getByText('ðŸ“')).toBeInTheDocument(); // Other
            expect(_react1.screen.getByText('Fertilizer')).toBeInTheDocument();
            expect(_react1.screen.getByText('Water')).toBeInTheDocument();
            expect(_react1.screen.getByText('Repot')).toBeInTheDocument();
            expect(_react1.screen.getByText('Prune')).toBeInTheDocument();
            expect(_react1.screen.getByText('Inspect')).toBeInTheDocument();
            expect(_react1.screen.getByText('Other')).toBeInTheDocument();
        });
        it('renders care date field with today as default', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const dateInput = _react1.screen.getByLabelText(/care date/i);
            const today = new Date().toISOString().split('T')[0];
            expect(dateInput).toBeInTheDocument();
            expect(dateInput).toHaveValue(today);
            expect(dateInput).toHaveAttribute('max', today); // Cannot be in future
        });
        it('renders notes field', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const notesField = _react1.screen.getByLabelText(/notes/i);
            expect(notesField).toBeInTheDocument();
            expect(notesField).toHaveAttribute('placeholder', 'Any additional observations or notes...');
        });
        it('renders submit button', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByRole('button', {
                name: /log care/i
            })).toBeInTheDocument();
        });
        it('selects default care type', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps,
                defaultCareType: "water"
            }));
            const waterButton = _react1.screen.getByRole('button', {
                name: /water/i
            });
            expect(waterButton).toHaveClass('btn--primary');
        });
    });
    describe('Care Type Selection', ()=>{
        it('allows selecting different care types', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const waterButton = _react1.screen.getByRole('button', {
                name: /water/i
            });
            await user.click(waterButton);
            expect(waterButton).toHaveClass('btn--primary');
        });
        it('shows conditional fields for fertilizer type', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps,
                defaultCareType: "fertilizer"
            }));
            expect(_react1.screen.getByLabelText(/fertilizer type/i)).toBeInTheDocument();
            expect(_react1.screen.getByPlaceholderText(/liquid fertilizer, slow-release pellets/i)).toBeInTheDocument();
        });
        it('shows conditional fields for repotting', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const repotButton = _react1.screen.getByRole('button', {
                name: /repot/i
            });
            await user.click(repotButton);
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByLabelText(/pot size/i)).toBeInTheDocument();
                expect(_react1.screen.getByLabelText(/soil type/i)).toBeInTheDocument();
            });
        });
        it('hides conditional fields when switching care types', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps,
                defaultCareType: "fertilizer"
            }));
            // Initially shows fertilizer field
            expect(_react1.screen.getByLabelText(/fertilizer type/i)).toBeInTheDocument();
            // Switch to water
            const waterButton = _react1.screen.getByRole('button', {
                name: /water/i
            });
            await user.click(waterButton);
            // Fertilizer field should be hidden
            expect(_react1.screen.queryByLabelText(/fertilizer type/i)).not.toBeInTheDocument();
        });
        it('shows care type description', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps,
                defaultCareType: "fertilizer"
            }));
            const description = _react1.screen.getByText(/ðŸŒ± fertilizer:/i);
            expect(description).toBeInTheDocument();
        });
    });
    describe('Date Validation', ()=>{
        it('prevents selecting future dates', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const dateInput = _react1.screen.getByLabelText(/care date/i);
            const today = new Date().toISOString().split('T')[0];
            expect(dateInput).toHaveAttribute('max', today);
        });
        it('allows selecting past dates', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const dateInput = _react1.screen.getByLabelText(/care date/i);
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayString = yesterday.toISOString().split('T')[0];
            await user.clear(dateInput);
            await user.type(dateInput, yesterdayString);
            expect(dateInput).toHaveValue(yesterdayString);
        });
    });
    describe('Form Submission', ()=>{
        it('submits form with correct data', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            // Fill form
            await user.type(_react1.screen.getByLabelText(/notes/i), 'Plant looks healthy');
            // Submit
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/care/log', expect.objectContaining({
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: expect.stringContaining('fertilizer')
                }));
            });
            expect(defaultProps.onSuccess).toHaveBeenCalled();
        });
        it('includes conditional field data in submission', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps,
                defaultCareType: "fertilizer"
            }));
            await user.type(_react1.screen.getByLabelText(/fertilizer type/i), 'Liquid fertilizer');
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                const fetchCall = global.fetch.mock.calls[0];
                const requestBody = JSON.parse(fetchCall[1].body);
                expect(requestBody.fertilizerType).toBe('Liquid fertilizer');
            });
        });
        it('includes repot-specific data in submission', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            // Select repot care type
            await user.click(_react1.screen.getByRole('button', {
                name: /repot/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByLabelText(/pot size/i)).toBeInTheDocument();
            });
            await user.type(_react1.screen.getByLabelText(/pot size/i), '6 inch');
            await user.type(_react1.screen.getByLabelText(/soil type/i), 'Potting mix');
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                const fetchCall = global.fetch.mock.calls[0];
                const requestBody = JSON.parse(fetchCall[1].body);
                expect(requestBody.potSize).toBe('6 inch');
                expect(requestBody.soilType).toBe('Potting mix');
            });
        });
        it('resets form after successful submission', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            // Fill form
            await user.type(_react1.screen.getByLabelText(/notes/i), 'Test notes');
            // Submit
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(defaultProps.onSuccess).toHaveBeenCalled();
            });
            // Form should be reset
            expect(_react1.screen.getByLabelText(/notes/i)).toHaveValue('');
        });
        it('shows loading state during submission', async ()=>{
            const user = _userevent.default.setup();
            // Mock delayed response
            global.fetch = jest.fn(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: ()=>Promise.resolve({
                                    success: true
                                })
                        }), 100)));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const submitButton = _react1.screen.getByRole('button', {
                name: /log care/i
            });
            await user.click(submitButton);
            // Check loading state
            expect(submitButton).toBeDisabled();
            expect(_react1.screen.getByText(/logging/i)).toBeInTheDocument();
        });
    });
    describe('Offline Mode', ()=>{
        beforeEach(()=>{
            // Mock offline state
            _useOffline.useOffline.mockReturnValue({
                isOnline: false,
                addPendingCareEntry: mockAddPendingCareEntry
            });
        });
        it('shows offline mode indicator', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByText(/offline mode/i)).toBeInTheDocument();
            expect(_react1.screen.getByText(/care will be logged when you're back online/i)).toBeInTheDocument();
        });
        it('changes submit button text in offline mode', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByRole('button', {
                name: /queue for sync/i
            })).toBeInTheDocument();
        });
        it('queues care entry when offline', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            await user.type(_react1.screen.getByLabelText(/notes/i), 'Offline care entry');
            await user.click(_react1.screen.getByRole('button', {
                name: /queue for sync/i
            }));
            expect(mockAddPendingCareEntry).toHaveBeenCalledWith({
                plantInstanceId: 1,
                careType: 'fertilizer',
                notes: 'Offline care entry'
            });
            expect(mockRegisterBackgroundSync).toHaveBeenCalled();
            expect(defaultProps.onSuccess).toHaveBeenCalled();
        });
        it('does not make API call when offline', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            await user.click(_react1.screen.getByRole('button', {
                name: /queue for sync/i
            }));
            expect(global.fetch).not.toHaveBeenCalled();
        });
    });
    describe('Error Handling', ()=>{
        it('displays API error messages', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.mockApiError)('/api/care/log', 400, {
                error: 'Invalid care data'
            });
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText('Invalid care data')).toBeInTheDocument();
            });
            expect(defaultProps.onSuccess).not.toHaveBeenCalled();
        });
        it('handles network errors gracefully', async ()=>{
            const user = _userevent.default.setup();
            // Mock network error
            global.fetch = jest.fn(()=>Promise.reject(new Error('Network error')));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText(/network error/i)).toBeInTheDocument();
            });
        });
        it('clears errors on retry', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.mockApiError)('/api/care/log', 400, {
                error: 'Invalid care data'
            });
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            // First submission with error
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText('Invalid care data')).toBeInTheDocument();
            });
            // Mock successful response for retry
            (0, _renderhelpers.mockApiResponses)({
                '/api/care/log': {
                    success: true
                }
            });
            // Retry submission
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            // Error should be cleared
            expect(_react1.screen.queryByText('Invalid care data')).not.toBeInTheDocument();
        });
    });
    describe('Plant Selection (when no plantInstanceId provided)', ()=>{
        it('shows plant selection dropdown when plantInstanceId not provided', ()=>{
            const propsWithoutPlant = {
                ...defaultProps
            };
            delete propsWithoutPlant.plantInstanceId;
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...propsWithoutPlant
            }));
            expect(_react1.screen.getByLabelText(/plant/i)).toBeInTheDocument();
            expect(_react1.screen.getByText(/select a plant/i)).toBeInTheDocument();
        });
        it('disables submit button when no plant selected', ()=>{
            const propsWithoutPlant = {
                ...defaultProps
            };
            delete propsWithoutPlant.plantInstanceId;
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...propsWithoutPlant
            }));
            const submitButton = _react1.screen.getByRole('button', {
                name: /log care/i
            });
            expect(submitButton).toBeDisabled();
        });
        it('shows implementation note for plant selection', ()=>{
            const propsWithoutPlant = {
                ...defaultProps
            };
            delete propsWithoutPlant.plantInstanceId;
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...propsWithoutPlant
            }));
            expect(_react1.screen.getByText(/plant selection will be implemented when plant instances are available/i)).toBeInTheDocument();
        });
    });
    describe('Cancel Functionality', ()=>{
        it('shows cancel button when onCancel provided', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByRole('button', {
                name: /cancel/i
            })).toBeInTheDocument();
        });
        it('calls onCancel when cancel button clicked', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            await user.click(_react1.screen.getByRole('button', {
                name: /cancel/i
            }));
            expect(defaultProps.onCancel).toHaveBeenCalled();
        });
        it('does not show cancel button when onCancel not provided', ()=>{
            const propsWithoutCancel = {
                ...defaultProps
            };
            delete propsWithoutCancel.onCancel;
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...propsWithoutCancel
            }));
            expect(_react1.screen.queryByRole('button', {
                name: /cancel/i
            })).not.toBeInTheDocument();
        });
    });
    describe('Accessibility', ()=>{
        it('has proper form structure', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const form = document.querySelector('form');
            expect(form).toBeInTheDocument();
        });
        it('has proper labels for all inputs', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByText(/care type/i)).toBeInTheDocument();
            expect(_react1.screen.getByLabelText(/care date/i)).toBeInTheDocument();
            expect(_react1.screen.getByLabelText(/notes/i)).toBeInTheDocument();
        });
        it('has required attribute on date field', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const dateInput = _react1.screen.getByLabelText(/care date/i);
            expect(dateInput).toHaveAttribute('required');
        });
        it('disables form elements during submission', async ()=>{
            const user = _userevent.default.setup();
            // Mock delayed response
            global.fetch = jest.fn(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: ()=>Promise.resolve({
                                    success: true
                                })
                        }), 100)));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const submitButton = _react1.screen.getByRole('button', {
                name: /log care/i
            });
            await user.click(submitButton);
            // All care type buttons should be disabled
            const careTypeButtons = _react1.screen.getAllByRole('button').filter((btn)=>btn.textContent?.includes('Fertilizer') || btn.textContent?.includes('Water') || btn.textContent?.includes('Repot'));
            careTypeButtons.forEach((button)=>{
                expect(button).toBeDisabled();
            });
            // Date input should be disabled
            expect(_react1.screen.getByLabelText(/care date/i)).toBeDisabled();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdGVmYW5iZWtrZXIvcHJvamVjdHMvZmFuY3ktcGxhbnRpZXMvc3JjL19fdGVzdHNfXy9jb21wb25lbnRzL2Zvcm1zL1F1aWNrQ2FyZUZvcm0udGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBqZXN0LWVudmlyb25tZW50IGpzZG9tXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHNjcmVlbiwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHVzZXJFdmVudCBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3VzZXItZXZlbnQnO1xuaW1wb3J0IHsgcmVuZGVyV2l0aFByb3ZpZGVycywgbW9ja0FwaVJlc3BvbnNlcywgbW9ja0FwaUVycm9yIH0gZnJvbSAnQC90ZXN0LXV0aWxzL2hlbHBlcnMvcmVuZGVyLWhlbHBlcnMnO1xuaW1wb3J0IFF1aWNrQ2FyZUZvcm0gZnJvbSAnQC9jb21wb25lbnRzL2NhcmUvUXVpY2tDYXJlRm9ybSc7XG5pbXBvcnQgeyB1c2VPZmZsaW5lIH0gZnJvbSAnQC9ob29rcy91c2VPZmZsaW5lJztcblxuLy8gTW9jayB0aGUgb2ZmbGluZSBob29rXG5jb25zdCBtb2NrQWRkUGVuZGluZ0NhcmVFbnRyeSA9IGplc3QuZm4oKTtcbmNvbnN0IG1vY2tSZWdpc3RlckJhY2tncm91bmRTeW5jID0gamVzdC5mbigpO1xuXG5qZXN0Lm1vY2soJ0AvaG9va3MvdXNlT2ZmbGluZScsICgpID0+ICh7XG4gIHVzZU9mZmxpbmU6IGplc3QuZm4oKSxcbn0pKTtcblxuamVzdC5tb2NrKCdAL2xpYi91dGlscy9zZXJ2aWNlLXdvcmtlcicsICgpID0+ICh7XG4gIHVzZVNlcnZpY2VXb3JrZXI6ICgpID0+ICh7XG4gICAgcmVnaXN0ZXJCYWNrZ3JvdW5kU3luYzogbW9ja1JlZ2lzdGVyQmFja2dyb3VuZFN5bmMsXG4gIH0pLFxufSkpO1xuXG5kZXNjcmliZSgnUXVpY2tDYXJlRm9ybScsICgpID0+IHtcbiAgY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICAgIHBsYW50SW5zdGFuY2VJZDogMSxcbiAgICBvblN1Y2Nlc3M6IGplc3QuZm4oKSxcbiAgICBvbkNhbmNlbDogamVzdC5mbigpLFxuICAgIGRlZmF1bHRDYXJlVHlwZTogJ2ZlcnRpbGl6ZXInLFxuICB9O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIFxuICAgIC8vIE1vY2sgc3VjY2Vzc2Z1bCBBUEkgcmVzcG9uc2UgYnkgZGVmYXVsdFxuICAgIG1vY2tBcGlSZXNwb25zZXMoe1xuICAgICAgJy9hcGkvY2FyZS9sb2cnOiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHsgaWQ6IDEgfSB9LFxuICAgIH0pO1xuXG4gICAgLy8gUmVzZXQgb2ZmbGluZSBob29rIHRvIG9ubGluZSBzdGF0ZVxuICAgIHVzZU9mZmxpbmUubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIGlzT25saW5lOiB0cnVlLFxuICAgICAgYWRkUGVuZGluZ0NhcmVFbnRyeTogbW9ja0FkZFBlbmRpbmdDYXJlRW50cnksXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGb3JtIFJlbmRlcmluZycsICgpID0+IHtcbiAgICBpdCgncmVuZGVycyBhbGwgY2FyZSB0eXBlIG9wdGlvbnMnLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ/CfjLEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTsgLy8gRmVydGlsaXplclxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ/CfkqcnKSkudG9CZUluVGhlRG9jdW1lbnQoKTsgLy8gV2F0ZXJcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfwn6q0JykpLnRvQmVJblRoZURvY3VtZW50KCk7IC8vIFJlcG90XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn4pyC77iPJykpLnRvQmVJblRoZURvY3VtZW50KCk7IC8vIFBydW5lXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn8J+UjScpKS50b0JlSW5UaGVEb2N1bWVudCgpOyAvLyBJbnNwZWN0XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn8J+TnScpKS50b0JlSW5UaGVEb2N1bWVudCgpOyAvLyBPdGhlclxuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRmVydGlsaXplcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1dhdGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUmVwb3QnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQcnVuZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0luc3BlY3QnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdPdGhlcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3JlbmRlcnMgY2FyZSBkYXRlIGZpZWxkIHdpdGggdG9kYXkgYXMgZGVmYXVsdCcsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBjb25zdCBkYXRlSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2NhcmUgZGF0ZS9pKTtcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICBcbiAgICAgIGV4cGVjdChkYXRlSW5wdXQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QoZGF0ZUlucHV0KS50b0hhdmVWYWx1ZSh0b2RheSk7XG4gICAgICBleHBlY3QoZGF0ZUlucHV0KS50b0hhdmVBdHRyaWJ1dGUoJ21heCcsIHRvZGF5KTsgLy8gQ2Fubm90IGJlIGluIGZ1dHVyZVxuICAgIH0pO1xuXG4gICAgaXQoJ3JlbmRlcnMgbm90ZXMgZmllbGQnLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgY29uc3Qgbm90ZXNGaWVsZCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvbm90ZXMvaSk7XG4gICAgICBleHBlY3Qobm90ZXNGaWVsZCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChub3Rlc0ZpZWxkKS50b0hhdmVBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ0FueSBhZGRpdGlvbmFsIG9ic2VydmF0aW9ucyBvciBub3Rlcy4uLicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3JlbmRlcnMgc3VibWl0IGJ1dHRvbicsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvbG9nIGNhcmUvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZWxlY3RzIGRlZmF1bHQgY2FyZSB0eXBlJywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSBkZWZhdWx0Q2FyZVR5cGU9XCJ3YXRlclwiIC8+KTtcblxuICAgICAgY29uc3Qgd2F0ZXJCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC93YXRlci9pIH0pO1xuICAgICAgZXhwZWN0KHdhdGVyQnV0dG9uKS50b0hhdmVDbGFzcygnYnRuLS1wcmltYXJ5Jyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDYXJlIFR5cGUgU2VsZWN0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdhbGxvd3Mgc2VsZWN0aW5nIGRpZmZlcmVudCBjYXJlIHR5cGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGNvbnN0IHdhdGVyQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvd2F0ZXIvaSB9KTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2sod2F0ZXJCdXR0b24pO1xuXG4gICAgICBleHBlY3Qod2F0ZXJCdXR0b24pLnRvSGF2ZUNsYXNzKCdidG4tLXByaW1hcnknKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG93cyBjb25kaXRpb25hbCBmaWVsZHMgZm9yIGZlcnRpbGl6ZXIgdHlwZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gZGVmYXVsdENhcmVUeXBlPVwiZmVydGlsaXplclwiIC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvZmVydGlsaXplciB0eXBlL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgvbGlxdWlkIGZlcnRpbGl6ZXIsIHNsb3ctcmVsZWFzZSBwZWxsZXRzL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3dzIGNvbmRpdGlvbmFsIGZpZWxkcyBmb3IgcmVwb3R0aW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGNvbnN0IHJlcG90QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvcmVwb3QvaSB9KTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2socmVwb3RCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvcG90IHNpemUvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3NvaWwgdHlwZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2hpZGVzIGNvbmRpdGlvbmFsIGZpZWxkcyB3aGVuIHN3aXRjaGluZyBjYXJlIHR5cGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSBkZWZhdWx0Q2FyZVR5cGU9XCJmZXJ0aWxpemVyXCIgLz4pO1xuXG4gICAgICAvLyBJbml0aWFsbHkgc2hvd3MgZmVydGlsaXplciBmaWVsZFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvZmVydGlsaXplciB0eXBlL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgICAvLyBTd2l0Y2ggdG8gd2F0ZXJcbiAgICAgIGNvbnN0IHdhdGVyQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvd2F0ZXIvaSB9KTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2sod2F0ZXJCdXR0b24pO1xuXG4gICAgICAvLyBGZXJ0aWxpemVyIGZpZWxkIHNob3VsZCBiZSBoaWRkZW5cbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeUxhYmVsVGV4dCgvZmVydGlsaXplciB0eXBlL2kpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG93cyBjYXJlIHR5cGUgZGVzY3JpcHRpb24nLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IGRlZmF1bHRDYXJlVHlwZT1cImZlcnRpbGl6ZXJcIiAvPik7XG5cbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gc2NyZWVuLmdldEJ5VGV4dCgv8J+MsSBmZXJ0aWxpemVyOi9pKTtcbiAgICAgIGV4cGVjdChkZXNjcmlwdGlvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0RhdGUgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgncHJldmVudHMgc2VsZWN0aW5nIGZ1dHVyZSBkYXRlcycsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBjb25zdCBkYXRlSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2NhcmUgZGF0ZS9pKTtcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICBcbiAgICAgIGV4cGVjdChkYXRlSW5wdXQpLnRvSGF2ZUF0dHJpYnV0ZSgnbWF4JywgdG9kYXkpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2FsbG93cyBzZWxlY3RpbmcgcGFzdCBkYXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBjb25zdCBkYXRlSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2NhcmUgZGF0ZS9pKTtcbiAgICAgIGNvbnN0IHllc3RlcmRheSA9IG5ldyBEYXRlKCk7XG4gICAgICB5ZXN0ZXJkYXkuc2V0RGF0ZSh5ZXN0ZXJkYXkuZ2V0RGF0ZSgpIC0gMSk7XG4gICAgICBjb25zdCB5ZXN0ZXJkYXlTdHJpbmcgPSB5ZXN0ZXJkYXkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuXG4gICAgICBhd2FpdCB1c2VyLmNsZWFyKGRhdGVJbnB1dCk7XG4gICAgICBhd2FpdCB1c2VyLnR5cGUoZGF0ZUlucHV0LCB5ZXN0ZXJkYXlTdHJpbmcpO1xuXG4gICAgICBleHBlY3QoZGF0ZUlucHV0KS50b0hhdmVWYWx1ZSh5ZXN0ZXJkYXlTdHJpbmcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRm9ybSBTdWJtaXNzaW9uJywgKCkgPT4ge1xuICAgIGl0KCdzdWJtaXRzIGZvcm0gd2l0aCBjb3JyZWN0IGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgLy8gRmlsbCBmb3JtXG4gICAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9ub3Rlcy9pKSwgJ1BsYW50IGxvb2tzIGhlYWx0aHknKTtcbiAgICAgIFxuICAgICAgLy8gU3VibWl0XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2xvZyBjYXJlL2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJy9hcGkvY2FyZS9sb2cnLFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdmZXJ0aWxpemVyJyksXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoZGVmYXVsdFByb3BzLm9uU3VjY2VzcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2luY2x1ZGVzIGNvbmRpdGlvbmFsIGZpZWxkIGRhdGEgaW4gc3VibWlzc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gZGVmYXVsdENhcmVUeXBlPVwiZmVydGlsaXplclwiIC8+KTtcblxuICAgICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvZmVydGlsaXplciB0eXBlL2kpLCAnTGlxdWlkIGZlcnRpbGl6ZXInKTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvbG9nIGNhcmUvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBmZXRjaENhbGwgPSBnbG9iYWwuZmV0Y2gubW9jay5jYWxsc1swXTtcbiAgICAgICAgY29uc3QgcmVxdWVzdEJvZHkgPSBKU09OLnBhcnNlKGZldGNoQ2FsbFsxXS5ib2R5KTtcbiAgICAgICAgZXhwZWN0KHJlcXVlc3RCb2R5LmZlcnRpbGl6ZXJUeXBlKS50b0JlKCdMaXF1aWQgZmVydGlsaXplcicpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnaW5jbHVkZXMgcmVwb3Qtc3BlY2lmaWMgZGF0YSBpbiBzdWJtaXNzaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIC8vIFNlbGVjdCByZXBvdCBjYXJlIHR5cGVcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvcmVwb3QvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9wb3Qgc2l6ZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9wb3Qgc2l6ZS9pKSwgJzYgaW5jaCcpO1xuICAgICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvc29pbCB0eXBlL2kpLCAnUG90dGluZyBtaXgnKTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvbG9nIGNhcmUvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBmZXRjaENhbGwgPSBnbG9iYWwuZmV0Y2gubW9jay5jYWxsc1swXTtcbiAgICAgICAgY29uc3QgcmVxdWVzdEJvZHkgPSBKU09OLnBhcnNlKGZldGNoQ2FsbFsxXS5ib2R5KTtcbiAgICAgICAgZXhwZWN0KHJlcXVlc3RCb2R5LnBvdFNpemUpLnRvQmUoJzYgaW5jaCcpO1xuICAgICAgICBleHBlY3QocmVxdWVzdEJvZHkuc29pbFR5cGUpLnRvQmUoJ1BvdHRpbmcgbWl4Jyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdyZXNldHMgZm9ybSBhZnRlciBzdWNjZXNzZnVsIHN1Ym1pc3Npb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgLy8gRmlsbCBmb3JtXG4gICAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9ub3Rlcy9pKSwgJ1Rlc3Qgbm90ZXMnKTtcbiAgICAgIFxuICAgICAgLy8gU3VibWl0XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2xvZyBjYXJlL2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGRlZmF1bHRQcm9wcy5vblN1Y2Nlc3MpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBGb3JtIHNob3VsZCBiZSByZXNldFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvbm90ZXMvaSkpLnRvSGF2ZVZhbHVlKCcnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG93cyBsb2FkaW5nIHN0YXRlIGR1cmluZyBzdWJtaXNzaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgXG4gICAgICAvLyBNb2NrIGRlbGF5ZWQgcmVzcG9uc2VcbiAgICAgIGdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKCkgPT4gXG4gICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSB9KVxuICAgICAgICAgIH0pLCAxMDApXG4gICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9sb2cgY2FyZS9pIH0pO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhzdWJtaXRCdXR0b24pO1xuXG4gICAgICAvLyBDaGVjayBsb2FkaW5nIHN0YXRlXG4gICAgICBleHBlY3Qoc3VibWl0QnV0dG9uKS50b0JlRGlzYWJsZWQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9sb2dnaW5nL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnT2ZmbGluZSBNb2RlJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgLy8gTW9jayBvZmZsaW5lIHN0YXRlXG4gICAgICB1c2VPZmZsaW5lLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzT25saW5lOiBmYWxzZSxcbiAgICAgICAgYWRkUGVuZGluZ0NhcmVFbnRyeTogbW9ja0FkZFBlbmRpbmdDYXJlRW50cnksXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG93cyBvZmZsaW5lIG1vZGUgaW5kaWNhdG9yJywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9vZmZsaW5lIG1vZGUvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvY2FyZSB3aWxsIGJlIGxvZ2dlZCB3aGVuIHlvdSdyZSBiYWNrIG9ubGluZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdjaGFuZ2VzIHN1Ym1pdCBidXR0b24gdGV4dCBpbiBvZmZsaW5lIG1vZGUnLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3F1ZXVlIGZvciBzeW5jL2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgncXVldWVzIGNhcmUgZW50cnkgd2hlbiBvZmZsaW5lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL25vdGVzL2kpLCAnT2ZmbGluZSBjYXJlIGVudHJ5Jyk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3F1ZXVlIGZvciBzeW5jL2kgfSkpO1xuXG4gICAgICBleHBlY3QobW9ja0FkZFBlbmRpbmdDYXJlRW50cnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgcGxhbnRJbnN0YW5jZUlkOiAxLFxuICAgICAgICBjYXJlVHlwZTogJ2ZlcnRpbGl6ZXInLFxuICAgICAgICBub3RlczogJ09mZmxpbmUgY2FyZSBlbnRyeScsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tSZWdpc3RlckJhY2tncm91bmRTeW5jKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoZGVmYXVsdFByb3BzLm9uU3VjY2VzcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RvZXMgbm90IG1ha2UgQVBJIGNhbGwgd2hlbiBvZmZsaW5lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvcXVldWUgZm9yIHN5bmMvaSB9KSk7XG5cbiAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnZGlzcGxheXMgQVBJIGVycm9yIG1lc3NhZ2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgbW9ja0FwaUVycm9yKCcvYXBpL2NhcmUvbG9nJywgNDAwLCB7IGVycm9yOiAnSW52YWxpZCBjYXJlIGRhdGEnIH0pO1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9sb2cgY2FyZS9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJbnZhbGlkIGNhcmUgZGF0YScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChkZWZhdWx0UHJvcHMub25TdWNjZXNzKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2hhbmRsZXMgbmV0d29yayBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIFxuICAgICAgLy8gTW9jayBuZXR3b3JrIGVycm9yXG4gICAgICBnbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCgpID0+IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKSk7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2xvZyBjYXJlL2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL25ldHdvcmsgZXJyb3IvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdjbGVhcnMgZXJyb3JzIG9uIHJldHJ5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgbW9ja0FwaUVycm9yKCcvYXBpL2NhcmUvbG9nJywgNDAwLCB7IGVycm9yOiAnSW52YWxpZCBjYXJlIGRhdGEnIH0pO1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgLy8gRmlyc3Qgc3VibWlzc2lvbiB3aXRoIGVycm9yXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2xvZyBjYXJlL2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0ludmFsaWQgY2FyZSBkYXRhJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gTW9jayBzdWNjZXNzZnVsIHJlc3BvbnNlIGZvciByZXRyeVxuICAgICAgbW9ja0FwaVJlc3BvbnNlcyh7XG4gICAgICAgICcvYXBpL2NhcmUvbG9nJzogeyBzdWNjZXNzOiB0cnVlIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gUmV0cnkgc3VibWlzc2lvblxuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9sb2cgY2FyZS9pIH0pKTtcblxuICAgICAgLy8gRXJyb3Igc2hvdWxkIGJlIGNsZWFyZWRcbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0ludmFsaWQgY2FyZSBkYXRhJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGxhbnQgU2VsZWN0aW9uICh3aGVuIG5vIHBsYW50SW5zdGFuY2VJZCBwcm92aWRlZCknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3dzIHBsYW50IHNlbGVjdGlvbiBkcm9wZG93biB3aGVuIHBsYW50SW5zdGFuY2VJZCBub3QgcHJvdmlkZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wc1dpdGhvdXRQbGFudCA9IHsgLi4uZGVmYXVsdFByb3BzIH07XG4gICAgICBkZWxldGUgcHJvcHNXaXRob3V0UGxhbnQucGxhbnRJbnN0YW5jZUlkO1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5wcm9wc1dpdGhvdXRQbGFudH0gLz4pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9wbGFudC9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9zZWxlY3QgYSBwbGFudC9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkaXNhYmxlcyBzdWJtaXQgYnV0dG9uIHdoZW4gbm8gcGxhbnQgc2VsZWN0ZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wc1dpdGhvdXRQbGFudCA9IHsgLi4uZGVmYXVsdFByb3BzIH07XG4gICAgICBkZWxldGUgcHJvcHNXaXRob3V0UGxhbnQucGxhbnRJbnN0YW5jZUlkO1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5wcm9wc1dpdGhvdXRQbGFudH0gLz4pO1xuXG4gICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9sb2cgY2FyZS9pIH0pO1xuICAgICAgZXhwZWN0KHN1Ym1pdEJ1dHRvbikudG9CZURpc2FibGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvd3MgaW1wbGVtZW50YXRpb24gbm90ZSBmb3IgcGxhbnQgc2VsZWN0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcHNXaXRob3V0UGxhbnQgPSB7IC4uLmRlZmF1bHRQcm9wcyB9O1xuICAgICAgZGVsZXRlIHByb3BzV2l0aG91dFBsYW50LnBsYW50SW5zdGFuY2VJZDtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4ucHJvcHNXaXRob3V0UGxhbnR9IC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL3BsYW50IHNlbGVjdGlvbiB3aWxsIGJlIGltcGxlbWVudGVkIHdoZW4gcGxhbnQgaW5zdGFuY2VzIGFyZSBhdmFpbGFibGUvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDYW5jZWwgRnVuY3Rpb25hbGl0eScsICgpID0+IHtcbiAgICBpdCgnc2hvd3MgY2FuY2VsIGJ1dHRvbiB3aGVuIG9uQ2FuY2VsIHByb3ZpZGVkJywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9jYW5jZWwvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdjYWxscyBvbkNhbmNlbCB3aGVuIGNhbmNlbCBidXR0b24gY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2NhbmNlbC9pIH0pKTtcblxuICAgICAgZXhwZWN0KGRlZmF1bHRQcm9wcy5vbkNhbmNlbCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RvZXMgbm90IHNob3cgY2FuY2VsIGJ1dHRvbiB3aGVuIG9uQ2FuY2VsIG5vdCBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BzV2l0aG91dENhbmNlbCA9IHsgLi4uZGVmYXVsdFByb3BzIH07XG4gICAgICBkZWxldGUgcHJvcHNXaXRob3V0Q2FuY2VsLm9uQ2FuY2VsO1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5wcm9wc1dpdGhvdXRDYW5jZWx9IC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvY2FuY2VsL2kgfSkpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWNjZXNzaWJpbGl0eScsICgpID0+IHtcbiAgICBpdCgnaGFzIHByb3BlciBmb3JtIHN0cnVjdHVyZScsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpO1xuICAgICAgZXhwZWN0KGZvcm0pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnaGFzIHByb3BlciBsYWJlbHMgZm9yIGFsbCBpbnB1dHMnLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL2NhcmUgdHlwZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2NhcmUgZGF0ZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL25vdGVzL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2hhcyByZXF1aXJlZCBhdHRyaWJ1dGUgb24gZGF0ZSBmaWVsZCcsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBjb25zdCBkYXRlSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2NhcmUgZGF0ZS9pKTtcbiAgICAgIGV4cGVjdChkYXRlSW5wdXQpLnRvSGF2ZUF0dHJpYnV0ZSgncmVxdWlyZWQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdkaXNhYmxlcyBmb3JtIGVsZW1lbnRzIGR1cmluZyBzdWJtaXNzaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgXG4gICAgICAvLyBNb2NrIGRlbGF5ZWQgcmVzcG9uc2VcbiAgICAgIGdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKCkgPT4gXG4gICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSB9KVxuICAgICAgICAgIH0pLCAxMDApXG4gICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9sb2cgY2FyZS9pIH0pO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhzdWJtaXRCdXR0b24pO1xuXG4gICAgICAvLyBBbGwgY2FyZSB0eXBlIGJ1dHRvbnMgc2hvdWxkIGJlIGRpc2FibGVkXG4gICAgICBjb25zdCBjYXJlVHlwZUJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nKS5maWx0ZXIoYnRuID0+IFxuICAgICAgICBidG4udGV4dENvbnRlbnQ/LmluY2x1ZGVzKCdGZXJ0aWxpemVyJykgfHwgXG4gICAgICAgIGJ0bi50ZXh0Q29udGVudD8uaW5jbHVkZXMoJ1dhdGVyJykgfHxcbiAgICAgICAgYnRuLnRleHRDb250ZW50Py5pbmNsdWRlcygnUmVwb3QnKVxuICAgICAgKTtcblxuICAgICAgY2FyZVR5cGVCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgICAgZXhwZWN0KGJ1dHRvbikudG9CZURpc2FibGVkKCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gRGF0ZSBpbnB1dCBzaG91bGQgYmUgZGlzYWJsZWRcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2NhcmUgZGF0ZS9pKSkudG9CZURpc2FibGVkKCk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwidXNlT2ZmbGluZSIsImZuIiwidXNlU2VydmljZVdvcmtlciIsInJlZ2lzdGVyQmFja2dyb3VuZFN5bmMiLCJtb2NrUmVnaXN0ZXJCYWNrZ3JvdW5kU3luYyIsIm1vY2tBZGRQZW5kaW5nQ2FyZUVudHJ5IiwiZGVzY3JpYmUiLCJkZWZhdWx0UHJvcHMiLCJwbGFudEluc3RhbmNlSWQiLCJvblN1Y2Nlc3MiLCJvbkNhbmNlbCIsImRlZmF1bHRDYXJlVHlwZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja0FwaVJlc3BvbnNlcyIsInN1Y2Nlc3MiLCJkYXRhIiwiaWQiLCJtb2NrUmV0dXJuVmFsdWUiLCJpc09ubGluZSIsImFkZFBlbmRpbmdDYXJlRW50cnkiLCJpdCIsInJlbmRlcldpdGhQcm92aWRlcnMiLCJRdWlja0NhcmVGb3JtIiwiZXhwZWN0Iiwic2NyZWVuIiwiZ2V0QnlUZXh0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJkYXRlSW5wdXQiLCJnZXRCeUxhYmVsVGV4dCIsInRvZGF5IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3BsaXQiLCJ0b0hhdmVWYWx1ZSIsInRvSGF2ZUF0dHJpYnV0ZSIsIm5vdGVzRmllbGQiLCJnZXRCeVJvbGUiLCJuYW1lIiwid2F0ZXJCdXR0b24iLCJ0b0hhdmVDbGFzcyIsInVzZXIiLCJ1c2VyRXZlbnQiLCJzZXR1cCIsImNsaWNrIiwiZ2V0QnlQbGFjZWhvbGRlclRleHQiLCJyZXBvdEJ1dHRvbiIsIndhaXRGb3IiLCJxdWVyeUJ5TGFiZWxUZXh0Iiwibm90IiwiZGVzY3JpcHRpb24iLCJ5ZXN0ZXJkYXkiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInllc3RlcmRheVN0cmluZyIsImNsZWFyIiwidHlwZSIsImdsb2JhbCIsImZldGNoIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJvYmplY3RDb250YWluaW5nIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJzdHJpbmdDb250YWluaW5nIiwidG9IYXZlQmVlbkNhbGxlZCIsImZldGNoQ2FsbCIsImNhbGxzIiwicmVxdWVzdEJvZHkiLCJKU09OIiwicGFyc2UiLCJmZXJ0aWxpemVyVHlwZSIsInRvQmUiLCJwb3RTaXplIiwic29pbFR5cGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJvayIsImpzb24iLCJzdWJtaXRCdXR0b24iLCJ0b0JlRGlzYWJsZWQiLCJjYXJlVHlwZSIsIm5vdGVzIiwibW9ja0FwaUVycm9yIiwiZXJyb3IiLCJyZWplY3QiLCJFcnJvciIsInF1ZXJ5QnlUZXh0IiwicHJvcHNXaXRob3V0UGxhbnQiLCJwcm9wc1dpdGhvdXRDYW5jZWwiLCJxdWVyeUJ5Um9sZSIsImZvcm0iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjYXJlVHlwZUJ1dHRvbnMiLCJnZXRBbGxCeVJvbGUiLCJmaWx0ZXIiLCJidG4iLCJ0ZXh0Q29udGVudCIsImluY2x1ZGVzIiwiZm9yRWFjaCIsImJ1dHRvbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0NBRUM7QUFhREEsS0FBS0MsSUFBSSxDQUFDLHNCQUFzQixJQUFPLENBQUE7UUFDckNDLFlBQVlGLEtBQUtHLEVBQUU7SUFDckIsQ0FBQTtBQUVBSCxLQUFLQyxJQUFJLENBQUMsOEJBQThCLElBQU8sQ0FBQTtRQUM3Q0csa0JBQWtCLElBQU8sQ0FBQTtnQkFDdkJDLHdCQUF3QkM7WUFDMUIsQ0FBQTtJQUNGLENBQUE7Ozs7OzhEQW5Ca0I7d0JBQ2M7a0VBQ1Y7K0JBQzhDO3NFQUMxQzs0QkFDQzs7Ozs7O0FBRTNCLHdCQUF3QjtBQUN4QixNQUFNQywwQkFBMEJQLEtBQUtHLEVBQUU7QUFDdkMsTUFBTUcsNkJBQTZCTixLQUFLRyxFQUFFO0FBWTFDSyxTQUFTLGlCQUFpQjtJQUN4QixNQUFNQyxlQUFlO1FBQ25CQyxpQkFBaUI7UUFDakJDLFdBQVdYLEtBQUtHLEVBQUU7UUFDbEJTLFVB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