a9f20e03d46c11f47fd998eda5a6a6be
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get GET () {
        return GET;
    },
    get POST () {
        return POST;
    }
});
const _server = require("next/server");
const _zod = require("zod");
const _plantinstances = require("../../../lib/db/queries/plant-instances");
const _plantschemas = require("../../../lib/validation/plant-schemas");
const _server1 = require("../../../lib/auth/server");
async function GET(request) {
    try {
        const { user } = await (0, _server1.validateRequest)();
        if (!user) {
            return _server.NextResponse.json({
                success: false,
                error: 'Unauthorized'
            }, {
                status: 401
            });
        }
        const { searchParams } = new URL(request.url);
        // Parse filter parameters
        const filterParams = {
            userId: user.id,
            location: searchParams.get('location') || undefined,
            plantId: searchParams.get('plantId') ? parseInt(searchParams.get('plantId'), 10) : undefined,
            isActive: searchParams.get('isActive') ? searchParams.get('isActive') === 'true' : undefined,
            overdueOnly: searchParams.get('overdueOnly') === 'true',
            dueSoonDays: searchParams.get('dueSoonDays') ? parseInt(searchParams.get('dueSoonDays'), 10) : undefined,
            createdAfter: searchParams.get('createdAfter') ? new Date(searchParams.get('createdAfter')) : undefined,
            createdBefore: searchParams.get('createdBefore') ? new Date(searchParams.get('createdBefore')) : undefined,
            lastFertilizedAfter: searchParams.get('lastFertilizedAfter') ? new Date(searchParams.get('lastFertilizedAfter')) : undefined,
            lastFertilizedBefore: searchParams.get('lastFertilizedBefore') ? new Date(searchParams.get('lastFertilizedBefore')) : undefined,
            limit: searchParams.get('limit') ? parseInt(searchParams.get('limit'), 10) : 20,
            offset: searchParams.get('offset') ? parseInt(searchParams.get('offset'), 10) : 0
        };
        // Validate filter parameters
        const validatedFilters = _plantschemas.plantInstanceFilterSchema.parse(filterParams);
        // Get plant instances with filters
        const result = await _plantinstances.PlantInstanceQueries.getWithFilters(validatedFilters);
        return _server.NextResponse.json(result);
    } catch (error) {
        console.error('Failed to get plant instances:', error);
        return _server.NextResponse.json({
            success: false,
            error: 'Internal server error'
        }, {
            status: 500
        });
    }
}
async function POST(request) {
    try {
        const { user } = await (0, _server1.validateRequest)();
        if (!user) {
            return _server.NextResponse.json({
                success: false,
                error: 'Unauthorized'
            }, {
                status: 401
            });
        }
        // Check if request is FormData or JSON
        const contentType = request.headers.get('content-type');
        let body;
        if (contentType?.includes('multipart/form-data')) {
            // Handle FormData (for file uploads)
            const formData = await request.formData();
            body = {};
            // Helper function to convert file to base64
            const fileToBase64 = async (file)=>{
                const bytes = await file.arrayBuffer();
                const buffer = Buffer.from(bytes);
                const base64 = buffer.toString('base64');
                return `data:${file.type};base64,${base64}`;
            };
            const imageFiles = [];
            const existingImages = [];
            // Extract form fields
            for (const [key, value] of formData.entries()){
                if (key.startsWith('imageFiles[')) {
                    // Handle new image files
                    if (value instanceof File) {
                        imageFiles.push(value);
                    }
                } else if (key.startsWith('existingImages[')) {
                    // Handle existing images
                    existingImages.push(value);
                } else {
                    // Convert form values to appropriate types
                    if (key === 'plantId') {
                        body[key] = parseInt(value, 10);
                    } else if (key === 'isActive') {
                        body[key] = value === 'true';
                    } else {
                        body[key] = value;
                    }
                }
            }
            // Convert new image files to base64
            const newImageBase64s = await Promise.all(imageFiles.map((file)=>fileToBase64(file)));
            // Combine existing images with new images
            body.images = [
                ...existingImages,
                ...newImageBase64s
            ];
        } else {
            // Handle JSON
            try {
                body = await request.json();
                if (!body || Object.keys(body).length === 0) {
                    return _server.NextResponse.json({
                        success: false,
                        error: 'Request body is required'
                    }, {
                        status: 400
                    });
                }
            } catch (jsonError) {
                return _server.NextResponse.json({
                    success: false,
                    error: 'Invalid JSON in request body'
                }, {
                    status: 400
                });
            }
        }
        // Add user ID to the request body and convert date strings to Date objects
        const instanceData = {
            ...body,
            userId: user.id,
            // Convert date strings to Date objects if they exist and are not empty
            lastFertilized: body.lastFertilized && body.lastFertilized !== '' ? new Date(body.lastFertilized) : null,
            lastRepot: body.lastRepot && body.lastRepot !== '' ? new Date(body.lastRepot) : null
        };
        // Validate the plant instance data
        let validatedData;
        try {
            validatedData = _plantschemas.createPlantInstanceSchema.parse(instanceData);
        } catch (validationError) {
            if (validationError instanceof _zod.z.ZodError) {
                return _server.NextResponse.json({
                    success: false,
                    error: 'Validation failed',
                    details: validationError.issues
                }, {
                    status: 400
                });
            }
            return _server.NextResponse.json({
                success: false,
                error: 'Validation failed',
                details: validationError instanceof Error ? validationError.message : 'Invalid data'
            }, {
                status: 400
            });
        }
        // Calculate initial fertilizer due date if schedule is provided
        if (validatedData.fertilizerSchedule && !validatedData.fertilizerDue) {
            const now = new Date();
            const scheduleMatch = validatedData.fertilizerSchedule.match(/(\d+)\s*(day|week|month)s?/i);
            if (scheduleMatch) {
                const [, amount, unit] = scheduleMatch;
                const dueDate = new Date(now);
                switch(unit.toLowerCase()){
                    case 'day':
                        dueDate.setDate(dueDate.getDate() + parseInt(amount, 10));
                        break;
                    case 'week':
                        dueDate.setDate(dueDate.getDate() + parseInt(amount, 10) * 7);
                        break;
                    case 'month':
                        dueDate.setMonth(dueDate.getMonth() + parseInt(amount, 10));
                        break;
                }
                validatedData.fertilizerDue = dueDate;
            }
        }
        // Create the plant instance
        const plantInstance = await _plantinstances.PlantInstanceQueries.create(validatedData);
        // Get the enhanced plant instance with plant data
        const enhancedInstance = await _plantinstances.PlantInstanceQueries.getEnhancedById(plantInstance.id);
        return _server.NextResponse.json({
            success: true,
            data: enhancedInstance
        }, {
            status: 201
        });
    } catch (error) {
        console.error('Failed to create plant instance:', error);
        if (error instanceof Error && error.message.includes('validation')) {
            return _server.NextResponse.json({
                success: false,
                error: 'Invalid plant instance data',
                details: error.message
            }, {
                status: 400
            });
        }
        return _server.NextResponse.json({
            success: false,
            error: 'Failed to create plant instance'
        }, {
            status: 500
        });
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdGVmYW5iZWtrZXIvcHJvamVjdHMvZmFuY3ktcGxhbnRpZXMvc3JjL2FwcC9hcGkvcGxhbnQtaW5zdGFuY2VzL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IFBsYW50SW5zdGFuY2VRdWVyaWVzIH0gZnJvbSAnQC9saWIvZGIvcXVlcmllcy9wbGFudC1pbnN0YW5jZXMnO1xuaW1wb3J0IHsgY3JlYXRlUGxhbnRJbnN0YW5jZVNjaGVtYSwgcGxhbnRJbnN0YW5jZUZpbHRlclNjaGVtYSB9IGZyb20gJ0AvbGliL3ZhbGlkYXRpb24vcGxhbnQtc2NoZW1hcyc7XG5pbXBvcnQgeyB2YWxpZGF0ZVJlcXVlc3QgfSBmcm9tICdAL2xpYi9hdXRoL3NlcnZlcic7XG5cbi8vIEdFVCAvYXBpL3BsYW50LWluc3RhbmNlcyAtIEdldCBwbGFudCBpbnN0YW5jZXMgd2l0aCBvcHRpb25hbCBmaWx0ZXJpbmdcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVzZXIgfSA9IGF3YWl0IHZhbGlkYXRlUmVxdWVzdCgpO1xuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCcgXG4gICAgICB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBcbiAgICAvLyBQYXJzZSBmaWx0ZXIgcGFyYW1ldGVyc1xuICAgIGNvbnN0IGZpbHRlclBhcmFtcyA9IHtcbiAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgIGxvY2F0aW9uOiBzZWFyY2hQYXJhbXMuZ2V0KCdsb2NhdGlvbicpIHx8IHVuZGVmaW5lZCxcbiAgICAgIHBsYW50SWQ6IHNlYXJjaFBhcmFtcy5nZXQoJ3BsYW50SWQnKSA/IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ3BsYW50SWQnKSEsIDEwKSA6IHVuZGVmaW5lZCxcbiAgICAgIGlzQWN0aXZlOiBzZWFyY2hQYXJhbXMuZ2V0KCdpc0FjdGl2ZScpID8gc2VhcmNoUGFyYW1zLmdldCgnaXNBY3RpdmUnKSA9PT0gJ3RydWUnIDogdW5kZWZpbmVkLFxuICAgICAgb3ZlcmR1ZU9ubHk6IHNlYXJjaFBhcmFtcy5nZXQoJ292ZXJkdWVPbmx5JykgPT09ICd0cnVlJyxcbiAgICAgIGR1ZVNvb25EYXlzOiBzZWFyY2hQYXJhbXMuZ2V0KCdkdWVTb29uRGF5cycpID8gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnZHVlU29vbkRheXMnKSEsIDEwKSA6IHVuZGVmaW5lZCxcbiAgICAgIGNyZWF0ZWRBZnRlcjogc2VhcmNoUGFyYW1zLmdldCgnY3JlYXRlZEFmdGVyJykgPyBuZXcgRGF0ZShzZWFyY2hQYXJhbXMuZ2V0KCdjcmVhdGVkQWZ0ZXInKSEpIDogdW5kZWZpbmVkLFxuICAgICAgY3JlYXRlZEJlZm9yZTogc2VhcmNoUGFyYW1zLmdldCgnY3JlYXRlZEJlZm9yZScpID8gbmV3IERhdGUoc2VhcmNoUGFyYW1zLmdldCgnY3JlYXRlZEJlZm9yZScpISkgOiB1bmRlZmluZWQsXG4gICAgICBsYXN0RmVydGlsaXplZEFmdGVyOiBzZWFyY2hQYXJhbXMuZ2V0KCdsYXN0RmVydGlsaXplZEFmdGVyJykgPyBuZXcgRGF0ZShzZWFyY2hQYXJhbXMuZ2V0KCdsYXN0RmVydGlsaXplZEFmdGVyJykhKSA6IHVuZGVmaW5lZCxcbiAgICAgIGxhc3RGZXJ0aWxpemVkQmVmb3JlOiBzZWFyY2hQYXJhbXMuZ2V0KCdsYXN0RmVydGlsaXplZEJlZm9yZScpID8gbmV3IERhdGUoc2VhcmNoUGFyYW1zLmdldCgnbGFzdEZlcnRpbGl6ZWRCZWZvcmUnKSEpIDogdW5kZWZpbmVkLFxuICAgICAgbGltaXQ6IHNlYXJjaFBhcmFtcy5nZXQoJ2xpbWl0JykgPyBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KCdsaW1pdCcpISwgMTApIDogMjAsXG4gICAgICBvZmZzZXQ6IHNlYXJjaFBhcmFtcy5nZXQoJ29mZnNldCcpID8gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnb2Zmc2V0JykhLCAxMCkgOiAwLFxuICAgIH07XG5cbiAgICAvLyBWYWxpZGF0ZSBmaWx0ZXIgcGFyYW1ldGVyc1xuICAgIGNvbnN0IHZhbGlkYXRlZEZpbHRlcnMgPSBwbGFudEluc3RhbmNlRmlsdGVyU2NoZW1hLnBhcnNlKGZpbHRlclBhcmFtcyk7XG4gICAgXG4gICAgLy8gR2V0IHBsYW50IGluc3RhbmNlcyB3aXRoIGZpbHRlcnNcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQbGFudEluc3RhbmNlUXVlcmllcy5nZXRXaXRoRmlsdGVycyh2YWxpZGF0ZWRGaWx0ZXJzKTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzdWx0KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IHBsYW50IGluc3RhbmNlczonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyBcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8vIFBPU1QgL2FwaS9wbGFudC1pbnN0YW5jZXMgLSBDcmVhdGUgYSBuZXcgcGxhbnQgaW5zdGFuY2VcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VyIH0gPSBhd2FpdCB2YWxpZGF0ZVJlcXVlc3QoKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIFxuICAgICAgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiByZXF1ZXN0IGlzIEZvcm1EYXRhIG9yIEpTT05cbiAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICAgIGxldCBib2R5OiBhbnk7XG4gICAgXG4gICAgaWYgKGNvbnRlbnRUeXBlPy5pbmNsdWRlcygnbXVsdGlwYXJ0L2Zvcm0tZGF0YScpKSB7XG4gICAgICAvLyBIYW5kbGUgRm9ybURhdGEgKGZvciBmaWxlIHVwbG9hZHMpXG4gICAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcXVlc3QuZm9ybURhdGEoKTtcbiAgICAgIGJvZHkgPSB7fTtcbiAgICAgIFxuICAgICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgZmlsZSB0byBiYXNlNjRcbiAgICAgIGNvbnN0IGZpbGVUb0Jhc2U2NCA9IGFzeW5jIChmaWxlOiBGaWxlKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgICAgICAgY29uc3QgYnl0ZXMgPSBhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCk7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJ5dGVzKTtcbiAgICAgICAgY29uc3QgYmFzZTY0ID0gYnVmZmVyLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICAgICAgcmV0dXJuIGBkYXRhOiR7ZmlsZS50eXBlfTtiYXNlNjQsJHtiYXNlNjR9YDtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGltYWdlRmlsZXM6IEZpbGVbXSA9IFtdO1xuICAgICAgY29uc3QgZXhpc3RpbmdJbWFnZXM6IHN0cmluZ1tdID0gW107XG4gICAgICBcbiAgICAgIC8vIEV4dHJhY3QgZm9ybSBmaWVsZHNcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGZvcm1EYXRhLmVudHJpZXMoKSkge1xuICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ2ltYWdlRmlsZXNbJykpIHtcbiAgICAgICAgICAvLyBIYW5kbGUgbmV3IGltYWdlIGZpbGVzXG4gICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRmlsZSkge1xuICAgICAgICAgICAgaW1hZ2VGaWxlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5LnN0YXJ0c1dpdGgoJ2V4aXN0aW5nSW1hZ2VzWycpKSB7XG4gICAgICAgICAgLy8gSGFuZGxlIGV4aXN0aW5nIGltYWdlc1xuICAgICAgICAgIGV4aXN0aW5nSW1hZ2VzLnB1c2godmFsdWUgYXMgc3RyaW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDb252ZXJ0IGZvcm0gdmFsdWVzIHRvIGFwcHJvcHJpYXRlIHR5cGVzXG4gICAgICAgICAgaWYgKGtleSA9PT0gJ3BsYW50SWQnKSB7XG4gICAgICAgICAgICBib2R5W2tleV0gPSBwYXJzZUludCh2YWx1ZSBhcyBzdHJpbmcsIDEwKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2lzQWN0aXZlJykge1xuICAgICAgICAgICAgYm9keVtrZXldID0gdmFsdWUgPT09ICd0cnVlJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYm9keVtrZXldID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENvbnZlcnQgbmV3IGltYWdlIGZpbGVzIHRvIGJhc2U2NFxuICAgICAgY29uc3QgbmV3SW1hZ2VCYXNlNjRzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIGltYWdlRmlsZXMubWFwKGZpbGUgPT4gZmlsZVRvQmFzZTY0KGZpbGUpKVxuICAgICAgKTtcblxuICAgICAgLy8gQ29tYmluZSBleGlzdGluZyBpbWFnZXMgd2l0aCBuZXcgaW1hZ2VzXG4gICAgICBib2R5LmltYWdlcyA9IFsuLi5leGlzdGluZ0ltYWdlcywgLi4ubmV3SW1hZ2VCYXNlNjRzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSGFuZGxlIEpTT05cbiAgICAgIHRyeSB7XG4gICAgICAgIGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICAgICAgaWYgKCFib2R5IHx8IE9iamVjdC5rZXlzKGJvZHkpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICBlcnJvcjogJ1JlcXVlc3QgYm9keSBpcyByZXF1aXJlZCcgXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoanNvbkVycm9yKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IFxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgSlNPTiBpbiByZXF1ZXN0IGJvZHknIFxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZCB1c2VyIElEIHRvIHRoZSByZXF1ZXN0IGJvZHkgYW5kIGNvbnZlcnQgZGF0ZSBzdHJpbmdzIHRvIERhdGUgb2JqZWN0c1xuICAgIGNvbnN0IGluc3RhbmNlRGF0YSA9IHtcbiAgICAgIC4uLmJvZHksXG4gICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAvLyBDb252ZXJ0IGRhdGUgc3RyaW5ncyB0byBEYXRlIG9iamVjdHMgaWYgdGhleSBleGlzdCBhbmQgYXJlIG5vdCBlbXB0eVxuICAgICAgbGFzdEZlcnRpbGl6ZWQ6IGJvZHkubGFzdEZlcnRpbGl6ZWQgJiYgYm9keS5sYXN0RmVydGlsaXplZCAhPT0gJycgPyBuZXcgRGF0ZShib2R5Lmxhc3RGZXJ0aWxpemVkKSA6IG51bGwsXG4gICAgICBsYXN0UmVwb3Q6IGJvZHkubGFzdFJlcG90ICYmIGJvZHkubGFzdFJlcG90ICE9PSAnJyA/IG5ldyBEYXRlKGJvZHkubGFzdFJlcG90KSA6IG51bGwsXG4gICAgfTtcblxuICAgIC8vIFZhbGlkYXRlIHRoZSBwbGFudCBpbnN0YW5jZSBkYXRhXG4gICAgbGV0IHZhbGlkYXRlZERhdGE7XG4gICAgdHJ5IHtcbiAgICAgIHZhbGlkYXRlZERhdGEgPSBjcmVhdGVQbGFudEluc3RhbmNlU2NoZW1hLnBhcnNlKGluc3RhbmNlRGF0YSk7XG4gICAgfSBjYXRjaCAodmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICBpZiAodmFsaWRhdGlvbkVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uRXJyb3IuaXNzdWVzXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHZhbGlkYXRpb25FcnJvci5tZXNzYWdlIDogJ0ludmFsaWQgZGF0YSdcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgaW5pdGlhbCBmZXJ0aWxpemVyIGR1ZSBkYXRlIGlmIHNjaGVkdWxlIGlzIHByb3ZpZGVkXG4gICAgaWYgKHZhbGlkYXRlZERhdGEuZmVydGlsaXplclNjaGVkdWxlICYmICF2YWxpZGF0ZWREYXRhLmZlcnRpbGl6ZXJEdWUpIHtcbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICBjb25zdCBzY2hlZHVsZU1hdGNoID0gdmFsaWRhdGVkRGF0YS5mZXJ0aWxpemVyU2NoZWR1bGUubWF0Y2goLyhcXGQrKVxccyooZGF5fHdlZWt8bW9udGgpcz8vaSk7XG4gICAgICBcbiAgICAgIGlmIChzY2hlZHVsZU1hdGNoKSB7XG4gICAgICAgIGNvbnN0IFssIGFtb3VudCwgdW5pdF0gPSBzY2hlZHVsZU1hdGNoO1xuICAgICAgICBjb25zdCBkdWVEYXRlID0gbmV3IERhdGUobm93KTtcbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCAodW5pdC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgY2FzZSAnZGF5JzpcbiAgICAgICAgICAgIGR1ZURhdGUuc2V0RGF0ZShkdWVEYXRlLmdldERhdGUoKSArIHBhcnNlSW50KGFtb3VudCwgMTApKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3dlZWsnOlxuICAgICAgICAgICAgZHVlRGF0ZS5zZXREYXRlKGR1ZURhdGUuZ2V0RGF0ZSgpICsgKHBhcnNlSW50KGFtb3VudCwgMTApICogNykpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgICAgZHVlRGF0ZS5zZXRNb250aChkdWVEYXRlLmdldE1vbnRoKCkgKyBwYXJzZUludChhbW91bnQsIDEwKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFsaWRhdGVkRGF0YS5mZXJ0aWxpemVyRHVlID0gZHVlRGF0ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgdGhlIHBsYW50IGluc3RhbmNlXG4gICAgY29uc3QgcGxhbnRJbnN0YW5jZSA9IGF3YWl0IFBsYW50SW5zdGFuY2VRdWVyaWVzLmNyZWF0ZSh2YWxpZGF0ZWREYXRhKTtcbiAgICBcbiAgICAvLyBHZXQgdGhlIGVuaGFuY2VkIHBsYW50IGluc3RhbmNlIHdpdGggcGxhbnQgZGF0YVxuICAgIGNvbnN0IGVuaGFuY2VkSW5zdGFuY2UgPSBhd2FpdCBQbGFudEluc3RhbmNlUXVlcmllcy5nZXRFbmhhbmNlZEJ5SWQocGxhbnRJbnN0YW5jZS5pZCk7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBlbmhhbmNlZEluc3RhbmNlXG4gICAgfSwgeyBzdGF0dXM6IDIwMSB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHBsYW50IGluc3RhbmNlOicsIGVycm9yKTtcbiAgICBcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCd2YWxpZGF0aW9uJykpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgcGxhbnQgaW5zdGFuY2UgZGF0YScsIFxuICAgICAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBwbGFudCBpbnN0YW5jZScgXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJHRVQiLCJQT1NUIiwicmVxdWVzdCIsInVzZXIiLCJ2YWxpZGF0ZVJlcXVlc3QiLCJOZXh0UmVzcG9uc2UiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiZmlsdGVyUGFyYW1zIiwidXNlcklkIiwiaWQiLCJsb2NhdGlvbiIsImdldCIsInVuZGVmaW5lZCIsInBsYW50SWQiLCJwYXJzZUludCIsImlzQWN0aXZlIiwib3ZlcmR1ZU9ubHkiLCJkdWVTb29uRGF5cyIsImNyZWF0ZWRBZnRlciIsIkRhdGUiLCJjcmVhdGVkQmVmb3JlIiwibGFzdEZlcnRpbGl6ZWRBZnRlciIsImxhc3RGZXJ0aWxpemVkQmVmb3JlIiwibGltaXQiLCJvZmZzZXQiLCJ2YWxpZGF0ZWRGaWx0ZXJzIiwicGxhbnRJbnN0YW5jZUZpbHRlclNjaGVtYSIsInBhcnNlIiwicmVzdWx0IiwiUGxhbnRJbnN0YW5jZVF1ZXJpZXMiLCJnZXRXaXRoRmlsdGVycyIsImNvbnNvbGUiLCJjb250ZW50VHlwZSIsImhlYWRlcnMiLCJib2R5IiwiaW5jbHVkZXMiLCJmb3JtRGF0YSIsImZpbGVUb0Jhc2U2NCIsImZpbGUiLCJieXRlcyIsImFycmF5QnVmZmVyIiwiYnVmZmVyIiwiQnVmZmVyIiwiZnJvbSIsImJhc2U2NCIsInRvU3RyaW5nIiwidHlwZSIsImltYWdlRmlsZXMiLCJleGlzdGluZ0ltYWdlcyIsImtleSIsInZhbHVlIiwiZW50cmllcyIsInN0YXJ0c1dpdGgiLCJGaWxlIiwicHVzaCIsIm5ld0ltYWdlQmFzZTY0cyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJpbWFnZXMiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwianNvbkVycm9yIiwiaW5zdGFuY2VEYXRhIiwibGFzdEZlcnRpbGl6ZWQiLCJsYXN0UmVwb3QiLCJ2YWxpZGF0ZWREYXRhIiwiY3JlYXRlUGxhbnRJbnN0YW5jZVNjaGVtYSIsInZhbGlkYXRpb25FcnJvciIsInoiLCJab2RFcnJvciIsImRldGFpbHMiLCJpc3N1ZXMiLCJFcnJvciIsIm1lc3NhZ2UiLCJmZXJ0aWxpemVyU2NoZWR1bGUiLCJmZXJ0aWxpemVyRHVlIiwibm93Iiwic2NoZWR1bGVNYXRjaCIsIm1hdGNoIiwiYW1vdW50IiwidW5pdCIsImR1ZURhdGUiLCJ0b0xvd2VyQ2FzZSIsInNldERhdGUiLCJnZXREYXRlIiwic2V0TW9udGgiLCJnZXRNb250aCIsInBsYW50SW5zdGFuY2UiLCJjcmVhdGUiLCJlbmhhbmNlZEluc3RhbmNlIiwiZ2V0RW5oYW5jZWRCeUlkIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7UUFPc0JBO2VBQUFBOztRQWdEQUM7ZUFBQUE7Ozt3QkF2RG9CO3FCQUN4QjtnQ0FDbUI7OEJBQ2dDO3lCQUNyQztBQUd6QixlQUFlRCxJQUFJRSxPQUFvQjtJQUM1QyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxJQUFJLEVBQUUsR0FBRyxNQUFNQyxJQUFBQSx3QkFBZTtRQUN0QyxJQUFJLENBQUNELE1BQU07WUFDVCxPQUFPRSxvQkFBWSxDQUFDQyxJQUFJLENBQUM7Z0JBQ3ZCQyxTQUFTO2dCQUNUQyxPQUFPO1lBQ1QsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ25CO1FBRUEsTUFBTSxFQUFFQyxZQUFZLEVBQUUsR0FBRyxJQUFJQyxJQUFJVCxRQUFRVSxHQUFHO1FBRTVDLDBCQUEwQjtRQUMxQixNQUFNQyxlQUFlO1lBQ25CQyxRQUFRWCxLQUFLWSxFQUFFO1lBQ2ZDLFVBQVVOLGFBQWFPLEdBQUcsQ0FBQyxlQUFlQztZQUMxQ0MsU0FBU1QsYUFBYU8sR0FBRyxDQUFDLGFBQWFHLFNBQVNWLGFBQWFPLEdBQUcsQ0FBQyxZQUFhLE1BQU1DO1lBQ3BGRyxVQUFVWCxhQUFhTyxHQUFHLENBQUMsY0FBY1AsYUFBYU8s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