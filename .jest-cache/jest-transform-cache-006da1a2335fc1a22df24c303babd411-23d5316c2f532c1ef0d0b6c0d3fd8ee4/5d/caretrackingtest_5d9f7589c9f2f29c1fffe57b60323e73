a06a8961bc192a9120b4025101638eeb
// Care Tracking API Endpoint Tests
// Tests POST /api/care, GET /api/care/history, GET /api/dashboard endpoints
"use strict";
// Mock the auth functions
jest.mock('@/lib/auth/server', ()=>({
        requireAuthSession: jest.fn(),
        validateRequest: jest.fn()
    }));
// Mock the care service
jest.mock('@/lib/services/care-service', ()=>({
        CareService: {
            logCareEvent: jest.fn(),
            quickCareLog: jest.fn(),
            getCareDashboard: jest.fn()
        }
    }));
// Mock care history queries
jest.mock('@/lib/db/queries/care-history', ()=>({
        CareHistoryQueries: {
            getCareHistoryForPlant: jest.fn()
        }
    }));
// Mock database and schema
jest.mock('@/lib/db', ()=>({
        db: {
            select: jest.fn().mockReturnThis(),
            from: jest.fn().mockReturnThis(),
            where: jest.fn().mockReturnThis()
        }
    }));
jest.mock('@/lib/db/schema', ()=>({
        plantInstances: {
            id: 'id',
            userId: 'userId',
            isActive: 'isActive',
            fertilizerDue: 'fertilizerDue',
            nickname: 'nickname'
        },
        propagations: {
            userId: 'userId',
            status: 'status'
        }
    }));
// Mock care validation
jest.mock('@/lib/validation/care-schemas', ()=>({
        careValidation: {
            validateCareForm: jest.fn(),
            validateQuickCareLog: jest.fn()
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _server = require("next/server");
const _route = require("../../app/api/care/log/route");
const _route1 = require("../../app/api/care/quick-log/route");
const _route2 = require("../../app/api/care/history/[plantInstanceId]/route");
const _route3 = require("../../app/api/care/dashboard/route");
const _route4 = require("../../app/api/dashboard/route");
const _userfactory = require("../../test-utils/factories/user-factory.js");
const _plantfactory = require("../../test-utils/factories/plant-factory.js");
const _apihelpers = require("../../test-utils/helpers/api-helpers.js");
const _server1 = require("../../lib/auth/server");
const _careservice = require("../../lib/services/care-service");
const _carehistory = require("../../lib/db/queries/care-history");
const _careschemas = require("../../lib/validation/care-schemas");
const _db = require("../../lib/db");
describe('Care Tracking API Endpoints', ()=>{
    let testUser;
    let testSession;
    beforeEach(()=>{
        jest.clearAllMocks();
        (0, _apihelpers.resetApiMocks)();
        testUser = (0, _userfactory.createTestUser)();
        testSession = (0, _userfactory.createTestSession)(testUser);
        // Default auth mocks
        _server1.requireAuthSession.mockResolvedValue({
            user: testUser,
            session: testSession
        });
        _server1.validateRequest.mockResolvedValue({
            user: testUser,
            session: testSession
        });
    });
    afterEach(()=>{
        jest.restoreAllMocks();
    });
    describe('POST /api/care/log - Care record creation', ()=>{
        it('should create care record with valid data', async ()=>{
            // Arrange
            const testPlantInstance = (0, _plantfactory.createTestPlantInstance)({
                userId: testUser.id
            });
            const requestBody = {
                plantInstanceId: testPlantInstance.id,
                careType: 'watering',
                careDate: '2024-01-15T10:00:00.000Z',
                notes: 'Regular watering'
            };
            const validatedData = {
                ...requestBody,
                careDate: new Date(requestBody.careDate)
            };
            const createdCareRecord = (0, _plantfactory.createTestCareRecord)({
                ...validatedData,
                id: 1,
                userId: testUser.id
            });
            _careschemas.careValidation.validateCareForm.mockReturnValue({
                success: true,
                data: validatedData
            });
            _careservice.CareService.logCareEvent.mockResolvedValue({
                success: true,
                careHistory: createdCareRecord
            });
            const request = new _server.NextRequest('http://localhost:3000/api/care/log', {
                method: 'POST',
                body: JSON.stringify(requestBody),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData).toEqual({
                ...createdCareRecord,
                // JSON serializes dates to strings
                careDate: createdCareRecord.careDate.toISOString(),
                createdAt: createdCareRecord.createdAt.toISOString(),
                updatedAt: createdCareRecord.updatedAt.toISOString()
            });
            expect(_server1.requireAuthSession).toHaveBeenCalled();
            expect(_careschemas.careValidation.validateCareForm).toHaveBeenCalledWith(validatedData);
            expect(_careservice.CareService.logCareEvent).toHaveBeenCalledWith(testUser.id, validatedData);
        });
        it('should return validation error for invalid care data', async ()=>{
            // Arrange
            const requestBody = {
                plantInstanceId: 'invalid',
                careType: 'invalid_type',
                careDate: 'invalid_date'
            };
            _careschemas.careValidation.validateCareForm.mockReturnValue({
                success: false,
                error: {
                    issues: [
                        {
                            message: 'Plant instance ID must be a number'
                        },
                        {
                            message: 'Invalid care type'
                        },
                        {
                            message: 'Invalid date format'
                        }
                    ]
                }
            });
            const request = new _server.NextRequest('http://localhost:3000/api/care/log', {
                method: 'POST',
                body: JSON.stringify(requestBody),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData).toEqual({
                error: 'Plant instance ID must be a number'
            });
            expect(_careservice.CareService.logCareEvent).not.toHaveBeenCalled();
        });
        it('should return error when care service fails', async ()=>{
            // Arrange
            const requestBody = {
                plantInstanceId: 1,
                careType: 'watering',
                careDate: '2024-01-15T10:00:00.000Z'
            };
            _careschemas.careValidation.validateCareForm.mockReturnValue({
                success: true,
                data: {
                    ...requestBody,
                    careDate: new Date(requestBody.careDate)
                }
            });
            _careservice.CareService.logCareEvent.mockResolvedValue({
                success: false,
                error: 'Plant instance not found'
            });
            const request = new _server.NextRequest('http://localhost:3000/api/care/log', {
                method: 'POST',
                body: JSON.stringify(requestBody),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData).toEqual({
                error: 'Plant instance not found'
            });
        });
        it('should return unauthorized error when user not authenticated', async ()=>{
            // Arrange
            _server1.requireAuthSession.mockRejectedValue(new Error('Unauthorized'));
            const request = new _server.NextRequest('http://localhost:3000/api/care/log', {
                method: 'POST',
                body: JSON.stringify({}),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(responseData).toEqual({
                error: 'Failed to log care event'
            });
            expect(_careservice.CareService.logCareEvent).not.toHaveBeenCalled();
        });
        it('should handle malformed JSON request', async ()=>{
            // Arrange
            const request = new _server.NextRequest('http://localhost:3000/api/care/log', {
                method: 'POST',
                body: 'invalid json',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(responseData).toEqual({
                error: 'Failed to log care event'
            });
            expect(_careservice.CareService.logCareEvent).not.toHaveBeenCalled();
        });
    });
    describe('POST /api/care/quick-log - Quick care logging', ()=>{
        it('should create quick care log with valid data', async ()=>{
            // Arrange
            const requestBody = {
                plantInstanceIds: [
                    1,
                    2,
                    3
                ],
                careType: 'watering',
                notes: 'Quick watering session'
            };
            const validatedData = {
                ...requestBody,
                careDate: expect.any(Date)
            };
            const careRecords = [
                (0, _plantfactory.createTestCareRecord)({
                    id: 1,
                    plantInstanceId: 1
                }),
                (0, _plantfactory.createTestCareRecord)({
                    id: 2,
                    plantInstanceId: 2
                }),
                (0, _plantfactory.createTestCareRecord)({
                    id: 3,
                    plantInstanceId: 3
                })
            ];
            _careschemas.careValidation.validateQuickCareLog.mockReturnValue({
                success: true,
                data: validatedData
            });
            _careservice.CareService.quickCareLog.mockResolvedValue({
                success: true,
                careHistory: careRecords
            });
            const request = new _server.NextRequest('http://localhost:3000/api/care/quick-log', {
                method: 'POST',
                body: JSON.stringify(requestBody),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData).toEqual(careRecords);
            expect(_server1.requireAuthSession).toHaveBeenCalled();
            expect(_careschemas.careValidation.validateQuickCareLog).toHaveBeenCalledWith(validatedData);
            expect(_careservice.CareService.quickCareLog).toHaveBeenCalledWith(testUser.id, validatedData);
        });
        it('should return validation error with detailed issues', async ()=>{
            // Arrange
            const requestBody = {
                plantInstanceIds: [],
                careType: 'invalid'
            };
            _careschemas.careValidation.validateQuickCareLog.mockReturnValue({
                success: false,
                error: {
                    issues: [
                        {
                            message: 'At least one plant instance is required'
                        },
                        {
                            message: 'Invalid care type'
                        }
                    ]
                }
            });
            const request = new _server.NextRequest('http://localhost:3000/api/care/quick-log', {
                method: 'POST',
                body: JSON.stringify(requestBody),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData).toEqual({
                error: 'At least one plant instance is required',
                details: [
                    {
                        message: 'At least one plant instance is required'
                    },
                    {
                        message: 'Invalid care type'
                    }
                ]
            });
            expect(_careservice.CareService.quickCareLog).not.toHaveBeenCalled();
        });
        it('should handle quick care service errors', async ()=>{
            // Arrange
            const requestBody = {
                plantInstanceIds: [
                    999
                ],
                careType: 'watering'
            };
            _careschemas.careValidation.validateQuickCareLog.mockReturnValue({
                success: true,
                data: {
                    ...requestBody,
                    careDate: new Date()
                }
            });
            _careservice.CareService.quickCareLog.mockResolvedValue({
                success: false,
                error: 'Some plant instances not found'
            });
            const request = new _server.NextRequest('http://localhost:3000/api/care/quick-log', {
                method: 'POST',
                body: JSON.stringify(requestBody),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData).toEqual({
                error: 'Some plant instances not found'
            });
        });
    });
    describe('GET /api/care/history/[plantInstanceId] - Care history retrieval and filtering', ()=>{
        it('should return care history with default filters', async ()=>{
            // Arrange
            const plantInstanceId = 1;
            const careHistory = [
                (0, _plantfactory.createTestCareRecord)({
                    id: 1,
                    plantInstanceId,
                    careType: 'watering'
                }),
                (0, _plantfactory.createTestCareRecord)({
                    id: 2,
                    plantInstanceId,
                    careType: 'fertilizing'
                })
            ];
            _carehistory.CareHistoryQueries.getCareHistoryForPlant.mockResolvedValue(careHistory);
            const request = new _server.NextRequest(`http://localhost:3000/api/care/history/${plantInstanceId}`);
            const params = Promise.resolve({
                plantInstanceId: plantInstanceId.toString()
            });
            // Act
            const response = await (0, _route2.GET)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData).toEqual(careHistory);
            expect(_server1.validateRequest).toHaveBeenCalled();
            expect(_carehistory.CareHistoryQueries.getCareHistoryForPlant).toHaveBeenCalledWith(plantInstanceId, testUser.id, {
                careType: undefined,
                startDate: undefined,
                endDate: undefined,
                limit: 50,
                offset: 0,
                sortBy: 'care_date',
                sortOrder: 'desc'
            });
        });
        it('should return care history with custom filters', async ()=>{
            // Arrange
            const plantInstanceId = 1;
            const careHistory = [
                (0, _plantfactory.createTestCareRecord)({
                    id: 1,
                    plantInstanceId,
                    careType: 'watering'
                })
            ];
            _carehistory.CareHistoryQueries.getCareHistoryForPlant.mockResolvedValue(careHistory);
            const queryParams = new URLSearchParams({
                careType: 'watering',
                startDate: '2024-01-01',
                endDate: '2024-01-31',
                limit: '10',
                offset: '5',
                sortBy: 'care_type',
                sortOrder: 'asc'
            });
            const request = new _server.NextRequest(`http://localhost:3000/api/care/history/${plantInstanceId}?${queryParams}`);
            const params = Promise.resolve({
                plantInstanceId: plantInstanceId.toString()
            });
            // Act
            const response = await (0, _route2.GET)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData).toEqual(careHistory);
            expect(_carehistory.CareHistoryQueries.getCareHistoryForPlant).toHaveBeenCalledWith(plantInstanceId, testUser.id, {
                careType: 'watering',
                startDate: new Date('2024-01-01'),
                endDate: new Date('2024-01-31'),
                limit: 10,
                offset: 5,
                sortBy: 'care_type',
                sortOrder: 'asc'
            });
        });
        it('should return bad request error for invalid plant instance ID', async ()=>{
            // Arrange
            const request = new _server.NextRequest('http://localhost:3000/api/care/history/invalid');
            const params = Promise.resolve({
                plantInstanceId: 'invalid'
            });
            // Act
            const response = await (0, _route2.GET)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData).toEqual({
                error: 'Invalid plant instance ID'
            });
            expect(_carehistory.CareHistoryQueries.getCareHistoryForPlant).not.toHaveBeenCalled();
        });
        it('should return unauthorized error when user not authenticated', async ()=>{
            // Arrange
            _server1.validateRequest.mockResolvedValue({
                user: null,
                session: null
            });
            const request = new _server.NextRequest('http://localhost:3000/api/care/history/1');
            const params = Promise.resolve({
                plantInstanceId: '1'
            });
            // Act
            const response = await (0, _route2.GET)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(401);
            expect(responseData).toEqual({
                error: 'Unauthorized'
            });
            expect(_carehistory.CareHistoryQueries.getCareHistoryForPlant).not.toHaveBeenCalled();
        });
        it('should handle database errors gracefully', async ()=>{
            // Arrange
            _carehistory.CareHistoryQueries.getCareHistoryForPlant.mockRejectedValue(new Error('Database connection failed'));
            const request = new _server.NextRequest('http://localhost:3000/api/care/history/1');
            const params = Promise.resolve({
                plantInstanceId: '1'
            });
            // Act
            const response = await (0, _route2.GET)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(responseData).toEqual({
                error: 'Failed to get care history'
            });
        });
    });
    describe('GET /api/dashboard - Dashboard statistics calculation', ()=>{
        it('should return dashboard statistics with plant and propagation data', async ()=>{
            // Arrange
            const mockStats = {
                totalPlants: 15,
                activePlants: 12,
                careDueToday: 3,
                totalPropagations: 8,
                activePropagations: 5,
                successfulPropagations: 6,
                propagationSuccessRate: 75,
                fertilizerEvents: [
                    {
                        id: 'fertilizer-1',
                        plantName: 'Monstera Deliciosa',
                        plantId: '1',
                        date: '2024-01-15',
                        type: 'fertilize'
                    },
                    {
                        id: 'fertilizer-2',
                        plantName: 'Fiddle Leaf Fig',
                        plantId: '2',
                        date: '2024-01-16',
                        type: 'fertilize'
                    }
                ]
            };
            // Mock database queries
            _db.db.select.mockReturnValue({
                from: jest.fn().mockReturnValue({
                    where: jest.fn().mockResolvedValue([
                        {
                            totalPlants: 15,
                            activePlants: 12,
                            careDueToday: 3
                        }
                    ])
                })
            });
            // Mock propagation stats query
            _db.db.select.mockReturnValueOnce({
                from: jest.fn().mockReturnValue({
                    where: jest.fn().mockResolvedValue([
                        {
                            totalPlants: 15,
                            activePlants: 12,
                            careDueToday: 3
                        }
                    ])
                })
            }).mockReturnValueOnce({
                from: jest.fn().mockReturnValue({
                    where: jest.fn().mockResolvedValue([
                        {
                            totalPropagations: 8,
                            activePropagations: 5,
                            successfulPropagations: 6
                        }
                    ])
                })
            }).mockReturnValueOnce({
                from: jest.fn().mockReturnValue({
                    where: jest.fn().mockResolvedValue([
                        {
                            count: 8
                        }
                    ])
                })
            }).mockReturnValueOnce({
                from: jest.fn().mockReturnValue({
                    where: jest.fn().mockResolvedValue([
                        {
                            id: 1,
                            nickname: 'Monstera Deliciosa',
                            fertilizerDue: new Date('2024-01-15')
                        },
                        {
                            id: 2,
                            nickname: 'Fiddle Leaf Fig',
                            fertilizerDue: new Date('2024-01-16')
                        }
                    ])
                })
            });
            const request = new _server.NextRequest('http://localhost:3000/api/dashboard');
            // Act
            const response = await (0, _route4.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData).toMatchObject({
                totalPlants: expect.any(Number),
                activePlants: expect.any(Number),
                careDueToday: expect.any(Number),
                totalPropagations: expect.any(Number),
                activePropagations: expect.any(Number),
                successfulPropagations: expect.any(Number),
                propagationSuccessRate: expect.any(Number),
                fertilizerEvents: expect.any(Array)
            });
            expect(_server1.validateRequest).toHaveBeenCalled();
        });
        it('should return unauthorized error when user not authenticated', async ()=>{
            // Arrange
            _server1.validateRequest.mockResolvedValue({
                user: null,
                session: null
            });
            const request = new _server.NextRequest('http://localhost:3000/api/dashboard');
            // Act
            const response = await (0, _route4.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(401);
            expect(responseData).toEqual({
                error: 'Unauthorized'
            });
        });
        it('should handle database errors gracefully', async ()=>{
            // Arrange
            _db.db.select.mockImplementation(()=>{
                throw new Error('Database connection failed');
            });
            const request = new _server.NextRequest('http://localhost:3000/api/dashboard');
            // Act
            const response = await (0, _route4.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(responseData).toEqual({
                error: 'Failed to get dashboard stats'
            });
        });
    });
    describe('GET /api/care/dashboard - Care-specific dashboard', ()=>{
        it('should return care dashboard data', async ()=>{
            // Arrange
            const mockCareDashboard = {
                upcomingCare: [
                    {
                        plantInstanceId: 1,
                        plantName: 'Monstera',
                        careType: 'watering',
                        dueDate: '2024-01-15',
                        overdue: false
                    }
                ],
                recentCare: [
                    {
                        id: 1,
                        plantInstanceId: 1,
                        careType: 'watering',
                        careDate: '2024-01-10',
                        notes: 'Regular watering'
                    }
                ],
                careStats: {
                    totalCareEvents: 25,
                    thisWeekCare: 5,
                    overdueCare: 2
                }
            };
            _careservice.CareService.getCareDashboard.mockResolvedValue(mockCareDashboard);
            const request = new _server.NextRequest('http://localhost:3000/api/care/dashboard');
            // Act
            const response = await (0, _route3.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData).toEqual(mockCareDashboard);
            expect(_server1.requireAuthSession).toHaveBeenCalled();
            expect(_careservice.CareService.getCareDashboard).toHaveBeenCalledWith(testUser.id);
        });
        it('should return unauthorized error when user not authenticated', async ()=>{
            // Arrange
            _server1.requireAuthSession.mockRejectedValue(new Error('Unauthorized'));
            const request = new _server.NextRequest('http://localhost:3000/api/care/dashboard');
            // Act
            const response = await (0, _route3.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(responseData).toEqual({
                error: 'Failed to fetch care dashboard'
            });
            expect(_careservice.CareService.getCareDashboard).not.toHaveBeenCalled();
        });
        it('should handle care service errors', async ()=>{
            // Arrange
            _careservice.CareService.getCareDashboard.mockRejectedValue(new Error('Care service failed'));
            const request = new _server.NextRequest('http://localhost:3000/api/care/dashboard');
            // Act
            const response = await (0, _route3.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(responseData).toEqual({
                error: 'Failed to fetch care dashboard'
            });
        });
    });
    describe('Care Tracking Integration Tests', ()=>{
        it('should handle complete care workflow: log -> history -> dashboard', async ()=>{
            const plantInstanceId = 1;
            // Step 1: Log care event
            const careData = {
                plantInstanceId,
                careType: 'watering',
                careDate: '2024-01-15T10:00:00.000Z',
                notes: 'Regular watering'
            };
            const careRecord = (0, _plantfactory.createTestCareRecord)({
                id: 1,
                ...careData,
                careDate: new Date(careData.careDate),
                userId: testUser.id
            });
            _careschemas.careValidation.validateCareForm.mockReturnValue({
                success: true,
                data: {
                    ...careData,
                    careDate: new Date(careData.careDate)
                }
            });
            _careservice.CareService.logCareEvent.mockResolvedValue({
                success: true,
                careHistory: careRecord
            });
            const logRequest = new _server.NextRequest('http://localhost:3000/api/care/log', {
                method: 'POST',
                body: JSON.stringify(careData),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const logResponse = await (0, _route.POST)(logRequest);
            const logResponseData = await logResponse.json();
            expect(logResponse.status).toBe(200);
            expect(logResponseData).toEqual(careRecord);
            // Step 2: Get care history
            const careHistory = [
                careRecord
            ];
            _carehistory.CareHistoryQueries.getCareHistoryForPlant.mockResolvedValue(careHistory);
            const historyRequest = new _server.NextRequest(`http://localhost:3000/api/care/history/${plantInstanceId}`);
            const historyParams = Promise.resolve({
                plantInstanceId: plantInstanceId.toString()
            });
            const historyResponse = await (0, _route2.GET)(historyRequest, {
                params: historyParams
            });
            const historyResponseData = await historyResponse.json();
            expect(historyResponse.status).toBe(200);
            expect(historyResponseData).toEqual(careHistory);
            // Step 3: Get care dashboard
            const careDashboard = {
                upcomingCare: [],
                recentCare: [
                    careRecord
                ],
                careStats: {
                    totalCareEvents: 1,
                    thisWeekCare: 1,
                    overdueCare: 0
                }
            };
            _careservice.CareService.getCareDashboard.mockResolvedValue(careDashboard);
            const dashboardRequest = new _server.NextRequest('http://localhost:3000/api/care/dashboard');
            const dashboardResponse = await (0, _route3.GET)(dashboardRequest);
            const dashboardResponseData = await dashboardResponse.json();
            expect(dashboardResponse.status).toBe(200);
            expect(dashboardResponseData).toEqual(careDashboard);
            // Verify all services were called correctly
            expect(_careservice.CareService.logCareEvent).toHaveBeenCalledWith(testUser.id, expect.any(Object));
            expect(_carehistory.CareHistoryQueries.getCareHistoryForPlant).toHaveBeenCalledWith(plantInstanceId, testUser.id, expect.any(Object));
            expect(_careservice.CareService.getCareDashboard).toHaveBeenCalledWith(testUser.id);
        });
        it('should handle authorization across all care endpoints', async ()=>{
            // Test unauthorized access to all care endpoints
            _server1.requireAuthSession.mockRejectedValue(new Error('Unauthorized'));
            _server1.validateRequest.mockResolvedValue({
                user: null,
                session: null
            });
            // POST /api/care/log
            const logRequest = new _server.NextRequest('http://localhost:3000/api/care/log', {
                method: 'POST',
                body: JSON.stringify({}),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const logResponse = await (0, _route.POST)(logRequest);
            expect(logResponse.status).toBe(500); // Service error due to auth failure
            // POST /api/care/quick-log
            const quickLogRequest = new _server.NextRequest('http://localhost:3000/api/care/quick-log', {
                method: 'POST',
                body: JSON.stringify({}),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const quickLogResponse = await (0, _route1.POST)(quickLogRequest);
            expect(quickLogResponse.status).toBe(500); // Service error due to auth failure
            // GET /api/care/history/1
            const historyRequest = new _server.NextRequest('http://localhost:3000/api/care/history/1');
            const historyParams = Promise.resolve({
                plantInstanceId: '1'
            });
            const historyResponse = await (0, _route2.GET)(historyRequest, {
                params: historyParams
            });
            expect(historyResponse.status).toBe(401);
            // GET /api/care/dashboard
            const careDashboardRequest = new _server.NextRequest('http://localhost:3000/api/care/dashboard');
            const careDashboardResponse = await (0, _route3.GET)(careDashboardRequest);
            expect(careDashboardResponse.status).toBe(500); // Service error due to auth failure
            // GET /api/dashboard
            const dashboardRequest = new _server.NextRequest('http://localhost:3000/api/dashboard');
            const dashboardResponse = await (0, _route4.GET)(dashboardRequest);
            expect(dashboardResponse.status).toBe(401);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdGVmYW5iZWtrZXIvcHJvamVjdHMvZmFuY3ktcGxhbnRpZXMvc3JjL19fdGVzdHNfXy9hcGkvY2FyZS10cmFja2luZy50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENhcmUgVHJhY2tpbmcgQVBJIEVuZHBvaW50IFRlc3RzXG4vLyBUZXN0cyBQT1NUIC9hcGkvY2FyZSwgR0VUIC9hcGkvY2FyZS9oaXN0b3J5LCBHRVQgL2FwaS9kYXNoYm9hcmQgZW5kcG9pbnRzXG5cbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBQT1NUIGFzIGxvZ0NhcmVIYW5kbGVyIH0gZnJvbSAnQC9hcHAvYXBpL2NhcmUvbG9nL3JvdXRlJztcbmltcG9ydCB7IFBPU1QgYXMgcXVpY2tMb2dDYXJlSGFuZGxlciB9IGZyb20gJ0AvYXBwL2FwaS9jYXJlL3F1aWNrLWxvZy9yb3V0ZSc7XG5pbXBvcnQgeyBHRVQgYXMgZ2V0Q2FyZUhpc3RvcnlIYW5kbGVyIH0gZnJvbSAnQC9hcHAvYXBpL2NhcmUvaGlzdG9yeS9bcGxhbnRJbnN0YW5jZUlkXS9yb3V0ZSc7XG5pbXBvcnQgeyBHRVQgYXMgZ2V0Q2FyZURhc2hib2FyZEhhbmRsZXIgfSBmcm9tICdAL2FwcC9hcGkvY2FyZS9kYXNoYm9hcmQvcm91dGUnO1xuaW1wb3J0IHsgR0VUIGFzIGdldERhc2hib2FyZEhhbmRsZXIgfSBmcm9tICdAL2FwcC9hcGkvZGFzaGJvYXJkL3JvdXRlJztcbmltcG9ydCB7IGNyZWF0ZVRlc3RVc2VyLCBjcmVhdGVUZXN0U2Vzc2lvbiB9IGZyb20gJ0AvdGVzdC11dGlscy9mYWN0b3JpZXMvdXNlci1mYWN0b3J5JztcbmltcG9ydCB7IGNyZWF0ZVRlc3RQbGFudEluc3RhbmNlLCBjcmVhdGVUZXN0Q2FyZVJlY29yZCB9IGZyb20gJ0AvdGVzdC11dGlscy9mYWN0b3JpZXMvcGxhbnQtZmFjdG9yeSc7XG5pbXBvcnQgeyByZXNldEFwaU1vY2tzIH0gZnJvbSAnQC90ZXN0LXV0aWxzL2hlbHBlcnMvYXBpLWhlbHBlcnMnO1xuXG4vLyBNb2NrIHRoZSBhdXRoIGZ1bmN0aW9uc1xuamVzdC5tb2NrKCdAL2xpYi9hdXRoL3NlcnZlcicsICgpID0+ICh7XG4gIHJlcXVpcmVBdXRoU2Vzc2lvbjogamVzdC5mbigpLFxuICB2YWxpZGF0ZVJlcXVlc3Q6IGplc3QuZm4oKSxcbn0pKTtcblxuLy8gTW9jayB0aGUgY2FyZSBzZXJ2aWNlXG5qZXN0Lm1vY2soJ0AvbGliL3NlcnZpY2VzL2NhcmUtc2VydmljZScsICgpID0+ICh7XG4gIENhcmVTZXJ2aWNlOiB7XG4gICAgbG9nQ2FyZUV2ZW50OiBqZXN0LmZuKCksXG4gICAgcXVpY2tDYXJlTG9nOiBqZXN0LmZuKCksXG4gICAgZ2V0Q2FyZURhc2hib2FyZDogamVzdC5mbigpLFxuICB9LFxufSkpO1xuXG4vLyBNb2NrIGNhcmUgaGlzdG9yeSBxdWVyaWVzXG5qZXN0Lm1vY2soJ0AvbGliL2RiL3F1ZXJpZXMvY2FyZS1oaXN0b3J5JywgKCkgPT4gKHtcbiAgQ2FyZUhpc3RvcnlRdWVyaWVzOiB7XG4gICAgZ2V0Q2FyZUhpc3RvcnlGb3JQbGFudDogamVzdC5mbigpLFxuICB9LFxufSkpO1xuXG4vLyBNb2NrIGRhdGFiYXNlIGFuZCBzY2hlbWFcbmplc3QubW9jaygnQC9saWIvZGInLCAoKSA9PiAoe1xuICBkYjoge1xuICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgZnJvbTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgd2hlcmU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICB9LFxufSkpO1xuXG5qZXN0Lm1vY2soJ0AvbGliL2RiL3NjaGVtYScsICgpID0+ICh7XG4gIHBsYW50SW5zdGFuY2VzOiB7XG4gICAgaWQ6ICdpZCcsXG4gICAgdXNlcklkOiAndXNlcklkJyxcbiAgICBpc0FjdGl2ZTogJ2lzQWN0aXZlJyxcbiAgICBmZXJ0aWxpemVyRHVlOiAnZmVydGlsaXplckR1ZScsXG4gICAgbmlja25hbWU6ICduaWNrbmFtZScsXG4gIH0sXG4gIHByb3BhZ2F0aW9uczoge1xuICAgIHVzZXJJZDogJ3VzZXJJZCcsXG4gICAgc3RhdHVzOiAnc3RhdHVzJyxcbiAgfSxcbn0pKTtcblxuLy8gTW9jayBjYXJlIHZhbGlkYXRpb25cbmplc3QubW9jaygnQC9saWIvdmFsaWRhdGlvbi9jYXJlLXNjaGVtYXMnLCAoKSA9PiAoe1xuICBjYXJlVmFsaWRhdGlvbjoge1xuICAgIHZhbGlkYXRlQ2FyZUZvcm06IGplc3QuZm4oKSxcbiAgICB2YWxpZGF0ZVF1aWNrQ2FyZUxvZzogamVzdC5mbigpLFxuICB9LFxufSkpO1xuXG4vLyBJbXBvcnQgbW9ja2VkIGZ1bmN0aW9uc1xuaW1wb3J0IHsgcmVxdWlyZUF1dGhTZXNzaW9uLCB2YWxpZGF0ZVJlcXVlc3QgfSBmcm9tICdAL2xpYi9hdXRoL3NlcnZlcic7XG5pbXBvcnQgeyBDYXJlU2VydmljZSB9IGZyb20gJ0AvbGliL3NlcnZpY2VzL2NhcmUtc2VydmljZSc7XG5pbXBvcnQgeyBDYXJlSGlzdG9yeVF1ZXJpZXMgfSBmcm9tICdAL2xpYi9kYi9xdWVyaWVzL2NhcmUtaGlzdG9yeSc7XG5pbXBvcnQgeyBjYXJlVmFsaWRhdGlvbiB9IGZyb20gJ0AvbGliL3ZhbGlkYXRpb24vY2FyZS1zY2hlbWFzJztcbmltcG9ydCB7IGRiIH0gZnJvbSAnQC9saWIvZGInO1xuXG5kZXNjcmliZSgnQ2FyZSBUcmFja2luZyBBUEkgRW5kcG9pbnRzJywgKCkgPT4ge1xuICBsZXQgdGVzdFVzZXI7XG4gIGxldCB0ZXN0U2Vzc2lvbjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICByZXNldEFwaU1vY2tzKCk7XG4gICAgXG4gICAgdGVzdFVzZXIgPSBjcmVhdGVUZXN0VXNlcigpO1xuICAgIHRlc3RTZXNzaW9uID0gY3JlYXRlVGVzdFNlc3Npb24odGVzdFVzZXIpO1xuICAgIFxuICAgIC8vIERlZmF1bHQgYXV0aCBtb2Nrc1xuICAgIHJlcXVpcmVBdXRoU2Vzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICB1c2VyOiB0ZXN0VXNlcixcbiAgICAgIHNlc3Npb246IHRlc3RTZXNzaW9uLFxuICAgIH0pO1xuICAgIFxuICAgIHZhbGlkYXRlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICB1c2VyOiB0ZXN0VXNlcixcbiAgICAgIHNlc3Npb246IHRlc3RTZXNzaW9uLFxuICAgIH0pO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QucmVzdG9yZUFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQT1NUIC9hcGkvY2FyZS9sb2cgLSBDYXJlIHJlY29yZCBjcmVhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBjYXJlIHJlY29yZCB3aXRoIHZhbGlkIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB0ZXN0UGxhbnRJbnN0YW5jZSA9IGNyZWF0ZVRlc3RQbGFudEluc3RhbmNlKHsgdXNlcklkOiB0ZXN0VXNlci5pZCB9KTtcbiAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgICBwbGFudEluc3RhbmNlSWQ6IHRlc3RQbGFudEluc3RhbmNlLmlkLFxuICAgICAgICBjYXJlVHlwZTogJ3dhdGVyaW5nJyxcbiAgICAgICAgY2FyZURhdGU6ICcyMDI0LTAxLTE1VDEwOjAwOjAwLjAwMFonLFxuICAgICAgICBub3RlczogJ1JlZ3VsYXIgd2F0ZXJpbmcnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdmFsaWRhdGVkRGF0YSA9IHtcbiAgICAgICAgLi4ucmVxdWVzdEJvZHksXG4gICAgICAgIGNhcmVEYXRlOiBuZXcgRGF0ZShyZXF1ZXN0Qm9keS5jYXJlRGF0ZSksXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjcmVhdGVkQ2FyZVJlY29yZCA9IGNyZWF0ZVRlc3RDYXJlUmVjb3JkKHtcbiAgICAgICAgLi4udmFsaWRhdGVkRGF0YSxcbiAgICAgICAgaWQ6IDEsXG4gICAgICAgIHVzZXJJZDogdGVzdFVzZXIuaWQsXG4gICAgICB9KTtcblxuICAgICAgY2FyZVZhbGlkYXRpb24udmFsaWRhdGVDYXJlRm9ybS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB2YWxpZGF0ZWREYXRhLFxuICAgICAgfSk7XG5cbiAgICAgIENhcmVTZXJ2aWNlLmxvZ0NhcmVFdmVudC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGNhcmVIaXN0b3J5OiBjcmVhdGVkQ2FyZVJlY29yZCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2NhcmUvbG9nJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbG9nQ2FyZUhhbmRsZXIocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9FcXVhbCh7XG4gICAgICAgIC4uLmNyZWF0ZWRDYXJlUmVjb3JkLFxuICAgICAgICAvLyBKU09OIHNlcmlhbGl6ZXMgZGF0ZXMgdG8gc3RyaW5nc1xuICAgICAgICBjYXJlRGF0ZTogY3JlYXRlZENhcmVSZWNvcmQuY2FyZURhdGUudG9JU09TdHJpbmcoKSxcbiAgICAgICAgY3JlYXRlZEF0OiBjcmVhdGVkQ2FyZVJlY29yZC5jcmVhdGVkQXQudG9JU09TdHJpbmcoKSxcbiAgICAgICAgdXBkYXRlZEF0OiBjcmVhdGVkQ2FyZVJlY29yZC51cGRhdGVkQXQudG9JU09TdHJpbmcoKSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVxdWlyZUF1dGhTZXNzaW9uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoY2FyZVZhbGlkYXRpb24udmFsaWRhdGVDYXJlRm9ybSkudG9IYXZlQmVlbkNhbGxlZFdpdGgodmFsaWRhdGVkRGF0YSk7XG4gICAgICBleHBlY3QoQ2FyZVNlcnZpY2UubG9nQ2FyZUV2ZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh0ZXN0VXNlci5pZCwgdmFsaWRhdGVkRGF0YSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiB2YWxpZGF0aW9uIGVycm9yIGZvciBpbnZhbGlkIGNhcmUgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgICBwbGFudEluc3RhbmNlSWQ6ICdpbnZhbGlkJyxcbiAgICAgICAgY2FyZVR5cGU6ICdpbnZhbGlkX3R5cGUnLFxuICAgICAgICBjYXJlRGF0ZTogJ2ludmFsaWRfZGF0ZScsXG4gICAgICB9O1xuXG4gICAgICBjYXJlVmFsaWRhdGlvbi52YWxpZGF0ZUNhcmVGb3JtLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGlzc3VlczogW1xuICAgICAgICAgICAgeyBtZXNzYWdlOiAnUGxhbnQgaW5zdGFuY2UgSUQgbXVzdCBiZSBhIG51bWJlcicgfSxcbiAgICAgICAgICAgIHsgbWVzc2FnZTogJ0ludmFsaWQgY2FyZSB0eXBlJyB9LFxuICAgICAgICAgICAgeyBtZXNzYWdlOiAnSW52YWxpZCBkYXRlIGZvcm1hdCcgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvY2FyZS9sb2cnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBsb2dDYXJlSGFuZGxlcihyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b0VxdWFsKHtcbiAgICAgICAgZXJyb3I6ICdQbGFudCBpbnN0YW5jZSBJRCBtdXN0IGJlIGEgbnVtYmVyJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoQ2FyZVNlcnZpY2UubG9nQ2FyZUV2ZW50KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZXJyb3Igd2hlbiBjYXJlIHNlcnZpY2UgZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgcGxhbnRJbnN0YW5jZUlkOiAxLFxuICAgICAgICBjYXJlVHlwZTogJ3dhdGVyaW5nJyxcbiAgICAgICAgY2FyZURhdGU6ICcyMDI0LTAxLTE1VDEwOjAwOjAwLjAwMFonLFxuICAgICAgfTtcblxuICAgICAgY2FyZVZhbGlkYXRpb24udmFsaWRhdGVDYXJlRm9ybS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgLi4ucmVxdWVzdEJvZHksXG4gICAgICAgICAgY2FyZURhdGU6IG5ldyBEYXRlKHJlcXVlc3RCb2R5LmNhcmVEYXRlKSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBDYXJlU2VydmljZS5sb2dDYXJlRXZlbnQubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdQbGFudCBpbnN0YW5jZSBub3QgZm91bmQnLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvY2FyZS9sb2cnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBsb2dDYXJlSGFuZGxlcihyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b0VxdWFsKHtcbiAgICAgICAgZXJyb3I6ICdQbGFudCBpbnN0YW5jZSBub3QgZm91bmQnLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiB1bmF1dGhvcml6ZWQgZXJyb3Igd2hlbiB1c2VyIG5vdCBhdXRoZW50aWNhdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgcmVxdWlyZUF1dGhTZXNzaW9uLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignVW5hdXRob3JpemVkJykpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2NhcmUvbG9nJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbG9nQ2FyZUhhbmRsZXIocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9FcXVhbCh7XG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGxvZyBjYXJlIGV2ZW50JyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoQ2FyZVNlcnZpY2UubG9nQ2FyZUV2ZW50KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWFsZm9ybWVkIEpTT04gcmVxdWVzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvY2FyZS9sb2cnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiAnaW52YWxpZCBqc29uJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGxvZ0NhcmVIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBsb2cgY2FyZSBldmVudCcsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KENhcmVTZXJ2aWNlLmxvZ0NhcmVFdmVudCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BPU1QgL2FwaS9jYXJlL3F1aWNrLWxvZyAtIFF1aWNrIGNhcmUgbG9nZ2luZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBxdWljayBjYXJlIGxvZyB3aXRoIHZhbGlkIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgcGxhbnRJbnN0YW5jZUlkczogWzEsIDIsIDNdLFxuICAgICAgICBjYXJlVHlwZTogJ3dhdGVyaW5nJyxcbiAgICAgICAgbm90ZXM6ICdRdWljayB3YXRlcmluZyBzZXNzaW9uJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHZhbGlkYXRlZERhdGEgPSB7XG4gICAgICAgIC4uLnJlcXVlc3RCb2R5LFxuICAgICAgICBjYXJlRGF0ZTogZXhwZWN0LmFueShEYXRlKSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNhcmVSZWNvcmRzID0gW1xuICAgICAgICBjcmVhdGVUZXN0Q2FyZVJlY29yZCh7IGlkOiAxLCBwbGFudEluc3RhbmNlSWQ6IDEgfSksXG4gICAgICAgIGNyZWF0ZVRlc3RDYXJlUmVjb3JkKHsgaWQ6IDIsIHBsYW50SW5zdGFuY2VJZDogMiB9KSxcbiAgICAgICAgY3JlYXRlVGVzdENhcmVSZWNvcmQoeyBpZDogMywgcGxhbnRJbnN0YW5jZUlkOiAzIH0pLFxuICAgICAgXTtcblxuICAgICAgY2FyZVZhbGlkYXRpb24udmFsaWRhdGVRdWlja0NhcmVMb2cubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogdmFsaWRhdGVkRGF0YSxcbiAgICAgIH0pO1xuXG4gICAgICBDYXJlU2VydmljZS5xdWlja0NhcmVMb2cubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBjYXJlSGlzdG9yeTogY2FyZVJlY29yZHMsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9jYXJlL3F1aWNrLWxvZycsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHF1aWNrTG9nQ2FyZUhhbmRsZXIocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9FcXVhbChjYXJlUmVjb3Jkcyk7XG5cbiAgICAgIGV4cGVjdChyZXF1aXJlQXV0aFNlc3Npb24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChjYXJlVmFsaWRhdGlvbi52YWxpZGF0ZVF1aWNrQ2FyZUxvZykudG9IYXZlQmVlbkNhbGxlZFdpdGgodmFsaWRhdGVkRGF0YSk7XG4gICAgICBleHBlY3QoQ2FyZVNlcnZpY2UucXVpY2tDYXJlTG9nKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh0ZXN0VXNlci5pZCwgdmFsaWRhdGVkRGF0YSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiB2YWxpZGF0aW9uIGVycm9yIHdpdGggZGV0YWlsZWQgaXNzdWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XG4gICAgICAgIHBsYW50SW5zdGFuY2VJZHM6IFtdLFxuICAgICAgICBjYXJlVHlwZTogJ2ludmFsaWQnLFxuICAgICAgfTtcblxuICAgICAgY2FyZVZhbGlkYXRpb24udmFsaWRhdGVRdWlja0NhcmVMb2cubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgaXNzdWVzOiBbXG4gICAgICAgICAgICB7IG1lc3NhZ2U6ICdBdCBsZWFzdCBvbmUgcGxhbnQgaW5zdGFuY2UgaXMgcmVxdWlyZWQnIH0sXG4gICAgICAgICAgICB7IG1lc3NhZ2U6ICdJbnZhbGlkIGNhcmUgdHlwZScgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvY2FyZS9xdWljay1sb2cnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBxdWlja0xvZ0NhcmVIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBlcnJvcjogJ0F0IGxlYXN0IG9uZSBwbGFudCBpbnN0YW5jZSBpcyByZXF1aXJlZCcsXG4gICAgICAgIGRldGFpbHM6IFtcbiAgICAgICAgICB7IG1lc3NhZ2U6ICdBdCBsZWFzdCBvbmUgcGxhbnQgaW5zdGFuY2UgaXMgcmVxdWlyZWQnIH0sXG4gICAgICAgICAgeyBtZXNzYWdlOiAnSW52YWxpZCBjYXJlIHR5cGUnIH0sXG4gICAgICAgIF0sXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KENhcmVTZXJ2aWNlLnF1aWNrQ2FyZUxvZykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHF1aWNrIGNhcmUgc2VydmljZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgcGxhbnRJbnN0YW5jZUlkczogWzk5OV0sXG4gICAgICAgIGNhcmVUeXBlOiAnd2F0ZXJpbmcnLFxuICAgICAgfTtcblxuICAgICAgY2FyZVZhbGlkYXRpb24udmFsaWRhdGVRdWlja0NhcmVMb2cubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIC4uLnJlcXVlc3RCb2R5LFxuICAgICAgICAgIGNhcmVEYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIENhcmVTZXJ2aWNlLnF1aWNrQ2FyZUxvZy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ1NvbWUgcGxhbnQgaW5zdGFuY2VzIG5vdCBmb3VuZCcsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9jYXJlL3F1aWNrLWxvZycsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHF1aWNrTG9nQ2FyZUhhbmRsZXIocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9FcXVhbCh7XG4gICAgICAgIGVycm9yOiAnU29tZSBwbGFudCBpbnN0YW5jZXMgbm90IGZvdW5kJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC9hcGkvY2FyZS9oaXN0b3J5L1twbGFudEluc3RhbmNlSWRdIC0gQ2FyZSBoaXN0b3J5IHJldHJpZXZhbCBhbmQgZmlsdGVyaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGNhcmUgaGlzdG9yeSB3aXRoIGRlZmF1bHQgZmlsdGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHBsYW50SW5zdGFuY2VJZCA9IDE7XG4gICAgICBjb25zdCBjYXJlSGlzdG9yeSA9IFtcbiAgICAgICAgY3JlYXRlVGVzdENhcmVSZWNvcmQoeyBpZDogMSwgcGxhbnRJbnN0YW5jZUlkLCBjYXJlVHlwZTogJ3dhdGVyaW5nJyB9KSxcbiAgICAgICAgY3JlYXRlVGVzdENhcmVSZWNvcmQoeyBpZDogMiwgcGxhbnRJbnN0YW5jZUlkLCBjYXJlVHlwZTogJ2ZlcnRpbGl6aW5nJyB9KSxcbiAgICAgIF07XG5cbiAgICAgIENhcmVIaXN0b3J5UXVlcmllcy5nZXRDYXJlSGlzdG9yeUZvclBsYW50Lm1vY2tSZXNvbHZlZFZhbHVlKGNhcmVIaXN0b3J5KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdChgaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9jYXJlL2hpc3RvcnkvJHtwbGFudEluc3RhbmNlSWR9YCk7XG4gICAgICBjb25zdCBwYXJhbXMgPSBQcm9taXNlLnJlc29sdmUoeyBwbGFudEluc3RhbmNlSWQ6IHBsYW50SW5zdGFuY2VJZC50b1N0cmluZygpIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0Q2FyZUhpc3RvcnlIYW5kbGVyKHJlcXVlc3QsIHsgcGFyYW1zIH0pO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoY2FyZUhpc3RvcnkpO1xuXG4gICAgICBleHBlY3QodmFsaWRhdGVSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoQ2FyZUhpc3RvcnlRdWVyaWVzLmdldENhcmVIaXN0b3J5Rm9yUGxhbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBwbGFudEluc3RhbmNlSWQsXG4gICAgICAgIHRlc3RVc2VyLmlkLFxuICAgICAgICB7XG4gICAgICAgICAgY2FyZVR5cGU6IHVuZGVmaW5lZCxcbiAgICAgICAgICBzdGFydERhdGU6IHVuZGVmaW5lZCxcbiAgICAgICAgICBlbmREYXRlOiB1bmRlZmluZWQsXG4gICAgICAgICAgbGltaXQ6IDUwLFxuICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICBzb3J0Qnk6ICdjYXJlX2RhdGUnLFxuICAgICAgICAgIHNvcnRPcmRlcjogJ2Rlc2MnLFxuICAgICAgICB9XG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY2FyZSBoaXN0b3J5IHdpdGggY3VzdG9tIGZpbHRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBwbGFudEluc3RhbmNlSWQgPSAxO1xuICAgICAgY29uc3QgY2FyZUhpc3RvcnkgPSBbXG4gICAgICAgIGNyZWF0ZVRlc3RDYXJlUmVjb3JkKHsgaWQ6IDEsIHBsYW50SW5zdGFuY2VJZCwgY2FyZVR5cGU6ICd3YXRlcmluZycgfSksXG4gICAgICBdO1xuXG4gICAgICBDYXJlSGlzdG9yeVF1ZXJpZXMuZ2V0Q2FyZUhpc3RvcnlGb3JQbGFudC5tb2NrUmVzb2x2ZWRWYWx1ZShjYXJlSGlzdG9yeSk7XG5cbiAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgIGNhcmVUeXBlOiAnd2F0ZXJpbmcnLFxuICAgICAgICBzdGFydERhdGU6ICcyMDI0LTAxLTAxJyxcbiAgICAgICAgZW5kRGF0ZTogJzIwMjQtMDEtMzEnLFxuICAgICAgICBsaW1pdDogJzEwJyxcbiAgICAgICAgb2Zmc2V0OiAnNScsXG4gICAgICAgIHNvcnRCeTogJ2NhcmVfdHlwZScsXG4gICAgICAgIHNvcnRPcmRlcjogJ2FzYycsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdChgaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9jYXJlL2hpc3RvcnkvJHtwbGFudEluc3RhbmNlSWR9PyR7cXVlcnlQYXJhbXN9YCk7XG4gICAgICBjb25zdCBwYXJhbXMgPSBQcm9taXNlLnJlc29sdmUoeyBwbGFudEluc3RhbmNlSWQ6IHBsYW50SW5zdGFuY2VJZC50b1N0cmluZygpIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0Q2FyZUhpc3RvcnlIYW5kbGVyKHJlcXVlc3QsIHsgcGFyYW1zIH0pO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoY2FyZUhpc3RvcnkpO1xuXG4gICAgICBleHBlY3QoQ2FyZUhpc3RvcnlRdWVyaWVzLmdldENhcmVIaXN0b3J5Rm9yUGxhbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBwbGFudEluc3RhbmNlSWQsXG4gICAgICAgIHRlc3RVc2VyLmlkLFxuICAgICAgICB7XG4gICAgICAgICAgY2FyZVR5cGU6ICd3YXRlcmluZycsXG4gICAgICAgICAgc3RhcnREYXRlOiBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpLFxuICAgICAgICAgIGVuZERhdGU6IG5ldyBEYXRlKCcyMDI0LTAxLTMxJyksXG4gICAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgICAgIG9mZnNldDogNSxcbiAgICAgICAgICBzb3J0Qnk6ICdjYXJlX3R5cGUnLFxuICAgICAgICAgIHNvcnRPcmRlcjogJ2FzYycsXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBiYWQgcmVxdWVzdCBlcnJvciBmb3IgaW52YWxpZCBwbGFudCBpbnN0YW5jZSBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvY2FyZS9oaXN0b3J5L2ludmFsaWQnKTtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IFByb21pc2UucmVzb2x2ZSh7IHBsYW50SW5zdGFuY2VJZDogJ2ludmFsaWQnIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0Q2FyZUhpc3RvcnlIYW5kbGVyKHJlcXVlc3QsIHsgcGFyYW1zIH0pO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBlcnJvcjogJ0ludmFsaWQgcGxhbnQgaW5zdGFuY2UgSUQnLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChDYXJlSGlzdG9yeVF1ZXJpZXMuZ2V0Q2FyZUhpc3RvcnlGb3JQbGFudCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHVuYXV0aG9yaXplZCBlcnJvciB3aGVuIHVzZXIgbm90IGF1dGhlbnRpY2F0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICB2YWxpZGF0ZVJlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgICBzZXNzaW9uOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvY2FyZS9oaXN0b3J5LzEnKTtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IFByb21pc2UucmVzb2x2ZSh7IHBsYW50SW5zdGFuY2VJZDogJzEnIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0Q2FyZUhpc3RvcnlIYW5kbGVyKHJlcXVlc3QsIHsgcGFyYW1zIH0pO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAxKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCcsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KENhcmVIaXN0b3J5UXVlcmllcy5nZXRDYXJlSGlzdG9yeUZvclBsYW50KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBDYXJlSGlzdG9yeVF1ZXJpZXMuZ2V0Q2FyZUhpc3RvcnlGb3JQbGFudC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJykpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2NhcmUvaGlzdG9yeS8xJyk7XG4gICAgICBjb25zdCBwYXJhbXMgPSBQcm9taXNlLnJlc29sdmUoeyBwbGFudEluc3RhbmNlSWQ6ICcxJyB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldENhcmVIaXN0b3J5SGFuZGxlcihyZXF1ZXN0LCB7IHBhcmFtcyB9KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDUwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b0VxdWFsKHtcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZ2V0IGNhcmUgaGlzdG9yeScsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvYXBpL2Rhc2hib2FyZCAtIERhc2hib2FyZCBzdGF0aXN0aWNzIGNhbGN1bGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGRhc2hib2FyZCBzdGF0aXN0aWNzIHdpdGggcGxhbnQgYW5kIHByb3BhZ2F0aW9uIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrU3RhdHMgPSB7XG4gICAgICAgIHRvdGFsUGxhbnRzOiAxNSxcbiAgICAgICAgYWN0aXZlUGxhbnRzOiAxMixcbiAgICAgICAgY2FyZUR1ZVRvZGF5OiAzLFxuICAgICAgICB0b3RhbFByb3BhZ2F0aW9uczogOCxcbiAgICAgICAgYWN0aXZlUHJvcGFnYXRpb25zOiA1LFxuICAgICAgICBzdWNjZXNzZnVsUHJvcGFnYXRpb25zOiA2LFxuICAgICAgICBwcm9wYWdhdGlvblN1Y2Nlc3NSYXRlOiA3NSxcbiAgICAgICAgZmVydGlsaXplckV2ZW50czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnZmVydGlsaXplci0xJyxcbiAgICAgICAgICAgIHBsYW50TmFtZTogJ01vbnN0ZXJhIERlbGljaW9zYScsXG4gICAgICAgICAgICBwbGFudElkOiAnMScsXG4gICAgICAgICAgICBkYXRlOiAnMjAyNC0wMS0xNScsXG4gICAgICAgICAgICB0eXBlOiAnZmVydGlsaXplJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnZmVydGlsaXplci0yJyxcbiAgICAgICAgICAgIHBsYW50TmFtZTogJ0ZpZGRsZSBMZWFmIEZpZycsXG4gICAgICAgICAgICBwbGFudElkOiAnMicsXG4gICAgICAgICAgICBkYXRlOiAnMjAyNC0wMS0xNicsXG4gICAgICAgICAgICB0eXBlOiAnZmVydGlsaXplJyxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgLy8gTW9jayBkYXRhYmFzZSBxdWVyaWVzXG4gICAgICBkYi5zZWxlY3QubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgZnJvbTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgd2hlcmU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRvdGFsUGxhbnRzOiAxNSxcbiAgICAgICAgICAgICAgYWN0aXZlUGxhbnRzOiAxMixcbiAgICAgICAgICAgICAgY2FyZUR1ZVRvZGF5OiAzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdKSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgLy8gTW9jayBwcm9wYWdhdGlvbiBzdGF0cyBxdWVyeVxuICAgICAgZGIuc2VsZWN0XG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKHtcbiAgICAgICAgICBmcm9tOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgIHdoZXJlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdG90YWxQbGFudHM6IDE1LFxuICAgICAgICAgICAgICAgIGFjdGl2ZVBsYW50czogMTIsXG4gICAgICAgICAgICAgICAgY2FyZUR1ZVRvZGF5OiAzLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKHtcbiAgICAgICAgICBmcm9tOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgIHdoZXJlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdG90YWxQcm9wYWdhdGlvbnM6IDgsXG4gICAgICAgICAgICAgICAgYWN0aXZlUHJvcGFnYXRpb25zOiA1LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3NmdWxQcm9wYWdhdGlvbnM6IDYsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2Uoe1xuICAgICAgICAgIGZyb206IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgd2hlcmU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb3VudDogOCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KVxuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZSh7XG4gICAgICAgICAgZnJvbTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICB3aGVyZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgICAgIG5pY2tuYW1lOiAnTW9uc3RlcmEgRGVsaWNpb3NhJyxcbiAgICAgICAgICAgICAgICBmZXJ0aWxpemVyRHVlOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNScpLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6IDIsXG4gICAgICAgICAgICAgICAgbmlja25hbWU6ICdGaWRkbGUgTGVhZiBGaWcnLFxuICAgICAgICAgICAgICAgIGZlcnRpbGl6ZXJEdWU6IG5ldyBEYXRlKCcyMDI0LTAxLTE2JyksXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvZGFzaGJvYXJkJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXREYXNoYm9hcmRIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICB0b3RhbFBsYW50czogZXhwZWN0LmFueShOdW1iZXIpLFxuICAgICAgICBhY3RpdmVQbGFudHM6IGV4cGVjdC5hbnkoTnVtYmVyKSxcbiAgICAgICAgY2FyZUR1ZVRvZGF5OiBleHBlY3QuYW55KE51bWJlciksXG4gICAgICAgIHRvdGFsUHJvcGFnYXRpb25zOiBleHBlY3QuYW55KE51bWJlciksXG4gICAgICAgIGFjdGl2ZVByb3BhZ2F0aW9uczogZXhwZWN0LmFueShOdW1iZXIpLFxuICAgICAgICBzdWNjZXNzZnVsUHJvcGFnYXRpb25zOiBleHBlY3QuYW55KE51bWJlciksXG4gICAgICAgIHByb3BhZ2F0aW9uU3VjY2Vzc1JhdGU6IGV4cGVjdC5hbnkoTnVtYmVyKSxcbiAgICAgICAgZmVydGlsaXplckV2ZW50czogZXhwZWN0LmFueShBcnJheSksXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHZhbGlkYXRlUmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdW5hdXRob3JpemVkIGVycm9yIHdoZW4gdXNlciBub3QgYXV0aGVudGljYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIHZhbGlkYXRlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgIHNlc3Npb246IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9kYXNoYm9hcmQnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldERhc2hib2FyZEhhbmRsZXIocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9FcXVhbCh7XG4gICAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBkYi5zZWxlY3QubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvZGFzaGJvYXJkJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXREYXNoYm9hcmRIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBnZXQgZGFzaGJvYXJkIHN0YXRzJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC9hcGkvY2FyZS9kYXNoYm9hcmQgLSBDYXJlLXNwZWNpZmljIGRhc2hib2FyZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBjYXJlIGRhc2hib2FyZCBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbW9ja0NhcmVEYXNoYm9hcmQgPSB7XG4gICAgICAgIHVwY29taW5nQ2FyZTogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHBsYW50SW5zdGFuY2VJZDogMSxcbiAgICAgICAgICAgIHBsYW50TmFtZTogJ01vbnN0ZXJhJyxcbiAgICAgICAgICAgIGNhcmVUeXBlOiAnd2F0ZXJpbmcnLFxuICAgICAgICAgICAgZHVlRGF0ZTogJzIwMjQtMDEtMTUnLFxuICAgICAgICAgICAgb3ZlcmR1ZTogZmFsc2UsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgcmVjZW50Q2FyZTogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgcGxhbnRJbnN0YW5jZUlkOiAxLFxuICAgICAgICAgICAgY2FyZVR5cGU6ICd3YXRlcmluZycsXG4gICAgICAgICAgICBjYXJlRGF0ZTogJzIwMjQtMDEtMTAnLFxuICAgICAgICAgICAgbm90ZXM6ICdSZWd1bGFyIHdhdGVyaW5nJyxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBjYXJlU3RhdHM6IHtcbiAgICAgICAgICB0b3RhbENhcmVFdmVudHM6IDI1LFxuICAgICAgICAgIHRoaXNXZWVrQ2FyZTogNSxcbiAgICAgICAgICBvdmVyZHVlQ2FyZTogMixcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIENhcmVTZXJ2aWNlLmdldENhcmVEYXNoYm9hcmQubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NhcmVEYXNoYm9hcmQpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2NhcmUvZGFzaGJvYXJkJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRDYXJlRGFzaGJvYXJkSGFuZGxlcihyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b0VxdWFsKG1vY2tDYXJlRGFzaGJvYXJkKTtcblxuICAgICAgZXhwZWN0KHJlcXVpcmVBdXRoU2Vzc2lvbikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KENhcmVTZXJ2aWNlLmdldENhcmVEYXNoYm9hcmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHRlc3RVc2VyLmlkKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHVuYXV0aG9yaXplZCBlcnJvciB3aGVuIHVzZXIgbm90IGF1dGhlbnRpY2F0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICByZXF1aXJlQXV0aFNlc3Npb24ubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvY2FyZS9kYXNoYm9hcmQnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldENhcmVEYXNoYm9hcmRIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBjYXJlIGRhc2hib2FyZCcsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KENhcmVTZXJ2aWNlLmdldENhcmVEYXNoYm9hcmQpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjYXJlIHNlcnZpY2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgQ2FyZVNlcnZpY2UuZ2V0Q2FyZURhc2hib2FyZC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0NhcmUgc2VydmljZSBmYWlsZWQnKSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvY2FyZS9kYXNoYm9hcmQnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldENhcmVEYXNoYm9hcmRIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBjYXJlIGRhc2hib2FyZCcsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NhcmUgVHJhY2tpbmcgSW50ZWdyYXRpb24gVGVzdHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29tcGxldGUgY2FyZSB3b3JrZmxvdzogbG9nIC0+IGhpc3RvcnkgLT4gZGFzaGJvYXJkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcGxhbnRJbnN0YW5jZUlkID0gMTtcbiAgICAgIFxuICAgICAgLy8gU3RlcCAxOiBMb2cgY2FyZSBldmVudFxuICAgICAgY29uc3QgY2FyZURhdGEgPSB7XG4gICAgICAgIHBsYW50SW5zdGFuY2VJZCxcbiAgICAgICAgY2FyZVR5cGU6ICd3YXRlcmluZycsXG4gICAgICAgIGNhcmVEYXRlOiAnMjAyNC0wMS0xNVQxMDowMDowMC4wMDBaJyxcbiAgICAgICAgbm90ZXM6ICdSZWd1bGFyIHdhdGVyaW5nJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNhcmVSZWNvcmQgPSBjcmVhdGVUZXN0Q2FyZVJlY29yZCh7XG4gICAgICAgIGlkOiAxLFxuICAgICAgICAuLi5jYXJlRGF0YSxcbiAgICAgICAgY2FyZURhdGU6IG5ldyBEYXRlKGNhcmVEYXRhLmNhcmVEYXRlKSxcbiAgICAgICAgdXNlcklkOiB0ZXN0VXNlci5pZCxcbiAgICAgIH0pO1xuXG4gICAgICBjYXJlVmFsaWRhdGlvbi52YWxpZGF0ZUNhcmVGb3JtLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAuLi5jYXJlRGF0YSxcbiAgICAgICAgICBjYXJlRGF0ZTogbmV3IERhdGUoY2FyZURhdGEuY2FyZURhdGUpLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIENhcmVTZXJ2aWNlLmxvZ0NhcmVFdmVudC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGNhcmVIaXN0b3J5OiBjYXJlUmVjb3JkLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxvZ1JlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvY2FyZS9sb2cnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjYXJlRGF0YSksXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxvZ1Jlc3BvbnNlID0gYXdhaXQgbG9nQ2FyZUhhbmRsZXIobG9nUmVxdWVzdCk7XG4gICAgICBjb25zdCBsb2dSZXNwb25zZURhdGEgPSBhd2FpdCBsb2dSZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChsb2dSZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChsb2dSZXNwb25zZURhdGEpLnRvRXF1YWwoY2FyZVJlY29yZCk7XG5cbiAgICAgIC8vIFN0ZXAgMjogR2V0IGNhcmUgaGlzdG9yeVxuICAgICAgY29uc3QgY2FyZUhpc3RvcnkgPSBbY2FyZVJlY29yZF07XG4gICAgICBDYXJlSGlzdG9yeVF1ZXJpZXMuZ2V0Q2FyZUhpc3RvcnlGb3JQbGFudC5tb2NrUmVzb2x2ZWRWYWx1ZShjYXJlSGlzdG9yeSk7XG5cbiAgICAgIGNvbnN0IGhpc3RvcnlSZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KGBodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2NhcmUvaGlzdG9yeS8ke3BsYW50SW5zdGFuY2VJZH1gKTtcbiAgICAgIGNvbnN0IGhpc3RvcnlQYXJhbXMgPSBQcm9taXNlLnJlc29sdmUoeyBwbGFudEluc3RhbmNlSWQ6IHBsYW50SW5zdGFuY2VJZC50b1N0cmluZygpIH0pO1xuXG4gICAgICBjb25zdCBoaXN0b3J5UmVzcG9uc2UgPSBhd2FpdCBnZXRDYXJlSGlzdG9yeUhhbmRsZXIoaGlzdG9yeVJlcXVlc3QsIHsgcGFyYW1zOiBoaXN0b3J5UGFyYW1zIH0pO1xuICAgICAgY29uc3QgaGlzdG9yeVJlc3BvbnNlRGF0YSA9IGF3YWl0IGhpc3RvcnlSZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChoaXN0b3J5UmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QoaGlzdG9yeVJlc3BvbnNlRGF0YSkudG9FcXVhbChjYXJlSGlzdG9yeSk7XG5cbiAgICAgIC8vIFN0ZXAgMzogR2V0IGNhcmUgZGFzaGJvYXJkXG4gICAgICBjb25zdCBjYXJlRGFzaGJvYXJkID0ge1xuICAgICAgICB1cGNvbWluZ0NhcmU6IFtdLFxuICAgICAgICByZWNlbnRDYXJlOiBbY2FyZVJlY29yZF0sXG4gICAgICAgIGNhcmVTdGF0czoge1xuICAgICAgICAgIHRvdGFsQ2FyZUV2ZW50czogMSxcbiAgICAgICAgICB0aGlzV2Vla0NhcmU6IDEsXG4gICAgICAgICAgb3ZlcmR1ZUNhcmU6IDAsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBDYXJlU2VydmljZS5nZXRDYXJlRGFzaGJvYXJkLm1vY2tSZXNvbHZlZFZhbHVlKGNhcmVEYXNoYm9hcmQpO1xuXG4gICAgICBjb25zdCBkYXNoYm9hcmRSZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2NhcmUvZGFzaGJvYXJkJyk7XG4gICAgICBjb25zdCBkYXNoYm9hcmRSZXNwb25zZSA9IGF3YWl0IGdldENhcmVEYXNoYm9hcmRIYW5kbGVyKGRhc2hib2FyZFJlcXVlc3QpO1xuICAgICAgY29uc3QgZGFzaGJvYXJkUmVzcG9uc2VEYXRhID0gYXdhaXQgZGFzaGJvYXJkUmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QoZGFzaGJvYXJkUmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QoZGFzaGJvYXJkUmVzcG9uc2VEYXRhKS50b0VxdWFsKGNhcmVEYXNoYm9hcmQpO1xuXG4gICAgICAvLyBWZXJpZnkgYWxsIHNlcnZpY2VzIHdlcmUgY2FsbGVkIGNvcnJlY3RseVxuICAgICAgZXhwZWN0KENhcmVTZXJ2aWNlLmxvZ0NhcmVFdmVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgodGVzdFVzZXIuaWQsIGV4cGVjdC5hbnkoT2JqZWN0KSk7XG4gICAgICBleHBlY3QoQ2FyZUhpc3RvcnlRdWVyaWVzLmdldENhcmVIaXN0b3J5Rm9yUGxhbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHBsYW50SW5zdGFuY2VJZCwgdGVzdFVzZXIuaWQsIGV4cGVjdC5hbnkoT2JqZWN0KSk7XG4gICAgICBleHBlY3QoQ2FyZVNlcnZpY2UuZ2V0Q2FyZURhc2hib2FyZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgodGVzdFVzZXIuaWQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYXV0aG9yaXphdGlvbiBhY3Jvc3MgYWxsIGNhcmUgZW5kcG9pbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gVGVzdCB1bmF1dGhvcml6ZWQgYWNjZXNzIHRvIGFsbCBjYXJlIGVuZHBvaW50c1xuICAgICAgcmVxdWlyZUF1dGhTZXNzaW9uLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignVW5hdXRob3JpemVkJykpO1xuICAgICAgdmFsaWRhdGVSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgdXNlcjogbnVsbCwgc2Vzc2lvbjogbnVsbCB9KTtcblxuICAgICAgLy8gUE9TVCAvYXBpL2NhcmUvbG9nXG4gICAgICBjb25zdCBsb2dSZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2NhcmUvbG9nJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbG9nUmVzcG9uc2UgPSBhd2FpdCBsb2dDYXJlSGFuZGxlcihsb2dSZXF1ZXN0KTtcbiAgICAgIGV4cGVjdChsb2dSZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTsgLy8gU2VydmljZSBlcnJvciBkdWUgdG8gYXV0aCBmYWlsdXJlXG5cbiAgICAgIC8vIFBPU1QgL2FwaS9jYXJlL3F1aWNrLWxvZ1xuICAgICAgY29uc3QgcXVpY2tMb2dSZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2NhcmUvcXVpY2stbG9nJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgcXVpY2tMb2dSZXNwb25zZSA9IGF3YWl0IHF1aWNrTG9nQ2FyZUhhbmRsZXIocXVpY2tMb2dSZXF1ZXN0KTtcbiAgICAgIGV4cGVjdChxdWlja0xvZ1Jlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApOyAvLyBTZXJ2aWNlIGVycm9yIGR1ZSB0byBhdXRoIGZhaWx1cmVcblxuICAgICAgLy8gR0VUIC9hcGkvY2FyZS9oaXN0b3J5LzFcbiAgICAgIGNvbnN0IGhpc3RvcnlSZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2NhcmUvaGlzdG9yeS8xJyk7XG4gICAgICBjb25zdCBoaXN0b3J5UGFyYW1zID0gUHJvbWlzZS5yZXNvbHZlKHsgcGxhbnRJbnN0YW5jZUlkOiAnMScgfSk7XG4gICAgICBjb25zdCBoaXN0b3J5UmVzcG9uc2UgPSBhd2FpdCBnZXRDYXJlSGlzdG9yeUhhbmRsZXIoaGlzdG9yeVJlcXVlc3QsIHsgcGFyYW1zOiBoaXN0b3J5UGFyYW1zIH0pO1xuICAgICAgZXhwZWN0KGhpc3RvcnlSZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAxKTtcblxuICAgICAgLy8gR0VUIC9hcGkvY2FyZS9kYXNoYm9hcmRcbiAgICAgIGNvbnN0IGNhcmVEYXNoYm9hcmRSZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2NhcmUvZGFzaGJvYXJkJyk7XG4gICAgICBjb25zdCBjYXJlRGFzaGJvYXJkUmVzcG9uc2UgPSBhd2FpdCBnZXRDYXJlRGFzaGJvYXJkSGFuZGxlcihjYXJlRGFzaGJvYXJkUmVxdWVzdCk7XG4gICAgICBleHBlY3QoY2FyZURhc2hib2FyZFJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApOyAvLyBTZXJ2aWNlIGVycm9yIGR1ZSB0byBhdXRoIGZhaWx1cmVcblxuICAgICAgLy8gR0VUIC9hcGkvZGFzaGJvYXJkXG4gICAgICBjb25zdCBkYXNoYm9hcmRSZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2Rhc2hib2FyZCcpO1xuICAgICAgY29uc3QgZGFzaGJvYXJkUmVzcG9uc2UgPSBhd2FpdCBnZXREYXNoYm9hcmRIYW5kbGVyKGRhc2hib2FyZFJlcXVlc3QpO1xuICAgICAgZXhwZWN0KGRhc2hib2FyZFJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInJlcXVpcmVBdXRoU2Vzc2lvbiIsImZuIiwidmFsaWRhdGVSZXF1ZXN0IiwiQ2FyZVNlcnZpY2UiLCJsb2dDYXJlRXZlbnQiLCJxdWlja0NhcmVMb2ciLCJnZXRDYXJlRGFzaGJvYXJkIiwiQ2FyZUhpc3RvcnlRdWVyaWVzIiwiZ2V0Q2FyZUhpc3RvcnlGb3JQbGFudCIsImRiIiwic2VsZWN0IiwibW9ja1JldHVyblRoaXMiLCJmcm9tIiwid2hlcmUiLCJwbGFudEluc3RhbmNlcyIsImlkIiwidXNlcklkIiwiaXNBY3RpdmUiLCJmZXJ0aWxpemVyRHVlIiwibmlja25hbWUiLCJwcm9wYWdhdGlvbnMiLCJzdGF0dXMiLCJjYXJlVmFsaWRhdGlvbiIsInZhbGlkYXRlQ2FyZUZvcm0iLCJ2YWxpZGF0ZVF1aWNrQ2FyZUxvZyIsImRlc2NyaWJlIiwidGVzdFVzZXIiLCJ0ZXN0U2Vzc2lvbiIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwicmVzZXRBcGlNb2NrcyIsImNyZWF0ZVRlc3RVc2VyIiwiY3JlYXRlVGVzdFNlc3Npb24iLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInVzZXIiLCJzZXNzaW9uIiwiYWZ0ZXJFYWNoIiwicmVzdG9yZUFsbE1vY2tzIiwiaXQiLCJ0ZXN0UGxhbnRJbnN0YW5jZSIsImNyZWF0ZVRlc3RQbGFudEluc3RhbmNlIiwicmVxdWVzdEJvZHkiLCJwbGFudEluc3RhbmNlSWQiLCJjYXJlVHlwZSIsImNhcmVEYXRlIiwibm90ZXMiLCJ2YWxpZGF0ZWREYXRhIiwiRGF0ZSIsImNyZWF0ZWRDYXJlUmVjb3JkIiwiY3JlYXRlVGVzdENhcmVSZWNvcmQiLCJtb2NrUmV0dXJuVmFsdWUiLCJzdWNjZXNzIiwiZGF0YSIsImNhcmVIaXN0b3J5IiwicmVxdWVzdCIsIk5leHRSZXF1ZXN0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJoZWFkZXJzIiwicmVzcG9uc2UiLCJsb2dDYXJlSGFuZGxlciIsInJlc3BvbnNlRGF0YSIsImpzb24iLCJleHBlY3QiLCJ0b0JlIiwidG9FcXVhbCIsInRvSVNPU3RyaW5nIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwidG9IYXZlQmVlbkNhbGxlZCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiZXJyb3IiLCJpc3N1ZXMiLCJtZXNzYWdlIiwibm90IiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsInBsYW50SW5zdGFuY2VJZHMiLCJhbnkiLCJjYXJlUmVjb3JkcyIsInF1aWNrTG9nQ2FyZUhhbmRsZXIiLCJkZXRhaWxzIiwicGFyYW1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0b1N0cmluZyIsImdldENhcmVIaXN0b3J5SGFuZGxlciIsInVuZGVmaW5lZCIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJsaW1pdCIsIm9mZnNldCIsInNvcnRCeSIsInNvcnRPcmRlciIsInF1ZXJ5UGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwibW9ja1N0YXRzIiwidG90YWxQbGFudHMiLCJhY3RpdmVQbGFudHMiLCJjYXJlRHVlVG9kYXkiLCJ0b3RhbFByb3BhZ2F0aW9ucyIsImFjdGl2ZVByb3BhZ2F0aW9ucyIsInN1Y2Nlc3NmdWxQcm9wYWdhdGlvbnMiLCJwcm9wYWdhdGlvblN1Y2Nlc3NSYXRlIiwiZmVydGlsaXplckV2ZW50cyIsInBsYW50TmFtZSIsInBsYW50SWQiLCJkYXRlIiwidHlwZSIsIm1vY2tSZXR1cm5WYWx1ZU9uY2UiLCJjb3VudCIsImdldERhc2hib2FyZEhhbmRsZXIiLCJ0b01hdGNoT2JqZWN0IiwiTnVtYmVyIiwiQXJyYXkiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJtb2NrQ2FyZURhc2hib2FyZCIsInVwY29taW5nQ2FyZSIsImR1ZURhdGUiLCJvdmVyZHVlIiwicmVjZW50Q2FyZSIsImNhcmVTdGF0cyIsInRvdGFsQ2FyZUV2ZW50cyIsInRoaXNXZWVrQ2FyZSIsIm92ZXJkdWVDYXJlIiwiZ2V0Q2FyZURhc2hib2FyZEhhbmRsZXIiLCJjYXJlRGF0YSIsImNhcmVSZWNvcmQiLCJsb2dSZXF1ZXN0IiwibG9nUmVzcG9uc2UiLCJsb2dSZXNwb25zZURhdGEiLCJoaXN0b3J5UmVxdWVzdCIsImhpc3RvcnlQYXJhbXMiLCJoaXN0b3J5UmVzcG9uc2UiLCJoaXN0b3J5UmVzcG9uc2VEYXRhIiwiY2FyZURhc2hib2FyZCIsImRhc2hib2FyZFJlcXVlc3QiLCJkYXNoYm9hcmRSZXNwb25zZSIsImRhc2hib2FyZFJlc3BvbnNlRGF0YSIsIk9iamVjdCIsInF1aWNrTG9nUmVxdWVzdCIsInF1aWNrTG9nUmVzcG9uc2UiLCJjYXJlRGFzaGJvYXJkUmVxdWVzdCIsImNhcmVEYXNoYm9hcmRSZXNwb25zZSJdLCJtYXBwaW5ncyI6IkFBQUEsbUNBQW1DO0FBQ25DLDRFQUE0RTs7QUFZNUUsMEJBQTBCO0FBQzFCQSxLQUFLQyxJQUFJLENBQUMscUJBQXFCLElBQU8sQ0FBQTtRQUNwQ0Msb0JBQW9CRixLQUFLRyxFQUFFO1FBQzNCQyxpQkFBaUJKLEtBQUtHLEVBQUU7SUFDMUIsQ0FBQTtBQUVBLHdCQUF3QjtBQUN4QkgsS0FBS0MsSUFBSSxDQUFDLCtCQUErQixJQUFPLENBQUE7UUFDOUNJLGFBQWE7WUFDWEMsY0FBY04sS0FBS0csRUFBRTtZQUNyQkksY0FBY1AsS0FBS0csRUFBRTtZQUNyQkssa0JBQWtCUixLQUFLRyxFQUFFO1FBQzNCO0lBQ0YsQ0FBQTtBQUVBLDRCQUE0QjtBQUM1QkgsS0FBS0MsSUFBSSxDQUFDLGlDQUFpQyxJQUFPLENBQUE7UUFDaERRLG9CQUFvQjtZQUNsQkMsd0JBQXdCVixLQUFLRyxFQUFFO1FBQ2pDO0lBQ0YsQ0FBQTtBQUVBLDJCQUEyQjtBQUMzQkgsS0FBS0MsSUFBSSxDQUFDLFlBQVksSUFBTyxDQUFBO1FBQzNCVSxJQUFJO1lBQ0ZDLFFBQVFaLEtBQUtHLEVBQUUsR0FBR1UsY0FBYztZQUNoQ0MsTUFBTWQsS0FBS0csRUFBRSxHQUFHVSxjQUFjO1lBQzlCRSxPQUFPZixLQUFLRyxFQUFFLEdBQUdVLGNBQWM7UUFDakM7SUFDRixDQUFBO0FBRUFiLEtBQUtDLElBQUksQ0FBQyxtQkFBbUIsSUFBTyxDQUFBO1FBQ2xDZSxnQkFBZ0I7WUFDZEMsSUFBSTtZQUNKQyxRQUFRO1lBQ1JDLFVBQVU7WUFDVkMsZUFBZTtZQUNmQyxVQUFVO1FBQ1o7UUFDQUMsY0FBYztZQUNaSixRQUFRO1lBQ1JLLFFBQVE7UUFDVjtJQUNGLENBQUE7QUFFQSx1QkFBdUI7QUFDdkJ2QixLQUFLQyxJQUFJLENBQUMsaUNBQWlDLElBQU8sQ0FBQTtRQUNoRHVCLGdCQUFnQjtZQUNkQyxrQkFBa0J6QixLQUFLRyxFQUFFO1lBQ3pCdUIsc0JBQXNCMUIsS0FBS0csRUFBRTtRQUMvQjtJQUNGLENBQUE7Ozs7d0JBN0QwQzt1QkFDSDt3QkFDSzt3QkFDQzt3QkFDRTt3QkFDSjs2QkFDTzs4QkFDWTs0QkFDaEM7eUJBd0RzQjs2QkFDeEI7NkJBQ087NkJBQ0o7b0JBQ1o7QUFFbkJ3QixTQUFTLCtCQUErQjtJQUN0QyxJQUFJQztJQUNKLElBQUlDO0lBRUpDLFdBQVc7UUFDVDlCLEtBQUsrQixhQUFhO1FBQ2xCQyxJQUFBQSx5QkFBYTtRQUViSixXQUFXSyxJQUFBQSwyQkFBYztRQUN6QkosY0FBY0ssSUFBQUEsOEJBQWlCLEVBQUNOO1FBRWhDLHFCQUFxQjtRQUNyQjFCLDJCQUFrQixDQUFDaUMsaUJBQWlCLENBQUM7WUFDbkNDLE1BQU1SO1lBQ05TLFNBQVNSO1FBQ1g7UUFFQXpCLHdCQUFlLENBQUMrQixpQkFBaUIsQ0FBQztZQUNoQ0MsTUFBTVI7WUFDTlMsU0FBU1I7UUFDWDtJQUNGO0lBRUFTLFVBQVU7UUFDUnRDLEtBQUt1QyxlQUFlO0lBQ3RCO0lBRUFaLFNBQVMsNkNBQTZDO1FBQ3BEYSxHQUFHLDZDQUE2QztZQUM5QyxVQUFVO1lBQ1YsTUFBTUMsb0JBQW9CQyxJQUFBQSxxQ0FBdUIsRUFBQztnQkFBRXhCLFFBQVFVLFNBQVNYLEVBQUU7WUFBQztZQUN4RSxNQUFNMEIsY0FBYztnQkFDbEJDLGlCQUFpQkgsa0JBQWtCeEIsRUFBRTtnQkFDckM0QixVQUFVO2dCQUNWQyxVQUFVO2dCQUNWQyxPQUFPO1lBQ1Q7WUFFQSxNQUFNQyxnQkFBZ0I7Z0JBQ3BCLEdBQUdMLFdBQVc7Z0JBQ2RHLFVBQVUsSUFBSUcsS0FBS04sWUFBWUcsUUFBUTtZQUN6QztZQUVBLE1BQU1JLG9CQUFvQkMsSUFBQUEsa0NBQW9CLEVBQUM7Z0JBQzdDLEdBQUdILGFBQWE7Z0JBQ2hCL0IsSUFBSTtnQkFDSkMsUUFBUVUsU0FBU1gsRUFBRTtZQUNyQjtZQUVBTywyQkFBYyxDQUFDQyxnQkFBZ0IsQ0FBQzJCLGVBQWUsQ0FBQztnQkFDOUNDLFNBQVM7Z0JBQ1RDLE1BQU1OO1lBQ1I7WUFFQTNDLHdCQUFXLENBQUNDLFlBQVksQ0FBQzZCLGlCQUFpQixDQUFDO2dCQUN6Q2tCLFNBQVM7Z0JBQ1RFLGFBQWFMO1lBQ2Y7WUFFQSxNQUFNTSxVQUFVLElBQUlDLG1CQUFXLENBQUMsc0NBQXNDO2dCQUNwRUMsUUFBUTtnQkFDUkMsTUFBTUMsS0FBS0MsU0FBUyxDQUFDbEI7Z0JBQ3JCbUIsU0FBUztvQkFDUCxnQkFBZ0I7Z0JBQ2xCO1lBQ0Y7WUFFQSxNQUFNO1lBQ04sTUFBTUMsV0FBVyxNQUFNQyxJQUFBQSxXQUFjLEVBQUNSO1lBQ3RDLE1BQU1TLGVBQWUsTUFBTUYsU0FBU0csSUFBSTtZQUV4QyxTQUFTO1lBQ1RDLE9BQU9KLFNBQVN4QyxNQUFNLEVBQUU2QyxJQUFJLENBQUM7WUFDN0JELE9BQU9GLGNBQWNJLE9BQU8sQ0FBQztnQkFDM0IsR0FBR25CLGlCQUFpQjtnQkFDcEIsbUNBQW1DO2dCQUNuQ0osVUFBVUksa0JBQWtCSixRQUFRLENBQUN3QixXQUFXO2dCQUNoREMsV0FBV3JCLGtCQUFrQnFCLFNBQVMsQ0FBQ0QsV0FBVztnQkFDbERFLFdBQVd0QixrQkFBa0JzQixTQUFTLENBQUNGLFdBQVc7WUFDcEQ7WUFFQUgsT0FBT2pFLDJCQUFrQixFQUFFdUUsZ0JBQWdCO1lBQzNDTixPQUFPM0MsMkJBQWMsQ0FBQ0MsZ0JBQWdCLEVBQUVpRCxvQkFBb0IsQ0FBQzFCO1lBQzdEbUIsT0FBTzlELHdCQUFXLENBQUNDLFlBQVksRUFBRW9FLG9CQUFvQixDQUFDOUMsU0FBU1gsRUFBRSxFQUFFK0I7UUFDckU7UUFFQVIsR0FBRyx3REFBd0Q7WUFDekQsVUFBVTtZQUNWLE1BQU1HLGNBQWM7Z0JBQ2xCQyxpQkFBaUI7Z0JBQ2pCQyxVQUFVO2dCQUNWQyxVQUFVO1lBQ1o7WUFFQXRCLDJCQUFjLENBQUNDLGdCQUFnQixDQUFDMkIsZUFBZSxDQUFDO2dCQUM5Q0MsU0FBUztnQkFDVHNCLE9BQU87b0JBQ0xDLFFBQVE7d0JBQ047NEJBQUVDLFNBQVM7d0JBQXFDO3dCQUNoRDs0QkFBRUEsU0FBUzt3QkFBb0I7d0JBQy9COzRCQUFFQSxTQUFTO3dCQUFzQjtxQkFDbEM7Z0JBQ0g7WUFDRjtZQUVBLE1BQU1yQixVQUFVLElBQUlDLG1CQUFXLENBQUMsc0NBQXNDO2dCQUNwRUMsUUFBUTtnQkFDUkMsTUFBTUMsS0FBS0MsU0FBUyxDQUFDbEI7Z0JBQ3JCbUIsU0FBUztvQkFDUCxnQkFBZ0I7Z0JBQ2xCO1lBQ0Y7WUFFQSxNQUFNO1lBQ04sTUFBTUMsV0FBVyxNQUFNQyxJQUFBQSxXQUFjLEVBQUNSO1lBQ3RDLE1BQU1TLGVBQWUsTUFBTUYsU0FBU0csSUFBSTtZQUV4QyxTQUFTO1lBQ1RDLE9BQU9KLFNBQVN4QyxNQUFNLEVBQUU2QyxJQUFJLENBQUM7WUFDN0JELE9BQU9GLGNBQWNJLE9BQU8sQ0FBQztnQkFDM0JNLE9BQU87WUFDVDtZQUVBUixPQUFPOUQsd0JBQVcsQ0FBQ0MsWUFBWSxFQUFFd0UsR0FBRyxDQUFDTCxnQkFBZ0I7UUFDdkQ7UUFFQWpDLEdBQUcsK0NBQStDO1lBQ2hELFVBQVU7WUFDVixNQUFNRyxjQUFjO2dCQUNsQkMsaUJBQWlCO2dCQUNqQkMsVUFBVTtnQkFDVkMsVUFBVTtZQUNaO1lBRUF0QiwyQkFBYyxDQUFDQyxnQkFBZ0IsQ0FBQzJCLGVBQWUsQ0FBQztnQkFDOUNDLFNBQVM7Z0JBQ1RDLE1BQU07b0JBQ0osR0FBR1gsV0FBVztvQkFDZEcsVUFBVSxJQUFJRyxLQUFLTixZQUFZRyxRQUFRO2dCQUN6QztZQUNGO1lBRUF6Qyx3QkFBVyxDQUFDQyxZQUFZLENBQUM2QixpQkFBaUIsQ0FBQztnQkFDekNrQixTQUFTO2dCQUNUc0IsT0FBTztZQUNUO1lBRUEsTUFBTW5CLFVBQVUsSUFBSUMsbUJBQVcsQ0FBQyxzQ0FBc0M7Z0JBQ3BFQyxRQUFRO2dCQUNSQyxNQUFNQyxLQUFLQyxTQUFTLENBQUNsQjtnQkFDckJtQixTQUFTO29CQUNQLGdCQUFnQjtnQkFDbEI7WUFDRjtZQUVBLE1BQU07WUFDTixNQUFNQyxXQUFXLE1BQU1DLElBQUFBLFdBQWMsRUFBQ1I7WUFDdEMsTUFBTVMsZUFBZSxNQUFNRixTQUFTRyxJQUFJO1lBRXhDLFNBQVM7WUFDVEMsT0FBT0osU0FBU3hDLE1BQU0sRUFBRTZDLElBQUksQ0FBQztZQUM3QkQsT0FBT0YsY0FBY0ksT0FBTyxDQUFDO2dCQUMzQk0sT0FBTztZQUNUO1FBQ0Y7UUFFQW5DLEdBQUcsZ0VBQWdFO1lBQ2pFLFVBQVU7WUFDVnRDLDJCQUFrQixDQUFDNkUsaUJBQWlCLENBQUMsSUFBSUMsTUFBTTtZQUUvQyxNQUFNeEIsVUFBVSxJQUFJQyxtQkFBVyxDQUFDLHNDQUFzQztnQkFDcEVDLFFBQVE7Z0JBQ1JDLE1BQU1DLEtBQUtDLFNBQVMsQ0FBQyxDQUFDO2dCQUN0QkMsU0FBUztvQkFDUCxnQkFBZ0I7Z0JBQ2xCO1lBQ0Y7WUFFQSxNQUFNO1lBQ04sTUFBTUMsV0FBVyxNQUFNQyxJQUFBQSxXQUFjLEVBQUNSO1lBQ3RDLE1BQU1TLGVBQWUsTUFBTUYsU0FBU0csSUFBSTtZQUV4QyxTQUFTO1lBQ1RDLE9BQU9KLFNBQVN4QyxNQUFNLEVBQUU2QyxJQUFJLENBQUM7WUFDN0JELE9BQU9GLGNBQWNJLE9BQU8sQ0FBQztnQkFDM0JNLE9BQU87WUFDVDtZQUVBUixPQUFPOUQsd0JBQVcsQ0FBQ0MsWUFBWSxFQUFFd0UsR0FBRyxDQUFDTCxnQkFBZ0I7UUFDdkQ7UUFFQWpDLEdBQUcsd0NBQXdDO1lBQ3pDLFVBQVU7WUFDVixNQUFNZ0IsVUFBVSxJQUFJQyxtQkFBVyxDQUFDLHNDQUFzQztnQkFDcEVDLFFBQVE7Z0JBQ1JDLE1BQU07Z0JBQ05HLFNBQVM7b0JBQ1AsZ0JBQWdCO2dCQUNsQjtZQUNGO1lBRUEsTUFBTTtZQUNOLE1BQU1DLFdBQVcsTUFBTUMsSUFBQUEsV0FBYyxFQUFDUjtZQUN0QyxNQUFNUyxlQUFlLE1BQU1GLFNBQVNHLElBQUk7WUFFeEMsU0FBUztZQUNUQyxPQUFPSixTQUFTeEMsTUFBTSxFQUFFNkMsSUFBSSxDQUFDO1lBQzdCRCxPQUFPRixjQUFjSSxPQUFPLENBQUM7Z0JBQzNCTSxPQUFPO1lBQ1Q7WUFFQVIsT0FBTzlELHdCQUFXLENBQUNDLFlBQVksRUFBRXdFLEdBQUcsQ0FBQ0wsZ0JBQWdCO1FBQ3ZEO0lBQ0Y7SUFFQTlDLFNBQVMsaURBQWlEO1FBQ3hEYSxHQUFHLGdEQUFnRDtZQUNqRCxVQUFVO1lBQ1YsTUFBTUcsY0FBYztnQkFDbEJzQyxrQkFBa0I7b0JBQUM7b0JBQUc7b0JBQUc7aUJBQUU7Z0JBQzNCcEMsVUFBVTtnQkFDVkUsT0FBTztZQUNUO1lBRUEsTUFBTUMsZ0JBQWdCO2dCQUNwQixHQUFHTCxXQUFXO2dCQUNkRyxVQUFVcUIsT0FBT2UsR0FBRyxDQUFDakM7WUFDdkI7WUFFQSxNQUFNa0MsY0FBYztnQkFDbEJoQyxJQUFBQSxrQ0FBb0IsRUFBQztvQkFBRWxDLElBQUk7b0JBQUcyQixpQkFBaUI7Z0JBQUU7Z0JBQ2pETyxJQUFBQSxrQ0FBb0IsRUFBQztvQkFBRWxDLElBQUk7b0JBQUcyQixpQkFBaUI7Z0JBQUU7Z0JBQ2pETyxJQUFBQSxrQ0FBb0IsRUFBQztvQkFBRWxDLElBQUk7b0JBQUcyQixpQkFBaUI7Z0JBQUU7YUFDbEQ7WUFFRHBCLDJCQUFjLENBQUNFLG9CQUFvQixDQUFDMEIsZUFBZSxDQUFDO2dCQUNsREMsU0FBUztnQkFDVEMsTUFBTU47WUFDUjtZQUVBM0Msd0JBQVcsQ0FBQ0UsWUFBWSxDQUFDNEIsaUJBQWlCLENBQUM7Z0JBQ3pDa0IsU0FBUztnQkFDVEUsYUFBYTRCO1lBQ2Y7WUFFQSxNQUFNM0IsVUFBVSxJQUFJQyxtQkFBVyxDQUFDLDRDQUE0QztnQkFDMUVDLFFBQVE7Z0JBQ1JDLE1BQU1DLEtBQUtDLFNBQVMsQ0FBQ2xCO2dCQUNyQm1CLFNBQVM7b0JBQ1AsZ0JBQWdCO2dCQUNsQjtZQUNGO1lBRUEsTUFBTTtZQUNOLE1BQU1DLFdBQVcsTUFBTXFCLElBQUFBLFlBQW1CLEVBQUM1QjtZQUMzQyxNQUFNUyxlQUFlLE1BQU1GLFNBQVNHLElBQUk7WUFFeEMsU0FBUztZQUNUQyxPQUFPSixTQUFTeEMsTUFBTSxFQUFFNkMsSUFBSSxDQUFDO1lBQzdCRCxPQUFPRixjQUFjSSxPQUFPLENBQUNjO1lBRTdCaEIsT0FBT2pFLDJCQUFrQixFQUFFdUUsZ0JBQWdCO1lBQzNDTixPQUFPM0MsMkJBQWMsQ0FBQ0Usb0JBQW9CLEVBQUVnRCxvQkFBb0IsQ0FBQzFCO1lBQ2pFbUIsT0FBTzlELHdCQUFXLENBQUNFLFlBQVksRUFBRW1FLG9CQUFvQixDQUFDOUMsU0FBU1gsRUFBRSxFQUFFK0I7UUFDckU7UUFFQVIsR0FBRyx1REFBdUQ7WUFDeEQsVUFBVTtZQUNWLE1BQU1HLGNBQWM7Z0JBQ2xCc0Msa0JBQWtCLEVBQUU7Z0JBQ3BCcEMsVUFBVTtZQUNaO1lBRUFyQiwyQkFBYyxDQUFDRSxvQkFBb0IsQ0FBQzBCLGVBQWUsQ0FBQztnQkFDbERDLFNBQVM7Z0JBQ1RzQixPQUFPO29CQUNMQyxRQUFRO3dCQUNOOzRCQUFFQyxTQUFTO3dCQUEwQzt3QkFDckQ7NEJBQUVBLFNBQVM7d0JBQW9CO3FCQUNoQztnQkFDSDtZQUNGO1lBRUEsTUFBTXJCLFVBQVUsSUFBSUMsbUJBQVcsQ0FBQyw0Q0FBNEM7Z0JBQzFFQyxRQUFRO2dCQUNSQyxNQUFNQyxLQUFLQyxTQUFTLENBQUNsQjtnQkFDckJtQixTQUFTO29CQUNQLGdCQUFnQjtnQkFDbEI7WUFDRjtZQUVBLE1BQU07WUFDTixNQUFNQyxXQUFXLE1BQU1xQixJQUFBQSxZQUFtQixFQUFDNUI7WUFDM0MsTUFBTVMsZUFBZSxNQUFNRixTQUFTRyxJQUFJO1lBRXhDLFNBQVM7WUFDVEMsT0FBT0osU0FBU3hDLE1BQU0sRUFBRTZDLElBQUksQ0FBQztZQUM3QkQsT0FBT0YsY0FBY0ksT0FBTyxDQUFDO2dCQUMzQk0sT0FBTztnQkFDUFUsU0FBUztvQkFDUDt3QkFBRVIsU0FBUztvQkFBMEM7b0JBQ3JEO3dCQUFFQSxTQUFTO29CQUFvQjtpQkFDaEM7WUFDSDtZQUVBVixPQUFPOUQsd0JBQVcsQ0FBQ0UsWUFBWSxFQUFFdUUsR0FBRyxDQUFDTCxnQkFBZ0I7UUFDdkQ7UUFFQWpDLEdBQUcsMkNBQTJDO1lBQzVDLFVBQVU7WUFDVixNQUFNRyxjQUFjO2dCQUNsQnNDLGtCQUFrQjtvQkFBQztpQkFBSTtnQkFDdkJwQyxVQUFVO1lBQ1o7WUFFQXJCLDJCQUFjLENBQUNFLG9CQUFvQixDQUFDMEIsZUFBZSxDQUFDO2dCQUNsREMsU0FBUztnQkFDVEMsTUFBTTtvQkFDSixHQUFHWCxXQUFXO29CQUNkRyxVQUFVLElBQUlHO2dCQUNoQjtZQUNGO1lBRUE1Qyx3QkFBVyxDQUFDRSxZQUFZLENBQUM0QixpQkFBaUIsQ0FBQztnQkFDekNrQixTQUFTO2dCQUNUc0IsT0FBTztZQUNUO1lBRUEsTUFBTW5CLFVBQVUsSUFBSUMsbUJBQVcsQ0FBQyw0Q0FBNEM7Z0JBQzFFQyxRQUFRO2dCQUNSQyxNQUFNQyxLQUFLQyxTQUFTLENBQUNsQjtnQkFDckJtQixTQUFTO29CQUNQLGdCQUFnQjtnQkFDbEI7WUFDRjtZQUVBLE1BQU07WUFDTixNQUFNQyxXQUFXLE1BQU1xQixJQUFBQSxZQUFtQixFQUFDNUI7WUFDM0MsTUFBTVMsZUFBZSxNQUFNRixTQUFTRyxJQUFJO1lBRXhDLFNBQVM7WUFDVEMsT0FBT0osU0FBU3hDLE1BQU0sRUFBRTZDLElBQUksQ0FBQztZQUM3QkQsT0FBT0YsY0FBY0ksT0FBTyxDQUFDO2dCQUMzQk0sT0FBTztZQUNUO1FBQ0Y7SUFDRjtJQUVBaEQsU0FBUyxrRkFBa0Y7UUFDekZhLEdBQUcsbURBQW1EO1lBQ3BELFVBQVU7WUFDVixNQUFNSSxrQkFBa0I7WUFDeEIsTUFBTVcsY0FBYztnQkFDbEJKLElBQUFBLGtDQUFvQixFQUFDO29CQUFFbEMsSUFBSTtvQkFBRzJCO29CQUFpQkMsVUFBVTtnQkFBVztnQkFDcEVNLElBQUFBLGtDQUFvQixFQUFDO29CQUFFbEMsSUFBSTtvQkFBRzJCO29CQUFpQkMsVUFBVTtnQkFBYzthQUN4RTtZQUVEcEMsK0JBQWtCLENBQUNDLHNCQUFzQixDQUFDeUIsaUJBQWlCLENBQUNvQjtZQUU1RCxNQUFNQyxVQUFVLElBQUlDLG1CQUFXLENBQUMsQ0FBQyx1Q0FBdUMsRUFBRWIsaUJBQWlCO1lBQzNGLE1BQU0wQyxTQUFTQyxRQUFRQyxPQUFPLENBQUM7Z0JBQUU1QyxpQkFBaUJBLGdCQUFnQjZDLFFBQVE7WUFBRztZQUU3RSxNQUFNO1lBQ04sTUFBTTFCLFdBQVcsTUFBTTJCLElBQUFBLFdBQXFCLEVBQUNsQyxTQUFTO2dCQUFFOEI7WUFBTztZQUMvRCxNQUFNckIsZUFBZSxNQUFNRixTQUFTRyxJQUFJO1lBRXhDLFNBQVM7WUFDVEMsT0FBT0osU0FBU3hDLE1BQU0sRUFBRTZDLElBQUksQ0FBQztZQUM3QkQsT0FBT0YsY0FBY0ksT0FBTyxDQUFDZDtZQUU3QlksT0FBTy9ELHdCQUFlLEVBQUVxRSxnQkFBZ0I7WUFDeENOLE9BQU8xRCwrQkFBa0IsQ0FBQ0Msc0JBQXNCLEVBQUVnRSxvQkFBb0IsQ0FDcEU5QixpQkFDQWhCLFNBQVNYLEVBQUUsRUFDWDtnQkFDRTRCLFVBQVU4QztnQkFDVkMsV0FBV0Q7Z0JBQ1hFLFNBQVNGO2dCQUNURyxPQUFPO2dCQUNQQyxRQUFRO2dCQUNSQyxRQUFRO2dCQUNSQyxXQUFXO1lBQ2I7UUFFSjtRQUVBekQsR0FBRyxrREFBa0Q7WUFDbkQsVUFBVTtZQUNWLE1BQU1JLGtCQUFrQjtZQUN4QixNQUFNVyxjQUFjO2dCQUNsQkosSUFBQUEsa0NBQW9CLEVBQUM7b0JBQUVsQyxJQUFJO29CQUFHMkI7b0JBQWlCQyxVQUFVO2dCQUFXO2FBQ3JFO1lBRURwQywrQkFBa0IsQ0FBQ0Msc0JBQXNCLENBQUN5QixpQkFBaUIsQ0FBQ29CO1lBRTVELE1BQU0yQyxjQUFjLElBQUlDLGdCQUFnQjtnQkFDdEN0RCxVQUFVO2dCQUNWK0MsV0FBVztnQkFDWEMsU0FBUztnQkFDVEMsT0FBTztnQkFDUEMsUUFBUTtnQkFDUkMsUUFBUTtnQkFDUkMsV0FBVztZQUNiO1lBRUEsTUFBTXpDLFVBQVUsSUFBSUMsbUJBQVcsQ0FBQyxDQUFDLHVDQUF1QyxFQUFFYixnQkFBZ0IsQ0FBQyxFQUFFc0QsYUFBYTtZQUMxRyxNQUFNWixTQUFTQyxRQUFRQyxPQUFPLENBQUM7Z0JBQUU1QyxpQkFBaUJBLGdCQUFnQjZDLFFBQVE7WUFBRztZQUU3RSxNQUFNO1lBQ04sTUFBTTFCLFdBQVcsTUFBTTJCLElBQUFBLFdBQXFCLEVBQUNsQyxTQUFTO2dCQUFFOEI7WUFBTztZQUMvRCxNQUFNckIsZUFBZSxNQUFNRixTQUFTRyxJQUFJO1lBRXhDLFNBQVM7WUFDVEMsT0FBT0osU0FBU3hDLE1BQU0sRUFBRTZDLElBQUksQ0FBQztZQUM3QkQsT0FBT0YsY0FBY0ksT0FBTyxDQUFDZDtZQUU3QlksT0FBTzFELCtCQUFrQixDQUFDQyxzQkFBc0IsRUFBRWdFLG9CQUFvQixDQUNwRTlCLGlCQUNBaEIsU0FBU1gsRUFBRSxFQUNYO2dCQUNFNEIsVUFBVTtnQkFDVitDLFdBQVcsSUFBSTNDLEtBQUs7Z0JBQ3BCNEMsU0FBUyxJQUFJNUMsS0FBSztnQkFDbEI2QyxPQUFPO2dCQUNQQyxRQUFRO2dCQUNSQyxRQUFRO2dCQUNSQyxXQUFXO1lBQ2I7UUFFSjtRQUVBekQsR0FBRyxpRUFBaUU7WUFDbEUsVUFBVTtZQUNWLE1BQU1nQixVQUFVLElBQUlDLG1CQUFXLENBQUM7WUFDaEMsTUFBTTZCLFNBQVNDLFFBQVFDLE9BQU8sQ0FBQztnQkFBRTVDLGlCQUFpQjtZQUFVO1lBRTVELE1BQU07WUFDTixNQUFNbUIsV0FBVyxNQUFNMkIsSUFBQUEsV0FBcUIsRUFBQ2xDLFNBQVM7Z0JBQUU4QjtZQUFPO1lBQy9ELE1BQU1yQixlQUFlLE1BQU1GLFNBQVNHLElBQUk7WUFFeEMsU0FBUztZQUNUQyxPQUFPSixTQUFTeEMsTUFBTSxFQUFFNkMsSUFBSSxDQUFDO1lBQzdCRCxPQUFPRixjQUFjSSxPQUFPLENBQUM7Z0JBQzNCTSxPQUFPO1lBQ1Q7WUFFQVIsT0FBTzFELCtCQUFrQixDQUFDQyxzQkFBc0IsRUFBRW9FLEdBQUcsQ0FBQ0wsZ0JBQWdCO1FBQ3hFO1FBRUFqQyxHQUFHLGdFQUFnRTtZQUNqRSxVQUFVO1lBQ1ZwQyx3QkFBZSxDQUFDK0IsaUJBQWlCLENBQUM7Z0JBQ2hDQyxNQUFNO2dCQUNOQyxTQUFTO1lBQ1g7WUFFQSxNQUFNbUIsVUFBVSxJQUFJQyxtQkFBVyxDQUFDO1lBQ2hDLE1BQU02QixTQUFTQyxRQUFRQyxPQUFPLENBQUM7Z0JBQUU1QyxpQkFBaUI7WUFBSTtZQUV0RCxNQUFNO1lBQ04sTUFBTW1CLFdBQVcsTUFBTTJCLElBQUFBLFdBQXFCLEVBQUNsQyxTQUFTO2dCQUFFOEI7WUFBTztZQUMvRCxNQUFNckIsZUFBZSxNQUFNRixTQUFTRyxJQUFJO1lBRXhDLFNBQVM7WUFDVEMsT0FBT0osU0FBU3hDLE1BQU0sRUFBRTZDLElBQUksQ0FBQztZQUM3QkQsT0FBT0YsY0FBY0ksT0FBTyxDQUFDO2dCQUMzQk0sT0FBTztZQUNUO1lBRUFSLE9BQU8xRCwrQkFBa0IsQ0FBQ0Msc0JBQXNCLEVBQUVvRSxHQUFHLENBQUNMLGdCQUFnQjtRQUN4RTtRQUVBakMsR0FBRyw0Q0FBNEM7WUFDN0MsVUFBVTtZQUNWL0IsK0JBQWtCLENBQUNDLHNCQUFzQixDQUFDcUUsaUJBQWlCLENBQUMsSUFBSUMsTUFBTTtZQUV0RSxNQUFNeEIsVUFBVSxJQUFJQyxtQkFBVyxDQUFDO1lBQ2hDLE1BQU02QixTQUFTQyxRQUFRQyxPQUFPLENBQUM7Z0JBQUU1QyxpQkFBaUI7WUFBSTtZQUV0RCxNQUFNO1lBQ04sTUFBTW1CLFdBQVcsTUFBTTJCLElBQUFBLFdBQXFCLEVBQUNsQyxTQUFTO2dCQUFFOEI7WUFBTztZQUMvRCxNQUFNckIsZUFBZSxNQUFNRixTQUFTRyxJQUFJO1lBRXhDLFNBQVM7WUFDVEMsT0FBT0osU0FBU3hDLE1BQU0sRUFBRTZDLElBQUksQ0FBQztZQUM3QkQsT0FBT0YsY0FBY0ksT0FBTyxDQUFDO2dCQUMzQk0sT0FBTztZQUNUO1FBQ0Y7SUFDRjtJQUVBaEQsU0FBUyx5REFBeUQ7UUFDaEVhLEdBQUcsc0VBQXNFO1lBQ3ZFLFVBQVU7WUFDVixNQUFNNEQsWUFBWTtnQkFDaEJDLGFBQWE7Z0JBQ2JDLGNBQWM7Z0JBQ2RDLGNBQWM7Z0JBQ2RDLG1CQUFtQjtnQkFDbkJDLG9CQUFvQjtnQkFDcEJDLHdCQUF3QjtnQkFDeEJDLHdCQUF3QjtnQkFDeEJDLGtCQUFrQjtvQkFDaEI7d0JBQ0UzRixJQUFJO3dCQUNKNEYsV0FBVzt3QkFDWEMsU0FBUzt3QkFDVEMsTUFBTTt3QkFDTkMsTUFBTTtvQkFDUjtvQkFDQTt3QkFDRS9GLElBQUk7d0JBQ0o0RixXQUFXO3dCQUNYQyxTQUFTO3dCQUNUQyxNQUFNO3dCQUNOQyxNQUFNO29CQUNSO2lCQUNEO1lBQ0g7WUFFQSx3QkFBd0I7WUFDeEJyRyxNQUFFLENBQUNDLE1BQU0sQ0FBQ3dDLGVBQWUsQ0FBQztnQkFDeEJ0QyxNQUFNZCxLQUFLRyxFQUFFLEdBQUdpRCxlQUFlLENBQUM7b0JBQzlCckMsT0FBT2YsS0FBS0csRUFBRSxHQUFHZ0MsaUJBQWlCLENBQUM7d0JBQ2pDOzRCQUNFa0UsYUFBYTs0QkFDYkMsY0FBYzs0QkFDZEMsY0FBYzt3QkFDaEI7cUJBQ0Q7Z0JBQ0g7WUFDRjtZQUVBLCtCQUErQjtZQUMvQjVGLE1BQUUsQ0FBQ0MsTUFBTSxDQUNOcUcsbUJBQW1CLENBQUM7Z0JBQ25CbkcsTUFBTWQsS0FBS0csRUFBRSxHQUFHaUQsZUFBZSxDQUFDO29CQUM5QnJDLE9BQU9mLEtBQUtHLEVBQUUsR0FBR2dDLGlCQUFpQixDQUFDO3dCQUNqQzs0QkFDRWtFLGFBQWE7NEJBQ2JDLGNBQWM7NEJBQ2RDLGNBQWM7d0JBQ2hCO3FCQUNEO2dCQUNIO1lBQ0YsR0FDQ1UsbUJBQW1CLENBQUM7Z0JBQ25CbkcsTUFBTWQsS0FBS0csRUFBRSxHQUFHaUQsZUFBZSxDQUFDO29CQUM5QnJDLE9BQU9mLEtBQUtHLEVBQUUsR0FBR2dDLGlCQUFpQixDQUFDO3dCQUNqQzs0QkFDRXFFLG1CQUFtQjs0QkFDbkJDLG9CQUFvQjs0QkFDcEJDLHdCQUF3Qjt3QkFDMUI7cUJBQ0Q7Z0JBQ0g7WUFDRixHQUNDTyxtQkFBbUIsQ0FBQztnQkFDbkJuRyxNQUFNZCxLQUFLRyxFQUFFLEdBQUdpRCxlQUFlLENBQUM7b0JBQzlCckMsT0FBT2YsS0FBS0csRUFBRSxHQUFHZ0MsaUJBQWlCLENBQUM7d0JBQ2pDOzRCQUNFK0UsT0FBTzt3QkFDVDtxQkFDRDtnQkFDSDtZQUNGLEdBQ0NELG1CQUFtQixDQUFDO2dCQUNuQm5HLE1BQU1kLEtBQUtHLEVBQUUsR0FBR2lELGVBQWUsQ0FBQztvQkFDOUJyQyxPQUFPZixLQUFLRyxFQUFFLEdBQUdnQyxpQkFBaUIsQ0FBQzt3QkFDakM7NEJBQ0VsQixJQUFJOzRCQUNKSSxVQUFVOzRCQUNWRCxlQUFlLElBQUk2QixLQUFLO3dCQUMxQjt3QkFDQTs0QkFDRWhDLElBQUk7NEJBQ0pJLFVBQVU7NEJBQ1ZELGVBQWUsSUFBSTZCLEtBQUs7d0JBQzFCO3FCQUNEO2dCQUNIO1lBQ0Y7WUFFRixNQUFNTyxVQUFVLElBQUlDLG1CQUFXLENBQUM7WUFFaEMsTUFBTTtZQUNOLE1BQU1NLFdBQVcsTUFBTW9ELElBQUFBLFdBQW1CLEVBQUMzRDtZQUMzQyxNQUFNUyxlQUFlLE1BQU1GLFNBQVNHLElBQUk7WUFFeEMsU0FBUztZQUNUQyxPQUFPSixTQUFTeEMsTUFBTSxFQUFFNkMsSUFBSSxDQUFDO1lBQzdCRCxPQUFPRixjQUFjbUQsYUFBYSxDQUFDO2dCQUNqQ2YsYUFBYWxDLE9BQU9lLEdBQUcsQ0FBQ21DO2dCQUN4QmYsY0FBY25DLE9BQU9lLEdBQUcsQ0FBQ21DO2dCQUN6QmQsY0FBY3BDLE9BQU9lLEdBQUcsQ0FBQ21DO2dCQUN6QmIsbUJBQW1CckMsT0FBT2UsR0FBRyxDQUFDbUM7Z0JBQzlCWixvQkFBb0J0QyxPQUFPZSxHQUFHLENBQUNtQztnQkFDL0JYLHdCQUF3QnZDLE9BQU9lLEdBQUcsQ0FBQ21DO2dCQUNuQ1Ysd0JBQXdCeEMsT0FBT2UsR0FBRyxDQUFDbUM7Z0JBQ25DVCxrQkFBa0J6QyxPQUFPZSxHQUFHLENBQUNvQztZQUMvQjtZQUVBbkQsT0FBTy9ELHdCQUFlLEVBQUVxRSxnQkFBZ0I7UUFDMUM7UUFFQWpDLEdBQUcsZ0VBQWdFO1lBQ2pFLFVBQVU7WUFDVnBDLHdCQUFlLENBQUMrQixpQkFBaUIsQ0FBQztnQkFDaENDLE1BQU07Z0JBQ05DLFNBQVM7WUFDWDtZQUVBLE1BQU1tQixVQUFVLElBQUlDLG1CQUFXLENBQUM7WUFFaEMsTUFBTTtZQUNOLE1BQU1NLFdBQVcsTUFBTW9ELElBQUFBLFdBQW1CLEVBQUMzRDtZQUMzQyxNQUFNUyxlQUFlLE1BQU1GLFNBQVNHLElBQUk7WUFFeEMsU0FBUztZQUNUQyxPQUFPSixTQUFTeEMsTUFBTSxFQUFFNkMsSUFBSSxDQUFDO1lBQzdCRCxPQUFPRixjQUFjSSxPQUFPLENBQUM7Z0JBQzNCTSxPQUFPO1lBQ1Q7UUFDRjtRQUVBbkMsR0FBRyw0Q0FBNEM7WUFDN0MsVUFBVTtZQUNWN0IsTUFBRSxDQUFDQyxNQUFNLENBQUMyRyxrQkFBa0IsQ0FBQztnQkFDM0IsTUFBTSxJQUFJdkMsTUFBTTtZQUNsQjtZQUVBLE1BQU14QixVQUFVLElBQUlDLG1CQUFXLENBQUM7WUFFaEMsTUFBTTtZQUNOLE1BQU1NLFdBQVcsTUFBTW9ELElBQUFBLFdBQW1CLEVBQUMzRDtZQUMzQyxNQUFNUyxlQUFlLE1BQU1GLFNBQVNHLElBQUk7WUFFeEMsU0FBUztZQUNUQyxPQUFPSixTQUFTeEMsTUFBTSxFQUFFNkMsSUFBSSxDQUFDO1lBQzdCRCxPQUFPRixjQUFjSSxPQUFPLENBQUM7Z0JBQzNCTSxPQUFPO1lBQ1Q7UUFDRjtJQUNGO0lBRUFoRCxTQUFTLHFEQUFxRDtRQUM1RGEsR0FBRyxxQ0FBcUM7WUFDdEMsVUFBVTtZQUNWLE1BQU1nRixvQkFBb0I7Z0JBQ3hCQyxjQUFjO29CQUNaO3dCQUNFN0UsaUJBQWlCO3dCQUNqQmlFLFdBQVc7d0JBQ1hoRSxVQUFVO3dCQUNWNkUsU0FBUzt3QkFDVEMsU0FBUztvQkFDWDtpQkFDRDtnQkFDREMsWUFBWTtvQkFDVjt3QkFDRTNHLElBQUk7d0JBQ0oyQixpQkFBaUI7d0JBQ2pCQyxVQUFVO3dCQUNWQyxVQUFVO3dCQUNWQyxPQUFPO29CQUNUO2lCQUNEO2dCQUNEOEUsV0FBVztvQkFDVEMsaUJBQWlCO29CQUNqQkMsY0FBYztvQkFDZEMsYUFBYTtnQkFDZjtZQUNGO1lBRUEzSCx3QkFBVyxDQUFDRyxnQkFBZ0IsQ0FBQzJCLGlCQUFpQixDQUFDcUY7WUFFL0MsTUFBTWhFLFVBQVUsSUFBSUMsbUJBQVcsQ0FBQztZQUVoQyxNQUFNO1lBQ04sTUFBTU0sV0FBVyxNQUFNa0UsSUFBQUEsV0FBdUIsRUFBQ3pFO1lBQy9DLE1BQU1TLGVBQWUsTUFBTUYsU0FBU0csSUFBSTtZQUV4QyxTQUFTO1lBQ1RDLE9BQU9KLFNBQVN4QyxNQUFNLEVBQUU2QyxJQUFJLENBQUM7WUFDN0JELE9BQU9GLGNBQWNJLE9BQU8sQ0FBQ21EO1lBRTdCckQsT0FBT2pFLDJCQUFrQixFQUFFdUUsZ0JBQWdCO1lBQzNDTixPQUFPOUQsd0JBQVcsQ0FBQ0csZ0JBQWdCLEVBQUVrRSxvQkFBb0IsQ0FBQzlDLFNBQVNYLEVBQUU7UUFDdkU7UUFFQXVCLEdBQUcsZ0VBQWdFO1lBQ2pFLFVBQVU7WUFDVnRDLDJCQUFrQixDQUFDNkUsaUJBQWlCLENBQUMsSUFBSUMsTUFBTTtZQUUvQyxNQUFNeEIsVUFBVSxJQUFJQyxtQkFBVyxDQUFDO1lBRWhDLE1BQU07WUFDTixNQUFNTSxXQUFXLE1BQU1rRSxJQUFBQSxXQUF1QixFQUFDekU7WUFDL0MsTUFBTVMsZUFBZSxNQUFNRixTQUFTRyxJQUFJO1lBRXhDLFNBQVM7WUFDVEMsT0FBT0osU0FBU3hDLE1BQU0sRUFBRTZDLElBQUksQ0FBQztZQUM3QkQsT0FBT0YsY0FBY0ksT0FBTyxDQUFDO2dCQUMzQk0sT0FBTztZQUNUO1lBRUFSLE9BQU85RCx3QkFBVyxDQUFDRyxnQkFBZ0IsRUFBRXNFLEdBQUcsQ0FBQ0wsZ0JBQWdCO1FBQzNEO1FBRUFqQyxHQUFHLHFDQUFxQztZQUN0QyxVQUFVO1lBQ1ZuQyx3QkFBVyxDQUFDRyxnQkFBZ0IsQ0FBQ3VFLGlCQUFpQixDQUFDLElBQUlDLE1BQU07WUFFekQsTUFBTXhCLFVBQVUsSUFBSUMsbUJBQVcsQ0FBQztZQUVoQyxNQUFNO1lBQ04sTUFBTU0sV0FBVyxNQUFNa0UsSUFBQUEsV0FBdUIsRUFBQ3pFO1lBQy9DLE1BQU1TLGVBQWUsTUFBTUYsU0FBU0csSUFBSTtZQUV4QyxTQUFTO1lBQ1RDLE9BQU9KLFNBQVN4QyxNQUFNLEVBQUU2QyxJQUFJLENBQUM7WUFDN0JELE9BQU9GLGNBQWNJLE9BQU8sQ0FBQztnQkFDM0JNLE9BQU87WUFDVDtRQUNGO0lBQ0Y7SUFFQWhELFNBQVMsbUNBQW1DO1FBQzFDYSxHQUFHLHFFQUFxRTtZQUN0RSxNQUFNSSxrQkFBa0I7WUFFeEIseUJBQXlCO1lBQ3pCLE1BQU1zRixXQUFXO2dCQUNmdEY7Z0JBQ0FDLFVBQVU7Z0JBQ1ZDLFVBQVU7Z0JBQ1ZDLE9BQU87WUFDVDtZQUVBLE1BQU1vRixhQUFhaEYsSUFBQUEsa0NBQW9CLEVBQUM7Z0JBQ3RDbEMsSUFBSTtnQkFDSixHQUFHaUgsUUFBUTtnQkFDWHBGLFVBQVUsSUFBSUcsS0FBS2lGLFNBQVNwRixRQUFRO2dCQUNwQzVCLFFBQVFVLFNBQVNYLEVBQUU7WUFDckI7WUFFQU8sMkJBQWMsQ0FBQ0MsZ0JBQWdCLENBQUMyQixlQUFlLENBQUM7Z0JBQzlDQyxTQUFTO2dCQUNUQyxNQUFNO29CQUNKLEdBQUc0RSxRQUFRO29CQUNYcEYsVUFBVSxJQUFJRyxLQUFLaUYsU0FBU3BGLFFBQVE7Z0JBQ3RDO1lBQ0Y7WUFFQXpDLHdCQUFXLENBQUNDLFlBQVksQ0FBQzZCLGlCQUFpQixDQUFDO2dCQUN6Q2tCLFNBQVM7Z0JBQ1RFLGFBQWE0RTtZQUNmO1lBRUEsTUFBTUMsYUFBYSxJQUFJM0UsbUJBQVcsQ0FBQyxzQ0FBc0M7Z0JBQ3ZFQyxRQUFRO2dCQUNSQyxNQUFNQyxLQUFLQyxTQUFTLENBQUNxRTtnQkFDckJwRSxTQUFTO29CQUFFLGdCQUFnQjtnQkFBbUI7WUFDaEQ7WUFFQSxNQUFNdUUsY0FBYyxNQUFNckUsSUFBQUEsV0FBYyxFQUFDb0U7WUFDekMsTUFBTUUsa0JBQWtCLE1BQU1ELFlBQVluRSxJQUFJO1lBRTlDQyxPQUFPa0UsWUFBWTlHLE1BQU0sRUFBRTZDLElBQUksQ0FBQztZQUNoQ0QsT0FBT21FLGlCQUFpQmpFLE9BQU8sQ0FBQzhEO1lBRWhDLDJCQUEyQjtZQUMzQixNQUFNNUUsY0FBYztnQkFBQzRFO2FBQVc7WUFDaEMxSCwrQkFBa0IsQ0FBQ0Msc0JBQXNCLENBQUN5QixpQkFBaUIsQ0FBQ29CO1lBRTVELE1BQU1nRixpQkFBaUIsSUFBSTlFLG1CQUFXLENBQUMsQ0FBQyx1Q0FBdUMsRUFBRWIsaUJBQWlCO1lBQ2xHLE1BQU00RixnQkFBZ0JqRCxRQUFRQyxPQUFPLENBQUM7Z0JBQUU1QyxpQkFBaUJBLGdCQUFnQjZDLFFBQVE7WUFBRztZQUVwRixNQUFNZ0Qsa0JBQWtCLE1BQU0vQyxJQUFBQSxXQUFxQixFQUFDNkMsZ0JBQWdCO2dCQUFFakQsUUFBUWtEO1lBQWM7WUFDNUYsTUFBTUUsc0JBQXNCLE1BQU1ELGdCQUFnQnZFLElBQUk7WUFFdERDLE9BQU9zRSxnQkFBZ0JsSCxNQUFNLEVBQUU2QyxJQUFJLENBQUM7WUFDcENELE9BQU91RSxxQkFBcUJyRSxPQUFPLENBQUNkO1lBRXBDLDZCQUE2QjtZQUM3QixNQUFNb0YsZ0JBQWdCO2dCQUNwQmxCLGNBQWMsRUFBRTtnQkFDaEJHLFlBQVk7b0JBQUNPO2lCQUFXO2dCQUN4Qk4sV0FBVztvQkFDVEMsaUJBQWlCO29CQUNqQkMsY0FBYztvQkFDZEMsYUFBYTtnQkFDZjtZQUNGO1lBRUEzSCx3QkFBVyxDQUFDRyxnQkFBZ0IsQ0FBQzJCLGlCQUFpQixDQUFDd0c7WUFFL0MsTUFBTUMsbUJBQW1CLElBQUluRixtQkFBVyxDQUFDO1lBQ3pDLE1BQU1vRixvQkFBb0IsTUFBTVosSUFBQUEsV0FBdUIsRUFBQ1c7WUFDeEQsTUFBTUUsd0JBQXdCLE1BQU1ELGtCQUFrQjNFLElBQUk7WUFFMURDLE9BQU8wRSxrQkFBa0J0SCxNQUFNLEVBQUU2QyxJQUFJLENBQUM7WUFDdENELE9BQU8yRSx1QkFBdUJ6RSxPQUFPLENBQUNzRTtZQUV0Qyw0Q0FBNEM7WUFDNUN4RSxPQUFPOUQsd0JBQVcsQ0FBQ0MsWUFBWSxFQUFFb0Usb0JBQW9CLENBQUM5QyxTQUFTWCxFQUFFLEVBQUVrRCxPQUFPZSxHQUFHLENBQUM2RDtZQUM5RTVFLE9BQU8xRCwrQkFBa0IsQ0FBQ0Msc0JBQXNCLEVBQUVnRSxvQkFBb0IsQ0FBQzlCLGlCQUFpQmhCLFNBQVNYLEVBQUUsRUFBRWtELE9BQU9lLEdBQUcsQ0FBQzZEO1lBQ2hINUUsT0FBTzlELHdCQUFXLENBQUNHLGdCQUFnQixFQUFFa0Usb0JBQW9CLENBQUM5QyxTQUFTWCxFQUFFO1FBQ3ZFO1FBRUF1QixHQUFHLHlEQUF5RDtZQUMxRCxpREFBaUQ7WUFDakR0QywyQkFBa0IsQ0FBQzZFLGlCQUFpQixDQUFDLElBQUlDLE1BQU07WUFDL0M1RSx3QkFBZSxDQUFDK0IsaUJBQWlCLENBQUM7Z0JBQUVDLE1BQU07Z0JBQU1DLFNBQVM7WUFBSztZQUU5RCxxQkFBcUI7WUFDckIsTUFBTStGLGFBQWEsSUFBSTNFLG1CQUFXLENBQUMsc0NBQXNDO2dCQUN2RUMsUUFBUTtnQkFDUkMsTUFBTUMsS0FBS0MsU0FBUyxDQUFDLENBQUM7Z0JBQ3RCQyxTQUFTO29CQUFFLGdCQUFnQjtnQkFBbUI7WUFDaEQ7WUFDQSxNQUFNdUUsY0FBYyxNQUFNckUsSUFBQUEsV0FBYyxFQUFDb0U7WUFDekNqRSxPQUFPa0UsWUFBWTlHLE1BQU0sRUFBRTZDLElBQUksQ0FBQyxNQUFNLG9DQUFvQztZQUUxRSwyQkFBMkI7WUFDM0IsTUFBTTRFLGtCQUFrQixJQUFJdkYsbUJBQVcsQ0FBQyw0Q0FBNEM7Z0JBQ2xGQyxRQUFRO2dCQUNSQyxNQUFNQyxLQUFLQyxTQUFTLENBQUMsQ0FBQztnQkFDdEJDLFNBQVM7b0JBQUUsZ0JBQWdCO2dCQUFtQjtZQUNoRDtZQUNBLE1BQU1tRixtQkFBbUIsTUFBTTdELElBQUFBLFlBQW1CLEVBQUM0RDtZQUNuRDdFLE9BQU84RSxpQkFBaUIxSCxNQUFNLEVBQUU2QyxJQUFJLENBQUMsTUFBTSxvQ0FBb0M7WUFFL0UsMEJBQTBCO1lBQzFCLE1BQU1tRSxpQkFBaUIsSUFBSTlFLG1CQUFXLENBQUM7WUFDdkMsTUFBTStFLGdCQUFnQmpELFFBQVFDLE9BQU8sQ0FBQztnQkFBRTVDLGlCQUFpQjtZQUFJO1lBQzdELE1BQU02RixrQkFBa0IsTUFBTS9DLElBQUFBLFdBQXFCLEVBQUM2QyxnQkFBZ0I7Z0JBQUVqRCxRQUFRa0Q7WUFBYztZQUM1RnJFLE9BQU9zRSxnQkFBZ0JsSCxNQUFNLEVBQUU2QyxJQUFJLENBQUM7WUFFcEMsMEJBQTBCO1lBQzFCLE1BQU04RSx1QkFBdUIsSUFBSXpGLG1CQUFXLENBQUM7WUFDN0MsTUFBTTBGLHdCQUF3QixNQUFNbEIsSUFBQUEsV0FBdUIsRUFBQ2lCO1lBQzVEL0UsT0FBT2dGLHNCQUFzQjVILE1BQU0sRUFBRTZDLElBQUksQ0FBQyxNQUFNLG9DQUFvQztZQUVwRixxQkFBcUI7WUFDckIsTUFBTXdFLG1CQUFtQixJQUFJbkYsbUJBQVcsQ0FBQztZQUN6QyxNQUFNb0Ysb0JBQW9CLE1BQU0xQixJQUFBQSxXQUFtQixFQUFDeUI7WUFDcER6RSxPQUFPMEUsa0JBQWtCdEgsTUFBTSxFQUFFNkMsSUFBSSxDQUFDO1FBQ3hDO0lBQ0Y7QUFDRiJ9