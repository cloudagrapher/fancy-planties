e48ca457ff898a247e8d9023d94f86ca
/**
 * @jest-environment jsdom
 */ "use strict";
jest.mock('next/navigation', ()=>({
        redirect: mockRedirect
    }));
// Mock auth server functions
jest.mock('@/lib/auth/server', ()=>({
        requireAuthSession: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _renderhelpers = require("../../../test-utils/helpers/render-helpers.js");
const _AuthGuard = /*#__PURE__*/ _interop_require_default(require("../../../components/auth/AuthGuard"));
const _server = require("../../../lib/auth/server");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock Next.js navigation
const mockRedirect = jest.fn();
const mockRequireAuthSession = _server.requireAuthSession;
describe('AuthGuard', ()=>{
    const TestComponent = ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
            "data-testid": "protected-content",
            children: "Protected Content"
        });
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    describe('Authentication Success', ()=>{
        beforeEach(()=>{
            mockRequireAuthSession.mockResolvedValue({
                user: {
                    id: 1,
                    email: 'test@example.com'
                },
                session: {
                    id: 'session-123'
                }
            });
        });
        it('renders children when user is authenticated', async ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
            }));
            expect(_react1.screen.getByTestId('protected-content')).toBeInTheDocument();
            expect(mockRequireAuthSession).toHaveBeenCalled();
            expect(mockRedirect).not.toHaveBeenCalled();
        });
        it('passes through multiple children', async ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsxs)(_AuthGuard.default, {
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        "data-testid": "child-1",
                        children: "Child 1"
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        "data-testid": "child-2",
                        children: "Child 2"
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
                ]
            }));
            expect(_react1.screen.getByTestId('child-1')).toBeInTheDocument();
            expect(_react1.screen.getByTestId('child-2')).toBeInTheDocument();
            expect(_react1.screen.getByTestId('protected-content')).toBeInTheDocument();
        });
        it('preserves child component props and state', async ()=>{
            const ChildWithProps = ({ title, count })=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    "data-testid": "child-with-props",
                    children: [
                        title,
                        ": ",
                        count
                    ]
                });
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(ChildWithProps, {
                    title: "Test",
                    count: 42
                })
            }));
            expect(_react1.screen.getByTestId('child-with-props')).toHaveTextContent('Test: 42');
        });
    });
    describe('Authentication Failure', ()=>{
        beforeEach(()=>{
            mockRequireAuthSession.mockRejectedValue(new Error('Not authenticated'));
        });
        it('redirects to default sign-in page when authentication fails', async ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
            }));
            expect(mockRequireAuthSession).toHaveBeenCalled();
            expect(mockRedirect).toHaveBeenCalledWith('/auth/signin');
            expect(_react1.screen.queryByTestId('protected-content')).not.toBeInTheDocument();
        });
        it('redirects to custom redirect URL when provided', async ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                redirectTo: "/custom-login",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
            }));
            expect(mockRedirect).toHaveBeenCalledWith('/custom-login');
        });
        it('handles different authentication error types', async ()=>{
            const errorTypes = [
                new Error('Session expired'),
                new Error('Invalid token'),
                new Error('User not found'),
                'String error',
                null,
                undefined
            ];
            for (const error of errorTypes){
                jest.clearAllMocks();
                mockRequireAuthSession.mockRejectedValue(error);
                (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
                }));
                expect(mockRedirect).toHaveBeenCalledWith('/auth/signin');
            }
        });
    });
    describe('Route Protection Scenarios', ()=>{
        it('protects admin routes', async ()=>{
            mockRequireAuthSession.mockRejectedValue(new Error('Insufficient permissions'));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                redirectTo: "/auth/signin?redirect=/admin",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "admin-panel",
                    children: "Admin Panel"
                })
            }));
            expect(mockRedirect).toHaveBeenCalledWith('/auth/signin?redirect=/admin');
            expect(_react1.screen.queryByTestId('admin-panel')).not.toBeInTheDocument();
        });
        it('protects user dashboard', async ()=>{
            mockRequireAuthSession.mockRejectedValue(new Error('Not authenticated'));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "user-dashboard",
                    children: "User Dashboard"
                })
            }));
            expect(mockRedirect).toHaveBeenCalledWith('/auth/signin');
            expect(_react1.screen.queryByTestId('user-dashboard')).not.toBeInTheDocument();
        });
        it('protects API-dependent components', async ()=>{
            mockRequireAuthSession.mockRejectedValue(new Error('Token invalid'));
            const ApiComponent = ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "api-component",
                    children: "Component that requires API access"
                });
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(ApiComponent, {})
            }));
            expect(mockRedirect).toHaveBeenCalledWith('/auth/signin');
            expect(_react1.screen.queryByTestId('api-component')).not.toBeInTheDocument();
        });
    });
    describe('Session Validation', ()=>{
        it('validates session on each render', async ()=>{
            mockRequireAuthSession.mockResolvedValue({
                user: {
                    id: 1,
                    email: 'test@example.com'
                },
                session: {
                    id: 'session-123'
                }
            });
            const { rerender } = (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
            }));
            expect(mockRequireAuthSession).toHaveBeenCalledTimes(1);
            // Re-render should trigger validation again
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
            }));
            expect(mockRequireAuthSession).toHaveBeenCalledTimes(2);
        });
        it('handles session expiration during component lifecycle', async ()=>{
            // Initially authenticated
            mockRequireAuthSession.mockResolvedValue({
                user: {
                    id: 1,
                    email: 'test@example.com'
                },
                session: {
                    id: 'session-123'
                }
            });
            const { rerender } = (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
            }));
            expect(_react1.screen.getByTestId('protected-content')).toBeInTheDocument();
            // Session expires
            mockRequireAuthSession.mockRejectedValue(new Error('Session expired'));
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
            }));
            expect(mockRedirect).toHaveBeenCalledWith('/auth/signin');
        });
    });
    describe('Error Handling', ()=>{
        it('handles network errors gracefully', async ()=>{
            mockRequireAuthSession.mockRejectedValue(new Error('Network error'));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
            }));
            expect(mockRedirect).toHaveBeenCalledWith('/auth/signin');
        });
        it('handles server errors gracefully', async ()=>{
            mockRequireAuthSession.mockRejectedValue(new Error('Internal server error'));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
            }));
            expect(mockRedirect).toHaveBeenCalledWith('/auth/signin');
        });
        it('handles malformed responses gracefully', async ()=>{
            mockRequireAuthSession.mockRejectedValue(new Error('Invalid response format'));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
            }));
            expect(mockRedirect).toHaveBeenCalledWith('/auth/signin');
        });
    });
    describe('Integration with Authentication Flow', ()=>{
        it('works with sign-in redirect flow', async ()=>{
            mockRequireAuthSession.mockRejectedValue(new Error('Not authenticated'));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                redirectTo: "/auth/signin?redirect=/dashboard/plants",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "plants-page",
                    children: "Plants Page"
                })
            }));
            expect(mockRedirect).toHaveBeenCalledWith('/auth/signin?redirect=/dashboard/plants');
        });
        it('preserves query parameters in redirect', async ()=>{
            mockRequireAuthSession.mockRejectedValue(new Error('Not authenticated'));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                redirectTo: "/auth/signin?redirect=/dashboard/care&tab=overdue",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "care-page",
                    children: "Care Page"
                })
            }));
            expect(mockRedirect).toHaveBeenCalledWith('/auth/signin?redirect=/dashboard/care&tab=overdue');
        });
        it('handles successful authentication after redirect', async ()=>{
            // Simulate successful authentication after redirect
            mockRequireAuthSession.mockResolvedValue({
                user: {
                    id: 1,
                    email: 'test@example.com'
                },
                session: {
                    id: 'session-123'
                }
            });
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    "data-testid": "protected-page",
                    children: "Protected Page"
                })
            }));
            expect(_react1.screen.getByTestId('protected-page')).toBeInTheDocument();
            expect(mockRedirect).not.toHaveBeenCalled();
        });
    });
    describe('Performance Considerations', ()=>{
        it('does not cause unnecessary re-renders', async ()=>{
            mockRequireAuthSession.mockResolvedValue({
                user: {
                    id: 1,
                    email: 'test@example.com'
                },
                session: {
                    id: 'session-123'
                }
            });
            let renderCount = 0;
            const CountingComponent = ()=>{
                renderCount++;
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    "data-testid": "counting-component",
                    children: [
                        "Render count: ",
                        renderCount
                    ]
                });
            };
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(CountingComponent, {})
            }));
            expect(_react1.screen.getByTestId('counting-component')).toHaveTextContent('Render count: 1');
        });
        it('handles rapid authentication state changes', async ()=>{
            // Simulate rapid state changes
            mockRequireAuthSession.mockResolvedValueOnce({
                user: {
                    id: 1,
                    email: 'test@example.com'
                },
                session: {
                    id: 'session-123'
                }
            }).mockRejectedValueOnce(new Error('Session expired')).mockResolvedValueOnce({
                user: {
                    id: 1,
                    email: 'test@example.com'
                },
                session: {
                    id: 'session-456'
                }
            });
            const { rerender } = (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
            }));
            // First render - authenticated
            expect(_react1.screen.getByTestId('protected-content')).toBeInTheDocument();
            // Second render - session expired
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
            }));
            expect(mockRedirect).toHaveBeenCalledWith('/auth/signin');
            // Third render - re-authenticated
            jest.clearAllMocks();
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
            }));
            expect(_react1.screen.getByTestId('protected-content')).toBeInTheDocument();
        });
    });
    describe('Component Composition', ()=>{
        it('works with nested components', async ()=>{
            mockRequireAuthSession.mockResolvedValue({
                user: {
                    id: 1,
                    email: 'test@example.com'
                },
                session: {
                    id: 'session-123'
                }
            });
            const NestedComponent = ({ children })=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    "data-testid": "nested-wrapper",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("header", {
                            children: "Header"
                        }),
                        children,
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("footer", {
                            children: "Footer"
                        })
                    ]
                });
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(NestedComponent, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {})
                })
            }));
            expect(_react1.screen.getByTestId('nested-wrapper')).toBeInTheDocument();
            expect(_react1.screen.getByTestId('protected-content')).toBeInTheDocument();
            expect(_react1.screen.getByText('Header')).toBeInTheDocument();
            expect(_react1.screen.getByText('Footer')).toBeInTheDocument();
        });
        it('works with conditional rendering', async ()=>{
            mockRequireAuthSession.mockResolvedValue({
                user: {
                    id: 1,
                    email: 'test@example.com'
                },
                session: {
                    id: 'session-123'
                }
            });
            const ConditionalComponent = ({ showContent })=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    children: [
                        showContent && /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "always-visible",
                            children: "Always visible"
                        })
                    ]
                });
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(ConditionalComponent, {
                    showContent: true
                })
            }));
            expect(_react1.screen.getByTestId('protected-content')).toBeInTheDocument();
            expect(_react1.screen.getByTestId('always-visible')).toBeInTheDocument();
        });
        it('works with React fragments', async ()=>{
            mockRequireAuthSession.mockResolvedValue({
                user: {
                    id: 1,
                    email: 'test@example.com'
                },
                session: {
                    id: 'session-123'
                }
            });
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.default, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "fragment-child-1",
                            children: "Fragment Child 1"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {}),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            "data-testid": "fragment-child-2",
                            children: "Fragment Child 2"
                        })
                    ]
                })
            }));
            expect(_react1.screen.getByTestId('fragment-child-1')).toBeInTheDocument();
            expect(_react1.screen.getByTestId('protected-content')).toBeInTheDocument();
            expect(_react1.screen.getByTestId('fragment-child-2')).toBeInTheDocument();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdGVmYW5iZWtrZXIvcHJvamVjdHMvZmFuY3ktcGxhbnRpZXMvc3JjL19fdGVzdHNfXy9jb21wb25lbnRzL25hdmlnYXRpb24vQXV0aEd1YXJkLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAamVzdC1lbnZpcm9ubWVudCBqc2RvbVxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBzY3JlZW4gfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IHJlbmRlcldpdGhQcm92aWRlcnMgfSBmcm9tICdAL3Rlc3QtdXRpbHMvaGVscGVycy9yZW5kZXItaGVscGVycyc7XG5pbXBvcnQgQXV0aEd1YXJkIGZyb20gJ0AvY29tcG9uZW50cy9hdXRoL0F1dGhHdWFyZCc7XG5cbi8vIE1vY2sgTmV4dC5qcyBuYXZpZ2F0aW9uXG5jb25zdCBtb2NrUmVkaXJlY3QgPSBqZXN0LmZuKCk7XG5cbmplc3QubW9jaygnbmV4dC9uYXZpZ2F0aW9uJywgKCkgPT4gKHtcbiAgcmVkaXJlY3Q6IG1vY2tSZWRpcmVjdCxcbn0pKTtcblxuLy8gTW9jayBhdXRoIHNlcnZlciBmdW5jdGlvbnNcbmplc3QubW9jaygnQC9saWIvYXV0aC9zZXJ2ZXInLCAoKSA9PiAoe1xuICByZXF1aXJlQXV0aFNlc3Npb246IGplc3QuZm4oKSxcbn0pKTtcblxuLy8gSW1wb3J0IHRoZSBtb2NrZWQgZnVuY3Rpb25cbmltcG9ydCB7IHJlcXVpcmVBdXRoU2Vzc2lvbiB9IGZyb20gJ0AvbGliL2F1dGgvc2VydmVyJztcbmNvbnN0IG1vY2tSZXF1aXJlQXV0aFNlc3Npb24gPSByZXF1aXJlQXV0aFNlc3Npb247XG5cbmRlc2NyaWJlKCdBdXRoR3VhcmQnLCAoKSA9PiB7XG4gIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiA8ZGl2IGRhdGEtdGVzdGlkPVwicHJvdGVjdGVkLWNvbnRlbnRcIj5Qcm90ZWN0ZWQgQ29udGVudDwvZGl2PjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0F1dGhlbnRpY2F0aW9uIFN1Y2Nlc3MnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrUmVxdWlyZUF1dGhTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdXNlcjogeyBpZDogMSwgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9LFxuICAgICAgICBzZXNzaW9uOiB7IGlkOiAnc2Vzc2lvbi0xMjMnIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdyZW5kZXJzIGNoaWxkcmVuIHdoZW4gdXNlciBpcyBhdXRoZW50aWNhdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyhcbiAgICAgICAgPEF1dGhHdWFyZD5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0F1dGhHdWFyZD5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Byb3RlY3RlZC1jb250ZW50JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QobW9ja1JlcXVpcmVBdXRoU2Vzc2lvbikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tSZWRpcmVjdCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdwYXNzZXMgdGhyb3VnaCBtdWx0aXBsZSBjaGlsZHJlbicsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoXG4gICAgICAgIDxBdXRoR3VhcmQ+XG4gICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImNoaWxkLTFcIj5DaGlsZCAxPC9kaXY+XG4gICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImNoaWxkLTJcIj5DaGlsZCAyPC9kaXY+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9BdXRoR3VhcmQ+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdjaGlsZC0xJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdjaGlsZC0yJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdwcm90ZWN0ZWQtY29udGVudCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3ByZXNlcnZlcyBjaGlsZCBjb21wb25lbnQgcHJvcHMgYW5kIHN0YXRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgQ2hpbGRXaXRoUHJvcHMgPSAoeyB0aXRsZSwgY291bnQgfSkgPT4gKFxuICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiY2hpbGQtd2l0aC1wcm9wc1wiPlxuICAgICAgICAgIHt0aXRsZX06IHtjb3VudH1cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgICA8QXV0aEd1YXJkPlxuICAgICAgICAgIDxDaGlsZFdpdGhQcm9wcyB0aXRsZT1cIlRlc3RcIiBjb3VudD17NDJ9IC8+XG4gICAgICAgIDwvQXV0aEd1YXJkPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnY2hpbGQtd2l0aC1wcm9wcycpKS50b0hhdmVUZXh0Q29udGVudCgnVGVzdDogNDInKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0F1dGhlbnRpY2F0aW9uIEZhaWx1cmUnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrUmVxdWlyZUF1dGhTZXNzaW9uLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTm90IGF1dGhlbnRpY2F0ZWQnKSk7XG4gICAgfSk7XG5cbiAgICBpdCgncmVkaXJlY3RzIHRvIGRlZmF1bHQgc2lnbi1pbiBwYWdlIHdoZW4gYXV0aGVudGljYXRpb24gZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgICA8QXV0aEd1YXJkPlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvQXV0aEd1YXJkPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tSZXF1aXJlQXV0aFNlc3Npb24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrUmVkaXJlY3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXV0aC9zaWduaW4nKTtcbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRlc3RJZCgncHJvdGVjdGVkLWNvbnRlbnQnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgncmVkaXJlY3RzIHRvIGN1c3RvbSByZWRpcmVjdCBVUkwgd2hlbiBwcm92aWRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoXG4gICAgICAgIDxBdXRoR3VhcmQgcmVkaXJlY3RUbz1cIi9jdXN0b20tbG9naW5cIj5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0F1dGhHdWFyZD5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrUmVkaXJlY3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvY3VzdG9tLWxvZ2luJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnaGFuZGxlcyBkaWZmZXJlbnQgYXV0aGVudGljYXRpb24gZXJyb3IgdHlwZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvclR5cGVzID0gW1xuICAgICAgICBuZXcgRXJyb3IoJ1Nlc3Npb24gZXhwaXJlZCcpLFxuICAgICAgICBuZXcgRXJyb3IoJ0ludmFsaWQgdG9rZW4nKSxcbiAgICAgICAgbmV3IEVycm9yKCdVc2VyIG5vdCBmb3VuZCcpLFxuICAgICAgICAnU3RyaW5nIGVycm9yJyxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBlcnJvciBvZiBlcnJvclR5cGVzKSB7XG4gICAgICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgICAgICBtb2NrUmVxdWlyZUF1dGhTZXNzaW9uLm1vY2tSZWplY3RlZFZhbHVlKGVycm9yKTtcblxuICAgICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgICAgIDxBdXRoR3VhcmQ+XG4gICAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICAgIDwvQXV0aEd1YXJkPlxuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChtb2NrUmVkaXJlY3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXV0aC9zaWduaW4nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JvdXRlIFByb3RlY3Rpb24gU2NlbmFyaW9zJywgKCkgPT4ge1xuICAgIGl0KCdwcm90ZWN0cyBhZG1pbiByb3V0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmVxdWlyZUF1dGhTZXNzaW9uLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zJykpO1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgICA8QXV0aEd1YXJkIHJlZGlyZWN0VG89XCIvYXV0aC9zaWduaW4/cmVkaXJlY3Q9L2FkbWluXCI+XG4gICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImFkbWluLXBhbmVsXCI+QWRtaW4gUGFuZWw8L2Rpdj5cbiAgICAgICAgPC9BdXRoR3VhcmQ+XG4gICAgICApO1xuXG4gICAgICBleHBlY3QobW9ja1JlZGlyZWN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2F1dGgvc2lnbmluP3JlZGlyZWN0PS9hZG1pbicpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGVzdElkKCdhZG1pbi1wYW5lbCcpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdwcm90ZWN0cyB1c2VyIGRhc2hib2FyZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSZXF1aXJlQXV0aFNlc3Npb24ubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdOb3QgYXV0aGVudGljYXRlZCcpKTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyhcbiAgICAgICAgPEF1dGhHdWFyZD5cbiAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwidXNlci1kYXNoYm9hcmRcIj5Vc2VyIERhc2hib2FyZDwvZGl2PlxuICAgICAgICA8L0F1dGhHdWFyZD5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrUmVkaXJlY3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXV0aC9zaWduaW4nKTtcbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRlc3RJZCgndXNlci1kYXNoYm9hcmQnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgncHJvdGVjdHMgQVBJLWRlcGVuZGVudCBjb21wb25lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JlcXVpcmVBdXRoU2Vzc2lvbi5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1Rva2VuIGludmFsaWQnKSk7XG5cbiAgICAgIGNvbnN0IEFwaUNvbXBvbmVudCA9ICgpID0+IChcbiAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImFwaS1jb21wb25lbnRcIj5cbiAgICAgICAgICBDb21wb25lbnQgdGhhdCByZXF1aXJlcyBBUEkgYWNjZXNzXG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyhcbiAgICAgICAgPEF1dGhHdWFyZD5cbiAgICAgICAgICA8QXBpQ29tcG9uZW50IC8+XG4gICAgICAgIDwvQXV0aEd1YXJkPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tSZWRpcmVjdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hdXRoL3NpZ25pbicpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGVzdElkKCdhcGktY29tcG9uZW50JykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2Vzc2lvbiBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCd2YWxpZGF0ZXMgc2Vzc2lvbiBvbiBlYWNoIHJlbmRlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSZXF1aXJlQXV0aFNlc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICB1c2VyOiB7IGlkOiAxLCBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nIH0sXG4gICAgICAgIHNlc3Npb246IHsgaWQ6ICdzZXNzaW9uLTEyMycgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7IHJlcmVuZGVyIH0gPSByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgICA8QXV0aEd1YXJkPlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvQXV0aEd1YXJkPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tSZXF1aXJlQXV0aFNlc3Npb24pLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcblxuICAgICAgLy8gUmUtcmVuZGVyIHNob3VsZCB0cmlnZ2VyIHZhbGlkYXRpb24gYWdhaW5cbiAgICAgIHJlcmVuZGVyKFxuICAgICAgICA8QXV0aEd1YXJkPlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvQXV0aEd1YXJkPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tSZXF1aXJlQXV0aFNlc3Npb24pLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcbiAgICB9KTtcblxuICAgIGl0KCdoYW5kbGVzIHNlc3Npb24gZXhwaXJhdGlvbiBkdXJpbmcgY29tcG9uZW50IGxpZmVjeWNsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEluaXRpYWxseSBhdXRoZW50aWNhdGVkXG4gICAgICBtb2NrUmVxdWlyZUF1dGhTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdXNlcjogeyBpZDogMSwgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9LFxuICAgICAgICBzZXNzaW9uOiB7IGlkOiAnc2Vzc2lvbi0xMjMnIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyByZXJlbmRlciB9ID0gcmVuZGVyV2l0aFByb3ZpZGVycyhcbiAgICAgICAgPEF1dGhHdWFyZD5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0F1dGhHdWFyZD5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Byb3RlY3RlZC1jb250ZW50JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAgIC8vIFNlc3Npb24gZXhwaXJlc1xuICAgICAgbW9ja1JlcXVpcmVBdXRoU2Vzc2lvbi5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1Nlc3Npb24gZXhwaXJlZCcpKTtcblxuICAgICAgcmVyZW5kZXIoXG4gICAgICAgIDxBdXRoR3VhcmQ+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9BdXRoR3VhcmQ+XG4gICAgICApO1xuXG4gICAgICBleHBlY3QobW9ja1JlZGlyZWN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2F1dGgvc2lnbmluJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnaGFuZGxlcyBuZXR3b3JrIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JlcXVpcmVBdXRoU2Vzc2lvbi5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKSk7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoXG4gICAgICAgIDxBdXRoR3VhcmQ+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9BdXRoR3VhcmQ+XG4gICAgICApO1xuXG4gICAgICBleHBlY3QobW9ja1JlZGlyZWN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2F1dGgvc2lnbmluJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnaGFuZGxlcyBzZXJ2ZXIgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmVxdWlyZUF1dGhTZXNzaW9uLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignSW50ZXJuYWwgc2VydmVyIGVycm9yJykpO1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgICA8QXV0aEd1YXJkPlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvQXV0aEd1YXJkPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tSZWRpcmVjdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hdXRoL3NpZ25pbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2hhbmRsZXMgbWFsZm9ybWVkIHJlc3BvbnNlcyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JlcXVpcmVBdXRoU2Vzc2lvbi5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0ludmFsaWQgcmVzcG9uc2UgZm9ybWF0JykpO1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKFxuICAgICAgICA8QXV0aEd1YXJkPlxuICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgIDwvQXV0aEd1YXJkPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tSZWRpcmVjdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hdXRoL3NpZ25pbicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW50ZWdyYXRpb24gd2l0aCBBdXRoZW50aWNhdGlvbiBGbG93JywgKCkgPT4ge1xuICAgIGl0KCd3b3JrcyB3aXRoIHNpZ24taW4gcmVkaXJlY3QgZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSZXF1aXJlQXV0aFNlc3Npb24ubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdOb3QgYXV0aGVudGljYXRlZCcpKTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyhcbiAgICAgICAgPEF1dGhHdWFyZCByZWRpcmVjdFRvPVwiL2F1dGgvc2lnbmluP3JlZGlyZWN0PS9kYXNoYm9hcmQvcGxhbnRzXCI+XG4gICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cInBsYW50cy1wYWdlXCI+UGxhbnRzIFBhZ2U8L2Rpdj5cbiAgICAgICAgPC9BdXRoR3VhcmQ+XG4gICAgICApO1xuXG4gICAgICBleHBlY3QobW9ja1JlZGlyZWN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2F1dGgvc2lnbmluP3JlZGlyZWN0PS9kYXNoYm9hcmQvcGxhbnRzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgncHJlc2VydmVzIHF1ZXJ5IHBhcmFtZXRlcnMgaW4gcmVkaXJlY3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmVxdWlyZUF1dGhTZXNzaW9uLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTm90IGF1dGhlbnRpY2F0ZWQnKSk7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoXG4gICAgICAgIDxBdXRoR3VhcmQgcmVkaXJlY3RUbz1cIi9hdXRoL3NpZ25pbj9yZWRpcmVjdD0vZGFzaGJvYXJkL2NhcmUmdGFiPW92ZXJkdWVcIj5cbiAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiY2FyZS1wYWdlXCI+Q2FyZSBQYWdlPC9kaXY+XG4gICAgICAgIDwvQXV0aEd1YXJkPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tSZWRpcmVjdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hdXRoL3NpZ25pbj9yZWRpcmVjdD0vZGFzaGJvYXJkL2NhcmUmdGFiPW92ZXJkdWUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdoYW5kbGVzIHN1Y2Nlc3NmdWwgYXV0aGVudGljYXRpb24gYWZ0ZXIgcmVkaXJlY3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBTaW11bGF0ZSBzdWNjZXNzZnVsIGF1dGhlbnRpY2F0aW9uIGFmdGVyIHJlZGlyZWN0XG4gICAgICBtb2NrUmVxdWlyZUF1dGhTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdXNlcjogeyBpZDogMSwgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9LFxuICAgICAgICBzZXNzaW9uOiB7IGlkOiAnc2Vzc2lvbi0xMjMnIH0sXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyhcbiAgICAgICAgPEF1dGhHdWFyZD5cbiAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwicHJvdGVjdGVkLXBhZ2VcIj5Qcm90ZWN0ZWQgUGFnZTwvZGl2PlxuICAgICAgICA8L0F1dGhHdWFyZD5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Byb3RlY3RlZC1wYWdlJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QobW9ja1JlZGlyZWN0KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UgQ29uc2lkZXJhdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ2RvZXMgbm90IGNhdXNlIHVubmVjZXNzYXJ5IHJlLXJlbmRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmVxdWlyZUF1dGhTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdXNlcjogeyBpZDogMSwgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9LFxuICAgICAgICBzZXNzaW9uOiB7IGlkOiAnc2Vzc2lvbi0xMjMnIH0sXG4gICAgICB9KTtcblxuICAgICAgbGV0IHJlbmRlckNvdW50ID0gMDtcbiAgICAgIGNvbnN0IENvdW50aW5nQ29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICByZW5kZXJDb3VudCsrO1xuICAgICAgICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD1cImNvdW50aW5nLWNvbXBvbmVudFwiPlJlbmRlciBjb3VudDoge3JlbmRlckNvdW50fTwvZGl2PjtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoXG4gICAgICAgIDxBdXRoR3VhcmQ+XG4gICAgICAgICAgPENvdW50aW5nQ29tcG9uZW50IC8+XG4gICAgICAgIDwvQXV0aEd1YXJkPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnY291bnRpbmctY29tcG9uZW50JykpLnRvSGF2ZVRleHRDb250ZW50KCdSZW5kZXIgY291bnQ6IDEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdoYW5kbGVzIHJhcGlkIGF1dGhlbnRpY2F0aW9uIHN0YXRlIGNoYW5nZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBTaW11bGF0ZSByYXBpZCBzdGF0ZSBjaGFuZ2VzXG4gICAgICBtb2NrUmVxdWlyZUF1dGhTZXNzaW9uXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIHVzZXI6IHsgaWQ6IDEsIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScgfSxcbiAgICAgICAgICBzZXNzaW9uOiB7IGlkOiAnc2Vzc2lvbi0xMjMnIH0sXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdTZXNzaW9uIGV4cGlyZWQnKSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgdXNlcjogeyBpZDogMSwgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9LFxuICAgICAgICAgIHNlc3Npb246IHsgaWQ6ICdzZXNzaW9uLTQ1NicgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVyZW5kZXIgfSA9IHJlbmRlcldpdGhQcm92aWRlcnMoXG4gICAgICAgIDxBdXRoR3VhcmQ+XG4gICAgICAgICAgPFRlc3RDb21wb25lbnQgLz5cbiAgICAgICAgPC9BdXRoR3VhcmQ+XG4gICAgICApO1xuXG4gICAgICAvLyBGaXJzdCByZW5kZXIgLSBhdXRoZW50aWNhdGVkXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdwcm90ZWN0ZWQtY29udGVudCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgICAvLyBTZWNvbmQgcmVuZGVyIC0gc2Vzc2lvbiBleHBpcmVkXG4gICAgICByZXJlbmRlcihcbiAgICAgICAgPEF1dGhHdWFyZD5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0F1dGhHdWFyZD5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrUmVkaXJlY3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXV0aC9zaWduaW4nKTtcblxuICAgICAgLy8gVGhpcmQgcmVuZGVyIC0gcmUtYXV0aGVudGljYXRlZFxuICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgICByZXJlbmRlcihcbiAgICAgICAgPEF1dGhHdWFyZD5cbiAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICA8L0F1dGhHdWFyZD5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Byb3RlY3RlZC1jb250ZW50JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb21wb25lbnQgQ29tcG9zaXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3dvcmtzIHdpdGggbmVzdGVkIGNvbXBvbmVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmVxdWlyZUF1dGhTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdXNlcjogeyBpZDogMSwgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9LFxuICAgICAgICBzZXNzaW9uOiB7IGlkOiAnc2Vzc2lvbi0xMjMnIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgTmVzdGVkQ29tcG9uZW50ID0gKHsgY2hpbGRyZW4gfSkgPT4gKFxuICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwibmVzdGVkLXdyYXBwZXJcIj5cbiAgICAgICAgICA8aGVhZGVyPkhlYWRlcjwvaGVhZGVyPlxuICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICA8Zm9vdGVyPkZvb3RlcjwvZm9vdGVyPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoXG4gICAgICAgIDxBdXRoR3VhcmQ+XG4gICAgICAgICAgPE5lc3RlZENvbXBvbmVudD5cbiAgICAgICAgICAgIDxUZXN0Q29tcG9uZW50IC8+XG4gICAgICAgICAgPC9OZXN0ZWRDb21wb25lbnQ+XG4gICAgICAgIDwvQXV0aEd1YXJkPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbmVzdGVkLXdyYXBwZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Byb3RlY3RlZC1jb250ZW50JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSGVhZGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRm9vdGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnd29ya3Mgd2l0aCBjb25kaXRpb25hbCByZW5kZXJpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmVxdWlyZUF1dGhTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdXNlcjogeyBpZDogMSwgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9LFxuICAgICAgICBzZXNzaW9uOiB7IGlkOiAnc2Vzc2lvbi0xMjMnIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgQ29uZGl0aW9uYWxDb21wb25lbnQgPSAoeyBzaG93Q29udGVudCB9KSA9PiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAge3Nob3dDb250ZW50ICYmIDxUZXN0Q29tcG9uZW50IC8+fVxuICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJhbHdheXMtdmlzaWJsZVwiPkFsd2F5cyB2aXNpYmxlPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyhcbiAgICAgICAgPEF1dGhHdWFyZD5cbiAgICAgICAgICA8Q29uZGl0aW9uYWxDb21wb25lbnQgc2hvd0NvbnRlbnQ9e3RydWV9IC8+XG4gICAgICAgIDwvQXV0aEd1YXJkPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgncHJvdGVjdGVkLWNvbnRlbnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2Fsd2F5cy12aXNpYmxlJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnd29ya3Mgd2l0aCBSZWFjdCBmcmFnbWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmVxdWlyZUF1dGhTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdXNlcjogeyBpZDogMSwgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9LFxuICAgICAgICBzZXNzaW9uOiB7IGlkOiAnc2Vzc2lvbi0xMjMnIH0sXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyhcbiAgICAgICAgPEF1dGhHdWFyZD5cbiAgICAgICAgICA8PlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImZyYWdtZW50LWNoaWxkLTFcIj5GcmFnbWVudCBDaGlsZCAxPC9kaXY+XG4gICAgICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImZyYWdtZW50LWNoaWxkLTJcIj5GcmFnbWVudCBDaGlsZCAyPC9kaXY+XG4gICAgICAgICAgPC8+XG4gICAgICAgIDwvQXV0aEd1YXJkPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnZnJhZ21lbnQtY2hpbGQtMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgncHJvdGVjdGVkLWNvbnRlbnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2ZyYWdtZW50LWNoaWxkLTInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJyZWRpcmVjdCIsIm1vY2tSZWRpcmVjdCIsInJlcXVpcmVBdXRoU2Vzc2lvbiIsImZuIiwibW9ja1JlcXVpcmVBdXRoU2Vzc2lvbiIsImRlc2NyaWJlIiwiVGVzdENvbXBvbmVudCIsImRpdiIsImRhdGEtdGVzdGlkIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInVzZXIiLCJpZCIsImVtYWlsIiwic2Vzc2lvbiIsIml0IiwicmVuZGVyV2l0aFByb3ZpZGVycyIsIkF1dGhHdWFyZCIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGVzdElkIiwidG9CZUluVGhlRG9jdW1lbnQiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwibm90IiwiQ2hpbGRXaXRoUHJvcHMiLCJ0aXRsZSIsImNvdW50IiwidG9IYXZlVGV4dENvbnRlbnQiLCJtb2NrUmVqZWN0ZWRWYWx1ZSIsIkVycm9yIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJxdWVyeUJ5VGVzdElkIiwicmVkaXJlY3RUbyIsImVycm9yVHlwZXMiLCJ1bmRlZmluZWQiLCJlcnJvciIsIkFwaUNvbXBvbmVudCIsInJlcmVuZGVyIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwicmVuZGVyQ291bnQiLCJDb3VudGluZ0NvbXBvbmVudCIsIm1vY2tSZXNvbHZlZFZhbHVlT25jZSIsIm1vY2tSZWplY3RlZFZhbHVlT25jZSIsIk5lc3RlZENvbXBvbmVudCIsImNoaWxkcmVuIiwiaGVhZGVyIiwiZm9vdGVyIiwiZ2V0QnlUZXh0IiwiQ29uZGl0aW9uYWxDb21wb25lbnQiLCJzaG93Q29udGVudCJdLCJtYXBwaW5ncyI6IkFBQUE7O0NBRUM7QUFVREEsS0FBS0MsSUFBSSxDQUFDLG1CQUFtQixJQUFPLENBQUE7UUFDbENDLFVBQVVDO0lBQ1osQ0FBQTtBQUVBLDZCQUE2QjtBQUM3QkgsS0FBS0MsSUFBSSxDQUFDLHFCQUFxQixJQUFPLENBQUE7UUFDcENHLG9CQUFvQkosS0FBS0ssRUFBRTtJQUM3QixDQUFBOzs7Ozs4REFma0I7d0JBQ0s7K0JBQ2E7a0VBQ2Q7d0JBZWE7Ozs7OztBQWJuQywwQkFBMEI7QUFDMUIsTUFBTUYsZUFBZUgsS0FBS0ssRUFBRTtBQWE1QixNQUFNQyx5QkFBeUJGLDBCQUFrQjtBQUVqREcsU0FBUyxhQUFhO0lBQ3BCLE1BQU1DLGdCQUFnQixrQkFBTSxxQkFBQ0M7WUFBSUMsZUFBWTtzQkFBb0I7O0lBRWpFQyxXQUFXO1FBQ1RYLEtBQUtZLGFBQWE7SUFDcEI7SUFFQUwsU0FBUywwQkFBMEI7UUFDakNJLFdBQVc7WUFDVEwsdUJBQXVCTyxpQkFBaUIsQ0FBQztnQkFDdkNDLE1BQU07b0JBQUVDLElBQUk7b0JBQUdDLE9BQU87Z0JBQW1CO2dCQUN6Q0MsU0FBUztvQkFBRUYsSUFBSTtnQkFBYztZQUMvQjtRQUNGO1FBRUFHLEdBQUcsK0NBQStDO1lBQ2hEQyxJQUFBQSxrQ0FBbUIsZ0JBQ2pCLHFCQUFDQyxrQkFBUzsw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