fc07f87060df555eb78db216e5828f10
"use strict";

/* istanbul ignore next */
function cov_3hfctc4ye() {
  var path = "/Users/stefanbekker/projects/fancy-planties/src/lib/auth/server.ts";
  var hash = "f08bc86e61773e99eb60565072cf35186f8c1965";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/stefanbekker/projects/fancy-planties/src/lib/auth/server.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "2": {
        start: {
          line: 6,
          column: 24
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "3": {
        start: {
          line: 11,
          column: 0
        },
        end: {
          line: 36,
          column: 3
        }
      },
      "4": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 38
        }
      },
      "5": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 34
        }
      },
      "6": {
        start: {
          line: 19,
          column: 8
        },
        end: {
          line: 19,
          column: 30
        }
      },
      "7": {
        start: {
          line: 22,
          column: 8
        },
        end: {
          line: 22,
          column: 31
        }
      },
      "8": {
        start: {
          line: 25,
          column: 8
        },
        end: {
          line: 25,
          column: 39
        }
      },
      "9": {
        start: {
          line: 28,
          column: 8
        },
        end: {
          line: 28,
          column: 34
        }
      },
      "10": {
        start: {
          line: 31,
          column: 8
        },
        end: {
          line: 31,
          column: 32
        }
      },
      "11": {
        start: {
          line: 34,
          column: 8
        },
        end: {
          line: 34,
          column: 31
        }
      },
      "12": {
        start: {
          line: 37,
          column: 0
        },
        end: {
          line: 37,
          column: 23
        }
      },
      "13": {
        start: {
          line: 38,
          column: 17
        },
        end: {
          line: 38,
          column: 40
        }
      },
      "14": {
        start: {
          line: 39,
          column: 20
        },
        end: {
          line: 39,
          column: 46
        }
      },
      "15": {
        start: {
          line: 40,
          column: 15
        },
        end: {
          line: 40,
          column: 33
        }
      },
      "16": {
        start: {
          line: 41,
          column: 15
        },
        end: {
          line: 41,
          column: 31
        }
      },
      "17": {
        start: {
          line: 42,
          column: 15
        },
        end: {
          line: 42,
          column: 33
        }
      },
      "18": {
        start: {
          line: 44,
          column: 26
        },
        end: {
          line: 44,
          column: 69
        }
      },
      "19": {
        start: {
          line: 45,
          column: 4
        },
        end: {
          line: 45,
          column: 107
        }
      },
      "20": {
        start: {
          line: 48,
          column: 26
        },
        end: {
          line: 48,
          column: 65
        }
      },
      "21": {
        start: {
          line: 49,
          column: 4
        },
        end: {
          line: 49,
          column: 107
        }
      },
      "22": {
        start: {
          line: 51,
          column: 24
        },
        end: {
          line: 96,
          column: 2
        }
      },
      "23": {
        start: {
          line: 52,
          column: 22
        },
        end: {
          line: 52,
          column: 104
        }
      },
      "24": {
        start: {
          line: 53,
          column: 4
        },
        end: {
          line: 58,
          column: 5
        }
      },
      "25": {
        start: {
          line: 54,
          column: 8
        },
        end: {
          line: 57,
          column: 10
        }
      },
      "26": {
        start: {
          line: 59,
          column: 19
        },
        end: {
          line: 59,
          column: 64
        }
      },
      "27": {
        start: {
          line: 61,
          column: 4
        },
        end: {
          line: 72,
          column: 5
        }
      },
      "28": {
        start: {
          line: 62,
          column: 8
        },
        end: {
          line: 65,
          column: 9
        }
      },
      "29": {
        start: {
          line: 63,
          column: 34
        },
        end: {
          line: 63,
          column: 85
        }
      },
      "30": {
        start: {
          line: 64,
          column: 12
        },
        end: {
          line: 64,
          column: 115
        }
      },
      "31": {
        start: {
          line: 66,
          column: 8
        },
        end: {
          line: 69,
          column: 9
        }
      },
      "32": {
        start: {
          line: 67,
          column: 34
        },
        end: {
          line: 67,
          column: 73
        }
      },
      "33": {
        start: {
          line: 68,
          column: 12
        },
        end: {
          line: 68,
          column: 115
        }
      },
      "34": {
        start: {
          line: 74,
          column: 4
        },
        end: {
          line: 91,
          column: 5
        }
      },
      "35": {
        start: {
          line: 76,
          column: 25
        },
        end: {
          line: 76,
          column: 80
        }
      },
      "36": {
        start: {
          line: 77,
          column: 8
        },
        end: {
          line: 82,
          column: 9
        }
      },
      "37": {
        start: {
          line: 78,
          column: 12
        },
        end: {
          line: 81,
          column: 14
        }
      },
      "38": {
        start: {
          line: 83,
          column: 8
        },
        end: {
          line: 90,
          column: 10
        }
      },
      "39": {
        start: {
          line: 92,
          column: 4
        },
        end: {
          line: 95,
          column: 6
        }
      },
      "40": {
        start: {
          line: 98,
          column: 4
        },
        end: {
          line: 98,
          column: 35
        }
      },
      "41": {
        start: {
          line: 101,
          column: 30
        },
        end: {
          line: 101,
          column: 53
        }
      },
      "42": {
        start: {
          line: 102,
          column: 4
        },
        end: {
          line: 104,
          column: 5
        }
      },
      "43": {
        start: {
          line: 103,
          column: 8
        },
        end: {
          line: 103,
          column: 46
        }
      },
      "44": {
        start: {
          line: 105,
          column: 4
        },
        end: {
          line: 108,
          column: 6
        }
      },
      "45": {
        start: {
          line: 111,
          column: 30
        },
        end: {
          line: 111,
          column: 53
        }
      },
      "46": {
        start: {
          line: 112,
          column: 4
        },
        end: {
          line: 112,
          column: 31
        }
      },
      "47": {
        start: {
          line: 115,
          column: 30
        },
        end: {
          line: 115,
          column: 53
        }
      },
      "48": {
        start: {
          line: 116,
          column: 4
        },
        end: {
          line: 118,
          column: 5
        }
      },
      "49": {
        start: {
          line: 117,
          column: 8
        },
        end: {
          line: 117,
          column: 46
        }
      },
      "50": {
        start: {
          line: 121,
          column: 4
        },
        end: {
          line: 127,
          column: 5
        }
      },
      "51": {
        start: {
          line: 124,
          column: 8
        },
        end: {
          line: 124,
          column: 54
        }
      },
      "52": {
        start: {
          line: 126,
          column: 8
        },
        end: {
          line: 126,
          column: 55
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 5,
            column: 9
          },
          end: {
            line: 5,
            column: 16
          }
        },
        loc: {
          start: {
            line: 5,
            column: 30
          },
          end: {
            line: 10,
            column: 1
          }
        },
        line: 5
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 12,
            column: 5
          }
        },
        loc: {
          start: {
            line: 12,
            column: 34
          },
          end: {
            line: 14,
            column: 5
          }
        },
        line: 12
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 15,
            column: 4
          },
          end: {
            line: 15,
            column: 5
          }
        },
        loc: {
          start: {
            line: 15,
            column: 30
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 15
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 18,
            column: 4
          },
          end: {
            line: 18,
            column: 5
          }
        },
        loc: {
          start: {
            line: 18,
            column: 26
          },
          end: {
            line: 20,
            column: 5
          }
        },
        line: 18
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 21,
            column: 4
          },
          end: {
            line: 21,
            column: 5
          }
        },
        loc: {
          start: {
            line: 21,
            column: 27
          },
          end: {
            line: 23,
            column: 5
          }
        },
        line: 21
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 24,
            column: 4
          },
          end: {
            line: 24,
            column: 5
          }
        },
        loc: {
          start: {
            line: 24,
            column: 35
          },
          end: {
            line: 26,
            column: 5
          }
        },
        line: 24
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 27,
            column: 4
          },
          end: {
            line: 27,
            column: 5
          }
        },
        loc: {
          start: {
            line: 27,
            column: 30
          },
          end: {
            line: 29,
            column: 5
          }
        },
        line: 27
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 30,
            column: 4
          },
          end: {
            line: 30,
            column: 5
          }
        },
        loc: {
          start: {
            line: 30,
            column: 28
          },
          end: {
            line: 32,
            column: 5
          }
        },
        line: 30
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 33,
            column: 4
          },
          end: {
            line: 33,
            column: 5
          }
        },
        loc: {
          start: {
            line: 33,
            column: 27
          },
          end: {
            line: 35,
            column: 5
          }
        },
        line: 33
      },
      "9": {
        name: "setSessionCookie",
        decl: {
          start: {
            line: 43,
            column: 15
          },
          end: {
            line: 43,
            column: 31
          }
        },
        loc: {
          start: {
            line: 43,
            column: 43
          },
          end: {
            line: 46,
            column: 1
          }
        },
        line: 43
      },
      "10": {
        name: "clearSessionCookie",
        decl: {
          start: {
            line: 47,
            column: 15
          },
          end: {
            line: 47,
            column: 33
          }
        },
        loc: {
          start: {
            line: 47,
            column: 36
          },
          end: {
            line: 50,
            column: 1
          }
        },
        line: 47
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 51,
            column: 42
          },
          end: {
            line: 51,
            column: 43
          }
        },
        loc: {
          start: {
            line: 51,
            column: 52
          },
          end: {
            line: 96,
            column: 1
          }
        },
        line: 51
      },
      "12": {
        name: "getAuthSession",
        decl: {
          start: {
            line: 97,
            column: 15
          },
          end: {
            line: 97,
            column: 29
          }
        },
        loc: {
          start: {
            line: 97,
            column: 32
          },
          end: {
            line: 99,
            column: 1
          }
        },
        line: 97
      },
      "13": {
        name: "requireAuthSession",
        decl: {
          start: {
            line: 100,
            column: 15
          },
          end: {
            line: 100,
            column: 33
          }
        },
        loc: {
          start: {
            line: 100,
            column: 63
          },
          end: {
            line: 109,
            column: 1
          }
        },
        line: 100
      },
      "14": {
        name: "isAuthenticated",
        decl: {
          start: {
            line: 110,
            column: 15
          },
          end: {
            line: 110,
            column: 30
          }
        },
        loc: {
          start: {
            line: 110,
            column: 33
          },
          end: {
            line: 113,
            column: 1
          }
        },
        line: 110
      },
      "15": {
        name: "redirectIfAuthenticated",
        decl: {
          start: {
            line: 114,
            column: 15
          },
          end: {
            line: 114,
            column: 38
          }
        },
        loc: {
          start: {
            line: 114,
            column: 66
          },
          end: {
            line: 119,
            column: 1
          }
        },
        line: 114
      },
      "16": {
        name: "cleanupExpiredSessions",
        decl: {
          start: {
            line: 120,
            column: 15
          },
          end: {
            line: 120,
            column: 37
          }
        },
        loc: {
          start: {
            line: 120,
            column: 40
          },
          end: {
            line: 128,
            column: 1
          }
        },
        line: 120
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 52,
            column: 22
          },
          end: {
            line: 52,
            column: 104
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 52,
            column: 22
          },
          end: {
            line: 52,
            column: 96
          }
        }, {
          start: {
            line: 52,
            column: 100
          },
          end: {
            line: 52,
            column: 104
          }
        }],
        line: 52
      },
      "1": {
        loc: {
          start: {
            line: 53,
            column: 4
          },
          end: {
            line: 58,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 53,
            column: 4
          },
          end: {
            line: 58,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 53
      },
      "2": {
        loc: {
          start: {
            line: 62,
            column: 8
          },
          end: {
            line: 65,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 62,
            column: 8
          },
          end: {
            line: 65,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 62
      },
      "3": {
        loc: {
          start: {
            line: 62,
            column: 12
          },
          end: {
            line: 62,
            column: 50
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 62,
            column: 12
          },
          end: {
            line: 62,
            column: 26
          }
        }, {
          start: {
            line: 62,
            column: 30
          },
          end: {
            line: 62,
            column: 50
          }
        }],
        line: 62
      },
      "4": {
        loc: {
          start: {
            line: 66,
            column: 8
          },
          end: {
            line: 69,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 66,
            column: 8
          },
          end: {
            line: 69,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 66
      },
      "5": {
        loc: {
          start: {
            line: 74,
            column: 4
          },
          end: {
            line: 91,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 74,
            column: 4
          },
          end: {
            line: 91,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 74
      },
      "6": {
        loc: {
          start: {
            line: 74,
            column: 8
          },
          end: {
            line: 74,
            column: 37
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 74,
            column: 8
          },
          end: {
            line: 74,
            column: 19
          }
        }, {
          start: {
            line: 74,
            column: 23
          },
          end: {
            line: 74,
            column: 37
          }
        }],
        line: 74
      },
      "7": {
        loc: {
          start: {
            line: 77,
            column: 8
          },
          end: {
            line: 82,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 77,
            column: 8
          },
          end: {
            line: 82,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 77
      },
      "8": {
        loc: {
          start: {
            line: 100,
            column: 34
          },
          end: {
            line: 100,
            column: 61
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 100,
            column: 47
          },
          end: {
            line: 100,
            column: 61
          }
        }],
        line: 100
      },
      "9": {
        loc: {
          start: {
            line: 102,
            column: 4
          },
          end: {
            line: 104,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 102,
            column: 4
          },
          end: {
            line: 104,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 102
      },
      "10": {
        loc: {
          start: {
            line: 102,
            column: 8
          },
          end: {
            line: 102,
            column: 25
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 102,
            column: 8
          },
          end: {
            line: 102,
            column: 13
          }
        }, {
          start: {
            line: 102,
            column: 17
          },
          end: {
            line: 102,
            column: 25
          }
        }],
        line: 102
      },
      "11": {
        loc: {
          start: {
            line: 112,
            column: 14
          },
          end: {
            line: 112,
            column: 29
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 112,
            column: 14
          },
          end: {
            line: 112,
            column: 18
          }
        }, {
          start: {
            line: 112,
            column: 22
          },
          end: {
            line: 112,
            column: 29
          }
        }],
        line: 112
      },
      "12": {
        loc: {
          start: {
            line: 114,
            column: 39
          },
          end: {
            line: 114,
            column: 64
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 114,
            column: 52
          },
          end: {
            line: 114,
            column: 64
          }
        }],
        line: 114
      },
      "13": {
        loc: {
          start: {
            line: 116,
            column: 4
          },
          end: {
            line: 118,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 116,
            column: 4
          },
          end: {
            line: 118,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 116
      },
      "14": {
        loc: {
          start: {
            line: 116,
            column: 8
          },
          end: {
            line: 116,
            column: 23
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 116,
            column: 8
          },
          end: {
            line: 116,
            column: 12
          }
        }, {
          start: {
            line: 116,
            column: 16
          },
          end: {
            line: 116,
            column: 23
          }
        }],
        line: 116
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0],
      "13": [0, 0],
      "14": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["/Users/stefanbekker/projects/fancy-planties/src/lib/auth/server.ts"],
      sourcesContent: ["import 'server-only';\n\nimport { cookies } from 'next/headers';\nimport { redirect } from 'next/navigation';\nimport { lucia } from './lucia';\nimport { cache } from 'react';\nimport { getUserById } from './index';\nimport type { User, Session } from '../db/schema';\n\n// Session cookie management\nexport async function setSessionCookie(sessionId: string): Promise<void> {\n  const sessionCookie = lucia.createSessionCookie(sessionId);\n  (await cookies()).set(sessionCookie.name, sessionCookie.value, sessionCookie.attributes);\n}\n\nexport async function clearSessionCookie(): Promise<void> {\n  const sessionCookie = lucia.createBlankSessionCookie();\n  (await cookies()).set(sessionCookie.name, sessionCookie.value, sessionCookie.attributes);\n}\n\n// Cached session validation for performance\nexport const validateRequest = cache(async (): Promise<{ user: User; session: Session } | { user: null; session: null }> => {\n  const sessionId = (await cookies()).get(lucia.sessionCookieName)?.value ?? null;\n  \n  if (!sessionId) {\n    return {\n      user: null,\n      session: null,\n    };\n  }\n\n  const result = await lucia.validateSession(sessionId);\n  \n  // Next.js throws when you attempt to set cookie when rendering page\n  try {\n    if (result.session && result.session.fresh) {\n      const sessionCookie = lucia.createSessionCookie(result.session.id);\n      (await cookies()).set(sessionCookie.name, sessionCookie.value, sessionCookie.attributes);\n    }\n    if (!result.session) {\n      const sessionCookie = lucia.createBlankSessionCookie();\n      (await cookies()).set(sessionCookie.name, sessionCookie.value, sessionCookie.attributes);\n    }\n  } catch {\n    // Ignore cookie setting errors in server components\n  }\n  \n  // Convert Lucia result to our expected format\n  if (result.user && result.session) {\n    // Get full user data from database\n    const fullUser = await getUserById(parseInt(result.user.id));\n    if (!fullUser) {\n      return { user: null, session: null };\n    }\n    \n    return {\n      user: fullUser,\n      session: {\n        id: result.session.id,\n        userId: parseInt(result.user.id),\n        expiresAt: result.session.expiresAt,\n      },\n    };\n  }\n  \n  return {\n    user: null,\n    session: null,\n  };\n});\n\n// Server-side session validation\nexport async function getAuthSession() {\n  return await validateRequest();\n}\n\n// Require authenticated user or redirect\nexport async function requireAuthSession(redirectTo: string = '/auth/signin') {\n  const { user, session } = await validateRequest();\n  \n  if (!user || !session) {\n    redirect(redirectTo);\n  }\n  \n  return { user, session };\n}\n\n// Check if user is authenticated (without redirect)\nexport async function isAuthenticated(): Promise<boolean> {\n  const { user, session } = await validateRequest();\n  return !!(user && session);\n}\n\n// Redirect authenticated users away from auth pages\nexport async function redirectIfAuthenticated(redirectTo: string = '/dashboard') {\n  const { user, session } = await validateRequest();\n  \n  if (user && session) {\n    redirect(redirectTo);\n  }\n}\n\n// Session cleanup utility\nexport async function cleanupExpiredSessions(): Promise<void> {\n  try {\n    // This would typically be run as a background job\n    // For now, we'll rely on Lucia's built-in cleanup\n    console.log('Session cleanup would run here');\n  } catch (error) {\n    console.error('Session cleanup error:', error);\n  }\n}"],
      names: ["cleanupExpiredSessions", "clearSessionCookie", "getAuthSession", "isAuthenticated", "redirectIfAuthenticated", "requireAuthSession", "setSessionCookie", "validateRequest", "sessionId", "sessionCookie", "lucia", "createSessionCookie", "cookies", "set", "name", "value", "attributes", "createBlankSessionCookie", "cache", "get", "sessionCookieName", "user", "session", "result", "validateSession", "fresh", "id", "fullUser", "getUserById", "parseInt", "userId", "expiresAt", "redirectTo", "redirect", "console", "log", "error"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "f08bc86e61773e99eb60565072cf35186f8c1965"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_3hfctc4ye = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_3hfctc4ye();
cov_3hfctc4ye().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_3hfctc4ye().f[0]++;
  cov_3hfctc4ye().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_3hfctc4ye().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_3hfctc4ye().s[3]++;
_export(exports, {
  get cleanupExpiredSessions() {
    /* istanbul ignore next */
    cov_3hfctc4ye().f[1]++;
    cov_3hfctc4ye().s[4]++;
    return cleanupExpiredSessions;
  },
  get clearSessionCookie() {
    /* istanbul ignore next */
    cov_3hfctc4ye().f[2]++;
    cov_3hfctc4ye().s[5]++;
    return clearSessionCookie;
  },
  get getAuthSession() {
    /* istanbul ignore next */
    cov_3hfctc4ye().f[3]++;
    cov_3hfctc4ye().s[6]++;
    return getAuthSession;
  },
  get isAuthenticated() {
    /* istanbul ignore next */
    cov_3hfctc4ye().f[4]++;
    cov_3hfctc4ye().s[7]++;
    return isAuthenticated;
  },
  get redirectIfAuthenticated() {
    /* istanbul ignore next */
    cov_3hfctc4ye().f[5]++;
    cov_3hfctc4ye().s[8]++;
    return redirectIfAuthenticated;
  },
  get requireAuthSession() {
    /* istanbul ignore next */
    cov_3hfctc4ye().f[6]++;
    cov_3hfctc4ye().s[9]++;
    return requireAuthSession;
  },
  get setSessionCookie() {
    /* istanbul ignore next */
    cov_3hfctc4ye().f[7]++;
    cov_3hfctc4ye().s[10]++;
    return setSessionCookie;
  },
  get validateRequest() {
    /* istanbul ignore next */
    cov_3hfctc4ye().f[8]++;
    cov_3hfctc4ye().s[11]++;
    return validateRequest;
  }
});
/* istanbul ignore next */
cov_3hfctc4ye().s[12]++;
require("server-only");
const _headers =
/* istanbul ignore next */
(cov_3hfctc4ye().s[13]++, require("next/headers"));
const _navigation =
/* istanbul ignore next */
(cov_3hfctc4ye().s[14]++, require("next/navigation"));
const _lucia =
/* istanbul ignore next */
(cov_3hfctc4ye().s[15]++, require("./lucia"));
const _react =
/* istanbul ignore next */
(cov_3hfctc4ye().s[16]++, require("react"));
const _index =
/* istanbul ignore next */
(cov_3hfctc4ye().s[17]++, require("./index"));
async function setSessionCookie(sessionId) {
  /* istanbul ignore next */
  cov_3hfctc4ye().f[9]++;
  const sessionCookie =
  /* istanbul ignore next */
  (cov_3hfctc4ye().s[18]++, _lucia.lucia.createSessionCookie(sessionId));
  /* istanbul ignore next */
  cov_3hfctc4ye().s[19]++;
  (await (0, _headers.cookies)()).set(sessionCookie.name, sessionCookie.value, sessionCookie.attributes);
}
async function clearSessionCookie() {
  /* istanbul ignore next */
  cov_3hfctc4ye().f[10]++;
  const sessionCookie =
  /* istanbul ignore next */
  (cov_3hfctc4ye().s[20]++, _lucia.lucia.createBlankSessionCookie());
  /* istanbul ignore next */
  cov_3hfctc4ye().s[21]++;
  (await (0, _headers.cookies)()).set(sessionCookie.name, sessionCookie.value, sessionCookie.attributes);
}
const validateRequest =
/* istanbul ignore next */
(cov_3hfctc4ye().s[22]++, (0, _react.cache)(async () => {
  /* istanbul ignore next */
  cov_3hfctc4ye().f[11]++;
  const sessionId =
  /* istanbul ignore next */
  (cov_3hfctc4ye().s[23]++,
  /* istanbul ignore next */
  (cov_3hfctc4ye().b[0][0]++, (await (0, _headers.cookies)()).get(_lucia.lucia.sessionCookieName)?.value) ??
  /* istanbul ignore next */
  (cov_3hfctc4ye().b[0][1]++, null));
  /* istanbul ignore next */
  cov_3hfctc4ye().s[24]++;
  if (!sessionId) {
    /* istanbul ignore next */
    cov_3hfctc4ye().b[1][0]++;
    cov_3hfctc4ye().s[25]++;
    return {
      user: null,
      session: null
    };
  } else
  /* istanbul ignore next */
  {
    cov_3hfctc4ye().b[1][1]++;
  }
  const result =
  /* istanbul ignore next */
  (cov_3hfctc4ye().s[26]++, await _lucia.lucia.validateSession(sessionId));
  // Next.js throws when you attempt to set cookie when rendering page
  /* istanbul ignore next */
  cov_3hfctc4ye().s[27]++;
  try {
    /* istanbul ignore next */
    cov_3hfctc4ye().s[28]++;
    if (
    /* istanbul ignore next */
    (cov_3hfctc4ye().b[3][0]++, result.session) &&
    /* istanbul ignore next */
    (cov_3hfctc4ye().b[3][1]++, result.session.fresh)) {
      /* istanbul ignore next */
      cov_3hfctc4ye().b[2][0]++;
      const sessionCookie =
      /* istanbul ignore next */
      (cov_3hfctc4ye().s[29]++, _lucia.lucia.createSessionCookie(result.session.id));
      /* istanbul ignore next */
      cov_3hfctc4ye().s[30]++;
      (await (0, _headers.cookies)()).set(sessionCookie.name, sessionCookie.value, sessionCookie.attributes);
    } else
    /* istanbul ignore next */
    {
      cov_3hfctc4ye().b[2][1]++;
    }
    cov_3hfctc4ye().s[31]++;
    if (!result.session) {
      /* istanbul ignore next */
      cov_3hfctc4ye().b[4][0]++;
      const sessionCookie =
      /* istanbul ignore next */
      (cov_3hfctc4ye().s[32]++, _lucia.lucia.createBlankSessionCookie());
      /* istanbul ignore next */
      cov_3hfctc4ye().s[33]++;
      (await (0, _headers.cookies)()).set(sessionCookie.name, sessionCookie.value, sessionCookie.attributes);
    } else
    /* istanbul ignore next */
    {
      cov_3hfctc4ye().b[4][1]++;
    }
  } catch {
    // Ignore cookie setting errors in server components
  }
  // Convert Lucia result to our expected format
  /* istanbul ignore next */
  cov_3hfctc4ye().s[34]++;
  if (
  /* istanbul ignore next */
  (cov_3hfctc4ye().b[6][0]++, result.user) &&
  /* istanbul ignore next */
  (cov_3hfctc4ye().b[6][1]++, result.session)) {
    /* istanbul ignore next */
    cov_3hfctc4ye().b[5][0]++;
    // Get full user data from database
    const fullUser =
    /* istanbul ignore next */
    (cov_3hfctc4ye().s[35]++, await (0, _index.getUserById)(parseInt(result.user.id)));
    /* istanbul ignore next */
    cov_3hfctc4ye().s[36]++;
    if (!fullUser) {
      /* istanbul ignore next */
      cov_3hfctc4ye().b[7][0]++;
      cov_3hfctc4ye().s[37]++;
      return {
        user: null,
        session: null
      };
    } else
    /* istanbul ignore next */
    {
      cov_3hfctc4ye().b[7][1]++;
    }
    cov_3hfctc4ye().s[38]++;
    return {
      user: fullUser,
      session: {
        id: result.session.id,
        userId: parseInt(result.user.id),
        expiresAt: result.session.expiresAt
      }
    };
  } else
  /* istanbul ignore next */
  {
    cov_3hfctc4ye().b[5][1]++;
  }
  cov_3hfctc4ye().s[39]++;
  return {
    user: null,
    session: null
  };
}));
async function getAuthSession() {
  /* istanbul ignore next */
  cov_3hfctc4ye().f[12]++;
  cov_3hfctc4ye().s[40]++;
  return await validateRequest();
}
async function requireAuthSession(redirectTo =
/* istanbul ignore next */
(cov_3hfctc4ye().b[8][0]++, '/auth/signin')) {
  /* istanbul ignore next */
  cov_3hfctc4ye().f[13]++;
  const {
    user,
    session
  } =
  /* istanbul ignore next */
  (cov_3hfctc4ye().s[41]++, await validateRequest());
  /* istanbul ignore next */
  cov_3hfctc4ye().s[42]++;
  if (
  /* istanbul ignore next */
  (cov_3hfctc4ye().b[10][0]++, !user) ||
  /* istanbul ignore next */
  (cov_3hfctc4ye().b[10][1]++, !session)) {
    /* istanbul ignore next */
    cov_3hfctc4ye().b[9][0]++;
    cov_3hfctc4ye().s[43]++;
    (0, _navigation.redirect)(redirectTo);
  } else
  /* istanbul ignore next */
  {
    cov_3hfctc4ye().b[9][1]++;
  }
  cov_3hfctc4ye().s[44]++;
  return {
    user,
    session
  };
}
async function isAuthenticated() {
  /* istanbul ignore next */
  cov_3hfctc4ye().f[14]++;
  const {
    user,
    session
  } =
  /* istanbul ignore next */
  (cov_3hfctc4ye().s[45]++, await validateRequest());
  /* istanbul ignore next */
  cov_3hfctc4ye().s[46]++;
  return !!(
  /* istanbul ignore next */
  (cov_3hfctc4ye().b[11][0]++, user) &&
  /* istanbul ignore next */
  (cov_3hfctc4ye().b[11][1]++, session));
}
async function redirectIfAuthenticated(redirectTo =
/* istanbul ignore next */
(cov_3hfctc4ye().b[12][0]++, '/dashboard')) {
  /* istanbul ignore next */
  cov_3hfctc4ye().f[15]++;
  const {
    user,
    session
  } =
  /* istanbul ignore next */
  (cov_3hfctc4ye().s[47]++, await validateRequest());
  /* istanbul ignore next */
  cov_3hfctc4ye().s[48]++;
  if (
  /* istanbul ignore next */
  (cov_3hfctc4ye().b[14][0]++, user) &&
  /* istanbul ignore next */
  (cov_3hfctc4ye().b[14][1]++, session)) {
    /* istanbul ignore next */
    cov_3hfctc4ye().b[13][0]++;
    cov_3hfctc4ye().s[49]++;
    (0, _navigation.redirect)(redirectTo);
  } else
  /* istanbul ignore next */
  {
    cov_3hfctc4ye().b[13][1]++;
  }
}
async function cleanupExpiredSessions() {
  /* istanbul ignore next */
  cov_3hfctc4ye().f[16]++;
  cov_3hfctc4ye().s[50]++;
  try {
    /* istanbul ignore next */
    cov_3hfctc4ye().s[51]++;
    // This would typically be run as a background job
    // For now, we'll rely on Lucia's built-in cleanup
    console.log('Session cleanup would run here');
  } catch (error) {
    /* istanbul ignore next */
    cov_3hfctc4ye().s[52]++;
    console.error('Session cleanup error:', error);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjbGVhbnVwRXhwaXJlZFNlc3Npb25zIiwiY292XzNoZmN0YzR5ZSIsImYiLCJzIiwiY2xlYXJTZXNzaW9uQ29va2llIiwiZ2V0QXV0aFNlc3Npb24iLCJpc0F1dGhlbnRpY2F0ZWQiLCJyZWRpcmVjdElmQXV0aGVudGljYXRlZCIsInJlcXVpcmVBdXRoU2Vzc2lvbiIsInNldFNlc3Npb25Db29raWUiLCJ2YWxpZGF0ZVJlcXVlc3QiLCJzZXNzaW9uSWQiLCJzZXNzaW9uQ29va2llIiwiX2x1Y2lhIiwibHVjaWEiLCJjcmVhdGVTZXNzaW9uQ29va2llIiwiX2hlYWRlcnMiLCJjb29raWVzIiwic2V0IiwibmFtZSIsInZhbHVlIiwiYXR0cmlidXRlcyIsImNyZWF0ZUJsYW5rU2Vzc2lvbkNvb2tpZSIsIl9yZWFjdCIsImNhY2hlIiwiYiIsImdldCIsInNlc3Npb25Db29raWVOYW1lIiwidXNlciIsInNlc3Npb24iLCJyZXN1bHQiLCJ2YWxpZGF0ZVNlc3Npb24iLCJmcmVzaCIsImlkIiwiZnVsbFVzZXIiLCJfaW5kZXgiLCJnZXRVc2VyQnlJZCIsInBhcnNlSW50IiwidXNlcklkIiwiZXhwaXJlc0F0IiwicmVkaXJlY3RUbyIsIl9uYXZpZ2F0aW9uIiwicmVkaXJlY3QiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiXSwic291cmNlcyI6WyIvVXNlcnMvc3RlZmFuYmVra2VyL3Byb2plY3RzL2ZhbmN5LXBsYW50aWVzL3NyYy9saWIvYXV0aC9zZXJ2ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdzZXJ2ZXItb25seSc7XG5cbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xuaW1wb3J0IHsgcmVkaXJlY3QgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xuaW1wb3J0IHsgbHVjaWEgfSBmcm9tICcuL2x1Y2lhJztcbmltcG9ydCB7IGNhY2hlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgZ2V0VXNlckJ5SWQgfSBmcm9tICcuL2luZGV4JztcbmltcG9ydCB0eXBlIHsgVXNlciwgU2Vzc2lvbiB9IGZyb20gJy4uL2RiL3NjaGVtYSc7XG5cbi8vIFNlc3Npb24gY29va2llIG1hbmFnZW1lbnRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRTZXNzaW9uQ29va2llKHNlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHNlc3Npb25Db29raWUgPSBsdWNpYS5jcmVhdGVTZXNzaW9uQ29va2llKHNlc3Npb25JZCk7XG4gIChhd2FpdCBjb29raWVzKCkpLnNldChzZXNzaW9uQ29va2llLm5hbWUsIHNlc3Npb25Db29raWUudmFsdWUsIHNlc3Npb25Db29raWUuYXR0cmlidXRlcyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhclNlc3Npb25Db29raWUoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHNlc3Npb25Db29raWUgPSBsdWNpYS5jcmVhdGVCbGFua1Nlc3Npb25Db29raWUoKTtcbiAgKGF3YWl0IGNvb2tpZXMoKSkuc2V0KHNlc3Npb25Db29raWUubmFtZSwgc2Vzc2lvbkNvb2tpZS52YWx1ZSwgc2Vzc2lvbkNvb2tpZS5hdHRyaWJ1dGVzKTtcbn1cblxuLy8gQ2FjaGVkIHNlc3Npb24gdmFsaWRhdGlvbiBmb3IgcGVyZm9ybWFuY2VcbmV4cG9ydCBjb25zdCB2YWxpZGF0ZVJlcXVlc3QgPSBjYWNoZShhc3luYyAoKTogUHJvbWlzZTx7IHVzZXI6IFVzZXI7IHNlc3Npb246IFNlc3Npb24gfSB8IHsgdXNlcjogbnVsbDsgc2Vzc2lvbjogbnVsbCB9PiA9PiB7XG4gIGNvbnN0IHNlc3Npb25JZCA9IChhd2FpdCBjb29raWVzKCkpLmdldChsdWNpYS5zZXNzaW9uQ29va2llTmFtZSk/LnZhbHVlID8/IG51bGw7XG4gIFxuICBpZiAoIXNlc3Npb25JZCkge1xuICAgIHJldHVybiB7XG4gICAgICB1c2VyOiBudWxsLFxuICAgICAgc2Vzc2lvbjogbnVsbCxcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbHVjaWEudmFsaWRhdGVTZXNzaW9uKHNlc3Npb25JZCk7XG4gIFxuICAvLyBOZXh0LmpzIHRocm93cyB3aGVuIHlvdSBhdHRlbXB0IHRvIHNldCBjb29raWUgd2hlbiByZW5kZXJpbmcgcGFnZVxuICB0cnkge1xuICAgIGlmIChyZXN1bHQuc2Vzc2lvbiAmJiByZXN1bHQuc2Vzc2lvbi5mcmVzaCkge1xuICAgICAgY29uc3Qgc2Vzc2lvbkNvb2tpZSA9IGx1Y2lhLmNyZWF0ZVNlc3Npb25Db29raWUocmVzdWx0LnNlc3Npb24uaWQpO1xuICAgICAgKGF3YWl0IGNvb2tpZXMoKSkuc2V0KHNlc3Npb25Db29raWUubmFtZSwgc2Vzc2lvbkNvb2tpZS52YWx1ZSwgc2Vzc2lvbkNvb2tpZS5hdHRyaWJ1dGVzKTtcbiAgICB9XG4gICAgaWYgKCFyZXN1bHQuc2Vzc2lvbikge1xuICAgICAgY29uc3Qgc2Vzc2lvbkNvb2tpZSA9IGx1Y2lhLmNyZWF0ZUJsYW5rU2Vzc2lvbkNvb2tpZSgpO1xuICAgICAgKGF3YWl0IGNvb2tpZXMoKSkuc2V0KHNlc3Npb25Db29raWUubmFtZSwgc2Vzc2lvbkNvb2tpZS52YWx1ZSwgc2Vzc2lvbkNvb2tpZS5hdHRyaWJ1dGVzKTtcbiAgICB9XG4gIH0gY2F0Y2gge1xuICAgIC8vIElnbm9yZSBjb29raWUgc2V0dGluZyBlcnJvcnMgaW4gc2VydmVyIGNvbXBvbmVudHNcbiAgfVxuICBcbiAgLy8gQ29udmVydCBMdWNpYSByZXN1bHQgdG8gb3VyIGV4cGVjdGVkIGZvcm1hdFxuICBpZiAocmVzdWx0LnVzZXIgJiYgcmVzdWx0LnNlc3Npb24pIHtcbiAgICAvLyBHZXQgZnVsbCB1c2VyIGRhdGEgZnJvbSBkYXRhYmFzZVxuICAgIGNvbnN0IGZ1bGxVc2VyID0gYXdhaXQgZ2V0VXNlckJ5SWQocGFyc2VJbnQocmVzdWx0LnVzZXIuaWQpKTtcbiAgICBpZiAoIWZ1bGxVc2VyKSB7XG4gICAgICByZXR1cm4geyB1c2VyOiBudWxsLCBzZXNzaW9uOiBudWxsIH07XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB1c2VyOiBmdWxsVXNlcixcbiAgICAgIHNlc3Npb246IHtcbiAgICAgICAgaWQ6IHJlc3VsdC5zZXNzaW9uLmlkLFxuICAgICAgICB1c2VySWQ6IHBhcnNlSW50KHJlc3VsdC51c2VyLmlkKSxcbiAgICAgICAgZXhwaXJlc0F0OiByZXN1bHQuc2Vzc2lvbi5leHBpcmVzQXQsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgdXNlcjogbnVsbCxcbiAgICBzZXNzaW9uOiBudWxsLFxuICB9O1xufSk7XG5cbi8vIFNlcnZlci1zaWRlIHNlc3Npb24gdmFsaWRhdGlvblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEF1dGhTZXNzaW9uKCkge1xuICByZXR1cm4gYXdhaXQgdmFsaWRhdGVSZXF1ZXN0KCk7XG59XG5cbi8vIFJlcXVpcmUgYXV0aGVudGljYXRlZCB1c2VyIG9yIHJlZGlyZWN0XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWlyZUF1dGhTZXNzaW9uKHJlZGlyZWN0VG86IHN0cmluZyA9ICcvYXV0aC9zaWduaW4nKSB7XG4gIGNvbnN0IHsgdXNlciwgc2Vzc2lvbiB9ID0gYXdhaXQgdmFsaWRhdGVSZXF1ZXN0KCk7XG4gIFxuICBpZiAoIXVzZXIgfHwgIXNlc3Npb24pIHtcbiAgICByZWRpcmVjdChyZWRpcmVjdFRvKTtcbiAgfVxuICBcbiAgcmV0dXJuIHsgdXNlciwgc2Vzc2lvbiB9O1xufVxuXG4vLyBDaGVjayBpZiB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQgKHdpdGhvdXQgcmVkaXJlY3QpXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCB7IHVzZXIsIHNlc3Npb24gfSA9IGF3YWl0IHZhbGlkYXRlUmVxdWVzdCgpO1xuICByZXR1cm4gISEodXNlciAmJiBzZXNzaW9uKTtcbn1cblxuLy8gUmVkaXJlY3QgYXV0aGVudGljYXRlZCB1c2VycyBhd2F5IGZyb20gYXV0aCBwYWdlc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZGlyZWN0SWZBdXRoZW50aWNhdGVkKHJlZGlyZWN0VG86IHN0cmluZyA9ICcvZGFzaGJvYXJkJykge1xuICBjb25zdCB7IHVzZXIsIHNlc3Npb24gfSA9IGF3YWl0IHZhbGlkYXRlUmVxdWVzdCgpO1xuICBcbiAgaWYgKHVzZXIgJiYgc2Vzc2lvbikge1xuICAgIHJlZGlyZWN0KHJlZGlyZWN0VG8pO1xuICB9XG59XG5cbi8vIFNlc3Npb24gY2xlYW51cCB1dGlsaXR5XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYW51cEV4cGlyZWRTZXNzaW9ucygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICAvLyBUaGlzIHdvdWxkIHR5cGljYWxseSBiZSBydW4gYXMgYSBiYWNrZ3JvdW5kIGpvYlxuICAgIC8vIEZvciBub3csIHdlJ2xsIHJlbHkgb24gTHVjaWEncyBidWlsdC1pbiBjbGVhbnVwXG4gICAgY29uc29sZS5sb2coJ1Nlc3Npb24gY2xlYW51cCB3b3VsZCBydW4gaGVyZScpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1Nlc3Npb24gY2xlYW51cCBlcnJvcjonLCBlcnJvcik7XG4gIH1cbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztNQXVHc0JBLHVCQUFBO0lBQUE7SUFBQUMsYUFBQSxHQUFBQyxDQUFBO0lBQUFELGFBQUEsR0FBQUUsQ0FBQTtXQUFBSCxzQkFBQTs7TUF4RkFJLG1CQUFBO0lBQUE7SUFBQUgsYUFBQSxHQUFBQyxDQUFBO0lBQUFELGFBQUEsR0FBQUUsQ0FBQTtXQUFBQyxrQkFBQTs7TUF5REFDLGVBQUE7SUFBQTtJQUFBSixhQUFBLEdBQUFDLENBQUE7SUFBQUQsYUFBQSxHQUFBRSxDQUFBO1dBQUFFLGNBQUE7O01BZ0JBQyxnQkFBQTtJQUFBO0lBQUFMLGFBQUEsR0FBQUMsQ0FBQTtJQUFBRCxhQUFBLEdBQUFFLENBQUE7V0FBQUcsZUFBQTs7TUFNQUMsd0JBQUE7SUFBQTtJQUFBTixhQUFBLEdBQUFDLENBQUE7SUFBQUQsYUFBQSxHQUFBRSxDQUFBO1dBQUFJLHVCQUFBOztNQWpCQUMsbUJBQUE7SUFBQTtJQUFBUCxhQUFBLEdBQUFDLENBQUE7SUFBQUQsYUFBQSxHQUFBRSxDQUFBO1dBQUFLLGtCQUFBOztNQW5FQUMsaUJBQUE7SUFBQTtJQUFBUixhQUFBLEdBQUFDLENBQUE7SUFBQUQsYUFBQSxHQUFBRSxDQUFBO1dBQUFNLGdCQUFBOztNQVdUQyxnQkFBQTtJQUFBO0lBQUFULGFBQUEsR0FBQUMsQ0FBQTtJQUFBRCxhQUFBLEdBQUFFLENBQUE7V0FBQU8sZUFBQTs7Ozs7UUFyQk47OztrQ0FFaUI7OztrQ0FDQzs7O2tDQUNIOzs7a0NBQ0E7OztrQ0FDTTtBQUlyQixlQUFlRCxpQkFBaUJFLFNBQWlCO0VBQUE7RUFBQVYsYUFBQSxHQUFBQyxDQUFBO0VBQ3RELE1BQU1VLGFBQUE7RUFBQTtFQUFBLENBQUFYLGFBQUEsR0FBQUUsQ0FBQSxRQUFnQlUsTUFBQSxDQUFBQyxLQUFLLENBQUNDLG1CQUFtQixDQUFDSixTQUFBO0VBQUE7RUFBQVYsYUFBQSxHQUFBRSxDQUFBO0VBQy9DLE9BQU0sSUFBQWEsUUFBQSxDQUFBQyxPQUFPLEdBQUMsRUFBR0MsR0FBRyxDQUFDTixhQUFBLENBQWNPLElBQUksRUFBRVAsYUFBQSxDQUFjUSxLQUFLLEVBQUVSLGFBQUEsQ0FBY1MsVUFBVTtBQUN6RjtBQUVPLGVBQWVqQixtQkFBQTtFQUFBO0VBQUFILGFBQUEsR0FBQUMsQ0FBQTtFQUNwQixNQUFNVSxhQUFBO0VBQUE7RUFBQSxDQUFBWCxhQUFBLEdBQUFFLENBQUEsUUFBZ0JVLE1BQUEsQ0FBQUMsS0FBSyxDQUFDUSx3QkFBd0I7RUFBQTtFQUFBckIsYUFBQSxHQUFBRSxDQUFBO0VBQ25ELE9BQU0sSUFBQWEsUUFBQSxDQUFBQyxPQUFPLEdBQUMsRUFBR0MsR0FBRyxDQUFDTixhQUFBLENBQWNPLElBQUksRUFBRVAsYUFBQSxDQUFjUSxLQUFLLEVBQUVSLGFBQUEsQ0FBY1MsVUFBVTtBQUN6RjtBQUdPLE1BQU1YLGVBQUE7QUFBQTtBQUFBLENBQUFULGFBQUEsR0FBQUUsQ0FBQSxRQUFrQixJQUFBb0IsTUFBQSxDQUFBQyxLQUFLLEVBQUM7RUFBQTtFQUFBdkIsYUFBQSxHQUFBQyxDQUFBO0VBQ25DLE1BQU1TLFNBQUE7RUFBQTtFQUFBLENBQUFWLGFBQUEsR0FBQUUsQ0FBQTtFQUFZO0VBQUEsQ0FBQUYsYUFBQSxHQUFBd0IsQ0FBQSxXQUFDLE1BQU0sSUFBQVQsUUFBQSxDQUFBQyxPQUFPLEdBQUMsRUFBR1MsR0FBRyxDQUFDYixNQUFBLENBQUFDLEtBQUssQ0FBQ2EsaUJBQWlCLEdBQUdQLEtBQUE7RUFBQTtFQUFBLENBQUFuQixhQUFBLEdBQUF3QixDQUFBLFVBQVM7RUFBQTtFQUFBeEIsYUFBQSxHQUFBRSxDQUFBO0VBRTNFLElBQUksQ0FBQ1EsU0FBQSxFQUFXO0lBQUE7SUFBQVYsYUFBQSxHQUFBd0IsQ0FBQTtJQUFBeEIsYUFBQSxHQUFBRSxDQUFBO0lBQ2QsT0FBTztNQUNMeUIsSUFBQSxFQUFNO01BQ05DLE9BQUEsRUFBUztJQUNYO0VBQ0Y7RUFBQTtFQUFBO0lBQUE1QixhQUFBLEdBQUF3QixDQUFBO0VBQUE7RUFFQSxNQUFNSyxNQUFBO0VBQUE7RUFBQSxDQUFBN0IsYUFBQSxHQUFBRSxDQUFBLFFBQVMsTUFBTVUsTUFBQSxDQUFBQyxLQUFLLENBQUNpQixlQUFlLENBQUNwQixTQUFBO0VBRTNDO0VBQUE7RUFBQVYsYUFBQSxHQUFBRSxDQUFBO0VBQ0EsSUFBSTtJQUFBO0lBQUFGLGFBQUEsR0FBQUUsQ0FBQTtJQUNGO0lBQUk7SUFBQSxDQUFBRixhQUFBLEdBQUF3QixDQUFBLFVBQUFLLE1BQUEsQ0FBT0QsT0FBTztJQUFBO0lBQUEsQ0FBQTVCLGFBQUEsR0FBQXdCLENBQUEsVUFBSUssTUFBQSxDQUFPRCxPQUFPLENBQUNHLEtBQUssR0FBRTtNQUFBO01BQUEvQixhQUFBLEdBQUF3QixDQUFBO01BQzFDLE1BQU1iLGFBQUE7TUFBQTtNQUFBLENBQUFYLGFBQUEsR0FBQUUsQ0FBQSxRQUFnQlUsTUFBQSxDQUFBQyxLQUFLLENBQUNDLG1CQUFtQixDQUFDZSxNQUFBLENBQU9ELE9BQU8sQ0FBQ0ksRUFBRTtNQUFBO01BQUFoQyxhQUFBLEdBQUFFLENBQUE7TUFDaEUsT0FBTSxJQUFBYSxRQUFBLENBQUFDLE9BQU8sR0FBQyxFQUFHQyxHQUFHLENBQUNOLGFBQUEsQ0FBY08sSUFBSSxFQUFFUCxhQUFBLENBQWNRLEtBQUssRUFBRVIsYUFBQSxDQUFjUyxVQUFVO0lBQ3pGO0lBQUE7SUFBQTtNQUFBcEIsYUFBQSxHQUFBd0IsQ0FBQTtJQUFBO0lBQUF4QixhQUFBLEdBQUFFLENBQUE7SUFDQSxJQUFJLENBQUMyQixNQUFBLENBQU9ELE9BQU8sRUFBRTtNQUFBO01BQUE1QixhQUFBLEdBQUF3QixDQUFBO01BQ25CLE1BQU1iLGFBQUE7TUFBQTtNQUFBLENBQUFYLGFBQUEsR0FBQUUsQ0FBQSxRQUFnQlUsTUFBQSxDQUFBQyxLQUFLLENBQUNRLHdCQUF3QjtNQUFBO01BQUFyQixhQUFBLEdBQUFFLENBQUE7TUFDbkQsT0FBTSxJQUFBYSxRQUFBLENBQUFDLE9BQU8sR0FBQyxFQUFHQyxHQUFHLENBQUNOLGFBQUEsQ0FBY08sSUFBSSxFQUFFUCxhQUFBLENBQWNRLEtBQUssRUFBRVIsYUFBQSxDQUFjUyxVQUFVO0lBQ3pGO0lBQUE7SUFBQTtNQUFBcEIsYUFBQSxHQUFBd0IsQ0FBQTtJQUFBO0VBQ0YsRUFBRSxNQUFNO0lBQ047RUFBQTtFQUdGO0VBQUE7RUFBQXhCLGFBQUEsR0FBQUUsQ0FBQTtFQUNBO0VBQUk7RUFBQSxDQUFBRixhQUFBLEdBQUF3QixDQUFBLFVBQUFLLE1BQUEsQ0FBT0YsSUFBSTtFQUFBO0VBQUEsQ0FBQTNCLGFBQUEsR0FBQXdCLENBQUEsVUFBSUssTUFBQSxDQUFPRCxPQUFPLEdBQUU7SUFBQTtJQUFBNUIsYUFBQSxHQUFBd0IsQ0FBQTtJQUNqQztJQUNBLE1BQU1TLFFBQUE7SUFBQTtJQUFBLENBQUFqQyxhQUFBLEdBQUFFLENBQUEsUUFBVyxNQUFNLElBQUFnQyxNQUFBLENBQUFDLFdBQVcsRUFBQ0MsUUFBQSxDQUFTUCxNQUFBLENBQU9GLElBQUksQ0FBQ0ssRUFBRTtJQUFBO0lBQUFoQyxhQUFBLEdBQUFFLENBQUE7SUFDMUQsSUFBSSxDQUFDK0IsUUFBQSxFQUFVO01BQUE7TUFBQWpDLGFBQUEsR0FBQXdCLENBQUE7TUFBQXhCLGFBQUEsR0FBQUUsQ0FBQTtNQUNiLE9BQU87UUFBRXlCLElBQUEsRUFBTTtRQUFNQyxPQUFBLEVBQVM7TUFBSztJQUNyQztJQUFBO0lBQUE7TUFBQTVCLGFBQUEsR0FBQXdCLENBQUE7SUFBQTtJQUFBeEIsYUFBQSxHQUFBRSxDQUFBO0lBRUEsT0FBTztNQUNMeUIsSUFBQSxFQUFNTSxRQUFBO01BQ05MLE9BQUEsRUFBUztRQUNQSSxFQUFBLEVBQUlILE1BQUEsQ0FBT0QsT0FBTyxDQUFDSSxFQUFFO1FBQ3JCSyxNQUFBLEVBQVFELFFBQUEsQ0FBU1AsTUFBQSxDQUFPRixJQUFJLENBQUNLLEVBQUU7UUFDL0JNLFNBQUEsRUFBV1QsTUFBQSxDQUFPRCxPQUFPLENBQUNVO01BQzVCO0lBQ0Y7RUFDRjtFQUFBO0VBQUE7SUFBQXRDLGFBQUEsR0FBQXdCLENBQUE7RUFBQTtFQUFBeEIsYUFBQSxHQUFBRSxDQUFBO0VBRUEsT0FBTztJQUNMeUIsSUFBQSxFQUFNO0lBQ05DLE9BQUEsRUFBUztFQUNYO0FBQ0Y7QUFHTyxlQUFleEIsZUFBQTtFQUFBO0VBQUFKLGFBQUEsR0FBQUMsQ0FBQTtFQUFBRCxhQUFBLEdBQUFFLENBQUE7RUFDcEIsT0FBTyxNQUFNTyxlQUFBO0FBQ2Y7QUFHTyxlQUFlRixtQkFBbUJnQyxVQUFBO0FBQUE7QUFBQSxDQUFBdkMsYUFBQSxHQUFBd0IsQ0FBQSxVQUFxQixjQUFjO0VBQUE7RUFBQXhCLGFBQUEsR0FBQUMsQ0FBQTtFQUMxRSxNQUFNO0lBQUUwQixJQUFJO0lBQUVDO0VBQU8sQ0FBRTtFQUFBO0VBQUEsQ0FBQTVCLGFBQUEsR0FBQUUsQ0FBQSxRQUFHLE1BQU1PLGVBQUE7RUFBQTtFQUFBVCxhQUFBLEdBQUFFLENBQUE7RUFFaEM7RUFBSTtFQUFBLENBQUFGLGFBQUEsR0FBQXdCLENBQUEsWUFBQ0csSUFBQTtFQUFBO0VBQUEsQ0FBQTNCLGFBQUEsR0FBQXdCLENBQUEsV0FBUSxDQUFDSSxPQUFBLEdBQVM7SUFBQTtJQUFBNUIsYUFBQSxHQUFBd0IsQ0FBQTtJQUFBeEIsYUFBQSxHQUFBRSxDQUFBO0lBQ3JCLElBQUFzQyxXQUFBLENBQUFDLFFBQVEsRUFBQ0YsVUFBQTtFQUNYO0VBQUE7RUFBQTtJQUFBdkMsYUFBQSxHQUFBd0IsQ0FBQTtFQUFBO0VBQUF4QixhQUFBLEdBQUFFLENBQUE7RUFFQSxPQUFPO0lBQUV5QixJQUFBO0lBQU1DO0VBQVE7QUFDekI7QUFHTyxlQUFldkIsZ0JBQUE7RUFBQTtFQUFBTCxhQUFBLEdBQUFDLENBQUE7RUFDcEIsTUFBTTtJQUFFMEIsSUFBSTtJQUFFQztFQUFPLENBQUU7RUFBQTtFQUFBLENBQUE1QixhQUFBLEdBQUFFLENBQUEsUUFBRyxNQUFNTyxlQUFBO0VBQUE7RUFBQVQsYUFBQSxHQUFBRSxDQUFBO0VBQ2hDLE9BQU8sQ0FBQztFQUFFO0VBQUEsQ0FBQUYsYUFBQSxHQUFBd0IsQ0FBQSxXQUFBRyxJQUFBO0VBQUE7RUFBQSxDQUFBM0IsYUFBQSxHQUFBd0IsQ0FBQSxXQUFRSSxPQUFNO0FBQzFCO0FBR08sZUFBZXRCLHdCQUF3QmlDLFVBQUE7QUFBQTtBQUFBLENBQUF2QyxhQUFBLEdBQUF3QixDQUFBLFdBQXFCLFlBQVk7RUFBQTtFQUFBeEIsYUFBQSxHQUFBQyxDQUFBO0VBQzdFLE1BQU07SUFBRTBCLElBQUk7SUFBRUM7RUFBTyxDQUFFO0VBQUE7RUFBQSxDQUFBNUIsYUFBQSxHQUFBRSxDQUFBLFFBQUcsTUFBTU8sZUFBQTtFQUFBO0VBQUFULGFBQUEsR0FBQUUsQ0FBQTtFQUVoQztFQUFJO0VBQUEsQ0FBQUYsYUFBQSxHQUFBd0IsQ0FBQSxXQUFBRyxJQUFBO0VBQUE7RUFBQSxDQUFBM0IsYUFBQSxHQUFBd0IsQ0FBQSxXQUFRSSxPQUFBLEdBQVM7SUFBQTtJQUFBNUIsYUFBQSxHQUFBd0IsQ0FBQTtJQUFBeEIsYUFBQSxHQUFBRSxDQUFBO0lBQ25CLElBQUFzQyxXQUFBLENBQUFDLFFBQVEsRUFBQ0YsVUFBQTtFQUNYO0VBQUE7RUFBQTtJQUFBdkMsYUFBQSxHQUFBd0IsQ0FBQTtFQUFBO0FBQ0Y7QUFHTyxlQUFlekIsdUJBQUE7RUFBQTtFQUFBQyxhQUFBLEdBQUFDLENBQUE7RUFBQUQsYUFBQSxHQUFBRSxDQUFBO0VBQ3BCLElBQUk7SUFBQTtJQUFBRixhQUFBLEdBQUFFLENBQUE7SUFDRjtJQUNBO0lBQ0F3QyxPQUFBLENBQVFDLEdBQUcsQ0FBQztFQUNkLEVBQUUsT0FBT0MsS0FBQSxFQUFPO0lBQUE7SUFBQTVDLGFBQUEsR0FBQUUsQ0FBQTtJQUNkd0MsT0FBQSxDQUFRRSxLQUFLLENBQUMsMEJBQTBCQSxLQUFBO0VBQzFDO0FBQ0YiLCJpZ25vcmVMaXN0IjpbXX0=