18f2eaa18b5cb7cd991f289f476c46ae
// Plant Management API Endpoint Tests
// Tests GET /api/plants, POST /api/plant-instances, PUT /api/plant-instances/[id] endpoints
"use strict";
// Mock the auth functions
jest.mock('@/lib/auth/server', ()=>({
        validateRequest: jest.fn(),
        validateVerifiedRequest: jest.fn()
    }));
// Mock the database queries
jest.mock('@/lib/db/queries/plant-taxonomy', ()=>({
        createPlant: jest.fn(),
        getPlantsWithStats: jest.fn(),
        validatePlantTaxonomy: jest.fn()
    }));
jest.mock('@/lib/db/queries/plant-instances', ()=>({
        PlantInstanceQueries: {
            getWithFilters: jest.fn(),
            create: jest.fn(),
            getEnhancedById: jest.fn(),
            update: jest.fn(),
            delete: jest.fn()
        }
    }));
// Mock validation schemas
jest.mock('@/lib/validation/plant-schemas', ()=>({
        createPlantSchema: {
            parse: jest.fn()
        },
        plantFilterSchema: {
            parse: jest.fn()
        },
        createPlantInstanceSchema: {
            parse: jest.fn()
        },
        plantInstanceFilterSchema: {
            parse: jest.fn()
        },
        updatePlantInstanceSchema: {
            parse: jest.fn()
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _server = require("next/server");
const _route = require("../../app/api/plants/route");
const _route1 = require("../../app/api/plant-instances/route");
const _route2 = require("../../app/api/plant-instances/[id]/route");
const _userfactory = require("../../test-utils/factories/user-factory.js");
const _plantfactory = require("../../test-utils/factories/plant-factory.js");
const _apihelpers = require("../../test-utils/helpers/api-helpers.js");
const _server1 = require("../../lib/auth/server");
const _planttaxonomy = require("../../lib/db/queries/plant-taxonomy");
const _plantinstances = require("../../lib/db/queries/plant-instances");
const _plantschemas = require("../../lib/validation/plant-schemas");
describe('Plant Management API Endpoints', ()=>{
    let testUser;
    let testSession;
    beforeEach(()=>{
        jest.clearAllMocks();
        (0, _apihelpers.resetApiMocks)();
        testUser = (0, _userfactory.createTestUser)();
        testSession = (0, _userfactory.createTestSession)(testUser);
        // Default auth mock
        _server1.validateRequest.mockResolvedValue({
            user: testUser,
            session: testSession
        });
        _server1.validateVerifiedRequest.mockResolvedValue({
            user: testUser,
            session: testSession
        });
    });
    afterEach(()=>{
        jest.restoreAllMocks();
    });
    describe('GET /api/plants - Plant filtering and pagination', ()=>{
        it('should return plants with default filters', async ()=>{
            // Arrange
            const mockPlants = [
                {
                    ...(0, _plantfactory.createTestPlant)({
                        family: 'Araceae',
                        genus: 'Monstera'
                    }),
                    id: 1
                },
                {
                    ...(0, _plantfactory.createTestPlant)({
                        family: 'Araceae',
                        genus: 'Philodendron'
                    }),
                    id: 2
                }
            ];
            _plantschemas.plantFilterSchema.parse.mockReturnValue({
                family: undefined,
                genus: undefined,
                isVerified: undefined,
                createdBy: undefined,
                limit: 20,
                offset: 0
            });
            _planttaxonomy.getPlantsWithStats.mockResolvedValue(mockPlants);
            const request = new _server.NextRequest('http://localhost:3000/api/plants');
            // Act
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData).toEqual({
                success: true,
                data: mockPlants,
                metadata: {
                    operation: 'search',
                    timestamp: expect.any(String),
                    userId: testUser.id
                }
            });
            expect(_server1.validateRequest).toHaveBeenCalled();
            expect(_plantschemas.plantFilterSchema.parse).toHaveBeenCalledWith({
                family: undefined,
                genus: undefined,
                isVerified: undefined,
                createdBy: undefined,
                limit: 20,
                offset: 0
            });
            expect(_planttaxonomy.getPlantsWithStats).toHaveBeenCalledWith(expect.any(Object), testUser.id);
        });
        it('should return plants with family filter', async ()=>{
            // Arrange
            const mockPlants = [
                {
                    ...(0, _plantfactory.createTestPlant)({
                        family: 'Araceae',
                        genus: 'Monstera'
                    }),
                    id: 1
                }
            ];
            _plantschemas.plantFilterSchema.parse.mockReturnValue({
                family: 'Araceae',
                genus: undefined,
                isVerified: undefined,
                createdBy: undefined,
                limit: 20,
                offset: 0
            });
            _planttaxonomy.getPlantsWithStats.mockResolvedValue(mockPlants);
            const request = new _server.NextRequest('http://localhost:3000/api/plants?family=Araceae');
            // Act
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData.success).toBe(true);
            expect(responseData.data).toEqual(mockPlants);
            expect(_plantschemas.plantFilterSchema.parse).toHaveBeenCalledWith({
                family: 'Araceae',
                genus: undefined,
                isVerified: undefined,
                createdBy: undefined,
                limit: 20,
                offset: 0
            });
        });
        it('should return plants with pagination parameters', async ()=>{
            // Arrange
            const mockPlants = [
                {
                    ...(0, _plantfactory.createTestPlant)(),
                    id: 1
                }
            ];
            _plantschemas.plantFilterSchema.parse.mockReturnValue({
                family: undefined,
                genus: undefined,
                isVerified: undefined,
                createdBy: undefined,
                limit: 10,
                offset: 20
            });
            _planttaxonomy.getPlantsWithStats.mockResolvedValue(mockPlants);
            const request = new _server.NextRequest('http://localhost:3000/api/plants?limit=10&offset=20');
            // Act
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData.success).toBe(true);
            expect(_plantschemas.plantFilterSchema.parse).toHaveBeenCalledWith({
                family: undefined,
                genus: undefined,
                isVerified: undefined,
                createdBy: undefined,
                limit: 10,
                offset: 20
            });
        });
        it('should return unauthorized error when user not authenticated', async ()=>{
            // Arrange
            _server1.validateRequest.mockResolvedValue({
                user: null,
                session: null
            });
            const request = new _server.NextRequest('http://localhost:3000/api/plants');
            // Act
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(401);
            expect(responseData).toEqual({
                error: 'Unauthorized'
            });
            expect(_planttaxonomy.getPlantsWithStats).not.toHaveBeenCalled();
        });
        it('should return validation error for invalid filter parameters', async ()=>{
            // Arrange
            const validationError = new Error('Validation failed');
            validationError.name = 'ZodError';
            validationError.issues = [
                {
                    path: [
                        'limit'
                    ],
                    message: 'Limit must be a positive number'
                }
            ];
            _plantschemas.plantFilterSchema.parse.mockImplementation(()=>{
                throw validationError;
            });
            const request = new _server.NextRequest('http://localhost:3000/api/plants?limit=invalid');
            // Act
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData).toEqual({
                error: 'Invalid filter parameters',
                details: validationError.issues
            });
            expect(_planttaxonomy.getPlantsWithStats).not.toHaveBeenCalled();
        });
        it('should handle database errors gracefully', async ()=>{
            // Arrange
            _plantschemas.plantFilterSchema.parse.mockReturnValue({
                limit: 20,
                offset: 0
            });
            _planttaxonomy.getPlantsWithStats.mockRejectedValue(new Error('Database connection failed'));
            const request = new _server.NextRequest('http://localhost:3000/api/plants');
            // Act
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(responseData).toEqual({
                error: 'Internal server error'
            });
        });
    });
    describe('POST /api/plant-instances - Plant instance creation with data validation', ()=>{
        it('should create plant instance with valid JSON data', async ()=>{
            // Arrange
            const testPlant = (0, _plantfactory.createTestPlant)();
            const requestBody = {
                plantId: testPlant.id,
                nickname: 'My Monstera',
                location: 'Living Room',
                notes: 'Beautiful plant',
                isActive: true
            };
            const expectedInstanceData = {
                ...requestBody,
                userId: testUser.id,
                lastFertilized: null,
                lastRepot: null
            };
            const createdInstance = (0, _plantfactory.createTestPlantInstance)({
                ...expectedInstanceData,
                id: 1
            });
            const enhancedInstance = {
                ...createdInstance,
                plant: testPlant
            };
            _plantschemas.createPlantInstanceSchema.parse.mockReturnValue(expectedInstanceData);
            _plantinstances.PlantInstanceQueries.create.mockResolvedValue(createdInstance);
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(enhancedInstance);
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: JSON.stringify(requestBody),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(201);
            expect(responseData).toEqual({
                success: true,
                data: enhancedInstance
            });
            expect(_plantschemas.createPlantInstanceSchema.parse).toHaveBeenCalledWith(expectedInstanceData);
            expect(_plantinstances.PlantInstanceQueries.create).toHaveBeenCalledWith(expectedInstanceData);
            expect(_plantinstances.PlantInstanceQueries.getEnhancedById).toHaveBeenCalledWith(createdInstance.id);
        });
        it('should create plant instance with FormData (file upload)', async ()=>{
            // Arrange
            const testPlant = (0, _plantfactory.createTestPlant)();
            const formData = new FormData();
            formData.append('plantId', testPlant.id.toString());
            formData.append('nickname', 'My Monstera');
            formData.append('location', 'Living Room');
            formData.append('isActive', 'true');
            // Mock file
            const mockFile = new File([
                'test image'
            ], 'test.jpg', {
                type: 'image/jpeg'
            });
            formData.append('imageFiles[0]', mockFile);
            const expectedInstanceData = {
                plantId: testPlant.id,
                nickname: 'My Monstera',
                location: 'Living Room',
                isActive: true,
                userId: testUser.id,
                lastFertilized: null,
                lastRepot: null,
                images: [
                    'data:image/jpeg;base64,dGVzdCBpbWFnZQ=='
                ]
            };
            const createdInstance = (0, _plantfactory.createTestPlantInstance)(expectedInstanceData);
            const enhancedInstance = {
                ...createdInstance,
                plant: testPlant
            };
            _plantschemas.createPlantInstanceSchema.parse.mockReturnValue(expectedInstanceData);
            _plantinstances.PlantInstanceQueries.create.mockResolvedValue(createdInstance);
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(enhancedInstance);
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: formData
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(201);
            expect(responseData.success).toBe(true);
            expect(responseData.data).toEqual(enhancedInstance);
            expect(_plantinstances.PlantInstanceQueries.create).toHaveBeenCalledWith(expectedInstanceData);
        });
        it('should return validation error for invalid plant instance data', async ()=>{
            // Arrange
            const requestBody = {
                plantId: 'invalid',
                nickname: '',
                location: ''
            };
            const validationError = new Error('Validation failed');
            validationError.name = 'ZodError';
            validationError.issues = [
                {
                    path: [
                        'plantId'
                    ],
                    message: 'Plant ID must be a number'
                },
                {
                    path: [
                        'nickname'
                    ],
                    message: 'Nickname is required'
                }
            ];
            _plantschemas.createPlantInstanceSchema.parse.mockImplementation(()=>{
                throw validationError;
            });
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: JSON.stringify(requestBody),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData).toEqual({
                success: false,
                error: 'Validation failed',
                details: validationError.issues
            });
            expect(_plantinstances.PlantInstanceQueries.create).not.toHaveBeenCalled();
        });
        it('should return unauthorized error when user not authenticated', async ()=>{
            // Arrange
            _server1.validateVerifiedRequest.mockResolvedValue({
                user: null,
                error: 'Unauthorized'
            });
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: JSON.stringify({
                    plantId: 1
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(401);
            expect(responseData).toEqual({
                success: false,
                error: 'Unauthorized'
            });
            expect(_plantinstances.PlantInstanceQueries.create).not.toHaveBeenCalled();
        });
        it('should handle empty request body', async ()=>{
            // Arrange
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData).toEqual({
                success: false,
                error: 'Request body is required'
            });
            expect(_plantinstances.PlantInstanceQueries.create).not.toHaveBeenCalled();
        });
        it('should handle malformed JSON', async ()=>{
            // Arrange
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: 'invalid json',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData).toEqual({
                success: false,
                error: 'Invalid JSON in request body'
            });
            expect(_plantinstances.PlantInstanceQueries.create).not.toHaveBeenCalled();
        });
        it('should calculate fertilizer due date from schedule', async ()=>{
            // Arrange
            const requestBody = {
                plantId: 1,
                nickname: 'Test Plant',
                location: 'Test Location',
                fertilizerSchedule: '2 weeks'
            };
            const expectedInstanceData = {
                ...requestBody,
                userId: testUser.id,
                lastFertilized: null,
                lastRepot: null,
                fertilizerDue: expect.any(Date)
            };
            const createdInstance = (0, _plantfactory.createTestPlantInstance)(expectedInstanceData);
            const enhancedInstance = {
                ...createdInstance,
                plant: (0, _plantfactory.createTestPlant)()
            };
            _plantschemas.createPlantInstanceSchema.parse.mockReturnValue(expectedInstanceData);
            _plantinstances.PlantInstanceQueries.create.mockResolvedValue(createdInstance);
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(enhancedInstance);
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: JSON.stringify(requestBody),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(201);
            expect(responseData.success).toBe(true);
            // Verify fertilizer due date was calculated (should be 2 weeks from now)
            const callArgs = _plantinstances.PlantInstanceQueries.create.mock.calls[0][0];
            expect(callArgs.fertilizerDue).toBeInstanceOf(Date);
            const now = new Date();
            const expectedDue = new Date(now);
            expectedDue.setDate(expectedDue.getDate() + 14); // 2 weeks
            // Allow for small time differences in test execution
            const timeDiff = Math.abs(callArgs.fertilizerDue.getTime() - expectedDue.getTime());
            expect(timeDiff).toBeLessThan(1000); // Less than 1 second difference
        });
    });
    describe('PUT /api/plant-instances/[id] - Plant instance updates with authorization checks', ()=>{
        it('should update plant instance with valid data and authorization', async ()=>{
            // Arrange
            const testPlant = (0, _plantfactory.createTestPlant)();
            const existingInstance = (0, _plantfactory.createTestPlantInstance)({
                id: 1,
                userId: testUser.id,
                plantId: testPlant.id
            });
            const updateData = {
                nickname: 'Updated Nickname',
                location: 'New Location',
                notes: 'Updated notes'
            };
            const expectedUpdateData = {
                ...updateData,
                id: 1,
                userId: testUser.id,
                lastFertilized: null,
                lastRepot: null
            };
            const updatedInstance = {
                ...existingInstance,
                ...updateData
            };
            const enhancedInstance = {
                ...updatedInstance,
                plant: testPlant
            };
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValueOnce(existingInstance);
            _plantschemas.updatePlantInstanceSchema.parse.mockReturnValue(expectedUpdateData);
            _plantinstances.PlantInstanceQueries.update.mockResolvedValue(updatedInstance);
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValueOnce(enhancedInstance);
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'PUT',
                body: JSON.stringify(updateData),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const params = Promise.resolve({
                id: '1'
            });
            // Act
            const response = await (0, _route2.PUT)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData).toEqual(enhancedInstance);
            expect(_plantinstances.PlantInstanceQueries.getEnhancedById).toHaveBeenCalledWith(1);
            expect(_plantschemas.updatePlantInstanceSchema.parse).toHaveBeenCalledWith(expectedUpdateData);
            expect(_plantinstances.PlantInstanceQueries.update).toHaveBeenCalledWith(1, updateData);
        });
        it('should return forbidden error when user does not own plant instance', async ()=>{
            // Arrange
            const otherUser = (0, _userfactory.createTestUser)({
                id: 999
            });
            const existingInstance = (0, _plantfactory.createTestPlantInstance)({
                id: 1,
                userId: otherUser.id
            });
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(existingInstance);
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'PUT',
                body: JSON.stringify({
                    nickname: 'Updated'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const params = Promise.resolve({
                id: '1'
            });
            // Act
            const response = await (0, _route2.PUT)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(403);
            expect(responseData).toEqual({
                error: 'Forbidden'
            });
            expect(_plantinstances.PlantInstanceQueries.update).not.toHaveBeenCalled();
        });
        it('should return not found error when plant instance does not exist', async ()=>{
            // Arrange
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(null);
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances/999', {
                method: 'PUT',
                body: JSON.stringify({
                    nickname: 'Updated'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const params = Promise.resolve({
                id: '999'
            });
            // Act
            const response = await (0, _route2.PUT)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(404);
            expect(responseData).toEqual({
                error: 'Plant instance not found'
            });
            expect(_plantinstances.PlantInstanceQueries.update).not.toHaveBeenCalled();
        });
        it('should return bad request error for invalid plant instance ID', async ()=>{
            // Arrange
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances/invalid', {
                method: 'PUT',
                body: JSON.stringify({
                    nickname: 'Updated'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const params = Promise.resolve({
                id: 'invalid'
            });
            // Act
            const response = await (0, _route2.PUT)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData).toEqual({
                error: 'Invalid plant instance ID'
            });
            expect(_plantinstances.PlantInstanceQueries.getEnhancedById).not.toHaveBeenCalled();
        });
        it('should return unauthorized error when user not authenticated', async ()=>{
            // Arrange
            _server1.validateRequest.mockResolvedValue({
                user: null,
                session: null
            });
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'PUT',
                body: JSON.stringify({
                    nickname: 'Updated'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const params = Promise.resolve({
                id: '1'
            });
            // Act
            const response = await (0, _route2.PUT)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(401);
            expect(responseData).toEqual({
                error: 'Unauthorized'
            });
            expect(_plantinstances.PlantInstanceQueries.getEnhancedById).not.toHaveBeenCalled();
        });
        it('should handle FormData updates with file uploads', async ()=>{
            // Arrange
            const testPlant = (0, _plantfactory.createTestPlant)();
            const existingInstance = (0, _plantfactory.createTestPlantInstance)({
                id: 1,
                userId: testUser.id,
                plantId: testPlant.id
            });
            const formData = new FormData();
            formData.append('nickname', 'Updated Nickname');
            formData.append('location', 'New Location');
            formData.append('existingImages[0]', 'existing-image-url');
            const mockFile = new File([
                'new image'
            ], 'new.jpg', {
                type: 'image/jpeg'
            });
            formData.append('imageFiles[0]', mockFile);
            const expectedUpdateData = {
                nickname: 'Updated Nickname',
                location: 'New Location',
                images: [
                    'existing-image-url',
                    'data:image/jpeg;base64,bmV3IGltYWdl'
                ],
                id: 1,
                userId: testUser.id,
                lastFertilized: null,
                lastRepot: null
            };
            const updatedInstance = {
                ...existingInstance,
                ...expectedUpdateData
            };
            const enhancedInstance = {
                ...updatedInstance,
                plant: testPlant
            };
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValueOnce(existingInstance);
            _plantschemas.updatePlantInstanceSchema.parse.mockReturnValue(expectedUpdateData);
            _plantinstances.PlantInstanceQueries.update.mockResolvedValue(updatedInstance);
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValueOnce(enhancedInstance);
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'PUT',
                body: formData
            });
            const params = Promise.resolve({
                id: '1'
            });
            // Act
            const response = await (0, _route2.PUT)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData).toEqual(enhancedInstance);
            // Verify the update was called with correct data (excluding id and userId)
            const { id, userId, ...updateDataWithoutIds } = expectedUpdateData;
            expect(_plantinstances.PlantInstanceQueries.update).toHaveBeenCalledWith(1, updateDataWithoutIds);
        });
        it('should handle validation errors during update', async ()=>{
            // Arrange
            const existingInstance = (0, _plantfactory.createTestPlantInstance)({
                id: 1,
                userId: testUser.id
            });
            const validationError = new Error('Validation failed');
            validationError.name = 'ZodError';
            validationError.issues = [
                {
                    path: [
                        'nickname'
                    ],
                    message: 'Nickname is required'
                }
            ];
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(existingInstance);
            _plantschemas.updatePlantInstanceSchema.parse.mockImplementation(()=>{
                throw validationError;
            });
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'PUT',
                body: JSON.stringify({
                    nickname: ''
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const params = Promise.resolve({
                id: '1'
            });
            // Act
            const response = await (0, _route2.PUT)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData.error).toContain('Invalid plant instance data');
            expect(_plantinstances.PlantInstanceQueries.update).not.toHaveBeenCalled();
        });
    });
    describe('Plant Management Integration Tests', ()=>{
        it('should handle complete plant management workflow: create -> read -> update -> delete', async ()=>{
            const testPlant = (0, _plantfactory.createTestPlant)();
            // Step 1: Create plant instance
            const createData = {
                plantId: testPlant.id,
                nickname: 'Test Plant',
                location: 'Test Location'
            };
            const createdInstance = (0, _plantfactory.createTestPlantInstance)({
                id: 1,
                ...createData,
                userId: testUser.id
            });
            const enhancedInstance = {
                ...createdInstance,
                plant: testPlant
            };
            _plantschemas.createPlantInstanceSchema.parse.mockReturnValue({
                ...createData,
                userId: testUser.id,
                lastFertilized: null,
                lastRepot: null
            });
            _plantinstances.PlantInstanceQueries.create.mockResolvedValue(createdInstance);
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(enhancedInstance);
            const createRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: JSON.stringify(createData),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const createResponse = await (0, _route1.POST)(createRequest);
            const createResponseData = await createResponse.json();
            expect(createResponse.status).toBe(201);
            expect(createResponseData.success).toBe(true);
            // Step 2: Read plant instance
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(enhancedInstance);
            const readRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances/1');
            const readParams = Promise.resolve({
                id: '1'
            });
            const readResponse = await (0, _route2.GET)(readRequest, {
                params: readParams
            });
            const readResponseData = await readResponse.json();
            expect(readResponse.status).toBe(200);
            expect(readResponseData).toEqual(enhancedInstance);
            // Step 3: Update plant instance
            const updateData = {
                nickname: 'Updated Plant'
            };
            const updatedInstance = {
                ...enhancedInstance,
                ...updateData
            };
            _plantschemas.updatePlantInstanceSchema.parse.mockReturnValue({
                ...updateData,
                id: 1,
                userId: testUser.id,
                lastFertilized: null,
                lastRepot: null
            });
            _plantinstances.PlantInstanceQueries.update.mockResolvedValue(updatedInstance);
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(updatedInstance);
            const updateRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'PUT',
                body: JSON.stringify(updateData),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const updateParams = Promise.resolve({
                id: '1'
            });
            const updateResponse = await (0, _route2.PUT)(updateRequest, {
                params: updateParams
            });
            const updateResponseData = await updateResponse.json();
            expect(updateResponse.status).toBe(200);
            expect(updateResponseData.nickname).toBe('Updated Plant');
            // Step 4: Delete plant instance
            _plantinstances.PlantInstanceQueries.delete.mockResolvedValue(true);
            const deleteRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'DELETE'
            });
            const deleteParams = Promise.resolve({
                id: '1'
            });
            const deleteResponse = await (0, _route2.DELETE)(deleteRequest, {
                params: deleteParams
            });
            const deleteResponseData = await deleteResponse.json();
            expect(deleteResponse.status).toBe(200);
            expect(deleteResponseData).toEqual({
                success: true,
                message: 'Plant instance deleted successfully'
            });
            // Verify all operations were called
            expect(_plantinstances.PlantInstanceQueries.create).toHaveBeenCalled();
            expect(_plantinstances.PlantInstanceQueries.update).toHaveBeenCalled();
            expect(_plantinstances.PlantInstanceQueries.delete).toHaveBeenCalledWith(1);
        });
        it('should handle authorization checks across all endpoints', async ()=>{
            // Test unauthorized access to all endpoints
            _server1.validateRequest.mockResolvedValue({
                user: null,
                session: null
            });
            // GET /api/plants
            const getPlantsRequest = new _server.NextRequest('http://localhost:3000/api/plants');
            const getPlantsResponse = await (0, _route.GET)(getPlantsRequest);
            expect(getPlantsResponse.status).toBe(401);
            // POST /api/plant-instances
            const createRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: JSON.stringify({}),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const createResponse = await (0, _route1.POST)(createRequest);
            expect(createResponse.status).toBe(401);
            // GET /api/plant-instances/1
            const getRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances/1');
            const getParams = Promise.resolve({
                id: '1'
            });
            const getResponse = await (0, _route2.GET)(getRequest, {
                params: getParams
            });
            expect(getResponse.status).toBe(401);
            // PUT /api/plant-instances/1
            const updateRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'PUT',
                body: JSON.stringify({}),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const updateParams = Promise.resolve({
                id: '1'
            });
            const updateResponse = await (0, _route2.PUT)(updateRequest, {
                params: updateParams
            });
            expect(updateResponse.status).toBe(401);
            // DELETE /api/plant-instances/1
            const deleteRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'DELETE'
            });
            const deleteParams = Promise.resolve({
                id: '1'
            });
            const deleteResponse = await (0, _route2.DELETE)(deleteRequest, {
                params: deleteParams
            });
            expect(deleteResponse.status).toBe(401);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdGVmYW5iZWtrZXIvcHJvamVjdHMvZmFuY3ktcGxhbnRpZXMvc3JjL19fdGVzdHNfXy9hcGkvcGxhbnQtbWFuYWdlbWVudC50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFBsYW50IE1hbmFnZW1lbnQgQVBJIEVuZHBvaW50IFRlc3RzXG4vLyBUZXN0cyBHRVQgL2FwaS9wbGFudHMsIFBPU1QgL2FwaS9wbGFudC1pbnN0YW5jZXMsIFBVVCAvYXBpL3BsYW50LWluc3RhbmNlcy9baWRdIGVuZHBvaW50c1xuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgR0VUIGFzIGdldFBsYW50c0hhbmRsZXIsIFBPU1QgYXMgY3JlYXRlUGxhbnRIYW5kbGVyIH0gZnJvbSAnQC9hcHAvYXBpL3BsYW50cy9yb3V0ZSc7XG5pbXBvcnQgeyBHRVQgYXMgZ2V0UGxhbnRJbnN0YW5jZXNIYW5kbGVyLCBQT1NUIGFzIGNyZWF0ZVBsYW50SW5zdGFuY2VIYW5kbGVyIH0gZnJvbSAnQC9hcHAvYXBpL3BsYW50LWluc3RhbmNlcy9yb3V0ZSc7XG5pbXBvcnQgeyBHRVQgYXMgZ2V0UGxhbnRJbnN0YW5jZUhhbmRsZXIsIFBVVCBhcyB1cGRhdGVQbGFudEluc3RhbmNlSGFuZGxlciwgREVMRVRFIGFzIGRlbGV0ZVBsYW50SW5zdGFuY2VIYW5kbGVyIH0gZnJvbSAnQC9hcHAvYXBpL3BsYW50LWluc3RhbmNlcy9baWRdL3JvdXRlJztcbmltcG9ydCB7IGNyZWF0ZVRlc3RVc2VyLCBjcmVhdGVUZXN0U2Vzc2lvbiB9IGZyb20gJ0AvdGVzdC11dGlscy9mYWN0b3JpZXMvdXNlci1mYWN0b3J5JztcbmltcG9ydCB7IGNyZWF0ZVRlc3RQbGFudCwgY3JlYXRlVGVzdFBsYW50SW5zdGFuY2UgfSBmcm9tICdAL3Rlc3QtdXRpbHMvZmFjdG9yaWVzL3BsYW50LWZhY3RvcnknO1xuaW1wb3J0IHsgcmVzZXRBcGlNb2NrcyB9IGZyb20gJ0AvdGVzdC11dGlscy9oZWxwZXJzL2FwaS1oZWxwZXJzJztcblxuLy8gTW9jayB0aGUgYXV0aCBmdW5jdGlvbnNcbmplc3QubW9jaygnQC9saWIvYXV0aC9zZXJ2ZXInLCAoKSA9PiAoe1xuICB2YWxpZGF0ZVJlcXVlc3Q6IGplc3QuZm4oKSxcbiAgdmFsaWRhdGVWZXJpZmllZFJlcXVlc3Q6IGplc3QuZm4oKSxcbn0pKTtcblxuLy8gTW9jayB0aGUgZGF0YWJhc2UgcXVlcmllc1xuamVzdC5tb2NrKCdAL2xpYi9kYi9xdWVyaWVzL3BsYW50LXRheG9ub215JywgKCkgPT4gKHtcbiAgY3JlYXRlUGxhbnQ6IGplc3QuZm4oKSxcbiAgZ2V0UGxhbnRzV2l0aFN0YXRzOiBqZXN0LmZuKCksXG4gIHZhbGlkYXRlUGxhbnRUYXhvbm9teTogamVzdC5mbigpLFxufSkpO1xuXG5qZXN0Lm1vY2soJ0AvbGliL2RiL3F1ZXJpZXMvcGxhbnQtaW5zdGFuY2VzJywgKCkgPT4gKHtcbiAgUGxhbnRJbnN0YW5jZVF1ZXJpZXM6IHtcbiAgICBnZXRXaXRoRmlsdGVyczogamVzdC5mbigpLFxuICAgIGNyZWF0ZTogamVzdC5mbigpLFxuICAgIGdldEVuaGFuY2VkQnlJZDogamVzdC5mbigpLFxuICAgIHVwZGF0ZTogamVzdC5mbigpLFxuICAgIGRlbGV0ZTogamVzdC5mbigpLFxuICB9LFxufSkpO1xuXG4vLyBNb2NrIHZhbGlkYXRpb24gc2NoZW1hc1xuamVzdC5tb2NrKCdAL2xpYi92YWxpZGF0aW9uL3BsYW50LXNjaGVtYXMnLCAoKSA9PiAoe1xuICBjcmVhdGVQbGFudFNjaGVtYToge1xuICAgIHBhcnNlOiBqZXN0LmZuKCksXG4gIH0sXG4gIHBsYW50RmlsdGVyU2NoZW1hOiB7XG4gICAgcGFyc2U6IGplc3QuZm4oKSxcbiAgfSxcbiAgY3JlYXRlUGxhbnRJbnN0YW5jZVNjaGVtYToge1xuICAgIHBhcnNlOiBqZXN0LmZuKCksXG4gIH0sXG4gIHBsYW50SW5zdGFuY2VGaWx0ZXJTY2hlbWE6IHtcbiAgICBwYXJzZTogamVzdC5mbigpLFxuICB9LFxuICB1cGRhdGVQbGFudEluc3RhbmNlU2NoZW1hOiB7XG4gICAgcGFyc2U6IGplc3QuZm4oKSxcbiAgfSxcbn0pKTtcblxuLy8gSW1wb3J0IG1vY2tlZCBmdW5jdGlvbnNcbmltcG9ydCB7IHZhbGlkYXRlUmVxdWVzdCwgdmFsaWRhdGVWZXJpZmllZFJlcXVlc3QgfSBmcm9tICdAL2xpYi9hdXRoL3NlcnZlcic7XG5pbXBvcnQgeyBjcmVhdGVQbGFudCwgZ2V0UGxhbnRzV2l0aFN0YXRzLCB2YWxpZGF0ZVBsYW50VGF4b25vbXkgfSBmcm9tICdAL2xpYi9kYi9xdWVyaWVzL3BsYW50LXRheG9ub215JztcbmltcG9ydCB7IFBsYW50SW5zdGFuY2VRdWVyaWVzIH0gZnJvbSAnQC9saWIvZGIvcXVlcmllcy9wbGFudC1pbnN0YW5jZXMnO1xuaW1wb3J0IHsgXG4gIGNyZWF0ZVBsYW50U2NoZW1hLCBcbiAgcGxhbnRGaWx0ZXJTY2hlbWEsIFxuICBjcmVhdGVQbGFudEluc3RhbmNlU2NoZW1hLCBcbiAgcGxhbnRJbnN0YW5jZUZpbHRlclNjaGVtYSxcbiAgdXBkYXRlUGxhbnRJbnN0YW5jZVNjaGVtYSBcbn0gZnJvbSAnQC9saWIvdmFsaWRhdGlvbi9wbGFudC1zY2hlbWFzJztcblxuZGVzY3JpYmUoJ1BsYW50IE1hbmFnZW1lbnQgQVBJIEVuZHBvaW50cycsICgpID0+IHtcbiAgbGV0IHRlc3RVc2VyO1xuICBsZXQgdGVzdFNlc3Npb247XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgcmVzZXRBcGlNb2NrcygpO1xuICAgIFxuICAgIHRlc3RVc2VyID0gY3JlYXRlVGVzdFVzZXIoKTtcbiAgICB0ZXN0U2Vzc2lvbiA9IGNyZWF0ZVRlc3RTZXNzaW9uKHRlc3RVc2VyKTtcbiAgICBcbiAgICAvLyBEZWZhdWx0IGF1dGggbW9ja1xuICAgIHZhbGlkYXRlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICB1c2VyOiB0ZXN0VXNlcixcbiAgICAgIHNlc3Npb246IHRlc3RTZXNzaW9uLFxuICAgIH0pO1xuICAgIFxuICAgIHZhbGlkYXRlVmVyaWZpZWRSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIHVzZXI6IHRlc3RVc2VyLFxuICAgICAgc2Vzc2lvbjogdGVzdFNlc3Npb24sXG4gICAgfSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5yZXN0b3JlQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvYXBpL3BsYW50cyAtIFBsYW50IGZpbHRlcmluZyBhbmQgcGFnaW5hdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBwbGFudHMgd2l0aCBkZWZhdWx0IGZpbHRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrUGxhbnRzID0gW1xuICAgICAgICB7IC4uLmNyZWF0ZVRlc3RQbGFudCh7IGZhbWlseTogJ0FyYWNlYWUnLCBnZW51czogJ01vbnN0ZXJhJyB9KSwgaWQ6IDEgfSxcbiAgICAgICAgeyAuLi5jcmVhdGVUZXN0UGxhbnQoeyBmYW1pbHk6ICdBcmFjZWFlJywgZ2VudXM6ICdQaGlsb2RlbmRyb24nIH0pLCBpZDogMiB9LFxuICAgICAgXTtcblxuICAgICAgcGxhbnRGaWx0ZXJTY2hlbWEucGFyc2UubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgZmFtaWx5OiB1bmRlZmluZWQsXG4gICAgICAgIGdlbnVzOiB1bmRlZmluZWQsXG4gICAgICAgIGlzVmVyaWZpZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgY3JlYXRlZEJ5OiB1bmRlZmluZWQsXG4gICAgICAgIGxpbWl0OiAyMCxcbiAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgfSk7XG5cbiAgICAgIGdldFBsYW50c1dpdGhTdGF0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUGxhbnRzKTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudHMnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFBsYW50c0hhbmRsZXIocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IG1vY2tQbGFudHMsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgb3BlcmF0aW9uOiAnc2VhcmNoJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgICAgICB1c2VySWQ6IHRlc3RVc2VyLmlkLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdCh2YWxpZGF0ZVJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChwbGFudEZpbHRlclNjaGVtYS5wYXJzZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBmYW1pbHk6IHVuZGVmaW5lZCxcbiAgICAgICAgZ2VudXM6IHVuZGVmaW5lZCxcbiAgICAgICAgaXNWZXJpZmllZDogdW5kZWZpbmVkLFxuICAgICAgICBjcmVhdGVkQnk6IHVuZGVmaW5lZCxcbiAgICAgICAgbGltaXQ6IDIwLFxuICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChnZXRQbGFudHNXaXRoU3RhdHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdC5hbnkoT2JqZWN0KSwgdGVzdFVzZXIuaWQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcGxhbnRzIHdpdGggZmFtaWx5IGZpbHRlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vY2tQbGFudHMgPSBbXG4gICAgICAgIHsgLi4uY3JlYXRlVGVzdFBsYW50KHsgZmFtaWx5OiAnQXJhY2VhZScsIGdlbnVzOiAnTW9uc3RlcmEnIH0pLCBpZDogMSB9LFxuICAgICAgXTtcblxuICAgICAgcGxhbnRGaWx0ZXJTY2hlbWEucGFyc2UubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgZmFtaWx5OiAnQXJhY2VhZScsXG4gICAgICAgIGdlbnVzOiB1bmRlZmluZWQsXG4gICAgICAgIGlzVmVyaWZpZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgY3JlYXRlZEJ5OiB1bmRlZmluZWQsXG4gICAgICAgIGxpbWl0OiAyMCxcbiAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgfSk7XG5cbiAgICAgIGdldFBsYW50c1dpdGhTdGF0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUGxhbnRzKTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudHM/ZmFtaWx5PUFyYWNlYWUnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFBsYW50c0hhbmRsZXIocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5kYXRhKS50b0VxdWFsKG1vY2tQbGFudHMpO1xuXG4gICAgICBleHBlY3QocGxhbnRGaWx0ZXJTY2hlbWEucGFyc2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgZmFtaWx5OiAnQXJhY2VhZScsXG4gICAgICAgIGdlbnVzOiB1bmRlZmluZWQsXG4gICAgICAgIGlzVmVyaWZpZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgY3JlYXRlZEJ5OiB1bmRlZmluZWQsXG4gICAgICAgIGxpbWl0OiAyMCxcbiAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBwbGFudHMgd2l0aCBwYWdpbmF0aW9uIHBhcmFtZXRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrUGxhbnRzID0gW3sgLi4uY3JlYXRlVGVzdFBsYW50KCksIGlkOiAxIH1dO1xuXG4gICAgICBwbGFudEZpbHRlclNjaGVtYS5wYXJzZS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBmYW1pbHk6IHVuZGVmaW5lZCxcbiAgICAgICAgZ2VudXM6IHVuZGVmaW5lZCxcbiAgICAgICAgaXNWZXJpZmllZDogdW5kZWZpbmVkLFxuICAgICAgICBjcmVhdGVkQnk6IHVuZGVmaW5lZCxcbiAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgICBvZmZzZXQ6IDIwLFxuICAgICAgfSk7XG5cbiAgICAgIGdldFBsYW50c1dpdGhTdGF0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUGxhbnRzKTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudHM/bGltaXQ9MTAmb2Zmc2V0PTIwJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRQbGFudHNIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcblxuICAgICAgZXhwZWN0KHBsYW50RmlsdGVyU2NoZW1hLnBhcnNlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIGZhbWlseTogdW5kZWZpbmVkLFxuICAgICAgICBnZW51czogdW5kZWZpbmVkLFxuICAgICAgICBpc1ZlcmlmaWVkOiB1bmRlZmluZWQsXG4gICAgICAgIGNyZWF0ZWRCeTogdW5kZWZpbmVkLFxuICAgICAgICBsaW1pdDogMTAsXG4gICAgICAgIG9mZnNldDogMjAsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHVuYXV0aG9yaXplZCBlcnJvciB3aGVuIHVzZXIgbm90IGF1dGhlbnRpY2F0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICB2YWxpZGF0ZVJlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgICBzZXNzaW9uOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnRzJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRQbGFudHNIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAxKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCcsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGdldFBsYW50c1dpdGhTdGF0cykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHZhbGlkYXRpb24gZXJyb3IgZm9yIGludmFsaWQgZmlsdGVyIHBhcmFtZXRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3IgPSBuZXcgRXJyb3IoJ1ZhbGlkYXRpb24gZmFpbGVkJyk7XG4gICAgICB2YWxpZGF0aW9uRXJyb3IubmFtZSA9ICdab2RFcnJvcic7XG4gICAgICB2YWxpZGF0aW9uRXJyb3IuaXNzdWVzID0gW1xuICAgICAgICB7IHBhdGg6IFsnbGltaXQnXSwgbWVzc2FnZTogJ0xpbWl0IG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInIH1cbiAgICAgIF07XG5cbiAgICAgIHBsYW50RmlsdGVyU2NoZW1hLnBhcnNlLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHRocm93IHZhbGlkYXRpb25FcnJvcjtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BsYW50cz9saW1pdD1pbnZhbGlkJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRQbGFudHNIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBlcnJvcjogJ0ludmFsaWQgZmlsdGVyIHBhcmFtZXRlcnMnLFxuICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uRXJyb3IuaXNzdWVzLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChnZXRQbGFudHNXaXRoU3RhdHMpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIHBsYW50RmlsdGVyU2NoZW1hLnBhcnNlLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGxpbWl0OiAyMCxcbiAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgfSk7XG5cbiAgICAgIGdldFBsYW50c1dpdGhTdGF0cy5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJykpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BsYW50cycpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0UGxhbnRzSGFuZGxlcihyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDUwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b0VxdWFsKHtcbiAgICAgICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQT1NUIC9hcGkvcGxhbnQtaW5zdGFuY2VzIC0gUGxhbnQgaW5zdGFuY2UgY3JlYXRpb24gd2l0aCBkYXRhIHZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgcGxhbnQgaW5zdGFuY2Ugd2l0aCB2YWxpZCBKU09OIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB0ZXN0UGxhbnQgPSBjcmVhdGVUZXN0UGxhbnQoKTtcbiAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgICBwbGFudElkOiB0ZXN0UGxhbnQuaWQsXG4gICAgICAgIG5pY2tuYW1lOiAnTXkgTW9uc3RlcmEnLFxuICAgICAgICBsb2NhdGlvbjogJ0xpdmluZyBSb29tJyxcbiAgICAgICAgbm90ZXM6ICdCZWF1dGlmdWwgcGxhbnQnLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGV4cGVjdGVkSW5zdGFuY2VEYXRhID0ge1xuICAgICAgICAuLi5yZXF1ZXN0Qm9keSxcbiAgICAgICAgdXNlcklkOiB0ZXN0VXNlci5pZCxcbiAgICAgICAgbGFzdEZlcnRpbGl6ZWQ6IG51bGwsXG4gICAgICAgIGxhc3RSZXBvdDogbnVsbCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNyZWF0ZWRJbnN0YW5jZSA9IGNyZWF0ZVRlc3RQbGFudEluc3RhbmNlKHtcbiAgICAgICAgLi4uZXhwZWN0ZWRJbnN0YW5jZURhdGEsXG4gICAgICAgIGlkOiAxLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGVuaGFuY2VkSW5zdGFuY2UgPSB7XG4gICAgICAgIC4uLmNyZWF0ZWRJbnN0YW5jZSxcbiAgICAgICAgcGxhbnQ6IHRlc3RQbGFudCxcbiAgICAgIH07XG5cbiAgICAgIGNyZWF0ZVBsYW50SW5zdGFuY2VTY2hlbWEucGFyc2UubW9ja1JldHVyblZhbHVlKGV4cGVjdGVkSW5zdGFuY2VEYXRhKTtcbiAgICAgIFBsYW50SW5zdGFuY2VRdWVyaWVzLmNyZWF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShjcmVhdGVkSW5zdGFuY2UpO1xuICAgICAgUGxhbnRJbnN0YW5jZVF1ZXJpZXMuZ2V0RW5oYW5jZWRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKGVuaGFuY2VkSW5zdGFuY2UpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BsYW50LWluc3RhbmNlcycsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNyZWF0ZVBsYW50SW5zdGFuY2VIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBlbmhhbmNlZEluc3RhbmNlLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChjcmVhdGVQbGFudEluc3RhbmNlU2NoZW1hLnBhcnNlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3RlZEluc3RhbmNlRGF0YSk7XG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3RlZEluc3RhbmNlRGF0YSk7XG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMuZ2V0RW5oYW5jZWRCeUlkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjcmVhdGVkSW5zdGFuY2UuaWQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgcGxhbnQgaW5zdGFuY2Ugd2l0aCBGb3JtRGF0YSAoZmlsZSB1cGxvYWQpJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgdGVzdFBsYW50ID0gY3JlYXRlVGVzdFBsYW50KCk7XG4gICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgZm9ybURhdGEuYXBwZW5kKCdwbGFudElkJywgdGVzdFBsYW50LmlkLnRvU3RyaW5nKCkpO1xuICAgICAgZm9ybURhdGEuYXBwZW5kKCduaWNrbmFtZScsICdNeSBNb25zdGVyYScpO1xuICAgICAgZm9ybURhdGEuYXBwZW5kKCdsb2NhdGlvbicsICdMaXZpbmcgUm9vbScpO1xuICAgICAgZm9ybURhdGEuYXBwZW5kKCdpc0FjdGl2ZScsICd0cnVlJyk7XG5cbiAgICAgIC8vIE1vY2sgZmlsZVxuICAgICAgY29uc3QgbW9ja0ZpbGUgPSBuZXcgRmlsZShbJ3Rlc3QgaW1hZ2UnXSwgJ3Rlc3QuanBnJywgeyB0eXBlOiAnaW1hZ2UvanBlZycgfSk7XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ltYWdlRmlsZXNbMF0nLCBtb2NrRmlsZSk7XG5cbiAgICAgIGNvbnN0IGV4cGVjdGVkSW5zdGFuY2VEYXRhID0ge1xuICAgICAgICBwbGFudElkOiB0ZXN0UGxhbnQuaWQsXG4gICAgICAgIG5pY2tuYW1lOiAnTXkgTW9uc3RlcmEnLFxuICAgICAgICBsb2NhdGlvbjogJ0xpdmluZyBSb29tJyxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIHVzZXJJZDogdGVzdFVzZXIuaWQsXG4gICAgICAgIGxhc3RGZXJ0aWxpemVkOiBudWxsLFxuICAgICAgICBsYXN0UmVwb3Q6IG51bGwsXG4gICAgICAgIGltYWdlczogWydkYXRhOmltYWdlL2pwZWc7YmFzZTY0LGRHVnpkQ0JwYldGblpRPT0nXSwgLy8gYmFzZTY0IG9mIFwidGVzdCBpbWFnZVwiXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjcmVhdGVkSW5zdGFuY2UgPSBjcmVhdGVUZXN0UGxhbnRJbnN0YW5jZShleHBlY3RlZEluc3RhbmNlRGF0YSk7XG4gICAgICBjb25zdCBlbmhhbmNlZEluc3RhbmNlID0geyAuLi5jcmVhdGVkSW5zdGFuY2UsIHBsYW50OiB0ZXN0UGxhbnQgfTtcblxuICAgICAgY3JlYXRlUGxhbnRJbnN0YW5jZVNjaGVtYS5wYXJzZS5tb2NrUmV0dXJuVmFsdWUoZXhwZWN0ZWRJbnN0YW5jZURhdGEpO1xuICAgICAgUGxhbnRJbnN0YW5jZVF1ZXJpZXMuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKGNyZWF0ZWRJbnN0YW5jZSk7XG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy5nZXRFbmhhbmNlZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUoZW5oYW5jZWRJbnN0YW5jZSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogZm9ybURhdGEsXG4gICAgICB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNyZWF0ZVBsYW50SW5zdGFuY2VIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEuZGF0YSkudG9FcXVhbChlbmhhbmNlZEluc3RhbmNlKTtcblxuICAgICAgZXhwZWN0KFBsYW50SW5zdGFuY2VRdWVyaWVzLmNyZWF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0ZWRJbnN0YW5jZURhdGEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdmFsaWRhdGlvbiBlcnJvciBmb3IgaW52YWxpZCBwbGFudCBpbnN0YW5jZSBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XG4gICAgICAgIHBsYW50SWQ6ICdpbnZhbGlkJyxcbiAgICAgICAgbmlja25hbWU6ICcnLFxuICAgICAgICBsb2NhdGlvbjogJycsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3IgPSBuZXcgRXJyb3IoJ1ZhbGlkYXRpb24gZmFpbGVkJyk7XG4gICAgICB2YWxpZGF0aW9uRXJyb3IubmFtZSA9ICdab2RFcnJvcic7XG4gICAgICB2YWxpZGF0aW9uRXJyb3IuaXNzdWVzID0gW1xuICAgICAgICB7IHBhdGg6IFsncGxhbnRJZCddLCBtZXNzYWdlOiAnUGxhbnQgSUQgbXVzdCBiZSBhIG51bWJlcicgfSxcbiAgICAgICAgeyBwYXRoOiBbJ25pY2tuYW1lJ10sIG1lc3NhZ2U6ICdOaWNrbmFtZSBpcyByZXF1aXJlZCcgfSxcbiAgICAgIF07XG5cbiAgICAgIGNyZWF0ZVBsYW50SW5zdGFuY2VTY2hlbWEucGFyc2UubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgdGhyb3cgdmFsaWRhdGlvbkVycm9yO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY3JlYXRlUGxhbnRJbnN0YW5jZUhhbmRsZXIocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgICAgZGV0YWlsczogdmFsaWRhdGlvbkVycm9yLmlzc3VlcyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMuY3JlYXRlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdW5hdXRob3JpemVkIGVycm9yIHdoZW4gdXNlciBub3QgYXV0aGVudGljYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIHZhbGlkYXRlVmVyaWZpZWRSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgICAgZXJyb3I6ICdVbmF1dGhvcml6ZWQnLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwbGFudElkOiAxIH0pLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY3JlYXRlUGxhbnRJbnN0YW5jZUhhbmRsZXIocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCcsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KFBsYW50SW5zdGFuY2VRdWVyaWVzLmNyZWF0ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHJlcXVlc3QgYm9keScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNyZWF0ZVBsYW50SW5zdGFuY2VIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdSZXF1ZXN0IGJvZHkgaXMgcmVxdWlyZWQnLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChQbGFudEluc3RhbmNlUXVlcmllcy5jcmVhdGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtYWxmb3JtZWQgSlNPTicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogJ2ludmFsaWQganNvbicsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjcmVhdGVQbGFudEluc3RhbmNlSGFuZGxlcihyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnSW52YWxpZCBKU09OIGluIHJlcXVlc3QgYm9keScsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KFBsYW50SW5zdGFuY2VRdWVyaWVzLmNyZWF0ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIGZlcnRpbGl6ZXIgZHVlIGRhdGUgZnJvbSBzY2hlZHVsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgICBwbGFudElkOiAxLFxuICAgICAgICBuaWNrbmFtZTogJ1Rlc3QgUGxhbnQnLFxuICAgICAgICBsb2NhdGlvbjogJ1Rlc3QgTG9jYXRpb24nLFxuICAgICAgICBmZXJ0aWxpemVyU2NoZWR1bGU6ICcyIHdlZWtzJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGV4cGVjdGVkSW5zdGFuY2VEYXRhID0ge1xuICAgICAgICAuLi5yZXF1ZXN0Qm9keSxcbiAgICAgICAgdXNlcklkOiB0ZXN0VXNlci5pZCxcbiAgICAgICAgbGFzdEZlcnRpbGl6ZWQ6IG51bGwsXG4gICAgICAgIGxhc3RSZXBvdDogbnVsbCxcbiAgICAgICAgZmVydGlsaXplckR1ZTogZXhwZWN0LmFueShEYXRlKSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNyZWF0ZWRJbnN0YW5jZSA9IGNyZWF0ZVRlc3RQbGFudEluc3RhbmNlKGV4cGVjdGVkSW5zdGFuY2VEYXRhKTtcbiAgICAgIGNvbnN0IGVuaGFuY2VkSW5zdGFuY2UgPSB7IC4uLmNyZWF0ZWRJbnN0YW5jZSwgcGxhbnQ6IGNyZWF0ZVRlc3RQbGFudCgpIH07XG5cbiAgICAgIGNyZWF0ZVBsYW50SW5zdGFuY2VTY2hlbWEucGFyc2UubW9ja1JldHVyblZhbHVlKGV4cGVjdGVkSW5zdGFuY2VEYXRhKTtcbiAgICAgIFBsYW50SW5zdGFuY2VRdWVyaWVzLmNyZWF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShjcmVhdGVkSW5zdGFuY2UpO1xuICAgICAgUGxhbnRJbnN0YW5jZVF1ZXJpZXMuZ2V0RW5oYW5jZWRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKGVuaGFuY2VkSW5zdGFuY2UpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BsYW50LWluc3RhbmNlcycsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNyZWF0ZVBsYW50SW5zdGFuY2VIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcblxuICAgICAgLy8gVmVyaWZ5IGZlcnRpbGl6ZXIgZHVlIGRhdGUgd2FzIGNhbGN1bGF0ZWQgKHNob3VsZCBiZSAyIHdlZWtzIGZyb20gbm93KVxuICAgICAgY29uc3QgY2FsbEFyZ3MgPSBQbGFudEluc3RhbmNlUXVlcmllcy5jcmVhdGUubW9jay5jYWxsc1swXVswXTtcbiAgICAgIGV4cGVjdChjYWxsQXJncy5mZXJ0aWxpemVyRHVlKS50b0JlSW5zdGFuY2VPZihEYXRlKTtcbiAgICAgIFxuICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgIGNvbnN0IGV4cGVjdGVkRHVlID0gbmV3IERhdGUobm93KTtcbiAgICAgIGV4cGVjdGVkRHVlLnNldERhdGUoZXhwZWN0ZWREdWUuZ2V0RGF0ZSgpICsgMTQpOyAvLyAyIHdlZWtzXG4gICAgICBcbiAgICAgIC8vIEFsbG93IGZvciBzbWFsbCB0aW1lIGRpZmZlcmVuY2VzIGluIHRlc3QgZXhlY3V0aW9uXG4gICAgICBjb25zdCB0aW1lRGlmZiA9IE1hdGguYWJzKGNhbGxBcmdzLmZlcnRpbGl6ZXJEdWUuZ2V0VGltZSgpIC0gZXhwZWN0ZWREdWUuZ2V0VGltZSgpKTtcbiAgICAgIGV4cGVjdCh0aW1lRGlmZikudG9CZUxlc3NUaGFuKDEwMDApOyAvLyBMZXNzIHRoYW4gMSBzZWNvbmQgZGlmZmVyZW5jZVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUFVUIC9hcGkvcGxhbnQtaW5zdGFuY2VzL1tpZF0gLSBQbGFudCBpbnN0YW5jZSB1cGRhdGVzIHdpdGggYXV0aG9yaXphdGlvbiBjaGVja3MnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgcGxhbnQgaW5zdGFuY2Ugd2l0aCB2YWxpZCBkYXRhIGFuZCBhdXRob3JpemF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgdGVzdFBsYW50ID0gY3JlYXRlVGVzdFBsYW50KCk7XG4gICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gY3JlYXRlVGVzdFBsYW50SW5zdGFuY2Uoe1xuICAgICAgICBpZDogMSxcbiAgICAgICAgdXNlcklkOiB0ZXN0VXNlci5pZCxcbiAgICAgICAgcGxhbnRJZDogdGVzdFBsYW50LmlkLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7XG4gICAgICAgIG5pY2tuYW1lOiAnVXBkYXRlZCBOaWNrbmFtZScsXG4gICAgICAgIGxvY2F0aW9uOiAnTmV3IExvY2F0aW9uJyxcbiAgICAgICAgbm90ZXM6ICdVcGRhdGVkIG5vdGVzJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGV4cGVjdGVkVXBkYXRlRGF0YSA9IHtcbiAgICAgICAgLi4udXBkYXRlRGF0YSxcbiAgICAgICAgaWQ6IDEsXG4gICAgICAgIHVzZXJJZDogdGVzdFVzZXIuaWQsXG4gICAgICAgIGxhc3RGZXJ0aWxpemVkOiBudWxsLFxuICAgICAgICBsYXN0UmVwb3Q6IG51bGwsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB1cGRhdGVkSW5zdGFuY2UgPSB7IC4uLmV4aXN0aW5nSW5zdGFuY2UsIC4uLnVwZGF0ZURhdGEgfTtcbiAgICAgIGNvbnN0IGVuaGFuY2VkSW5zdGFuY2UgPSB7IC4uLnVwZGF0ZWRJbnN0YW5jZSwgcGxhbnQ6IHRlc3RQbGFudCB9O1xuXG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy5nZXRFbmhhbmNlZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWVPbmNlKGV4aXN0aW5nSW5zdGFuY2UpO1xuICAgICAgdXBkYXRlUGxhbnRJbnN0YW5jZVNjaGVtYS5wYXJzZS5tb2NrUmV0dXJuVmFsdWUoZXhwZWN0ZWRVcGRhdGVEYXRhKTtcbiAgICAgIFBsYW50SW5zdGFuY2VRdWVyaWVzLnVwZGF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh1cGRhdGVkSW5zdGFuY2UpO1xuICAgICAgUGxhbnRJbnN0YW5jZVF1ZXJpZXMuZ2V0RW5oYW5jZWRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlT25jZShlbmhhbmNlZEluc3RhbmNlKTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudC1pbnN0YW5jZXMvMScsIHtcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXBkYXRlRGF0YSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHBhcmFtcyA9IFByb21pc2UucmVzb2x2ZSh7IGlkOiAnMScgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1cGRhdGVQbGFudEluc3RhbmNlSGFuZGxlcihyZXF1ZXN0LCB7IHBhcmFtcyB9KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b0VxdWFsKGVuaGFuY2VkSW5zdGFuY2UpO1xuXG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMuZ2V0RW5oYW5jZWRCeUlkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgxKTtcbiAgICAgIGV4cGVjdCh1cGRhdGVQbGFudEluc3RhbmNlU2NoZW1hLnBhcnNlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3RlZFVwZGF0ZURhdGEpO1xuICAgICAgZXhwZWN0KFBsYW50SW5zdGFuY2VRdWVyaWVzLnVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoMSwgdXBkYXRlRGF0YSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmb3JiaWRkZW4gZXJyb3Igd2hlbiB1c2VyIGRvZXMgbm90IG93biBwbGFudCBpbnN0YW5jZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG90aGVyVXNlciA9IGNyZWF0ZVRlc3RVc2VyKHsgaWQ6IDk5OSB9KTtcbiAgICAgIGNvbnN0IGV4aXN0aW5nSW5zdGFuY2UgPSBjcmVhdGVUZXN0UGxhbnRJbnN0YW5jZSh7XG4gICAgICAgIGlkOiAxLFxuICAgICAgICB1c2VySWQ6IG90aGVyVXNlci5pZCwgLy8gRGlmZmVyZW50IHVzZXJcbiAgICAgIH0pO1xuXG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy5nZXRFbmhhbmNlZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUoZXhpc3RpbmdJbnN0YW5jZSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzLzEnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmlja25hbWU6ICdVcGRhdGVkJyB9KSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcGFyYW1zID0gUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICcxJyB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHVwZGF0ZVBsYW50SW5zdGFuY2VIYW5kbGVyKHJlcXVlc3QsIHsgcGFyYW1zIH0pO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAzKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBlcnJvcjogJ0ZvcmJpZGRlbicsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KFBsYW50SW5zdGFuY2VRdWVyaWVzLnVwZGF0ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIG5vdCBmb3VuZCBlcnJvciB3aGVuIHBsYW50IGluc3RhbmNlIGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgUGxhbnRJbnN0YW5jZVF1ZXJpZXMuZ2V0RW5oYW5jZWRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BsYW50LWluc3RhbmNlcy85OTknLCB7XG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmlja25hbWU6ICdVcGRhdGVkJyB9KSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcGFyYW1zID0gUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICc5OTknIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdXBkYXRlUGxhbnRJbnN0YW5jZUhhbmRsZXIocmVxdWVzdCwgeyBwYXJhbXMgfSk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDQpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9FcXVhbCh7XG4gICAgICAgIGVycm9yOiAnUGxhbnQgaW5zdGFuY2Ugbm90IGZvdW5kJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMudXBkYXRlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gYmFkIHJlcXVlc3QgZXJyb3IgZm9yIGludmFsaWQgcGxhbnQgaW5zdGFuY2UgSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BsYW50LWluc3RhbmNlcy9pbnZhbGlkJywge1xuICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5pY2tuYW1lOiAnVXBkYXRlZCcgfSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHBhcmFtcyA9IFByb21pc2UucmVzb2x2ZSh7IGlkOiAnaW52YWxpZCcgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1cGRhdGVQbGFudEluc3RhbmNlSGFuZGxlcihyZXF1ZXN0LCB7IHBhcmFtcyB9KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b0VxdWFsKHtcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIHBsYW50IGluc3RhbmNlIElEJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMuZ2V0RW5oYW5jZWRCeUlkKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdW5hdXRob3JpemVkIGVycm9yIHdoZW4gdXNlciBub3QgYXV0aGVudGljYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIHZhbGlkYXRlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgIHNlc3Npb246IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudC1pbnN0YW5jZXMvMScsIHtcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuaWNrbmFtZTogJ1VwZGF0ZWQnIH0pLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBwYXJhbXMgPSBQcm9taXNlLnJlc29sdmUoeyBpZDogJzEnIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdXBkYXRlUGxhbnRJbnN0YW5jZUhhbmRsZXIocmVxdWVzdCwgeyBwYXJhbXMgfSk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9FcXVhbCh7XG4gICAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMuZ2V0RW5oYW5jZWRCeUlkKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgRm9ybURhdGEgdXBkYXRlcyB3aXRoIGZpbGUgdXBsb2FkcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRlc3RQbGFudCA9IGNyZWF0ZVRlc3RQbGFudCgpO1xuICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IGNyZWF0ZVRlc3RQbGFudEluc3RhbmNlKHtcbiAgICAgICAgaWQ6IDEsXG4gICAgICAgIHVzZXJJZDogdGVzdFVzZXIuaWQsXG4gICAgICAgIHBsYW50SWQ6IHRlc3RQbGFudC5pZCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgZm9ybURhdGEuYXBwZW5kKCduaWNrbmFtZScsICdVcGRhdGVkIE5pY2tuYW1lJyk7XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ2xvY2F0aW9uJywgJ05ldyBMb2NhdGlvbicpO1xuICAgICAgZm9ybURhdGEuYXBwZW5kKCdleGlzdGluZ0ltYWdlc1swXScsICdleGlzdGluZy1pbWFnZS11cmwnKTtcblxuICAgICAgY29uc3QgbW9ja0ZpbGUgPSBuZXcgRmlsZShbJ25ldyBpbWFnZSddLCAnbmV3LmpwZycsIHsgdHlwZTogJ2ltYWdlL2pwZWcnIH0pO1xuICAgICAgZm9ybURhdGEuYXBwZW5kKCdpbWFnZUZpbGVzWzBdJywgbW9ja0ZpbGUpO1xuXG4gICAgICBjb25zdCBleHBlY3RlZFVwZGF0ZURhdGEgPSB7XG4gICAgICAgIG5pY2tuYW1lOiAnVXBkYXRlZCBOaWNrbmFtZScsXG4gICAgICAgIGxvY2F0aW9uOiAnTmV3IExvY2F0aW9uJyxcbiAgICAgICAgaW1hZ2VzOiBbJ2V4aXN0aW5nLWltYWdlLXVybCcsICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LGJtVjNJR2x0WVdkbCddLCAvLyBiYXNlNjQgb2YgXCJuZXcgaW1hZ2VcIlxuICAgICAgICBpZDogMSxcbiAgICAgICAgdXNlcklkOiB0ZXN0VXNlci5pZCxcbiAgICAgICAgbGFzdEZlcnRpbGl6ZWQ6IG51bGwsXG4gICAgICAgIGxhc3RSZXBvdDogbnVsbCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRJbnN0YW5jZSA9IHsgLi4uZXhpc3RpbmdJbnN0YW5jZSwgLi4uZXhwZWN0ZWRVcGRhdGVEYXRhIH07XG4gICAgICBjb25zdCBlbmhhbmNlZEluc3RhbmNlID0geyAuLi51cGRhdGVkSW5zdGFuY2UsIHBsYW50OiB0ZXN0UGxhbnQgfTtcblxuICAgICAgUGxhbnRJbnN0YW5jZVF1ZXJpZXMuZ2V0RW5oYW5jZWRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlT25jZShleGlzdGluZ0luc3RhbmNlKTtcbiAgICAgIHVwZGF0ZVBsYW50SW5zdGFuY2VTY2hlbWEucGFyc2UubW9ja1JldHVyblZhbHVlKGV4cGVjdGVkVXBkYXRlRGF0YSk7XG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy51cGRhdGUubW9ja1Jlc29sdmVkVmFsdWUodXBkYXRlZEluc3RhbmNlKTtcbiAgICAgIFBsYW50SW5zdGFuY2VRdWVyaWVzLmdldEVuaGFuY2VkQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZW5oYW5jZWRJbnN0YW5jZSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzLzEnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgIGJvZHk6IGZvcm1EYXRhLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHBhcmFtcyA9IFByb21pc2UucmVzb2x2ZSh7IGlkOiAnMScgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1cGRhdGVQbGFudEluc3RhbmNlSGFuZGxlcihyZXF1ZXN0LCB7IHBhcmFtcyB9KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b0VxdWFsKGVuaGFuY2VkSW5zdGFuY2UpO1xuXG4gICAgICAvLyBWZXJpZnkgdGhlIHVwZGF0ZSB3YXMgY2FsbGVkIHdpdGggY29ycmVjdCBkYXRhIChleGNsdWRpbmcgaWQgYW5kIHVzZXJJZClcbiAgICAgIGNvbnN0IHsgaWQsIHVzZXJJZCwgLi4udXBkYXRlRGF0YVdpdGhvdXRJZHMgfSA9IGV4cGVjdGVkVXBkYXRlRGF0YTtcbiAgICAgIGV4cGVjdChQbGFudEluc3RhbmNlUXVlcmllcy51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDEsIHVwZGF0ZURhdGFXaXRob3V0SWRzKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHZhbGlkYXRpb24gZXJyb3JzIGR1cmluZyB1cGRhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gY3JlYXRlVGVzdFBsYW50SW5zdGFuY2Uoe1xuICAgICAgICBpZDogMSxcbiAgICAgICAgdXNlcklkOiB0ZXN0VXNlci5pZCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3IgPSBuZXcgRXJyb3IoJ1ZhbGlkYXRpb24gZmFpbGVkJyk7XG4gICAgICB2YWxpZGF0aW9uRXJyb3IubmFtZSA9ICdab2RFcnJvcic7XG4gICAgICB2YWxpZGF0aW9uRXJyb3IuaXNzdWVzID0gW1xuICAgICAgICB7IHBhdGg6IFsnbmlja25hbWUnXSwgbWVzc2FnZTogJ05pY2tuYW1lIGlzIHJlcXVpcmVkJyB9XG4gICAgICBdO1xuXG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy5nZXRFbmhhbmNlZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUoZXhpc3RpbmdJbnN0YW5jZSk7XG4gICAgICB1cGRhdGVQbGFudEluc3RhbmNlU2NoZW1hLnBhcnNlLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHRocm93IHZhbGlkYXRpb25FcnJvcjtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BsYW50LWluc3RhbmNlcy8xJywge1xuICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5pY2tuYW1lOiAnJyB9KSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcGFyYW1zID0gUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICcxJyB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHVwZGF0ZVBsYW50SW5zdGFuY2VIYW5kbGVyKHJlcXVlc3QsIHsgcGFyYW1zIH0pO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEuZXJyb3IpLnRvQ29udGFpbignSW52YWxpZCBwbGFudCBpbnN0YW5jZSBkYXRhJyk7XG5cbiAgICAgIGV4cGVjdChQbGFudEluc3RhbmNlUXVlcmllcy51cGRhdGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQbGFudCBNYW5hZ2VtZW50IEludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXRlIHBsYW50IG1hbmFnZW1lbnQgd29ya2Zsb3c6IGNyZWF0ZSAtPiByZWFkIC0+IHVwZGF0ZSAtPiBkZWxldGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0UGxhbnQgPSBjcmVhdGVUZXN0UGxhbnQoKTtcbiAgICAgIFxuICAgICAgLy8gU3RlcCAxOiBDcmVhdGUgcGxhbnQgaW5zdGFuY2VcbiAgICAgIGNvbnN0IGNyZWF0ZURhdGEgPSB7XG4gICAgICAgIHBsYW50SWQ6IHRlc3RQbGFudC5pZCxcbiAgICAgICAgbmlja25hbWU6ICdUZXN0IFBsYW50JyxcbiAgICAgICAgbG9jYXRpb246ICdUZXN0IExvY2F0aW9uJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNyZWF0ZWRJbnN0YW5jZSA9IGNyZWF0ZVRlc3RQbGFudEluc3RhbmNlKHtcbiAgICAgICAgaWQ6IDEsXG4gICAgICAgIC4uLmNyZWF0ZURhdGEsXG4gICAgICAgIHVzZXJJZDogdGVzdFVzZXIuaWQsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZW5oYW5jZWRJbnN0YW5jZSA9IHsgLi4uY3JlYXRlZEluc3RhbmNlLCBwbGFudDogdGVzdFBsYW50IH07XG5cbiAgICAgIGNyZWF0ZVBsYW50SW5zdGFuY2VTY2hlbWEucGFyc2UubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgLi4uY3JlYXRlRGF0YSxcbiAgICAgICAgdXNlcklkOiB0ZXN0VXNlci5pZCxcbiAgICAgICAgbGFzdEZlcnRpbGl6ZWQ6IG51bGwsXG4gICAgICAgIGxhc3RSZXBvdDogbnVsbCxcbiAgICAgIH0pO1xuICAgICAgUGxhbnRJbnN0YW5jZVF1ZXJpZXMuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKGNyZWF0ZWRJbnN0YW5jZSk7XG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy5nZXRFbmhhbmNlZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUoZW5oYW5jZWRJbnN0YW5jZSk7XG5cbiAgICAgIGNvbnN0IGNyZWF0ZVJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY3JlYXRlRGF0YSksXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNyZWF0ZVJlc3BvbnNlID0gYXdhaXQgY3JlYXRlUGxhbnRJbnN0YW5jZUhhbmRsZXIoY3JlYXRlUmVxdWVzdCk7XG4gICAgICBjb25zdCBjcmVhdGVSZXNwb25zZURhdGEgPSBhd2FpdCBjcmVhdGVSZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChjcmVhdGVSZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICAgIGV4cGVjdChjcmVhdGVSZXNwb25zZURhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcblxuICAgICAgLy8gU3RlcCAyOiBSZWFkIHBsYW50IGluc3RhbmNlXG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy5nZXRFbmhhbmNlZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUoZW5oYW5jZWRJbnN0YW5jZSk7XG5cbiAgICAgIGNvbnN0IHJlYWRSZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BsYW50LWluc3RhbmNlcy8xJyk7XG4gICAgICBjb25zdCByZWFkUGFyYW1zID0gUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICcxJyB9KTtcblxuICAgICAgY29uc3QgcmVhZFJlc3BvbnNlID0gYXdhaXQgZ2V0UGxhbnRJbnN0YW5jZUhhbmRsZXIocmVhZFJlcXVlc3QsIHsgcGFyYW1zOiByZWFkUGFyYW1zIH0pO1xuICAgICAgY29uc3QgcmVhZFJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlYWRSZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZWFkUmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVhZFJlc3BvbnNlRGF0YSkudG9FcXVhbChlbmhhbmNlZEluc3RhbmNlKTtcblxuICAgICAgLy8gU3RlcCAzOiBVcGRhdGUgcGxhbnQgaW5zdGFuY2VcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7IG5pY2tuYW1lOiAnVXBkYXRlZCBQbGFudCcgfTtcbiAgICAgIGNvbnN0IHVwZGF0ZWRJbnN0YW5jZSA9IHsgLi4uZW5oYW5jZWRJbnN0YW5jZSwgLi4udXBkYXRlRGF0YSB9O1xuXG4gICAgICB1cGRhdGVQbGFudEluc3RhbmNlU2NoZW1hLnBhcnNlLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIC4uLnVwZGF0ZURhdGEsXG4gICAgICAgIGlkOiAxLFxuICAgICAgICB1c2VySWQ6IHRlc3RVc2VyLmlkLFxuICAgICAgICBsYXN0RmVydGlsaXplZDogbnVsbCxcbiAgICAgICAgbGFzdFJlcG90OiBudWxsLFxuICAgICAgfSk7XG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy51cGRhdGUubW9ja1Jlc29sdmVkVmFsdWUodXBkYXRlZEluc3RhbmNlKTtcbiAgICAgIFBsYW50SW5zdGFuY2VRdWVyaWVzLmdldEVuaGFuY2VkQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZSh1cGRhdGVkSW5zdGFuY2UpO1xuXG4gICAgICBjb25zdCB1cGRhdGVSZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BsYW50LWluc3RhbmNlcy8xJywge1xuICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1cGRhdGVEYXRhKSxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHVwZGF0ZVBhcmFtcyA9IFByb21pc2UucmVzb2x2ZSh7IGlkOiAnMScgfSk7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZVJlc3BvbnNlID0gYXdhaXQgdXBkYXRlUGxhbnRJbnN0YW5jZUhhbmRsZXIodXBkYXRlUmVxdWVzdCwgeyBwYXJhbXM6IHVwZGF0ZVBhcmFtcyB9KTtcbiAgICAgIGNvbnN0IHVwZGF0ZVJlc3BvbnNlRGF0YSA9IGF3YWl0IHVwZGF0ZVJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHVwZGF0ZVJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHVwZGF0ZVJlc3BvbnNlRGF0YS5uaWNrbmFtZSkudG9CZSgnVXBkYXRlZCBQbGFudCcpO1xuXG4gICAgICAvLyBTdGVwIDQ6IERlbGV0ZSBwbGFudCBpbnN0YW5jZVxuICAgICAgUGxhbnRJbnN0YW5jZVF1ZXJpZXMuZGVsZXRlLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xuXG4gICAgICBjb25zdCBkZWxldGVSZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BsYW50LWluc3RhbmNlcy8xJywge1xuICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBkZWxldGVQYXJhbXMgPSBQcm9taXNlLnJlc29sdmUoeyBpZDogJzEnIH0pO1xuXG4gICAgICBjb25zdCBkZWxldGVSZXNwb25zZSA9IGF3YWl0IGRlbGV0ZVBsYW50SW5zdGFuY2VIYW5kbGVyKGRlbGV0ZVJlcXVlc3QsIHsgcGFyYW1zOiBkZWxldGVQYXJhbXMgfSk7XG4gICAgICBjb25zdCBkZWxldGVSZXNwb25zZURhdGEgPSBhd2FpdCBkZWxldGVSZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChkZWxldGVSZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChkZWxldGVSZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnUGxhbnQgaW5zdGFuY2UgZGVsZXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFZlcmlmeSBhbGwgb3BlcmF0aW9ucyB3ZXJlIGNhbGxlZFxuICAgICAgZXhwZWN0KFBsYW50SW5zdGFuY2VRdWVyaWVzLmNyZWF0ZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KFBsYW50SW5zdGFuY2VRdWVyaWVzLnVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KFBsYW50SW5zdGFuY2VRdWVyaWVzLmRlbGV0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhdXRob3JpemF0aW9uIGNoZWNrcyBhY3Jvc3MgYWxsIGVuZHBvaW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRlc3QgdW5hdXRob3JpemVkIGFjY2VzcyB0byBhbGwgZW5kcG9pbnRzXG4gICAgICB2YWxpZGF0ZVJlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUoeyB1c2VyOiBudWxsLCBzZXNzaW9uOiBudWxsIH0pO1xuXG4gICAgICAvLyBHRVQgL2FwaS9wbGFudHNcbiAgICAgIGNvbnN0IGdldFBsYW50c1JlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnRzJyk7XG4gICAgICBjb25zdCBnZXRQbGFudHNSZXNwb25zZSA9IGF3YWl0IGdldFBsYW50c0hhbmRsZXIoZ2V0UGxhbnRzUmVxdWVzdCk7XG4gICAgICBleHBlY3QoZ2V0UGxhbnRzUmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMSk7XG5cbiAgICAgIC8vIFBPU1QgL2FwaS9wbGFudC1pbnN0YW5jZXNcbiAgICAgIGNvbnN0IGNyZWF0ZVJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgY3JlYXRlUmVzcG9uc2UgPSBhd2FpdCBjcmVhdGVQbGFudEluc3RhbmNlSGFuZGxlcihjcmVhdGVSZXF1ZXN0KTtcbiAgICAgIGV4cGVjdChjcmVhdGVSZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAxKTtcblxuICAgICAgLy8gR0VUIC9hcGkvcGxhbnQtaW5zdGFuY2VzLzFcbiAgICAgIGNvbnN0IGdldFJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzLzEnKTtcbiAgICAgIGNvbnN0IGdldFBhcmFtcyA9IFByb21pc2UucmVzb2x2ZSh7IGlkOiAnMScgfSk7XG4gICAgICBjb25zdCBnZXRSZXNwb25zZSA9IGF3YWl0IGdldFBsYW50SW5zdGFuY2VIYW5kbGVyKGdldFJlcXVlc3QsIHsgcGFyYW1zOiBnZXRQYXJhbXMgfSk7XG4gICAgICBleHBlY3QoZ2V0UmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMSk7XG5cbiAgICAgIC8vIFBVVCAvYXBpL3BsYW50LWluc3RhbmNlcy8xXG4gICAgICBjb25zdCB1cGRhdGVSZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BsYW50LWluc3RhbmNlcy8xJywge1xuICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSksXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgfSk7XG4gICAgICBjb25zdCB1cGRhdGVQYXJhbXMgPSBQcm9taXNlLnJlc29sdmUoeyBpZDogJzEnIH0pO1xuICAgICAgY29uc3QgdXBkYXRlUmVzcG9uc2UgPSBhd2FpdCB1cGRhdGVQbGFudEluc3RhbmNlSGFuZGxlcih1cGRhdGVSZXF1ZXN0LCB7IHBhcmFtczogdXBkYXRlUGFyYW1zIH0pO1xuICAgICAgZXhwZWN0KHVwZGF0ZVJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuXG4gICAgICAvLyBERUxFVEUgL2FwaS9wbGFudC1pbnN0YW5jZXMvMVxuICAgICAgY29uc3QgZGVsZXRlUmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudC1pbnN0YW5jZXMvMScsIHtcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZGVsZXRlUGFyYW1zID0gUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICcxJyB9KTtcbiAgICAgIGNvbnN0IGRlbGV0ZVJlc3BvbnNlID0gYXdhaXQgZGVsZXRlUGxhbnRJbnN0YW5jZUhhbmRsZXIoZGVsZXRlUmVxdWVzdCwgeyBwYXJhbXM6IGRlbGV0ZVBhcmFtcyB9KTtcbiAgICAgIGV4cGVjdChkZWxldGVSZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAxKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJ2YWxpZGF0ZVJlcXVlc3QiLCJmbiIsInZhbGlkYXRlVmVyaWZpZWRSZXF1ZXN0IiwiY3JlYXRlUGxhbnQiLCJnZXRQbGFudHNXaXRoU3RhdHMiLCJ2YWxpZGF0ZVBsYW50VGF4b25vbXkiLCJQbGFudEluc3RhbmNlUXVlcmllcyIsImdldFdpdGhGaWx0ZXJzIiwiY3JlYXRlIiwiZ2V0RW5oYW5jZWRCeUlkIiwidXBkYXRlIiwiZGVsZXRlIiwiY3JlYXRlUGxhbnRTY2hlbWEiLCJwYXJzZSIsInBsYW50RmlsdGVyU2NoZW1hIiwiY3JlYXRlUGxhbnRJbnN0YW5jZVNjaGVtYSIsInBsYW50SW5zdGFuY2VGaWx0ZXJTY2hlbWEiLCJ1cGRhdGVQbGFudEluc3RhbmNlU2NoZW1hIiwiZGVzY3JpYmUiLCJ0ZXN0VXNlciIsInRlc3RTZXNzaW9uIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJyZXNldEFwaU1vY2tzIiwiY3JlYXRlVGVzdFVzZXIiLCJjcmVhdGVUZXN0U2Vzc2lvbiIsIm1vY2tSZXNvbHZlZFZhbHVlIiwidXNlciIsInNlc3Npb24iLCJhZnRlckVhY2giLCJyZXN0b3JlQWxsTW9ja3MiLCJpdCIsIm1vY2tQbGFudHMiLCJjcmVhdGVUZXN0UGxhbnQiLCJmYW1pbHkiLCJnZW51cyIsImlkIiwibW9ja1JldHVyblZhbHVlIiwidW5kZWZpbmVkIiwiaXNWZXJpZmllZCIsImNyZWF0ZWRCeSIsImxpbWl0Iiwib2Zmc2V0IiwicmVxdWVzdCIsIk5leHRSZXF1ZXN0IiwicmVzcG9uc2UiLCJnZXRQbGFudHNIYW5kbGVyIiwicmVzcG9uc2VEYXRhIiwianNvbiIsImV4cGVjdCIsInN0YXR1cyIsInRvQmUiLCJ0b0VxdWFsIiwic3VjY2VzcyIsImRhdGEiLCJtZXRhZGF0YSIsIm9wZXJhdGlvbiIsInRpbWVzdGFtcCIsImFueSIsIlN0cmluZyIsInVzZXJJZCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIk9iamVjdCIsImVycm9yIiwibm90IiwidmFsaWRhdGlvbkVycm9yIiwiRXJyb3IiLCJuYW1lIiwiaXNzdWVzIiwicGF0aCIsIm1lc3NhZ2UiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJkZXRhaWxzIiwibW9ja1JlamVjdGVkVmFsdWUiLCJ0ZXN0UGxhbnQiLCJyZXF1ZXN0Qm9keSIsInBsYW50SWQiLCJuaWNrbmFtZSIsImxvY2F0aW9uIiwibm90ZXMiLCJpc0FjdGl2ZSIsImV4cGVjdGVkSW5zdGFuY2VEYXRhIiwibGFzdEZlcnRpbGl6ZWQiLCJsYXN0UmVwb3QiLCJjcmVhdGVkSW5zdGFuY2UiLCJjcmVhdGVUZXN0UGxhbnRJbnN0YW5jZSIsImVuaGFuY2VkSW5zdGFuY2UiLCJwbGFudCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiaGVhZGVycyIsImNyZWF0ZVBsYW50SW5zdGFuY2VIYW5kbGVyIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInRvU3RyaW5nIiwibW9ja0ZpbGUiLCJGaWxlIiwidHlwZSIsImltYWdlcyIsImZlcnRpbGl6ZXJTY2hlZHVsZSIsImZlcnRpbGl6ZXJEdWUiLCJEYXRlIiwiY2FsbEFyZ3MiLCJjYWxscyIsInRvQmVJbnN0YW5jZU9mIiwibm93IiwiZXhwZWN0ZWREdWUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInRpbWVEaWZmIiwiTWF0aCIsImFicyIsImdldFRpbWUiLCJ0b0JlTGVzc1RoYW4iLCJleGlzdGluZ0luc3RhbmNlIiwidXBkYXRlRGF0YSIsImV4cGVjdGVkVXBkYXRlRGF0YSIsInVwZGF0ZWRJbnN0YW5jZSIsIm1vY2tSZXNvbHZlZFZhbHVlT25jZSIsInBhcmFtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwidXBkYXRlUGxhbnRJbnN0YW5jZUhhbmRsZXIiLCJvdGhlclVzZXIiLCJ1cGRhdGVEYXRhV2l0aG91dElkcyIsInRvQ29udGFpbiIsImNyZWF0ZURhdGEiLCJjcmVhdGVSZXF1ZXN0IiwiY3JlYXRlUmVzcG9uc2UiLCJjcmVhdGVSZXNwb25zZURhdGEiLCJyZWFkUmVxdWVzdCIsInJlYWRQYXJhbXMiLCJyZWFkUmVzcG9uc2UiLCJnZXRQbGFudEluc3RhbmNlSGFuZGxlciIsInJlYWRSZXNwb25zZURhdGEiLCJ1cGRhdGVSZXF1ZXN0IiwidXBkYXRlUGFyYW1zIiwidXBkYXRlUmVzcG9uc2UiLCJ1cGRhdGVSZXNwb25zZURhdGEiLCJkZWxldGVSZXF1ZXN0IiwiZGVsZXRlUGFyYW1zIiwiZGVsZXRlUmVzcG9uc2UiLCJkZWxldGVQbGFudEluc3RhbmNlSGFuZGxlciIsImRlbGV0ZVJlc3BvbnNlRGF0YSIsImdldFBsYW50c1JlcXVlc3QiLCJnZXRQbGFudHNSZXNwb25zZSIsImdldFJlcXVlc3QiLCJnZXRQYXJhbXMiLCJnZXRSZXNwb25zZSJdLCJtYXBwaW5ncyI6IkFBQUEsc0NBQXNDO0FBQ3RDLDRGQUE0Rjs7QUFVNUYsMEJBQTBCO0FBQzFCQSxLQUFLQyxJQUFJLENBQUMscUJBQXFCLElBQU8sQ0FBQTtRQUNwQ0MsaUJBQWlCRixLQUFLRyxFQUFFO1FBQ3hCQyx5QkFBeUJKLEtBQUtHLEVBQUU7SUFDbEMsQ0FBQTtBQUVBLDRCQUE0QjtBQUM1QkgsS0FBS0MsSUFBSSxDQUFDLG1DQUFtQyxJQUFPLENBQUE7UUFDbERJLGFBQWFMLEtBQUtHLEVBQUU7UUFDcEJHLG9CQUFvQk4sS0FBS0csRUFBRTtRQUMzQkksdUJBQXVCUCxLQUFLRyxFQUFFO0lBQ2hDLENBQUE7QUFFQUgsS0FBS0MsSUFBSSxDQUFDLG9DQUFvQyxJQUFPLENBQUE7UUFDbkRPLHNCQUFzQjtZQUNwQkMsZ0JBQWdCVCxLQUFLRyxFQUFFO1lBQ3ZCTyxRQUFRVixLQUFLRyxFQUFFO1lBQ2ZRLGlCQUFpQlgsS0FBS0csRUFBRTtZQUN4QlMsUUFBUVosS0FBS0csRUFBRTtZQUNmVSxRQUFRYixLQUFLRyxFQUFFO1FBQ2pCO0lBQ0YsQ0FBQTtBQUVBLDBCQUEwQjtBQUMxQkgsS0FBS0MsSUFBSSxDQUFDLGtDQUFrQyxJQUFPLENBQUE7UUFDakRhLG1CQUFtQjtZQUNqQkMsT0FBT2YsS0FBS0csRUFBRTtRQUNoQjtRQUNBYSxtQkFBbUI7WUFDakJELE9BQU9mLEtBQUtHLEVBQUU7UUFDaEI7UUFDQWMsMkJBQTJCO1lBQ3pCRixPQUFPZixLQUFLRyxFQUFFO1FBQ2hCO1FBQ0FlLDJCQUEyQjtZQUN6QkgsT0FBT2YsS0FBS0csRUFBRTtRQUNoQjtRQUNBZ0IsMkJBQTJCO1lBQ3pCSixPQUFPZixLQUFLRyxFQUFFO1FBQ2hCO0lBQ0YsQ0FBQTs7Ozt3QkFoRDBD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