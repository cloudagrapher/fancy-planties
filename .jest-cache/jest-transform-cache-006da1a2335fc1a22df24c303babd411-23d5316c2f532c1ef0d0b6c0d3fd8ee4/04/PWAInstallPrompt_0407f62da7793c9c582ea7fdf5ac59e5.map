{"version":3,"names":["cov_12k5uibbr","actualCoverage","s","PWAInstallPrompt","f","StandaloneModeIndicator","isInstallable","isStandalone","promptInstall","dismissPrompt","_usePWAInstall","usePWAInstall","triggerHaptic","_useHapticFeedback","useHapticFeedback","showPrompt","setShowPrompt","_react","useState","hasBeenDismissed","setHasBeenDismissed","useEffect","dismissed","localStorage","getItem","b","timer","setTimeout","clearTimeout","handleInstall","result","outcome","handleDismiss","setItem","handleDismissTemporary","_jsxruntime","jsx","className","jsxs","_lucidereact","Smartphone","onClick","X","Download","showIndicator","setShowIndicator"],"sources":["/Users/stefanbekker/projects/fancy-planties/src/components/shared/PWAInstallPrompt.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { usePWAInstall } from '@/hooks/usePWAInstall';\nimport { useHapticFeedback } from '@/hooks/useHapticFeedback';\nimport { Download, X, Smartphone } from 'lucide-react';\n\n/**\n * PWA Install Prompt Component\n * Shows installation prompts for the Fancy Planties app\n */\nexport function PWAInstallPrompt() {\n  const { isInstallable, isStandalone, promptInstall, dismissPrompt } = usePWAInstall();\n  const { triggerHaptic } = useHapticFeedback();\n  const [showPrompt, setShowPrompt] = useState(false);\n  const [hasBeenDismissed, setHasBeenDismissed] = useState(false);\n\n  useEffect(() => {\n    // Check if user has previously dismissed the prompt\n    const dismissed = localStorage.getItem('fancy-planties-install-dismissed');\n    if (dismissed) {\n      setHasBeenDismissed(true);\n    }\n  }, []);\n\n  useEffect(() => {\n    // Show prompt after a delay if installable and not dismissed\n    if (isInstallable && !hasBeenDismissed && !isStandalone) {\n      const timer = setTimeout(() => {\n        setShowPrompt(true);\n      }, 5000); // Show after 5 seconds\n\n      return () => clearTimeout(timer);\n    }\n  }, [isInstallable, hasBeenDismissed, isStandalone]);\n\n  const handleInstall = async () => {\n    triggerHaptic('medium');\n    const result = await promptInstall();\n    \n    if (result.outcome === 'accepted') {\n      setShowPrompt(false);\n    }\n  };\n\n  const handleDismiss = () => {\n    triggerHaptic('light');\n    setShowPrompt(false);\n    setHasBeenDismissed(true);\n    dismissPrompt();\n    localStorage.setItem('fancy-planties-install-dismissed', 'true');\n  };\n\n  const handleDismissTemporary = () => {\n    triggerHaptic('light');\n    setShowPrompt(false);\n  };\n\n  if (!showPrompt || isStandalone) {\n    return null;\n  }\n\n  return (\n    <div className=\"fixed bottom-20 left-4 right-4 z-40 md:left-auto md:right-4 md:w-96\">\n      <div className=\"bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-primary-500 to-primary-600 px-4 py-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center\">\n                <Smartphone className=\"w-4 h-4 text-white\" />\n              </div>\n              <h3 className=\"text-white font-semibold\">Install Fancy Planties</h3>\n            </div>\n            <button\n              onClick={handleDismissTemporary}\n              className=\"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/10 transition-colors\"\n            >\n              <X className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-4\">\n          <p className=\"text-gray-600 text-sm mb-4\">\n            Get the full app experience! Install Fancy Planties for:\n          </p>\n          \n          <ul className=\"space-y-2 mb-4\">\n            <li className=\"flex items-center gap-2 text-sm text-gray-700\">\n              <div className=\"w-1.5 h-1.5 bg-primary-500 rounded-full\"></div>\n              Offline plant viewing and care logging\n            </li>\n            <li className=\"flex items-center gap-2 text-sm text-gray-700\">\n              <div className=\"w-1.5 h-1.5 bg-primary-500 rounded-full\"></div>\n              Native app experience with faster loading\n            </li>\n            <li className=\"flex items-center gap-2 text-sm text-gray-700\">\n              <div className=\"w-1.5 h-1.5 bg-primary-500 rounded-full\"></div>\n              Home screen access and push notifications\n            </li>\n          </ul>\n\n          <div className=\"flex gap-2\">\n            <button\n              onClick={handleInstall}\n              className=\"flex-1 flex items-center justify-center gap-2 bg-primary-600 text-white px-4 py-2.5 rounded-lg font-medium hover:bg-primary-700 transition-colors\"\n            >\n              <Download className=\"w-4 h-4\" />\n              Install App\n            </button>\n            <button\n              onClick={handleDismiss}\n              className=\"px-4 py-2.5 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\n            >\n              Not Now\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/**\n * Standalone Mode Indicator\n * Shows when app is running in standalone mode\n */\nexport function StandaloneModeIndicator() {\n  const { isStandalone } = usePWAInstall();\n  const [showIndicator, setShowIndicator] = useState(false);\n\n  useEffect(() => {\n    if (isStandalone) {\n      setShowIndicator(true);\n      const timer = setTimeout(() => setShowIndicator(false), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [isStandalone]);\n\n  if (!showIndicator) {\n    return null;\n  }\n\n  return (\n    <div className=\"fixed top-4 left-4 right-4 z-50 md:left-auto md:right-4 md:w-80\">\n      <div className=\"bg-green-50 border border-green-200 rounded-lg p-3 shadow-sm\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center\">\n            <Smartphone className=\"w-3 h-3 text-green-600\" />\n          </div>\n          <div>\n            <p className=\"text-green-800 text-sm font-medium\">\n              App Mode Active\n            </p>\n            <p className=\"text-green-700 text-xs\">\n              Fancy Planties is running as an installed app\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}