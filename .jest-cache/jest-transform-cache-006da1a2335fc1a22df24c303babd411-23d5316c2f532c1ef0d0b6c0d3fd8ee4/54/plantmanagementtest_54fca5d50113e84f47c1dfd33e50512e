b48ab11eec243d5d23f802616d97ae9c
// Plant Management API Endpoint Tests
// Tests GET /api/plants, POST /api/plant-instances, PUT /api/plant-instances/[id] endpoints
"use strict";
// Mock the auth functions
jest.mock('@/lib/auth/server', ()=>({
        validateRequest: jest.fn(),
        validateVerifiedRequest: jest.fn()
    }));
// Mock the database queries
jest.mock('@/lib/db/queries/plant-taxonomy', ()=>({
        createPlant: jest.fn(),
        getPlantsWithStats: jest.fn(),
        validatePlantTaxonomy: jest.fn()
    }));
jest.mock('@/lib/db/queries/plant-instances', ()=>({
        PlantInstanceQueries: {
            getWithFilters: jest.fn(),
            create: jest.fn(),
            getEnhancedById: jest.fn(),
            update: jest.fn(),
            delete: jest.fn()
        }
    }));
// Mock validation schemas
jest.mock('@/lib/validation/plant-schemas', ()=>({
        createPlantSchema: {
            parse: jest.fn()
        },
        plantFilterSchema: {
            parse: jest.fn()
        },
        createPlantInstanceSchema: {
            parse: jest.fn()
        },
        plantInstanceFilterSchema: {
            parse: jest.fn()
        },
        updatePlantInstanceSchema: {
            parse: jest.fn()
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _server = require("next/server");
const _route = require("../../app/api/plants/route");
const _route1 = require("../../app/api/plant-instances/route");
const _route2 = require("../../app/api/plant-instances/[id]/route");
const _userfactory = require("../../test-utils/factories/user-factory.js");
const _plantfactory = require("../../test-utils/factories/plant-factory.js");
const _apihelpers = require("../../test-utils/helpers/api-helpers.js");
const _server1 = require("../../lib/auth/server");
const _planttaxonomy = require("../../lib/db/queries/plant-taxonomy");
const _plantinstances = require("../../lib/db/queries/plant-instances");
const _plantschemas = require("../../lib/validation/plant-schemas");
describe('Plant Management API Endpoints', ()=>{
    let testUser;
    let testSession;
    beforeEach(()=>{
        jest.clearAllMocks();
        (0, _apihelpers.resetApiMocks)();
        testUser = (0, _userfactory.createTestUser)();
        testSession = (0, _userfactory.createTestSession)(testUser);
        // Default auth mock
        _server1.validateRequest.mockResolvedValue({
            user: testUser,
            session: testSession
        });
        _server1.validateVerifiedRequest.mockResolvedValue({
            user: testUser,
            session: testSession
        });
    });
    afterEach(()=>{
        jest.restoreAllMocks();
    });
    describe('GET /api/plants - Plant filtering and pagination', ()=>{
        it('should return plants with default filters', async ()=>{
            // Arrange
            const mockPlants = [
                {
                    ...(0, _plantfactory.createTestPlant)({
                        family: 'Araceae',
                        genus: 'Monstera'
                    }),
                    id: 1
                },
                {
                    ...(0, _plantfactory.createTestPlant)({
                        family: 'Araceae',
                        genus: 'Philodendron'
                    }),
                    id: 2
                }
            ];
            _plantschemas.plantFilterSchema.parse.mockReturnValue({
                family: undefined,
                genus: undefined,
                isVerified: undefined,
                createdBy: undefined,
                limit: 20,
                offset: 0
            });
            _planttaxonomy.getPlantsWithStats.mockResolvedValue(mockPlants);
            const request = new _server.NextRequest('http://localhost:3000/api/plants');
            // Act
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData).toEqual({
                success: true,
                data: expect.arrayContaining([
                    expect.objectContaining({
                        id: expect.any(Number),
                        family: expect.any(String),
                        genus: expect.any(String),
                        species: expect.any(String),
                        commonName: expect.any(String),
                        isVerified: true,
                        createdAt: expect.any(String),
                        updatedAt: expect.any(String)
                    })
                ]),
                metadata: {
                    operation: 'search',
                    timestamp: expect.any(String)
                }
            });
            expect(_server1.validateRequest).toHaveBeenCalled();
            expect(_plantschemas.plantFilterSchema.parse).toHaveBeenCalledWith({
                family: undefined,
                genus: undefined,
                isVerified: undefined,
                createdBy: undefined,
                limit: 20,
                offset: 0
            });
            expect(_planttaxonomy.getPlantsWithStats).toHaveBeenCalledWith(expect.any(Object), testUser.id);
        });
        it('should return plants with family filter', async ()=>{
            // Arrange
            const mockPlants = [
                {
                    ...(0, _plantfactory.createTestPlant)({
                        family: 'Araceae',
                        genus: 'Monstera'
                    }),
                    id: 1
                }
            ];
            _plantschemas.plantFilterSchema.parse.mockReturnValue({
                family: 'Araceae',
                genus: undefined,
                isVerified: undefined,
                createdBy: undefined,
                limit: 20,
                offset: 0
            });
            _planttaxonomy.getPlantsWithStats.mockResolvedValue(mockPlants);
            const request = new _server.NextRequest('http://localhost:3000/api/plants?family=Araceae');
            // Act
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData.success).toBe(true);
            expect(responseData.data).toEqual(expect.arrayContaining([
                expect.objectContaining({
                    id: expect.any(Number),
                    family: 'Araceae',
                    genus: 'Monstera',
                    commonName: expect.any(String),
                    isVerified: true
                })
            ]));
            expect(_plantschemas.plantFilterSchema.parse).toHaveBeenCalledWith({
                family: 'Araceae',
                genus: undefined,
                isVerified: undefined,
                createdBy: undefined,
                limit: 20,
                offset: 0
            });
        });
        it('should return plants with pagination parameters', async ()=>{
            // Arrange
            const mockPlants = [
                {
                    ...(0, _plantfactory.createTestPlant)(),
                    id: 1
                }
            ];
            _plantschemas.plantFilterSchema.parse.mockReturnValue({
                family: undefined,
                genus: undefined,
                isVerified: undefined,
                createdBy: undefined,
                limit: 10,
                offset: 20
            });
            _planttaxonomy.getPlantsWithStats.mockResolvedValue(mockPlants);
            const request = new _server.NextRequest('http://localhost:3000/api/plants?limit=10&offset=20');
            // Act
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData.success).toBe(true);
            expect(_plantschemas.plantFilterSchema.parse).toHaveBeenCalledWith({
                family: undefined,
                genus: undefined,
                isVerified: undefined,
                createdBy: undefined,
                limit: 10,
                offset: 20
            });
        });
        it('should return unauthorized error when user not authenticated', async ()=>{
            // Arrange
            _server1.validateRequest.mockResolvedValue({
                user: null,
                session: null
            });
            const request = new _server.NextRequest('http://localhost:3000/api/plants');
            // Act
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(401);
            expect(responseData).toEqual({
                error: 'Unauthorized'
            });
            expect(_planttaxonomy.getPlantsWithStats).not.toHaveBeenCalled();
        });
        it('should return validation error for invalid filter parameters', async ()=>{
            // Arrange
            const validationError = new Error('Validation failed');
            validationError.name = 'ZodError';
            validationError.issues = [
                {
                    path: [
                        'limit'
                    ],
                    message: 'Limit must be a positive number'
                }
            ];
            _plantschemas.plantFilterSchema.parse.mockImplementation(()=>{
                throw validationError;
            });
            const request = new _server.NextRequest('http://localhost:3000/api/plants?limit=invalid');
            // Act
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData).toEqual({
                error: 'Invalid filter parameters',
                details: validationError.issues
            });
            expect(_planttaxonomy.getPlantsWithStats).not.toHaveBeenCalled();
        });
        it('should handle database errors gracefully', async ()=>{
            // Arrange
            _plantschemas.plantFilterSchema.parse.mockReturnValue({
                limit: 20,
                offset: 0
            });
            _planttaxonomy.getPlantsWithStats.mockRejectedValue(new Error('Database connection failed'));
            const request = new _server.NextRequest('http://localhost:3000/api/plants');
            // Act
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(responseData).toEqual({
                error: 'Internal server error'
            });
        });
    });
    describe('POST /api/plant-instances - Plant instance creation with data validation', ()=>{
        it('should create plant instance with valid JSON data', async ()=>{
            // Arrange
            const testPlant = {
                ...(0, _plantfactory.createTestPlant)(),
                id: 1
            };
            const requestBody = {
                plantId: testPlant.id,
                nickname: 'My Monstera',
                location: 'Living Room',
                notes: 'Beautiful plant',
                isActive: true
            };
            const expectedInstanceData = {
                ...requestBody,
                userId: testUser.id,
                lastFertilized: null,
                lastRepot: null
            };
            const createdInstance = (0, _plantfactory.createTestPlantInstance)({
                ...expectedInstanceData,
                id: 1
            });
            const enhancedInstance = {
                ...createdInstance,
                plant: testPlant
            };
            _plantschemas.createPlantInstanceSchema.parse.mockReturnValue(expectedInstanceData);
            _plantinstances.PlantInstanceQueries.create.mockResolvedValue(createdInstance);
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(enhancedInstance);
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: JSON.stringify(requestBody),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(201);
            expect(responseData).toEqual({
                success: true,
                data: expect.objectContaining({
                    ...enhancedInstance,
                    createdAt: expect.any(String),
                    updatedAt: expect.any(String),
                    lastFertilized: enhancedInstance.lastFertilized,
                    lastRepot: enhancedInstance.lastRepot,
                    plant: expect.objectContaining({
                        ...enhancedInstance.plant,
                        createdAt: expect.any(String),
                        updatedAt: expect.any(String)
                    })
                })
            });
            expect(_plantschemas.createPlantInstanceSchema.parse).toHaveBeenCalledWith(expectedInstanceData);
            expect(_plantinstances.PlantInstanceQueries.create).toHaveBeenCalledWith(expectedInstanceData);
            expect(_plantinstances.PlantInstanceQueries.getEnhancedById).toHaveBeenCalledWith(createdInstance.id);
        });
        it('should create plant instance with FormData (file upload)', async ()=>{
            // Arrange
            const testPlant = {
                ...(0, _plantfactory.createTestPlant)(),
                id: 1
            };
            const formData = new FormData();
            formData.append('plantId', testPlant.id.toString());
            formData.append('nickname', 'My Monstera');
            formData.append('location', 'Living Room');
            formData.append('isActive', 'true');
            // Mock file
            const mockFile = new File([
                'test image'
            ], 'test.jpg', {
                type: 'image/jpeg'
            });
            formData.append('imageFiles[0]', mockFile);
            const expectedInstanceData = {
                plantId: testPlant.id,
                nickname: 'My Monstera',
                location: 'Living Room',
                isActive: true,
                userId: testUser.id,
                lastFertilized: null,
                lastRepot: null,
                images: [
                    'data:image/jpeg;base64,dGVzdCBpbWFnZQ=='
                ]
            };
            const createdInstance = (0, _plantfactory.createTestPlantInstance)(expectedInstanceData);
            const enhancedInstance = {
                ...createdInstance,
                plant: testPlant
            };
            _plantschemas.createPlantInstanceSchema.parse.mockReturnValue(expectedInstanceData);
            _plantinstances.PlantInstanceQueries.create.mockResolvedValue(createdInstance);
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(enhancedInstance);
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: formData
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(201);
            expect(responseData.success).toBe(true);
            expect(responseData.data).toEqual(enhancedInstance);
            expect(_plantinstances.PlantInstanceQueries.create).toHaveBeenCalledWith(expectedInstanceData);
        });
        it('should return validation error for invalid plant instance data', async ()=>{
            // Arrange
            const requestBody = {
                plantId: 'invalid',
                nickname: '',
                location: ''
            };
            const validationError = new Error('Validation failed');
            validationError.name = 'ZodError';
            validationError.issues = [
                {
                    path: [
                        'plantId'
                    ],
                    message: 'Plant ID must be a number'
                },
                {
                    path: [
                        'nickname'
                    ],
                    message: 'Nickname is required'
                }
            ];
            _plantschemas.createPlantInstanceSchema.parse.mockImplementation(()=>{
                throw validationError;
            });
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: JSON.stringify(requestBody),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData).toEqual({
                success: false,
                error: 'Validation failed',
                details: validationError.issues
            });
            expect(_plantinstances.PlantInstanceQueries.create).not.toHaveBeenCalled();
        });
        it('should return unauthorized error when user not authenticated', async ()=>{
            // Arrange
            _server1.validateVerifiedRequest.mockResolvedValue({
                user: null,
                error: 'Unauthorized'
            });
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: JSON.stringify({
                    plantId: 1
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(401);
            expect(responseData).toEqual({
                success: false,
                error: 'Unauthorized'
            });
            expect(_plantinstances.PlantInstanceQueries.create).not.toHaveBeenCalled();
        });
        it('should handle empty request body', async ()=>{
            // Arrange
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData).toEqual({
                success: false,
                error: 'Request body is required'
            });
            expect(_plantinstances.PlantInstanceQueries.create).not.toHaveBeenCalled();
        });
        it('should handle malformed JSON', async ()=>{
            // Arrange
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: 'invalid json',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData).toEqual({
                success: false,
                error: 'Invalid JSON in request body'
            });
            expect(_plantinstances.PlantInstanceQueries.create).not.toHaveBeenCalled();
        });
        it('should calculate fertilizer due date from schedule', async ()=>{
            // Arrange
            const requestBody = {
                plantId: 1,
                nickname: 'Test Plant',
                location: 'Test Location',
                fertilizerSchedule: '2 weeks'
            };
            const expectedInstanceData = {
                ...requestBody,
                userId: testUser.id,
                lastFertilized: null,
                lastRepot: null,
                fertilizerDue: expect.any(Date)
            };
            const createdInstance = (0, _plantfactory.createTestPlantInstance)(expectedInstanceData);
            const enhancedInstance = {
                ...createdInstance,
                plant: (0, _plantfactory.createTestPlant)()
            };
            _plantschemas.createPlantInstanceSchema.parse.mockReturnValue(expectedInstanceData);
            _plantinstances.PlantInstanceQueries.create.mockResolvedValue(createdInstance);
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(enhancedInstance);
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: JSON.stringify(requestBody),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            // Act
            const response = await (0, _route1.POST)(request);
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(201);
            expect(responseData.success).toBe(true);
            // Verify fertilizer due date was calculated (should be 2 weeks from now)
            const callArgs = _plantinstances.PlantInstanceQueries.create.mock.calls[0][0];
            expect(callArgs.fertilizerDue).toBeInstanceOf(Date);
            const now = new Date();
            const expectedDue = new Date(now);
            expectedDue.setDate(expectedDue.getDate() + 14); // 2 weeks
            // Allow for small time differences in test execution
            const timeDiff = Math.abs(callArgs.fertilizerDue.getTime() - expectedDue.getTime());
            expect(timeDiff).toBeLessThan(1000); // Less than 1 second difference
        });
    });
    describe('PUT /api/plant-instances/[id] - Plant instance updates with authorization checks', ()=>{
        it('should update plant instance with valid data and authorization', async ()=>{
            // Arrange
            const testPlant = (0, _plantfactory.createTestPlant)();
            const existingInstance = (0, _plantfactory.createTestPlantInstance)({
                id: 1,
                userId: testUser.id,
                plantId: testPlant.id
            });
            const updateData = {
                nickname: 'Updated Nickname',
                location: 'New Location',
                notes: 'Updated notes'
            };
            const expectedUpdateData = {
                ...updateData,
                id: 1,
                userId: testUser.id,
                lastFertilized: null,
                lastRepot: null
            };
            const updatedInstance = {
                ...existingInstance,
                ...updateData
            };
            const enhancedInstance = {
                ...updatedInstance,
                plant: testPlant
            };
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValueOnce(existingInstance);
            _plantschemas.updatePlantInstanceSchema.parse.mockReturnValue(expectedUpdateData);
            _plantinstances.PlantInstanceQueries.update.mockResolvedValue(updatedInstance);
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValueOnce(enhancedInstance);
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'PUT',
                body: JSON.stringify(updateData),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const params = Promise.resolve({
                id: '1'
            });
            // Act
            const response = await (0, _route2.PUT)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData).toEqual(enhancedInstance);
            expect(_plantinstances.PlantInstanceQueries.getEnhancedById).toHaveBeenCalledWith(1);
            expect(_plantschemas.updatePlantInstanceSchema.parse).toHaveBeenCalledWith(expectedUpdateData);
            expect(_plantinstances.PlantInstanceQueries.update).toHaveBeenCalledWith(1, updateData);
        });
        it('should return forbidden error when user does not own plant instance', async ()=>{
            // Arrange
            const otherUser = (0, _userfactory.createTestUser)({
                id: 999
            });
            const existingInstance = (0, _plantfactory.createTestPlantInstance)({
                id: 1,
                userId: otherUser.id
            });
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(existingInstance);
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'PUT',
                body: JSON.stringify({
                    nickname: 'Updated'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const params = Promise.resolve({
                id: '1'
            });
            // Act
            const response = await (0, _route2.PUT)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(403);
            expect(responseData).toEqual({
                error: 'Forbidden'
            });
            expect(_plantinstances.PlantInstanceQueries.update).not.toHaveBeenCalled();
        });
        it('should return not found error when plant instance does not exist', async ()=>{
            // Arrange
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(null);
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances/999', {
                method: 'PUT',
                body: JSON.stringify({
                    nickname: 'Updated'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const params = Promise.resolve({
                id: '999'
            });
            // Act
            const response = await (0, _route2.PUT)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(404);
            expect(responseData).toEqual({
                error: 'Plant instance not found'
            });
            expect(_plantinstances.PlantInstanceQueries.update).not.toHaveBeenCalled();
        });
        it('should return bad request error for invalid plant instance ID', async ()=>{
            // Arrange
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances/invalid', {
                method: 'PUT',
                body: JSON.stringify({
                    nickname: 'Updated'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const params = Promise.resolve({
                id: 'invalid'
            });
            // Act
            const response = await (0, _route2.PUT)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData).toEqual({
                error: 'Invalid plant instance ID'
            });
            expect(_plantinstances.PlantInstanceQueries.getEnhancedById).not.toHaveBeenCalled();
        });
        it('should return unauthorized error when user not authenticated', async ()=>{
            // Arrange
            _server1.validateRequest.mockResolvedValue({
                user: null,
                session: null
            });
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'PUT',
                body: JSON.stringify({
                    nickname: 'Updated'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const params = Promise.resolve({
                id: '1'
            });
            // Act
            const response = await (0, _route2.PUT)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(401);
            expect(responseData).toEqual({
                error: 'Unauthorized'
            });
            expect(_plantinstances.PlantInstanceQueries.getEnhancedById).not.toHaveBeenCalled();
        });
        it('should handle FormData updates with file uploads', async ()=>{
            // Arrange
            const testPlant = (0, _plantfactory.createTestPlant)();
            const existingInstance = (0, _plantfactory.createTestPlantInstance)({
                id: 1,
                userId: testUser.id,
                plantId: testPlant.id
            });
            const formData = new FormData();
            formData.append('nickname', 'Updated Nickname');
            formData.append('location', 'New Location');
            formData.append('existingImages[0]', 'existing-image-url');
            const mockFile = new File([
                'new image'
            ], 'new.jpg', {
                type: 'image/jpeg'
            });
            formData.append('imageFiles[0]', mockFile);
            const expectedUpdateData = {
                nickname: 'Updated Nickname',
                location: 'New Location',
                images: [
                    'existing-image-url',
                    'data:image/jpeg;base64,bmV3IGltYWdl'
                ],
                id: 1,
                userId: testUser.id,
                lastFertilized: null,
                lastRepot: null
            };
            const updatedInstance = {
                ...existingInstance,
                ...expectedUpdateData
            };
            const enhancedInstance = {
                ...updatedInstance,
                plant: testPlant
            };
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValueOnce(existingInstance);
            _plantschemas.updatePlantInstanceSchema.parse.mockReturnValue(expectedUpdateData);
            _plantinstances.PlantInstanceQueries.update.mockResolvedValue(updatedInstance);
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValueOnce(enhancedInstance);
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'PUT',
                body: formData
            });
            const params = Promise.resolve({
                id: '1'
            });
            // Act
            const response = await (0, _route2.PUT)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(responseData).toEqual(enhancedInstance);
            // Verify the update was called with correct data (excluding id and userId)
            const { id, userId, ...updateDataWithoutIds } = expectedUpdateData;
            expect(_plantinstances.PlantInstanceQueries.update).toHaveBeenCalledWith(1, updateDataWithoutIds);
        });
        it('should handle validation errors during update', async ()=>{
            // Arrange
            const existingInstance = (0, _plantfactory.createTestPlantInstance)({
                id: 1,
                userId: testUser.id
            });
            const validationError = new Error('Validation failed');
            validationError.name = 'ZodError';
            validationError.issues = [
                {
                    path: [
                        'nickname'
                    ],
                    message: 'Nickname is required'
                }
            ];
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(existingInstance);
            _plantschemas.updatePlantInstanceSchema.parse.mockImplementation(()=>{
                throw validationError;
            });
            const request = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'PUT',
                body: JSON.stringify({
                    nickname: ''
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const params = Promise.resolve({
                id: '1'
            });
            // Act
            const response = await (0, _route2.PUT)(request, {
                params
            });
            const responseData = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(responseData.error).toContain('Invalid plant instance data');
            expect(_plantinstances.PlantInstanceQueries.update).not.toHaveBeenCalled();
        });
    });
    describe('Plant Management Integration Tests', ()=>{
        it('should handle complete plant management workflow: create -> read -> update -> delete', async ()=>{
            const testPlant = (0, _plantfactory.createTestPlant)();
            // Step 1: Create plant instance
            const createData = {
                plantId: testPlant.id,
                nickname: 'Test Plant',
                location: 'Test Location'
            };
            const createdInstance = (0, _plantfactory.createTestPlantInstance)({
                id: 1,
                ...createData,
                userId: testUser.id
            });
            const enhancedInstance = {
                ...createdInstance,
                plant: testPlant
            };
            _plantschemas.createPlantInstanceSchema.parse.mockReturnValue({
                ...createData,
                userId: testUser.id,
                lastFertilized: null,
                lastRepot: null
            });
            _plantinstances.PlantInstanceQueries.create.mockResolvedValue(createdInstance);
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(enhancedInstance);
            const createRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: JSON.stringify(createData),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const createResponse = await (0, _route1.POST)(createRequest);
            const createResponseData = await createResponse.json();
            expect(createResponse.status).toBe(201);
            expect(createResponseData.success).toBe(true);
            // Step 2: Read plant instance
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(enhancedInstance);
            const readRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances/1');
            const readParams = Promise.resolve({
                id: '1'
            });
            const readResponse = await (0, _route2.GET)(readRequest, {
                params: readParams
            });
            const readResponseData = await readResponse.json();
            expect(readResponse.status).toBe(200);
            expect(readResponseData).toEqual(enhancedInstance);
            // Step 3: Update plant instance
            const updateData = {
                nickname: 'Updated Plant'
            };
            const updatedInstance = {
                ...enhancedInstance,
                ...updateData
            };
            _plantschemas.updatePlantInstanceSchema.parse.mockReturnValue({
                ...updateData,
                id: 1,
                userId: testUser.id,
                lastFertilized: null,
                lastRepot: null
            });
            _plantinstances.PlantInstanceQueries.update.mockResolvedValue(updatedInstance);
            _plantinstances.PlantInstanceQueries.getEnhancedById.mockResolvedValue(updatedInstance);
            const updateRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'PUT',
                body: JSON.stringify(updateData),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const updateParams = Promise.resolve({
                id: '1'
            });
            const updateResponse = await (0, _route2.PUT)(updateRequest, {
                params: updateParams
            });
            const updateResponseData = await updateResponse.json();
            expect(updateResponse.status).toBe(200);
            expect(updateResponseData.nickname).toBe('Updated Plant');
            // Step 4: Delete plant instance
            _plantinstances.PlantInstanceQueries.delete.mockResolvedValue(true);
            const deleteRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'DELETE'
            });
            const deleteParams = Promise.resolve({
                id: '1'
            });
            const deleteResponse = await (0, _route2.DELETE)(deleteRequest, {
                params: deleteParams
            });
            const deleteResponseData = await deleteResponse.json();
            expect(deleteResponse.status).toBe(200);
            expect(deleteResponseData).toEqual({
                success: true,
                message: 'Plant instance deleted successfully'
            });
            // Verify all operations were called
            expect(_plantinstances.PlantInstanceQueries.create).toHaveBeenCalled();
            expect(_plantinstances.PlantInstanceQueries.update).toHaveBeenCalled();
            expect(_plantinstances.PlantInstanceQueries.delete).toHaveBeenCalledWith(1);
        });
        it('should handle authorization checks across all endpoints', async ()=>{
            // Test unauthorized access to all endpoints
            _server1.validateRequest.mockResolvedValue({
                user: null,
                session: null
            });
            // GET /api/plants
            const getPlantsRequest = new _server.NextRequest('http://localhost:3000/api/plants');
            const getPlantsResponse = await (0, _route.GET)(getPlantsRequest);
            expect(getPlantsResponse.status).toBe(401);
            // POST /api/plant-instances
            const createRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances', {
                method: 'POST',
                body: JSON.stringify({}),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const createResponse = await (0, _route1.POST)(createRequest);
            expect(createResponse.status).toBe(401);
            // GET /api/plant-instances/1
            const getRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances/1');
            const getParams = Promise.resolve({
                id: '1'
            });
            const getResponse = await (0, _route2.GET)(getRequest, {
                params: getParams
            });
            expect(getResponse.status).toBe(401);
            // PUT /api/plant-instances/1
            const updateRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'PUT',
                body: JSON.stringify({}),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const updateParams = Promise.resolve({
                id: '1'
            });
            const updateResponse = await (0, _route2.PUT)(updateRequest, {
                params: updateParams
            });
            expect(updateResponse.status).toBe(401);
            // DELETE /api/plant-instances/1
            const deleteRequest = new _server.NextRequest('http://localhost:3000/api/plant-instances/1', {
                method: 'DELETE'
            });
            const deleteParams = Promise.resolve({
                id: '1'
            });
            const deleteResponse = await (0, _route2.DELETE)(deleteRequest, {
                params: deleteParams
            });
            expect(deleteResponse.status).toBe(401);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdGVmYW5iZWtrZXIvcHJvamVjdHMvZmFuY3ktcGxhbnRpZXMvc3JjL19fdGVzdHNfXy9hcGkvcGxhbnQtbWFuYWdlbWVudC50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFBsYW50IE1hbmFnZW1lbnQgQVBJIEVuZHBvaW50IFRlc3RzXG4vLyBUZXN0cyBHRVQgL2FwaS9wbGFudHMsIFBPU1QgL2FwaS9wbGFudC1pbnN0YW5jZXMsIFBVVCAvYXBpL3BsYW50LWluc3RhbmNlcy9baWRdIGVuZHBvaW50c1xuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgR0VUIGFzIGdldFBsYW50c0hhbmRsZXIsIFBPU1QgYXMgY3JlYXRlUGxhbnRIYW5kbGVyIH0gZnJvbSAnQC9hcHAvYXBpL3BsYW50cy9yb3V0ZSc7XG5pbXBvcnQgeyBHRVQgYXMgZ2V0UGxhbnRJbnN0YW5jZXNIYW5kbGVyLCBQT1NUIGFzIGNyZWF0ZVBsYW50SW5zdGFuY2VIYW5kbGVyIH0gZnJvbSAnQC9hcHAvYXBpL3BsYW50LWluc3RhbmNlcy9yb3V0ZSc7XG5pbXBvcnQgeyBHRVQgYXMgZ2V0UGxhbnRJbnN0YW5jZUhhbmRsZXIsIFBVVCBhcyB1cGRhdGVQbGFudEluc3RhbmNlSGFuZGxlciwgREVMRVRFIGFzIGRlbGV0ZVBsYW50SW5zdGFuY2VIYW5kbGVyIH0gZnJvbSAnQC9hcHAvYXBpL3BsYW50LWluc3RhbmNlcy9baWRdL3JvdXRlJztcbmltcG9ydCB7IGNyZWF0ZVRlc3RVc2VyLCBjcmVhdGVUZXN0U2Vzc2lvbiB9IGZyb20gJ0AvdGVzdC11dGlscy9mYWN0b3JpZXMvdXNlci1mYWN0b3J5JztcbmltcG9ydCB7IGNyZWF0ZVRlc3RQbGFudCwgY3JlYXRlVGVzdFBsYW50SW5zdGFuY2UgfSBmcm9tICdAL3Rlc3QtdXRpbHMvZmFjdG9yaWVzL3BsYW50LWZhY3RvcnknO1xuaW1wb3J0IHsgcmVzZXRBcGlNb2NrcyB9IGZyb20gJ0AvdGVzdC11dGlscy9oZWxwZXJzL2FwaS1oZWxwZXJzJztcblxuLy8gTW9jayB0aGUgYXV0aCBmdW5jdGlvbnNcbmplc3QubW9jaygnQC9saWIvYXV0aC9zZXJ2ZXInLCAoKSA9PiAoe1xuICB2YWxpZGF0ZVJlcXVlc3Q6IGplc3QuZm4oKSxcbiAgdmFsaWRhdGVWZXJpZmllZFJlcXVlc3Q6IGplc3QuZm4oKSxcbn0pKTtcblxuLy8gTW9jayB0aGUgZGF0YWJhc2UgcXVlcmllc1xuamVzdC5tb2NrKCdAL2xpYi9kYi9xdWVyaWVzL3BsYW50LXRheG9ub215JywgKCkgPT4gKHtcbiAgY3JlYXRlUGxhbnQ6IGplc3QuZm4oKSxcbiAgZ2V0UGxhbnRzV2l0aFN0YXRzOiBqZXN0LmZuKCksXG4gIHZhbGlkYXRlUGxhbnRUYXhvbm9teTogamVzdC5mbigpLFxufSkpO1xuXG5qZXN0Lm1vY2soJ0AvbGliL2RiL3F1ZXJpZXMvcGxhbnQtaW5zdGFuY2VzJywgKCkgPT4gKHtcbiAgUGxhbnRJbnN0YW5jZVF1ZXJpZXM6IHtcbiAgICBnZXRXaXRoRmlsdGVyczogamVzdC5mbigpLFxuICAgIGNyZWF0ZTogamVzdC5mbigpLFxuICAgIGdldEVuaGFuY2VkQnlJZDogamVzdC5mbigpLFxuICAgIHVwZGF0ZTogamVzdC5mbigpLFxuICAgIGRlbGV0ZTogamVzdC5mbigpLFxuICB9LFxufSkpO1xuXG4vLyBNb2NrIHZhbGlkYXRpb24gc2NoZW1hc1xuamVzdC5tb2NrKCdAL2xpYi92YWxpZGF0aW9uL3BsYW50LXNjaGVtYXMnLCAoKSA9PiAoe1xuICBjcmVhdGVQbGFudFNjaGVtYToge1xuICAgIHBhcnNlOiBqZXN0LmZuKCksXG4gIH0sXG4gIHBsYW50RmlsdGVyU2NoZW1hOiB7XG4gICAgcGFyc2U6IGplc3QuZm4oKSxcbiAgfSxcbiAgY3JlYXRlUGxhbnRJbnN0YW5jZVNjaGVtYToge1xuICAgIHBhcnNlOiBqZXN0LmZuKCksXG4gIH0sXG4gIHBsYW50SW5zdGFuY2VGaWx0ZXJTY2hlbWE6IHtcbiAgICBwYXJzZTogamVzdC5mbigpLFxuICB9LFxuICB1cGRhdGVQbGFudEluc3RhbmNlU2NoZW1hOiB7XG4gICAgcGFyc2U6IGplc3QuZm4oKSxcbiAgfSxcbn0pKTtcblxuLy8gSW1wb3J0IG1vY2tlZCBmdW5jdGlvbnNcbmltcG9ydCB7IHZhbGlkYXRlUmVxdWVzdCwgdmFsaWRhdGVWZXJpZmllZFJlcXVlc3QgfSBmcm9tICdAL2xpYi9hdXRoL3NlcnZlcic7XG5pbXBvcnQgeyBjcmVhdGVQbGFudCwgZ2V0UGxhbnRzV2l0aFN0YXRzLCB2YWxpZGF0ZVBsYW50VGF4b25vbXkgfSBmcm9tICdAL2xpYi9kYi9xdWVyaWVzL3BsYW50LXRheG9ub215JztcbmltcG9ydCB7IFBsYW50SW5zdGFuY2VRdWVyaWVzIH0gZnJvbSAnQC9saWIvZGIvcXVlcmllcy9wbGFudC1pbnN0YW5jZXMnO1xuaW1wb3J0IHtcbiAgY3JlYXRlUGxhbnRTY2hlbWEsXG4gIHBsYW50RmlsdGVyU2NoZW1hLFxuICBjcmVhdGVQbGFudEluc3RhbmNlU2NoZW1hLFxuICBwbGFudEluc3RhbmNlRmlsdGVyU2NoZW1hLFxuICB1cGRhdGVQbGFudEluc3RhbmNlU2NoZW1hXG59IGZyb20gJ0AvbGliL3ZhbGlkYXRpb24vcGxhbnQtc2NoZW1hcyc7XG5cbmRlc2NyaWJlKCdQbGFudCBNYW5hZ2VtZW50IEFQSSBFbmRwb2ludHMnLCAoKSA9PiB7XG4gIGxldCB0ZXN0VXNlcjtcbiAgbGV0IHRlc3RTZXNzaW9uO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIHJlc2V0QXBpTW9ja3MoKTtcblxuICAgIHRlc3RVc2VyID0gY3JlYXRlVGVzdFVzZXIoKTtcbiAgICB0ZXN0U2Vzc2lvbiA9IGNyZWF0ZVRlc3RTZXNzaW9uKHRlc3RVc2VyKTtcblxuICAgIC8vIERlZmF1bHQgYXV0aCBtb2NrXG4gICAgdmFsaWRhdGVSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIHVzZXI6IHRlc3RVc2VyLFxuICAgICAgc2Vzc2lvbjogdGVzdFNlc3Npb24sXG4gICAgfSk7XG5cbiAgICB2YWxpZGF0ZVZlcmlmaWVkUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICB1c2VyOiB0ZXN0VXNlcixcbiAgICAgIHNlc3Npb246IHRlc3RTZXNzaW9uLFxuICAgIH0pO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QucmVzdG9yZUFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL2FwaS9wbGFudHMgLSBQbGFudCBmaWx0ZXJpbmcgYW5kIHBhZ2luYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcGxhbnRzIHdpdGggZGVmYXVsdCBmaWx0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbW9ja1BsYW50cyA9IFtcbiAgICAgICAgeyAuLi5jcmVhdGVUZXN0UGxhbnQoeyBmYW1pbHk6ICdBcmFjZWFlJywgZ2VudXM6ICdNb25zdGVyYScgfSksIGlkOiAxIH0sXG4gICAgICAgIHsgLi4uY3JlYXRlVGVzdFBsYW50KHsgZmFtaWx5OiAnQXJhY2VhZScsIGdlbnVzOiAnUGhpbG9kZW5kcm9uJyB9KSwgaWQ6IDIgfSxcbiAgICAgIF07XG5cbiAgICAgIHBsYW50RmlsdGVyU2NoZW1hLnBhcnNlLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGZhbWlseTogdW5kZWZpbmVkLFxuICAgICAgICBnZW51czogdW5kZWZpbmVkLFxuICAgICAgICBpc1ZlcmlmaWVkOiB1bmRlZmluZWQsXG4gICAgICAgIGNyZWF0ZWRCeTogdW5kZWZpbmVkLFxuICAgICAgICBsaW1pdDogMjAsXG4gICAgICAgIG9mZnNldDogMCxcbiAgICAgIH0pO1xuXG4gICAgICBnZXRQbGFudHNXaXRoU3RhdHMubW9ja1Jlc29sdmVkVmFsdWUobW9ja1BsYW50cyk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnRzJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRQbGFudHNIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBleHBlY3QuYXJyYXlDb250YWluaW5nKFtcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBpZDogZXhwZWN0LmFueShOdW1iZXIpLFxuICAgICAgICAgICAgZmFtaWx5OiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgICAgICBnZW51czogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICAgICAgc3BlY2llczogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICAgICAgY29tbW9uTmFtZTogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICAgICAgaXNWZXJpZmllZDogdHJ1ZSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgICAgfSlcbiAgICAgICAgXSksXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgb3BlcmF0aW9uOiAnc2VhcmNoJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QodmFsaWRhdGVSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QocGxhbnRGaWx0ZXJTY2hlbWEucGFyc2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgZmFtaWx5OiB1bmRlZmluZWQsXG4gICAgICAgIGdlbnVzOiB1bmRlZmluZWQsXG4gICAgICAgIGlzVmVyaWZpZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgY3JlYXRlZEJ5OiB1bmRlZmluZWQsXG4gICAgICAgIGxpbWl0OiAyMCxcbiAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgfSk7XG4gICAgICBleHBlY3QoZ2V0UGxhbnRzV2l0aFN0YXRzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3QuYW55KE9iamVjdCksIHRlc3RVc2VyLmlkKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHBsYW50cyB3aXRoIGZhbWlseSBmaWx0ZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrUGxhbnRzID0gW1xuICAgICAgICB7IC4uLmNyZWF0ZVRlc3RQbGFudCh7IGZhbWlseTogJ0FyYWNlYWUnLCBnZW51czogJ01vbnN0ZXJhJyB9KSwgaWQ6IDEgfSxcbiAgICAgIF07XG5cbiAgICAgIHBsYW50RmlsdGVyU2NoZW1hLnBhcnNlLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGZhbWlseTogJ0FyYWNlYWUnLFxuICAgICAgICBnZW51czogdW5kZWZpbmVkLFxuICAgICAgICBpc1ZlcmlmaWVkOiB1bmRlZmluZWQsXG4gICAgICAgIGNyZWF0ZWRCeTogdW5kZWZpbmVkLFxuICAgICAgICBsaW1pdDogMjAsXG4gICAgICAgIG9mZnNldDogMCxcbiAgICAgIH0pO1xuXG4gICAgICBnZXRQbGFudHNXaXRoU3RhdHMubW9ja1Jlc29sdmVkVmFsdWUobW9ja1BsYW50cyk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnRzP2ZhbWlseT1BcmFjZWFlJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRQbGFudHNIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEuZGF0YSkudG9FcXVhbChleHBlY3QuYXJyYXlDb250YWluaW5nKFtcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGlkOiBleHBlY3QuYW55KE51bWJlciksXG4gICAgICAgICAgZmFtaWx5OiAnQXJhY2VhZScsXG4gICAgICAgICAgZ2VudXM6ICdNb25zdGVyYScsXG4gICAgICAgICAgY29tbW9uTmFtZTogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICAgIGlzVmVyaWZpZWQ6IHRydWUsXG4gICAgICAgIH0pXG4gICAgICBdKSk7XG5cbiAgICAgIGV4cGVjdChwbGFudEZpbHRlclNjaGVtYS5wYXJzZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBmYW1pbHk6ICdBcmFjZWFlJyxcbiAgICAgICAgZ2VudXM6IHVuZGVmaW5lZCxcbiAgICAgICAgaXNWZXJpZmllZDogdW5kZWZpbmVkLFxuICAgICAgICBjcmVhdGVkQnk6IHVuZGVmaW5lZCxcbiAgICAgICAgbGltaXQ6IDIwLFxuICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHBsYW50cyB3aXRoIHBhZ2luYXRpb24gcGFyYW1ldGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vY2tQbGFudHMgPSBbeyAuLi5jcmVhdGVUZXN0UGxhbnQoKSwgaWQ6IDEgfV07XG5cbiAgICAgIHBsYW50RmlsdGVyU2NoZW1hLnBhcnNlLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGZhbWlseTogdW5kZWZpbmVkLFxuICAgICAgICBnZW51czogdW5kZWZpbmVkLFxuICAgICAgICBpc1ZlcmlmaWVkOiB1bmRlZmluZWQsXG4gICAgICAgIGNyZWF0ZWRCeTogdW5kZWZpbmVkLFxuICAgICAgICBsaW1pdDogMTAsXG4gICAgICAgIG9mZnNldDogMjAsXG4gICAgICB9KTtcblxuICAgICAgZ2V0UGxhbnRzV2l0aFN0YXRzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQbGFudHMpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BsYW50cz9saW1pdD0xMCZvZmZzZXQ9MjAnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFBsYW50c0hhbmRsZXIocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuXG4gICAgICBleHBlY3QocGxhbnRGaWx0ZXJTY2hlbWEucGFyc2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgZmFtaWx5OiB1bmRlZmluZWQsXG4gICAgICAgIGdlbnVzOiB1bmRlZmluZWQsXG4gICAgICAgIGlzVmVyaWZpZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgY3JlYXRlZEJ5OiB1bmRlZmluZWQsXG4gICAgICAgIGxpbWl0OiAxMCxcbiAgICAgICAgb2Zmc2V0OiAyMCxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdW5hdXRob3JpemVkIGVycm9yIHdoZW4gdXNlciBub3QgYXV0aGVudGljYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIHZhbGlkYXRlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgIHNlc3Npb246IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudHMnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFBsYW50c0hhbmRsZXIocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9FcXVhbCh7XG4gICAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoZ2V0UGxhbnRzV2l0aFN0YXRzKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdmFsaWRhdGlvbiBlcnJvciBmb3IgaW52YWxpZCBmaWx0ZXIgcGFyYW1ldGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvciA9IG5ldyBFcnJvcignVmFsaWRhdGlvbiBmYWlsZWQnKTtcbiAgICAgIHZhbGlkYXRpb25FcnJvci5uYW1lID0gJ1pvZEVycm9yJztcbiAgICAgIHZhbGlkYXRpb25FcnJvci5pc3N1ZXMgPSBbXG4gICAgICAgIHsgcGF0aDogWydsaW1pdCddLCBtZXNzYWdlOiAnTGltaXQgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicgfVxuICAgICAgXTtcblxuICAgICAgcGxhbnRGaWx0ZXJTY2hlbWEucGFyc2UubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgdGhyb3cgdmFsaWRhdGlvbkVycm9yO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnRzP2xpbWl0PWludmFsaWQnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFBsYW50c0hhbmRsZXIocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9FcXVhbCh7XG4gICAgICAgIGVycm9yOiAnSW52YWxpZCBmaWx0ZXIgcGFyYW1ldGVycycsXG4gICAgICAgIGRldGFpbHM6IHZhbGlkYXRpb25FcnJvci5pc3N1ZXMsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGdldFBsYW50c1dpdGhTdGF0cykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRhdGFiYXNlIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgcGxhbnRGaWx0ZXJTY2hlbWEucGFyc2UubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgbGltaXQ6IDIwLFxuICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICB9KTtcblxuICAgICAgZ2V0UGxhbnRzV2l0aFN0YXRzLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnRzJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRQbGFudHNIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BPU1QgL2FwaS9wbGFudC1pbnN0YW5jZXMgLSBQbGFudCBpbnN0YW5jZSBjcmVhdGlvbiB3aXRoIGRhdGEgdmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBwbGFudCBpbnN0YW5jZSB3aXRoIHZhbGlkIEpTT04gZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRlc3RQbGFudCA9IHsgLi4uY3JlYXRlVGVzdFBsYW50KCksIGlkOiAxIH07XG4gICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgcGxhbnRJZDogdGVzdFBsYW50LmlkLFxuICAgICAgICBuaWNrbmFtZTogJ015IE1vbnN0ZXJhJyxcbiAgICAgICAgbG9jYXRpb246ICdMaXZpbmcgUm9vbScsXG4gICAgICAgIG5vdGVzOiAnQmVhdXRpZnVsIHBsYW50JyxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBleHBlY3RlZEluc3RhbmNlRGF0YSA9IHtcbiAgICAgICAgLi4ucmVxdWVzdEJvZHksXG4gICAgICAgIHVzZXJJZDogdGVzdFVzZXIuaWQsXG4gICAgICAgIGxhc3RGZXJ0aWxpemVkOiBudWxsLFxuICAgICAgICBsYXN0UmVwb3Q6IG51bGwsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjcmVhdGVkSW5zdGFuY2UgPSBjcmVhdGVUZXN0UGxhbnRJbnN0YW5jZSh7XG4gICAgICAgIC4uLmV4cGVjdGVkSW5zdGFuY2VEYXRhLFxuICAgICAgICBpZDogMSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBlbmhhbmNlZEluc3RhbmNlID0ge1xuICAgICAgICAuLi5jcmVhdGVkSW5zdGFuY2UsXG4gICAgICAgIHBsYW50OiB0ZXN0UGxhbnQsXG4gICAgICB9O1xuXG4gICAgICBjcmVhdGVQbGFudEluc3RhbmNlU2NoZW1hLnBhcnNlLm1vY2tSZXR1cm5WYWx1ZShleHBlY3RlZEluc3RhbmNlRGF0YSk7XG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUoY3JlYXRlZEluc3RhbmNlKTtcbiAgICAgIFBsYW50SW5zdGFuY2VRdWVyaWVzLmdldEVuaGFuY2VkQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShlbmhhbmNlZEluc3RhbmNlKTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudC1pbnN0YW5jZXMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjcmVhdGVQbGFudEluc3RhbmNlSGFuZGxlcihyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMSk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIC4uLmVuaGFuY2VkSW5zdGFuY2UsXG4gICAgICAgICAgY3JlYXRlZEF0OiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgICAgdXBkYXRlZEF0OiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgICAgbGFzdEZlcnRpbGl6ZWQ6IGVuaGFuY2VkSW5zdGFuY2UubGFzdEZlcnRpbGl6ZWQsXG4gICAgICAgICAgbGFzdFJlcG90OiBlbmhhbmNlZEluc3RhbmNlLmxhc3RSZXBvdCxcbiAgICAgICAgICBwbGFudDogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgLi4uZW5oYW5jZWRJbnN0YW5jZS5wbGFudCxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChjcmVhdGVQbGFudEluc3RhbmNlU2NoZW1hLnBhcnNlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3RlZEluc3RhbmNlRGF0YSk7XG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3RlZEluc3RhbmNlRGF0YSk7XG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMuZ2V0RW5oYW5jZWRCeUlkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjcmVhdGVkSW5zdGFuY2UuaWQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgcGxhbnQgaW5zdGFuY2Ugd2l0aCBGb3JtRGF0YSAoZmlsZSB1cGxvYWQpJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgdGVzdFBsYW50ID0geyAuLi5jcmVhdGVUZXN0UGxhbnQoKSwgaWQ6IDEgfTtcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ3BsYW50SWQnLCB0ZXN0UGxhbnQuaWQudG9TdHJpbmcoKSk7XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ25pY2tuYW1lJywgJ015IE1vbnN0ZXJhJyk7XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ2xvY2F0aW9uJywgJ0xpdmluZyBSb29tJyk7XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ2lzQWN0aXZlJywgJ3RydWUnKTtcblxuICAgICAgLy8gTW9jayBmaWxlXG4gICAgICBjb25zdCBtb2NrRmlsZSA9IG5ldyBGaWxlKFsndGVzdCBpbWFnZSddLCAndGVzdC5qcGcnLCB7IHR5cGU6ICdpbWFnZS9qcGVnJyB9KTtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnaW1hZ2VGaWxlc1swXScsIG1vY2tGaWxlKTtcblxuICAgICAgY29uc3QgZXhwZWN0ZWRJbnN0YW5jZURhdGEgPSB7XG4gICAgICAgIHBsYW50SWQ6IHRlc3RQbGFudC5pZCxcbiAgICAgICAgbmlja25hbWU6ICdNeSBNb25zdGVyYScsXG4gICAgICAgIGxvY2F0aW9uOiAnTGl2aW5nIFJvb20nLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgdXNlcklkOiB0ZXN0VXNlci5pZCxcbiAgICAgICAgbGFzdEZlcnRpbGl6ZWQ6IG51bGwsXG4gICAgICAgIGxhc3RSZXBvdDogbnVsbCxcbiAgICAgICAgaW1hZ2VzOiBbJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsZEdWemRDQnBiV0ZuWlE9PSddLCAvLyBiYXNlNjQgb2YgXCJ0ZXN0IGltYWdlXCJcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNyZWF0ZWRJbnN0YW5jZSA9IGNyZWF0ZVRlc3RQbGFudEluc3RhbmNlKGV4cGVjdGVkSW5zdGFuY2VEYXRhKTtcbiAgICAgIGNvbnN0IGVuaGFuY2VkSW5zdGFuY2UgPSB7IC4uLmNyZWF0ZWRJbnN0YW5jZSwgcGxhbnQ6IHRlc3RQbGFudCB9O1xuXG4gICAgICBjcmVhdGVQbGFudEluc3RhbmNlU2NoZW1hLnBhcnNlLm1vY2tSZXR1cm5WYWx1ZShleHBlY3RlZEluc3RhbmNlRGF0YSk7XG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUoY3JlYXRlZEluc3RhbmNlKTtcbiAgICAgIFBsYW50SW5zdGFuY2VRdWVyaWVzLmdldEVuaGFuY2VkQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShlbmhhbmNlZEluc3RhbmNlKTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudC1pbnN0YW5jZXMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBmb3JtRGF0YSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY3JlYXRlUGxhbnRJbnN0YW5jZUhhbmRsZXIocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDEpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5kYXRhKS50b0VxdWFsKGVuaGFuY2VkSW5zdGFuY2UpO1xuXG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3RlZEluc3RhbmNlRGF0YSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiB2YWxpZGF0aW9uIGVycm9yIGZvciBpbnZhbGlkIHBsYW50IGluc3RhbmNlIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgcGxhbnRJZDogJ2ludmFsaWQnLFxuICAgICAgICBuaWNrbmFtZTogJycsXG4gICAgICAgIGxvY2F0aW9uOiAnJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvciA9IG5ldyBFcnJvcignVmFsaWRhdGlvbiBmYWlsZWQnKTtcbiAgICAgIHZhbGlkYXRpb25FcnJvci5uYW1lID0gJ1pvZEVycm9yJztcbiAgICAgIHZhbGlkYXRpb25FcnJvci5pc3N1ZXMgPSBbXG4gICAgICAgIHsgcGF0aDogWydwbGFudElkJ10sIG1lc3NhZ2U6ICdQbGFudCBJRCBtdXN0IGJlIGEgbnVtYmVyJyB9LFxuICAgICAgICB7IHBhdGg6IFsnbmlja25hbWUnXSwgbWVzc2FnZTogJ05pY2tuYW1lIGlzIHJlcXVpcmVkJyB9LFxuICAgICAgXTtcblxuICAgICAgY3JlYXRlUGxhbnRJbnN0YW5jZVNjaGVtYS5wYXJzZS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICB0aHJvdyB2YWxpZGF0aW9uRXJyb3I7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudC1pbnN0YW5jZXMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjcmVhdGVQbGFudEluc3RhbmNlSGFuZGxlcihyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnVmFsaWRhdGlvbiBmYWlsZWQnLFxuICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uRXJyb3IuaXNzdWVzLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChQbGFudEluc3RhbmNlUXVlcmllcy5jcmVhdGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiB1bmF1dGhvcml6ZWQgZXJyb3Igd2hlbiB1c2VyIG5vdCBhdXRoZW50aWNhdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgdmFsaWRhdGVWZXJpZmllZFJlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCcsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudC1pbnN0YW5jZXMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHBsYW50SWQ6IDEgfSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjcmVhdGVQbGFudEluc3RhbmNlSGFuZGxlcihyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMSk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMuY3JlYXRlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgcmVxdWVzdCBib2R5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudC1pbnN0YW5jZXMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY3JlYXRlUGxhbnRJbnN0YW5jZUhhbmRsZXIocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ1JlcXVlc3QgYm9keSBpcyByZXF1aXJlZCcsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KFBsYW50SW5zdGFuY2VRdWVyaWVzLmNyZWF0ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1hbGZvcm1lZCBKU09OJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudC1pbnN0YW5jZXMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiAnaW52YWxpZCBqc29uJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNyZWF0ZVBsYW50SW5zdGFuY2VIYW5kbGVyKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIEpTT04gaW4gcmVxdWVzdCBib2R5JyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMuY3JlYXRlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgZmVydGlsaXplciBkdWUgZGF0ZSBmcm9tIHNjaGVkdWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XG4gICAgICAgIHBsYW50SWQ6IDEsXG4gICAgICAgIG5pY2tuYW1lOiAnVGVzdCBQbGFudCcsXG4gICAgICAgIGxvY2F0aW9uOiAnVGVzdCBMb2NhdGlvbicsXG4gICAgICAgIGZlcnRpbGl6ZXJTY2hlZHVsZTogJzIgd2Vla3MnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgZXhwZWN0ZWRJbnN0YW5jZURhdGEgPSB7XG4gICAgICAgIC4uLnJlcXVlc3RCb2R5LFxuICAgICAgICB1c2VySWQ6IHRlc3RVc2VyLmlkLFxuICAgICAgICBsYXN0RmVydGlsaXplZDogbnVsbCxcbiAgICAgICAgbGFzdFJlcG90OiBudWxsLFxuICAgICAgICBmZXJ0aWxpemVyRHVlOiBleHBlY3QuYW55KERhdGUpLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgY3JlYXRlZEluc3RhbmNlID0gY3JlYXRlVGVzdFBsYW50SW5zdGFuY2UoZXhwZWN0ZWRJbnN0YW5jZURhdGEpO1xuICAgICAgY29uc3QgZW5oYW5jZWRJbnN0YW5jZSA9IHsgLi4uY3JlYXRlZEluc3RhbmNlLCBwbGFudDogY3JlYXRlVGVzdFBsYW50KCkgfTtcblxuICAgICAgY3JlYXRlUGxhbnRJbnN0YW5jZVNjaGVtYS5wYXJzZS5tb2NrUmV0dXJuVmFsdWUoZXhwZWN0ZWRJbnN0YW5jZURhdGEpO1xuICAgICAgUGxhbnRJbnN0YW5jZVF1ZXJpZXMuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKGNyZWF0ZWRJbnN0YW5jZSk7XG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy5nZXRFbmhhbmNlZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUoZW5oYW5jZWRJbnN0YW5jZSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY3JlYXRlUGxhbnRJbnN0YW5jZUhhbmRsZXIocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDEpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyBWZXJpZnkgZmVydGlsaXplciBkdWUgZGF0ZSB3YXMgY2FsY3VsYXRlZCAoc2hvdWxkIGJlIDIgd2Vla3MgZnJvbSBub3cpXG4gICAgICBjb25zdCBjYWxsQXJncyA9IFBsYW50SW5zdGFuY2VRdWVyaWVzLmNyZWF0ZS5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KGNhbGxBcmdzLmZlcnRpbGl6ZXJEdWUpLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xuXG4gICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29uc3QgZXhwZWN0ZWREdWUgPSBuZXcgRGF0ZShub3cpO1xuICAgICAgZXhwZWN0ZWREdWUuc2V0RGF0ZShleHBlY3RlZER1ZS5nZXREYXRlKCkgKyAxNCk7IC8vIDIgd2Vla3NcblxuICAgICAgLy8gQWxsb3cgZm9yIHNtYWxsIHRpbWUgZGlmZmVyZW5jZXMgaW4gdGVzdCBleGVjdXRpb25cbiAgICAgIGNvbnN0IHRpbWVEaWZmID0gTWF0aC5hYnMoY2FsbEFyZ3MuZmVydGlsaXplckR1ZS5nZXRUaW1lKCkgLSBleHBlY3RlZER1ZS5nZXRUaW1lKCkpO1xuICAgICAgZXhwZWN0KHRpbWVEaWZmKS50b0JlTGVzc1RoYW4oMTAwMCk7IC8vIExlc3MgdGhhbiAxIHNlY29uZCBkaWZmZXJlbmNlXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQVVQgL2FwaS9wbGFudC1pbnN0YW5jZXMvW2lkXSAtIFBsYW50IGluc3RhbmNlIHVwZGF0ZXMgd2l0aCBhdXRob3JpemF0aW9uIGNoZWNrcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBwbGFudCBpbnN0YW5jZSB3aXRoIHZhbGlkIGRhdGEgYW5kIGF1dGhvcml6YXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB0ZXN0UGxhbnQgPSBjcmVhdGVUZXN0UGxhbnQoKTtcbiAgICAgIGNvbnN0IGV4aXN0aW5nSW5zdGFuY2UgPSBjcmVhdGVUZXN0UGxhbnRJbnN0YW5jZSh7XG4gICAgICAgIGlkOiAxLFxuICAgICAgICB1c2VySWQ6IHRlc3RVc2VyLmlkLFxuICAgICAgICBwbGFudElkOiB0ZXN0UGxhbnQuaWQsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHtcbiAgICAgICAgbmlja25hbWU6ICdVcGRhdGVkIE5pY2tuYW1lJyxcbiAgICAgICAgbG9jYXRpb246ICdOZXcgTG9jYXRpb24nLFxuICAgICAgICBub3RlczogJ1VwZGF0ZWQgbm90ZXMnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgZXhwZWN0ZWRVcGRhdGVEYXRhID0ge1xuICAgICAgICAuLi51cGRhdGVEYXRhLFxuICAgICAgICBpZDogMSxcbiAgICAgICAgdXNlcklkOiB0ZXN0VXNlci5pZCxcbiAgICAgICAgbGFzdEZlcnRpbGl6ZWQ6IG51bGwsXG4gICAgICAgIGxhc3RSZXBvdDogbnVsbCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRJbnN0YW5jZSA9IHsgLi4uZXhpc3RpbmdJbnN0YW5jZSwgLi4udXBkYXRlRGF0YSB9O1xuICAgICAgY29uc3QgZW5oYW5jZWRJbnN0YW5jZSA9IHsgLi4udXBkYXRlZEluc3RhbmNlLCBwbGFudDogdGVzdFBsYW50IH07XG5cbiAgICAgIFBsYW50SW5zdGFuY2VRdWVyaWVzLmdldEVuaGFuY2VkQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZXhpc3RpbmdJbnN0YW5jZSk7XG4gICAgICB1cGRhdGVQbGFudEluc3RhbmNlU2NoZW1hLnBhcnNlLm1vY2tSZXR1cm5WYWx1ZShleHBlY3RlZFVwZGF0ZURhdGEpO1xuICAgICAgUGxhbnRJbnN0YW5jZVF1ZXJpZXMudXBkYXRlLm1vY2tSZXNvbHZlZFZhbHVlKHVwZGF0ZWRJbnN0YW5jZSk7XG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy5nZXRFbmhhbmNlZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWVPbmNlKGVuaGFuY2VkSW5zdGFuY2UpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BsYW50LWluc3RhbmNlcy8xJywge1xuICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1cGRhdGVEYXRhKSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcGFyYW1zID0gUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICcxJyB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHVwZGF0ZVBsYW50SW5zdGFuY2VIYW5kbGVyKHJlcXVlc3QsIHsgcGFyYW1zIH0pO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoZW5oYW5jZWRJbnN0YW5jZSk7XG5cbiAgICAgIGV4cGVjdChQbGFudEluc3RhbmNlUXVlcmllcy5nZXRFbmhhbmNlZEJ5SWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDEpO1xuICAgICAgZXhwZWN0KHVwZGF0ZVBsYW50SW5zdGFuY2VTY2hlbWEucGFyc2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdGVkVXBkYXRlRGF0YSk7XG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgxLCB1cGRhdGVEYXRhKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZvcmJpZGRlbiBlcnJvciB3aGVuIHVzZXIgZG9lcyBub3Qgb3duIHBsYW50IGluc3RhbmNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3Qgb3RoZXJVc2VyID0gY3JlYXRlVGVzdFVzZXIoeyBpZDogOTk5IH0pO1xuICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IGNyZWF0ZVRlc3RQbGFudEluc3RhbmNlKHtcbiAgICAgICAgaWQ6IDEsXG4gICAgICAgIHVzZXJJZDogb3RoZXJVc2VyLmlkLCAvLyBEaWZmZXJlbnQgdXNlclxuICAgICAgfSk7XG5cbiAgICAgIFBsYW50SW5zdGFuY2VRdWVyaWVzLmdldEVuaGFuY2VkQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShleGlzdGluZ0luc3RhbmNlKTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudC1pbnN0YW5jZXMvMScsIHtcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuaWNrbmFtZTogJ1VwZGF0ZWQnIH0pLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBwYXJhbXMgPSBQcm9taXNlLnJlc29sdmUoeyBpZDogJzEnIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdXBkYXRlUGxhbnRJbnN0YW5jZUhhbmRsZXIocmVxdWVzdCwgeyBwYXJhbXMgfSk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDMpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YSkudG9FcXVhbCh7XG4gICAgICAgIGVycm9yOiAnRm9yYmlkZGVuJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMudXBkYXRlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbm90IGZvdW5kIGVycm9yIHdoZW4gcGxhbnQgaW5zdGFuY2UgZG9lcyBub3QgZXhpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy5nZXRFbmhhbmNlZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzLzk5OScsIHtcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuaWNrbmFtZTogJ1VwZGF0ZWQnIH0pLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBwYXJhbXMgPSBQcm9taXNlLnJlc29sdmUoeyBpZDogJzk5OScgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1cGRhdGVQbGFudEluc3RhbmNlSGFuZGxlcihyZXF1ZXN0LCB7IHBhcmFtcyB9KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwNCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b0VxdWFsKHtcbiAgICAgICAgZXJyb3I6ICdQbGFudCBpbnN0YW5jZSBub3QgZm91bmQnLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChQbGFudEluc3RhbmNlUXVlcmllcy51cGRhdGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBiYWQgcmVxdWVzdCBlcnJvciBmb3IgaW52YWxpZCBwbGFudCBpbnN0YW5jZSBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzL2ludmFsaWQnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmlja25hbWU6ICdVcGRhdGVkJyB9KSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcGFyYW1zID0gUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICdpbnZhbGlkJyB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHVwZGF0ZVBsYW50SW5zdGFuY2VIYW5kbGVyKHJlcXVlc3QsIHsgcGFyYW1zIH0pO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoe1xuICAgICAgICBlcnJvcjogJ0ludmFsaWQgcGxhbnQgaW5zdGFuY2UgSUQnLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChQbGFudEluc3RhbmNlUXVlcmllcy5nZXRFbmhhbmNlZEJ5SWQpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiB1bmF1dGhvcml6ZWQgZXJyb3Igd2hlbiB1c2VyIG5vdCBhdXRoZW50aWNhdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgdmFsaWRhdGVSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgICAgc2Vzc2lvbjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BsYW50LWluc3RhbmNlcy8xJywge1xuICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5pY2tuYW1lOiAnVXBkYXRlZCcgfSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHBhcmFtcyA9IFByb21pc2UucmVzb2x2ZSh7IGlkOiAnMScgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1cGRhdGVQbGFudEluc3RhbmNlSGFuZGxlcihyZXF1ZXN0LCB7IHBhcmFtcyB9KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMSk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhKS50b0VxdWFsKHtcbiAgICAgICAgZXJyb3I6ICdVbmF1dGhvcml6ZWQnLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChQbGFudEluc3RhbmNlUXVlcmllcy5nZXRFbmhhbmNlZEJ5SWQpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBGb3JtRGF0YSB1cGRhdGVzIHdpdGggZmlsZSB1cGxvYWRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgdGVzdFBsYW50ID0gY3JlYXRlVGVzdFBsYW50KCk7XG4gICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gY3JlYXRlVGVzdFBsYW50SW5zdGFuY2Uoe1xuICAgICAgICBpZDogMSxcbiAgICAgICAgdXNlcklkOiB0ZXN0VXNlci5pZCxcbiAgICAgICAgcGxhbnRJZDogdGVzdFBsYW50LmlkLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ25pY2tuYW1lJywgJ1VwZGF0ZWQgTmlja25hbWUnKTtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnbG9jYXRpb24nLCAnTmV3IExvY2F0aW9uJyk7XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ2V4aXN0aW5nSW1hZ2VzWzBdJywgJ2V4aXN0aW5nLWltYWdlLXVybCcpO1xuXG4gICAgICBjb25zdCBtb2NrRmlsZSA9IG5ldyBGaWxlKFsnbmV3IGltYWdlJ10sICduZXcuanBnJywgeyB0eXBlOiAnaW1hZ2UvanBlZycgfSk7XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ltYWdlRmlsZXNbMF0nLCBtb2NrRmlsZSk7XG5cbiAgICAgIGNvbnN0IGV4cGVjdGVkVXBkYXRlRGF0YSA9IHtcbiAgICAgICAgbmlja25hbWU6ICdVcGRhdGVkIE5pY2tuYW1lJyxcbiAgICAgICAgbG9jYXRpb246ICdOZXcgTG9jYXRpb24nLFxuICAgICAgICBpbWFnZXM6IFsnZXhpc3RpbmctaW1hZ2UtdXJsJywgJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsYm1WM0lHbHRZV2RsJ10sIC8vIGJhc2U2NCBvZiBcIm5ldyBpbWFnZVwiXG4gICAgICAgIGlkOiAxLFxuICAgICAgICB1c2VySWQ6IHRlc3RVc2VyLmlkLFxuICAgICAgICBsYXN0RmVydGlsaXplZDogbnVsbCxcbiAgICAgICAgbGFzdFJlcG90OiBudWxsLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdXBkYXRlZEluc3RhbmNlID0geyAuLi5leGlzdGluZ0luc3RhbmNlLCAuLi5leHBlY3RlZFVwZGF0ZURhdGEgfTtcbiAgICAgIGNvbnN0IGVuaGFuY2VkSW5zdGFuY2UgPSB7IC4uLnVwZGF0ZWRJbnN0YW5jZSwgcGxhbnQ6IHRlc3RQbGFudCB9O1xuXG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy5nZXRFbmhhbmNlZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWVPbmNlKGV4aXN0aW5nSW5zdGFuY2UpO1xuICAgICAgdXBkYXRlUGxhbnRJbnN0YW5jZVNjaGVtYS5wYXJzZS5tb2NrUmV0dXJuVmFsdWUoZXhwZWN0ZWRVcGRhdGVEYXRhKTtcbiAgICAgIFBsYW50SW5zdGFuY2VRdWVyaWVzLnVwZGF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh1cGRhdGVkSW5zdGFuY2UpO1xuICAgICAgUGxhbnRJbnN0YW5jZVF1ZXJpZXMuZ2V0RW5oYW5jZWRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlT25jZShlbmhhbmNlZEluc3RhbmNlKTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudC1pbnN0YW5jZXMvMScsIHtcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgYm9keTogZm9ybURhdGEsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcGFyYW1zID0gUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICcxJyB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHVwZGF0ZVBsYW50SW5zdGFuY2VIYW5kbGVyKHJlcXVlc3QsIHsgcGFyYW1zIH0pO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEpLnRvRXF1YWwoZW5oYW5jZWRJbnN0YW5jZSk7XG5cbiAgICAgIC8vIFZlcmlmeSB0aGUgdXBkYXRlIHdhcyBjYWxsZWQgd2l0aCBjb3JyZWN0IGRhdGEgKGV4Y2x1ZGluZyBpZCBhbmQgdXNlcklkKVxuICAgICAgY29uc3QgeyBpZCwgdXNlcklkLCAuLi51cGRhdGVEYXRhV2l0aG91dElkcyB9ID0gZXhwZWN0ZWRVcGRhdGVEYXRhO1xuICAgICAgZXhwZWN0KFBsYW50SW5zdGFuY2VRdWVyaWVzLnVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoMSwgdXBkYXRlRGF0YVdpdGhvdXRJZHMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmFsaWRhdGlvbiBlcnJvcnMgZHVyaW5nIHVwZGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGV4aXN0aW5nSW5zdGFuY2UgPSBjcmVhdGVUZXN0UGxhbnRJbnN0YW5jZSh7XG4gICAgICAgIGlkOiAxLFxuICAgICAgICB1c2VySWQ6IHRlc3RVc2VyLmlkLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvciA9IG5ldyBFcnJvcignVmFsaWRhdGlvbiBmYWlsZWQnKTtcbiAgICAgIHZhbGlkYXRpb25FcnJvci5uYW1lID0gJ1pvZEVycm9yJztcbiAgICAgIHZhbGlkYXRpb25FcnJvci5pc3N1ZXMgPSBbXG4gICAgICAgIHsgcGF0aDogWyduaWNrbmFtZSddLCBtZXNzYWdlOiAnTmlja25hbWUgaXMgcmVxdWlyZWQnIH1cbiAgICAgIF07XG5cbiAgICAgIFBsYW50SW5zdGFuY2VRdWVyaWVzLmdldEVuaGFuY2VkQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShleGlzdGluZ0luc3RhbmNlKTtcbiAgICAgIHVwZGF0ZVBsYW50SW5zdGFuY2VTY2hlbWEucGFyc2UubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgdGhyb3cgdmFsaWRhdGlvbkVycm9yO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzLzEnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmlja25hbWU6ICcnIH0pLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBwYXJhbXMgPSBQcm9taXNlLnJlc29sdmUoeyBpZDogJzEnIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdXBkYXRlUGxhbnRJbnN0YW5jZUhhbmRsZXIocmVxdWVzdCwgeyBwYXJhbXMgfSk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5lcnJvcikudG9Db250YWluKCdJbnZhbGlkIHBsYW50IGluc3RhbmNlIGRhdGEnKTtcblxuICAgICAgZXhwZWN0KFBsYW50SW5zdGFuY2VRdWVyaWVzLnVwZGF0ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BsYW50IE1hbmFnZW1lbnQgSW50ZWdyYXRpb24gVGVzdHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29tcGxldGUgcGxhbnQgbWFuYWdlbWVudCB3b3JrZmxvdzogY3JlYXRlIC0+IHJlYWQgLT4gdXBkYXRlIC0+IGRlbGV0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RQbGFudCA9IGNyZWF0ZVRlc3RQbGFudCgpO1xuXG4gICAgICAvLyBTdGVwIDE6IENyZWF0ZSBwbGFudCBpbnN0YW5jZVxuICAgICAgY29uc3QgY3JlYXRlRGF0YSA9IHtcbiAgICAgICAgcGxhbnRJZDogdGVzdFBsYW50LmlkLFxuICAgICAgICBuaWNrbmFtZTogJ1Rlc3QgUGxhbnQnLFxuICAgICAgICBsb2NhdGlvbjogJ1Rlc3QgTG9jYXRpb24nLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgY3JlYXRlZEluc3RhbmNlID0gY3JlYXRlVGVzdFBsYW50SW5zdGFuY2Uoe1xuICAgICAgICBpZDogMSxcbiAgICAgICAgLi4uY3JlYXRlRGF0YSxcbiAgICAgICAgdXNlcklkOiB0ZXN0VXNlci5pZCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBlbmhhbmNlZEluc3RhbmNlID0geyAuLi5jcmVhdGVkSW5zdGFuY2UsIHBsYW50OiB0ZXN0UGxhbnQgfTtcblxuICAgICAgY3JlYXRlUGxhbnRJbnN0YW5jZVNjaGVtYS5wYXJzZS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAuLi5jcmVhdGVEYXRhLFxuICAgICAgICB1c2VySWQ6IHRlc3RVc2VyLmlkLFxuICAgICAgICBsYXN0RmVydGlsaXplZDogbnVsbCxcbiAgICAgICAgbGFzdFJlcG90OiBudWxsLFxuICAgICAgfSk7XG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUoY3JlYXRlZEluc3RhbmNlKTtcbiAgICAgIFBsYW50SW5zdGFuY2VRdWVyaWVzLmdldEVuaGFuY2VkQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShlbmhhbmNlZEluc3RhbmNlKTtcblxuICAgICAgY29uc3QgY3JlYXRlUmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudC1pbnN0YW5jZXMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjcmVhdGVEYXRhKSxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY3JlYXRlUmVzcG9uc2UgPSBhd2FpdCBjcmVhdGVQbGFudEluc3RhbmNlSGFuZGxlcihjcmVhdGVSZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGNyZWF0ZVJlc3BvbnNlRGF0YSA9IGF3YWl0IGNyZWF0ZVJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KGNyZWF0ZVJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDEpO1xuICAgICAgZXhwZWN0KGNyZWF0ZVJlc3BvbnNlRGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyBTdGVwIDI6IFJlYWQgcGxhbnQgaW5zdGFuY2VcbiAgICAgIFBsYW50SW5zdGFuY2VRdWVyaWVzLmdldEVuaGFuY2VkQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShlbmhhbmNlZEluc3RhbmNlKTtcblxuICAgICAgY29uc3QgcmVhZFJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzLzEnKTtcbiAgICAgIGNvbnN0IHJlYWRQYXJhbXMgPSBQcm9taXNlLnJlc29sdmUoeyBpZDogJzEnIH0pO1xuXG4gICAgICBjb25zdCByZWFkUmVzcG9uc2UgPSBhd2FpdCBnZXRQbGFudEluc3RhbmNlSGFuZGxlcihyZWFkUmVxdWVzdCwgeyBwYXJhbXM6IHJlYWRQYXJhbXMgfSk7XG4gICAgICBjb25zdCByZWFkUmVzcG9uc2VEYXRhID0gYXdhaXQgcmVhZFJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlYWRSZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZWFkUmVzcG9uc2VEYXRhKS50b0VxdWFsKGVuaGFuY2VkSW5zdGFuY2UpO1xuXG4gICAgICAvLyBTdGVwIDM6IFVwZGF0ZSBwbGFudCBpbnN0YW5jZVxuICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHsgbmlja25hbWU6ICdVcGRhdGVkIFBsYW50JyB9O1xuICAgICAgY29uc3QgdXBkYXRlZEluc3RhbmNlID0geyAuLi5lbmhhbmNlZEluc3RhbmNlLCAuLi51cGRhdGVEYXRhIH07XG5cbiAgICAgIHVwZGF0ZVBsYW50SW5zdGFuY2VTY2hlbWEucGFyc2UubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgLi4udXBkYXRlRGF0YSxcbiAgICAgICAgaWQ6IDEsXG4gICAgICAgIHVzZXJJZDogdGVzdFVzZXIuaWQsXG4gICAgICAgIGxhc3RGZXJ0aWxpemVkOiBudWxsLFxuICAgICAgICBsYXN0UmVwb3Q6IG51bGwsXG4gICAgICB9KTtcbiAgICAgIFBsYW50SW5zdGFuY2VRdWVyaWVzLnVwZGF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh1cGRhdGVkSW5zdGFuY2UpO1xuICAgICAgUGxhbnRJbnN0YW5jZVF1ZXJpZXMuZ2V0RW5oYW5jZWRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKHVwZGF0ZWRJbnN0YW5jZSk7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZVJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzLzEnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVwZGF0ZURhdGEpLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgdXBkYXRlUGFyYW1zID0gUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICcxJyB9KTtcblxuICAgICAgY29uc3QgdXBkYXRlUmVzcG9uc2UgPSBhd2FpdCB1cGRhdGVQbGFudEluc3RhbmNlSGFuZGxlcih1cGRhdGVSZXF1ZXN0LCB7IHBhcmFtczogdXBkYXRlUGFyYW1zIH0pO1xuICAgICAgY29uc3QgdXBkYXRlUmVzcG9uc2VEYXRhID0gYXdhaXQgdXBkYXRlUmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QodXBkYXRlUmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QodXBkYXRlUmVzcG9uc2VEYXRhLm5pY2tuYW1lKS50b0JlKCdVcGRhdGVkIFBsYW50Jyk7XG5cbiAgICAgIC8vIFN0ZXAgNDogRGVsZXRlIHBsYW50IGluc3RhbmNlXG4gICAgICBQbGFudEluc3RhbmNlUXVlcmllcy5kZWxldGUubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XG5cbiAgICAgIGNvbnN0IGRlbGV0ZVJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzLzEnLCB7XG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGRlbGV0ZVBhcmFtcyA9IFByb21pc2UucmVzb2x2ZSh7IGlkOiAnMScgfSk7XG5cbiAgICAgIGNvbnN0IGRlbGV0ZVJlc3BvbnNlID0gYXdhaXQgZGVsZXRlUGxhbnRJbnN0YW5jZUhhbmRsZXIoZGVsZXRlUmVxdWVzdCwgeyBwYXJhbXM6IGRlbGV0ZVBhcmFtcyB9KTtcbiAgICAgIGNvbnN0IGRlbGV0ZVJlc3BvbnNlRGF0YSA9IGF3YWl0IGRlbGV0ZVJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KGRlbGV0ZVJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KGRlbGV0ZVJlc3BvbnNlRGF0YSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdQbGFudCBpbnN0YW5jZSBkZWxldGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICB9KTtcblxuICAgICAgLy8gVmVyaWZ5IGFsbCBvcGVyYXRpb25zIHdlcmUgY2FsbGVkXG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoUGxhbnRJbnN0YW5jZVF1ZXJpZXMuZGVsZXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGF1dGhvcml6YXRpb24gY2hlY2tzIGFjcm9zcyBhbGwgZW5kcG9pbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gVGVzdCB1bmF1dGhvcml6ZWQgYWNjZXNzIHRvIGFsbCBlbmRwb2ludHNcbiAgICAgIHZhbGlkYXRlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHVzZXI6IG51bGwsIHNlc3Npb246IG51bGwgfSk7XG5cbiAgICAgIC8vIEdFVCAvYXBpL3BsYW50c1xuICAgICAgY29uc3QgZ2V0UGxhbnRzUmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudHMnKTtcbiAgICAgIGNvbnN0IGdldFBsYW50c1Jlc3BvbnNlID0gYXdhaXQgZ2V0UGxhbnRzSGFuZGxlcihnZXRQbGFudHNSZXF1ZXN0KTtcbiAgICAgIGV4cGVjdChnZXRQbGFudHNSZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAxKTtcblxuICAgICAgLy8gUE9TVCAvYXBpL3BsYW50LWluc3RhbmNlc1xuICAgICAgY29uc3QgY3JlYXRlUmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudC1pbnN0YW5jZXMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSksXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBjcmVhdGVSZXNwb25zZSA9IGF3YWl0IGNyZWF0ZVBsYW50SW5zdGFuY2VIYW5kbGVyKGNyZWF0ZVJlcXVlc3QpO1xuICAgICAgZXhwZWN0KGNyZWF0ZVJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuXG4gICAgICAvLyBHRVQgL2FwaS9wbGFudC1pbnN0YW5jZXMvMVxuICAgICAgY29uc3QgZ2V0UmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wbGFudC1pbnN0YW5jZXMvMScpO1xuICAgICAgY29uc3QgZ2V0UGFyYW1zID0gUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICcxJyB9KTtcbiAgICAgIGNvbnN0IGdldFJlc3BvbnNlID0gYXdhaXQgZ2V0UGxhbnRJbnN0YW5jZUhhbmRsZXIoZ2V0UmVxdWVzdCwgeyBwYXJhbXM6IGdldFBhcmFtcyB9KTtcbiAgICAgIGV4cGVjdChnZXRSZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAxKTtcblxuICAgICAgLy8gUFVUIC9hcGkvcGxhbnQtaW5zdGFuY2VzLzFcbiAgICAgIGNvbnN0IHVwZGF0ZVJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcGxhbnQtaW5zdGFuY2VzLzEnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KSxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHVwZGF0ZVBhcmFtcyA9IFByb21pc2UucmVzb2x2ZSh7IGlkOiAnMScgfSk7XG4gICAgICBjb25zdCB1cGRhdGVSZXNwb25zZSA9IGF3YWl0IHVwZGF0ZVBsYW50SW5zdGFuY2VIYW5kbGVyKHVwZGF0ZVJlcXVlc3QsIHsgcGFyYW1zOiB1cGRhdGVQYXJhbXMgfSk7XG4gICAgICBleHBlY3QodXBkYXRlUmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMSk7XG5cbiAgICAgIC8vIERFTEVURSAvYXBpL3BsYW50LWluc3RhbmNlcy8xXG4gICAgICBjb25zdCBkZWxldGVSZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BsYW50LWluc3RhbmNlcy8xJywge1xuICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBkZWxldGVQYXJhbXMgPSBQcm9taXNlLnJlc29sdmUoeyBpZDogJzEnIH0pO1xuICAgICAgY29uc3QgZGVsZXRlUmVzcG9uc2UgPSBhd2FpdCBkZWxldGVQbGFudEluc3RhbmNlSGFuZGxlcihkZWxldGVSZXF1ZXN0LCB7IHBhcmFtczogZGVsZXRlUGFyYW1zIH0pO1xuICAgICAgZXhwZWN0KGRlbGV0ZVJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInZhbGlkYXRlUmVxdWVzdCIsImZuIiwidmFsaWRhdGVWZXJpZmllZFJlcXVlc3QiLCJjcmVhdGVQbGFudCIsImdldFBsYW50c1dpdGhTdGF0cyIsInZhbGlkYXRlUGxhbnRUYXhvbm9teSIsIlBsYW50SW5zdGFuY2VRdWVyaWVzIiwiZ2V0V2l0aEZpbHRlcnMiLCJjcmVhdGUiLCJnZXRFbmhhbmNlZEJ5SWQiLCJ1cGRhdGUiLCJkZWxldGUiLCJjcmVhdGVQbGFudFNjaGVtYSIsInBhcnNlIiwicGxhbnRGaWx0ZXJTY2hlbWEiLCJjcmVhdGVQbGFudEluc3RhbmNlU2NoZW1hIiwicGxhbnRJbnN0YW5jZUZpbHRlclNjaGVtYSIsInVwZGF0ZVBsYW50SW5zdGFuY2VTY2hlbWEiLCJkZXNjcmliZSIsInRlc3RVc2VyIiwidGVzdFNlc3Npb24iLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsInJlc2V0QXBpTW9ja3MiLCJjcmVhdGVUZXN0VXNlciIsImNyZWF0ZVRlc3RTZXNzaW9uIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJ1c2VyIiwic2Vzc2lvbiIsImFmdGVyRWFjaCIsInJlc3RvcmVBbGxNb2NrcyIsIml0IiwibW9ja1BsYW50cyIsImNyZWF0ZVRlc3RQbGFudCIsImZhbWlseSIsImdlbnVzIiwiaWQiLCJtb2NrUmV0dXJuVmFsdWUiLCJ1bmRlZmluZWQiLCJpc1ZlcmlmaWVkIiwiY3JlYXRlZEJ5IiwibGltaXQiLCJvZmZzZXQiLCJyZXF1ZXN0IiwiTmV4dFJlcXVlc3QiLCJyZXNwb25zZSIsImdldFBsYW50c0hhbmRsZXIiLCJyZXNwb25zZURhdGEiLCJqc29uIiwiZXhwZWN0Iiwic3RhdHVzIiwidG9CZSIsInRvRXF1YWwiLCJzdWNjZXNzIiwiZGF0YSIsImFycmF5Q29udGFpbmluZyIsIm9iamVjdENvbnRhaW5pbmciLCJhbnkiLCJOdW1iZXIiLCJTdHJpbmciLCJzcGVjaWVzIiwiY29tbW9uTmFtZSIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsIm1ldGFkYXRhIiwib3BlcmF0aW9uIiwidGltZXN0YW1wIiwidG9IYXZlQmVlbkNhbGxlZCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiT2JqZWN0IiwiZXJyb3IiLCJub3QiLCJ2YWxpZGF0aW9uRXJyb3IiLCJFcnJvciIsIm5hbWUiLCJpc3N1ZXMiLCJwYXRoIiwibWVzc2FnZSIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsImRldGFpbHMiLCJtb2NrUmVqZWN0ZWRWYWx1ZSIsInRlc3RQbGFudCIsInJlcXVlc3RCb2R5IiwicGxhbnRJZCIsIm5pY2tuYW1lIiwibG9jYXRpb24iLCJub3RlcyIsImlzQWN0aXZlIiwiZXhwZWN0ZWRJbnN0YW5jZURhdGEiLCJ1c2VySWQiLCJsYXN0RmVydGlsaXplZCIsImxhc3RSZXBvdCIsImNyZWF0ZWRJbnN0YW5jZSIsImNyZWF0ZVRlc3RQbGFudEluc3RhbmNlIiwiZW5oYW5jZWRJbnN0YW5jZSIsInBsYW50IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJoZWFkZXJzIiwiY3JlYXRlUGxhbnRJbnN0YW5jZUhhbmRsZXIiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwidG9TdHJpbmciLCJtb2NrRmlsZSIsIkZpbGUiLCJ0eXBlIiwiaW1hZ2VzIiwiZmVydGlsaXplclNjaGVkdWxlIiwiZmVydGlsaXplckR1ZSIsIkRhdGUiLCJjYWxsQXJncyIsImNhbGxzIiwidG9CZUluc3RhbmNlT2YiLCJub3ciLCJleHBlY3RlZER1ZSIsInNldERhdGUiLCJnZXREYXRlIiwidGltZURpZmYiLCJNYXRoIiwiYWJzIiwiZ2V0VGltZSIsInRvQmVMZXNzVGhhbiIsImV4aXN0aW5nSW5zdGFuY2UiLCJ1cGRhdGVEYXRhIiwiZXhwZWN0ZWRVcGRhdGVEYXRhIiwidXBkYXRlZEluc3RhbmNlIiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwicGFyYW1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ1cGRhdGVQbGFudEluc3RhbmNlSGFuZGxlciIsIm90aGVyVXNlciIsInVwZGF0ZURhdGFXaXRob3V0SWRzIiwidG9Db250YWluIiwiY3JlYXRlRGF0YSIsImNyZWF0ZVJlcXVlc3QiLCJjcmVhdGVSZXNwb25zZSIsImNyZWF0ZVJlc3BvbnNlRGF0YSIsInJlYWRSZXF1ZXN0IiwicmVhZFBhcmFtcyIsInJlYWRSZXNwb25zZSIsImdldFBsYW50SW5zdGFuY2VIYW5kbGVyIiwicmVhZFJlc3BvbnNlRGF0YSIsInVwZGF0ZVJlcXVlc3QiLCJ1cGRhdGVQYXJhbXMiLCJ1cGRhdGVSZXNwb25zZSIsInVwZGF0ZVJlc3BvbnNlRGF0YSIsImRlbGV0ZVJlcXVlc3QiLCJkZWxldGVQYXJhbXMiLCJkZWxldGVSZXNwb25zZSIsImRlbGV0ZVBsYW50SW5zdGFuY2VIYW5kbGVyIiwiZGVsZXRlUmVzcG9uc2VEYXRhIiwiZ2V0UGxhbnRzUmVxdWVzdCIsImdldFBsYW50c1Jlc3BvbnNlIiwiZ2V0UmVxdWVzdCIsImdldFBhcmFtcyIsImdldFJlc3BvbnNlIl0sIm1hcHBpbmdzIjoiQUFBQSxzQ0FBc0M7QUFDdEMsNEZBQTRGOztBQVU1RiwwQkFBMEI7QUFDMUJBLEtBQUtDLElBQUksQ0FBQyxxQkFBcUIsSUFBTyxDQUFBO1FBQ3BDQyxpQkFBaUJGLEtBQUtHLEVBQUU7UUFDeEJDLHlCQUF5QkosS0FBS0csRUFBRTtJQUNsQyxDQUFBO0FBRUEsNEJBQTRCO0FBQzVCSCxLQUFLQyxJQUFJLENBQUMsbUNBQW1DLElBQU8sQ0FBQTtRQUNsREksYUFBYUwsS0FBS0csRUFBRTtRQUNwQkcsb0JBQW9CTixLQUFLRyxFQUFFO1FBQzNCSSx1QkFBdUJQLEtBQUtHLEVBQUU7SUFDaEMsQ0FBQTtBQUVBSCxLQUFLQyxJQUFJLENBQUMsb0NBQW9DLElBQU8sQ0FBQTtRQUNuRE8sc0JBQXNCO1lBQ3BCQyxnQkFBZ0JULEtBQUtHLEVBQUU7WUFDdkJPLFFBQVFWLEtBQUtHLEVBQUU7WUFDZlEsaUJBQWlCWCxLQUFLRyxFQUFFO1lBQ3hCUyxRQUFRWixLQUFLRyxFQUFFO1lBQ2ZVLFFBQVFiLEtBQUtHLEVBQUU7UUFDakI7SUFDRixDQUFBO0FBRUEsMEJBQTBCO0FBQzFCSCxLQUFLQyxJQUFJLENBQUMsa0NBQWtDLElBQU8sQ0FBQTtRQUNqRGEsbUJB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