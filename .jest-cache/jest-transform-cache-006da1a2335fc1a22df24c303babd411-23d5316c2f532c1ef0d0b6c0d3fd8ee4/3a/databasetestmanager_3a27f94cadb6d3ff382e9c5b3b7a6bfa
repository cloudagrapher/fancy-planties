c1c4651097b93ed0a2d8cff74fb7c726
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get createDatabaseTestManager () {
        return createDatabaseTestManager;
    },
    get default () {
        return _default;
    },
    get globalDatabaseTestManager () {
        return globalDatabaseTestManager;
    }
});
require("server-only");
const _db = require("../../lib/db");
const _schema = require("../../lib/db/schema");
const _drizzleorm = require("drizzle-orm");
/**
 * Database Test Manager
 * Provides isolated database operations for testing with proper cleanup
 */ class DatabaseTestManager {
    constructor(){
        this.createdUsers = [];
        this.createdSessions = [];
        this.createdEmailCodes = [];
        this.createdPlants = [];
        this.createdPlantInstances = [];
        this.createdPropagations = [];
        this.createdCareHistory = [];
    }
    /**
   * Create a test user in the database
   * @param {Object} userData - User data to insert
   * @returns {Promise<Object>} Created user
   */ async createTestUser(userData) {
        const [user] = await _db.db.insert(_schema.users).values(userData).returning();
        this.createdUsers.push(user.id);
        return user;
    }
    /**
   * Create a test session in the database
   * @param {Object} sessionData - Session data to insert
   * @returns {Promise<Object>} Created session
   */ async createTestSession(sessionData) {
        const [session] = await _db.db.insert(_schema.sessions).values(sessionData).returning();
        this.createdSessions.push(session.id);
        return session;
    }
    /**
   * Create a test email verification code in the database
   * @param {Object} codeData - Email verification code data to insert
   * @returns {Promise<Object>} Created email verification code
   */ async createTestEmailCode(codeData) {
        const [code] = await _db.db.insert(_schema.emailVerificationCodes).values(codeData).returning();
        this.createdEmailCodes.push(code.id);
        return code;
    }
    /**
   * Create a test plant in the database
   * @param {Object} plantData - Plant data to insert
   * @returns {Promise<Object>} Created plant
   */ async createTestPlant(plantData) {
        const [plant] = await _db.db.insert(_schema.plants).values(plantData).returning();
        this.createdPlants.push(plant.id);
        return plant;
    }
    /**
   * Create a test plant instance in the database
   * @param {Object} instanceData - Plant instance data to insert
   * @returns {Promise<Object>} Created plant instance
   */ async createTestPlantInstance(instanceData) {
        const [instance] = await _db.db.insert(_schema.plantInstances).values(instanceData).returning();
        this.createdPlantInstances.push(instance.id);
        return instance;
    }
    /**
   * Create a test propagation in the database
   * @param {Object} propagationData - Propagation data to insert
   * @returns {Promise<Object>} Created propagation
   */ async createTestPropagation(propagationData) {
        const [propagation] = await _db.db.insert(_schema.propagations).values(propagationData).returning();
        this.createdPropagations.push(propagation.id);
        return propagation;
    }
    /**
   * Create a test care history record in the database
   * @param {Object} careData - Care history data to insert
   * @returns {Promise<Object>} Created care history record
   */ async createTestCareHistory(careData) {
        const [care] = await _db.db.insert(_schema.careHistory).values(careData).returning();
        this.createdCareHistory.push(care.id);
        return care;
    }
    /**
   * Get a user by ID from the database
   * @param {number} userId - User ID to retrieve
   * @returns {Promise<Object|null>} User or null if not found
   */ async getUserById(userId) {
        const [user] = await _db.db.select().from(_schema.users).where((0, _drizzleorm.eq)(_schema.users.id, userId));
        return user || null;
    }
    /**
   * Get a user by email from the database
   * @param {string} email - Email to search for
   * @returns {Promise<Object|null>} User or null if not found
   */ async getUserByEmail(email) {
        const [user] = await _db.db.select().from(_schema.users).where((0, _drizzleorm.eq)(_schema.users.email, email.toLowerCase()));
        return user || null;
    }
    /**
   * Get a session by ID from the database
   * @param {string} sessionId - Session ID to retrieve
   * @returns {Promise<Object|null>} Session or null if not found
   */ async getSessionById(sessionId) {
        const [session] = await _db.db.select().from(_schema.sessions).where((0, _drizzleorm.eq)(_schema.sessions.id, sessionId));
        return session || null;
    }
    /**
   * Get sessions for a user from the database
   * @param {number} userId - User ID to get sessions for
   * @returns {Promise<Array>} Array of sessions
   */ async getSessionsByUserId(userId) {
        return await _db.db.select().from(_schema.sessions).where((0, _drizzleorm.eq)(_schema.sessions.userId, userId));
    }
    /**
   * Get email verification codes for a user
   * @param {number} userId - User ID to get codes for
   * @returns {Promise<Array>} Array of email verification codes
   */ async getEmailCodesByUserId(userId) {
        return await _db.db.select().from(_schema.emailVerificationCodes).where((0, _drizzleorm.eq)(_schema.emailVerificationCodes.userId, userId));
    }
    /**
   * Update a user in the database
   * @param {number} userId - User ID to update
   * @param {Object} updates - Updates to apply
   * @returns {Promise<Object>} Updated user
   */ async updateUser(userId, updates) {
        const [user] = await _db.db.update(_schema.users).set({
            ...updates,
            updatedAt: new Date()
        }).where((0, _drizzleorm.eq)(_schema.users.id, userId)).returning();
        return user;
    }
    /**
   * Delete a user from the database
   * @param {number} userId - User ID to delete
   * @returns {Promise<void>}
   */ async deleteUser(userId) {
        await _db.db.delete(_schema.users).where((0, _drizzleorm.eq)(_schema.users.id, userId));
        // Remove from tracking
        this.createdUsers = this.createdUsers.filter((id)=>id !== userId);
    }
    /**
   * Delete a session from the database
   * @param {string} sessionId - Session ID to delete
   * @returns {Promise<void>}
   */ async deleteSession(sessionId) {
        await _db.db.delete(_schema.sessions).where((0, _drizzleorm.eq)(_schema.sessions.id, sessionId));
        // Remove from tracking
        this.createdSessions = this.createdSessions.filter((id)=>id !== sessionId);
    }
    /**
   * Delete an email verification code from the database
   * @param {number} codeId - Code ID to delete
   * @returns {Promise<void>}
   */ async deleteEmailCode(codeId) {
        await _db.db.delete(_schema.emailVerificationCodes).where((0, _drizzleorm.eq)(_schema.emailVerificationCodes.id, codeId));
        // Remove from tracking
        this.createdEmailCodes = this.createdEmailCodes.filter((id)=>id !== codeId);
    }
    /**
   * Clean up all test data created by this manager
   * @returns {Promise<void>}
   */ async cleanup() {
        try {
            // Clean up email verification codes first (foreign key constraints)
            for (const codeId of this.createdEmailCodes){
                await _db.db.delete(_schema.emailVerificationCodes).where((0, _drizzleorm.eq)(_schema.emailVerificationCodes.id, codeId));
            }
            // Clean up sessions
            for (const sessionId of this.createdSessions){
                await _db.db.delete(_schema.sessions).where((0, _drizzleorm.eq)(_schema.sessions.id, sessionId));
            }
            // Clean up users last
            for (const userId of this.createdUsers){
                await _db.db.delete(_schema.users).where((0, _drizzleorm.eq)(_schema.users.id, userId));
            }
            // Reset tracking arrays
            this.createdUsers = [];
            this.createdSessions = [];
            this.createdEmailCodes = [];
        } catch (error) {
            console.error('Database cleanup error:', error);
            // Reset tracking arrays even if cleanup fails
            this.createdUsers = [];
            this.createdSessions = [];
            this.createdEmailCodes = [];
        }
    }
    /**
   * Check if the database connection is working
   * @returns {Promise<boolean>} True if connection is working
   */ async isConnected() {
        try {
            // Simple query to test connection
            await _db.db.select().from(_schema.users).limit(1);
            return true;
        } catch (error) {
            console.error('Database connection test failed:', error);
            return false;
        }
    }
}
const createDatabaseTestManager = ()=>{
    return new DatabaseTestManager();
};
const globalDatabaseTestManager = new DatabaseTestManager();
const _default = DatabaseTestManager;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdGVmYW5iZWtrZXIvcHJvamVjdHMvZmFuY3ktcGxhbnRpZXMvc3JjL3Rlc3QtdXRpbHMvc2V0dXAvZGF0YWJhc2UtdGVzdC1tYW5hZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnc2VydmVyLW9ubHknO1xuXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uL2xpYi9kYic7XG5pbXBvcnQgeyB1c2Vycywgc2Vzc2lvbnMsIGVtYWlsVmVyaWZpY2F0aW9uQ29kZXMsIHBsYW50cywgcGxhbnRJbnN0YW5jZXMsIHByb3BhZ2F0aW9ucywgY2FyZUhpc3RvcnkgfSBmcm9tICcuLi8uLi9saWIvZGIvc2NoZW1hJztcbmltcG9ydCB7IGVxIH0gZnJvbSAnZHJpenpsZS1vcm0nO1xuXG4vKipcbiAqIERhdGFiYXNlIFRlc3QgTWFuYWdlclxuICogUHJvdmlkZXMgaXNvbGF0ZWQgZGF0YWJhc2Ugb3BlcmF0aW9ucyBmb3IgdGVzdGluZyB3aXRoIHByb3BlciBjbGVhbnVwXG4gKi9cbmNsYXNzIERhdGFiYXNlVGVzdE1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNyZWF0ZWRVc2VycyA9IFtdO1xuICAgIHRoaXMuY3JlYXRlZFNlc3Npb25zID0gW107XG4gICAgdGhpcy5jcmVhdGVkRW1haWxDb2RlcyA9IFtdO1xuICAgIHRoaXMuY3JlYXRlZFBsYW50cyA9IFtdO1xuICAgIHRoaXMuY3JlYXRlZFBsYW50SW5zdGFuY2VzID0gW107XG4gICAgdGhpcy5jcmVhdGVkUHJvcGFnYXRpb25zID0gW107XG4gICAgdGhpcy5jcmVhdGVkQ2FyZUhpc3RvcnkgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSB0ZXN0IHVzZXIgaW4gdGhlIGRhdGFiYXNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB1c2VyRGF0YSAtIFVzZXIgZGF0YSB0byBpbnNlcnRcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gQ3JlYXRlZCB1c2VyXG4gICAqL1xuICBhc3luYyBjcmVhdGVUZXN0VXNlcih1c2VyRGF0YSkge1xuICAgIGNvbnN0IFt1c2VyXSA9IGF3YWl0IGRiLmluc2VydCh1c2VycykudmFsdWVzKHVzZXJEYXRhKS5yZXR1cm5pbmcoKTtcbiAgICB0aGlzLmNyZWF0ZWRVc2Vycy5wdXNoKHVzZXIuaWQpO1xuICAgIHJldHVybiB1c2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHRlc3Qgc2Vzc2lvbiBpbiB0aGUgZGF0YWJhc2VcbiAgICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gU2Vzc2lvbiBkYXRhIHRvIGluc2VydFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBDcmVhdGVkIHNlc3Npb25cbiAgICovXG4gIGFzeW5jIGNyZWF0ZVRlc3RTZXNzaW9uKHNlc3Npb25EYXRhKSB7XG4gICAgY29uc3QgW3Nlc3Npb25dID0gYXdhaXQgZGIuaW5zZXJ0KHNlc3Npb25zKS52YWx1ZXMoc2Vzc2lvbkRhdGEpLnJldHVybmluZygpO1xuICAgIHRoaXMuY3JlYXRlZFNlc3Npb25zLnB1c2goc2Vzc2lvbi5pZCk7XG4gICAgcmV0dXJuIHNlc3Npb247XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgdGVzdCBlbWFpbCB2ZXJpZmljYXRpb24gY29kZSBpbiB0aGUgZGF0YWJhc2VcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvZGVEYXRhIC0gRW1haWwgdmVyaWZpY2F0aW9uIGNvZGUgZGF0YSB0byBpbnNlcnRcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gQ3JlYXRlZCBlbWFpbCB2ZXJpZmljYXRpb24gY29kZVxuICAgKi9cbiAgYXN5bmMgY3JlYXRlVGVzdEVtYWlsQ29kZShjb2RlRGF0YSkge1xuICAgIGNvbnN0IFtjb2RlXSA9IGF3YWl0IGRiLmluc2VydChlbWFpbFZlcmlmaWNhdGlvbkNvZGVzKS52YWx1ZXMoY29kZURhdGEpLnJldHVybmluZygpO1xuICAgIHRoaXMuY3JlYXRlZEVtYWlsQ29kZXMucHVzaChjb2RlLmlkKTtcbiAgICByZXR1cm4gY29kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSB0ZXN0IHBsYW50IGluIHRoZSBkYXRhYmFzZVxuICAgKiBAcGFyYW0ge09iamVjdH0gcGxhbnREYXRhIC0gUGxhbnQgZGF0YSB0byBpbnNlcnRcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gQ3JlYXRlZCBwbGFudFxuICAgKi9cbiAgYXN5bmMgY3JlYXRlVGVzdFBsYW50KHBsYW50RGF0YSkge1xuICAgIGNvbnN0IFtwbGFudF0gPSBhd2FpdCBkYi5pbnNlcnQocGxhbnRzKS52YWx1ZXMocGxhbnREYXRhKS5yZXR1cm5pbmcoKTtcbiAgICB0aGlzLmNyZWF0ZWRQbGFudHMucHVzaChwbGFudC5pZCk7XG4gICAgcmV0dXJuIHBsYW50O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHRlc3QgcGxhbnQgaW5zdGFuY2UgaW4gdGhlIGRhdGFiYXNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZURhdGEgLSBQbGFudCBpbnN0YW5jZSBkYXRhIHRvIGluc2VydFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBDcmVhdGVkIHBsYW50IGluc3RhbmNlXG4gICAqL1xuICBhc3luYyBjcmVhdGVUZXN0UGxhbnRJbnN0YW5jZShpbnN0YW5jZURhdGEpIHtcbiAgICBjb25zdCBbaW5zdGFuY2VdID0gYXdhaXQgZGIuaW5zZXJ0KHBsYW50SW5zdGFuY2VzKS52YWx1ZXMoaW5zdGFuY2VEYXRhKS5yZXR1cm5pbmcoKTtcbiAgICB0aGlzLmNyZWF0ZWRQbGFudEluc3RhbmNlcy5wdXNoKGluc3RhbmNlLmlkKTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgdGVzdCBwcm9wYWdhdGlvbiBpbiB0aGUgZGF0YWJhc2VcbiAgICogQHBhcmFtIHtPYmplY3R9IHByb3BhZ2F0aW9uRGF0YSAtIFByb3BhZ2F0aW9uIGRhdGEgdG8gaW5zZXJ0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IENyZWF0ZWQgcHJvcGFnYXRpb25cbiAgICovXG4gIGFzeW5jIGNyZWF0ZVRlc3RQcm9wYWdhdGlvbihwcm9wYWdhdGlvbkRhdGEpIHtcbiAgICBjb25zdCBbcHJvcGFnYXRpb25dID0gYXdhaXQgZGIuaW5zZXJ0KHByb3BhZ2F0aW9ucykudmFsdWVzKHByb3BhZ2F0aW9uRGF0YSkucmV0dXJuaW5nKCk7XG4gICAgdGhpcy5jcmVhdGVkUHJvcGFnYXRpb25zLnB1c2gocHJvcGFnYXRpb24uaWQpO1xuICAgIHJldHVybiBwcm9wYWdhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSB0ZXN0IGNhcmUgaGlzdG9yeSByZWNvcmQgaW4gdGhlIGRhdGFiYXNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjYXJlRGF0YSAtIENhcmUgaGlzdG9yeSBkYXRhIHRvIGluc2VydFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBDcmVhdGVkIGNhcmUgaGlzdG9yeSByZWNvcmRcbiAgICovXG4gIGFzeW5jIGNyZWF0ZVRlc3RDYXJlSGlzdG9yeShjYXJlRGF0YSkge1xuICAgIGNvbnN0IFtjYXJlXSA9IGF3YWl0IGRiLmluc2VydChjYXJlSGlzdG9yeSkudmFsdWVzKGNhcmVEYXRhKS5yZXR1cm5pbmcoKTtcbiAgICB0aGlzLmNyZWF0ZWRDYXJlSGlzdG9yeS5wdXNoKGNhcmUuaWQpO1xuICAgIHJldHVybiBjYXJlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIHVzZXIgYnkgSUQgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICogQHBhcmFtIHtudW1iZXJ9IHVzZXJJZCAtIFVzZXIgSUQgdG8gcmV0cmlldmVcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0fG51bGw+fSBVc2VyIG9yIG51bGwgaWYgbm90IGZvdW5kXG4gICAqL1xuICBhc3luYyBnZXRVc2VyQnlJZCh1c2VySWQpIHtcbiAgICBjb25zdCBbdXNlcl0gPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKHVzZXJzKS53aGVyZShlcSh1c2Vycy5pZCwgdXNlcklkKSk7XG4gICAgcmV0dXJuIHVzZXIgfHwgbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSB1c2VyIGJ5IGVtYWlsIGZyb20gdGhlIGRhdGFiYXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbCAtIEVtYWlsIHRvIHNlYXJjaCBmb3JcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0fG51bGw+fSBVc2VyIG9yIG51bGwgaWYgbm90IGZvdW5kXG4gICAqL1xuICBhc3luYyBnZXRVc2VyQnlFbWFpbChlbWFpbCkge1xuICAgIGNvbnN0IFt1c2VyXSA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20odXNlcnMpLndoZXJlKGVxKHVzZXJzLmVtYWlsLCBlbWFpbC50b0xvd2VyQ2FzZSgpKSk7XG4gICAgcmV0dXJuIHVzZXIgfHwgbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBzZXNzaW9uIGJ5IElEIGZyb20gdGhlIGRhdGFiYXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZXNzaW9uSWQgLSBTZXNzaW9uIElEIHRvIHJldHJpZXZlXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdHxudWxsPn0gU2Vzc2lvbiBvciBudWxsIGlmIG5vdCBmb3VuZFxuICAgKi9cbiAgYXN5bmMgZ2V0U2Vzc2lvbkJ5SWQoc2Vzc2lvbklkKSB7XG4gICAgY29uc3QgW3Nlc3Npb25dID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShzZXNzaW9ucykud2hlcmUoZXEoc2Vzc2lvbnMuaWQsIHNlc3Npb25JZCkpO1xuICAgIHJldHVybiBzZXNzaW9uIHx8IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNlc3Npb25zIGZvciBhIHVzZXIgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICogQHBhcmFtIHtudW1iZXJ9IHVzZXJJZCAtIFVzZXIgSUQgdG8gZ2V0IHNlc3Npb25zIGZvclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBcnJheT59IEFycmF5IG9mIHNlc3Npb25zXG4gICAqL1xuICBhc3luYyBnZXRTZXNzaW9uc0J5VXNlcklkKHVzZXJJZCkge1xuICAgIHJldHVybiBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKHNlc3Npb25zKS53aGVyZShlcShzZXNzaW9ucy51c2VySWQsIHVzZXJJZCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBlbWFpbCB2ZXJpZmljYXRpb24gY29kZXMgZm9yIGEgdXNlclxuICAgKiBAcGFyYW0ge251bWJlcn0gdXNlcklkIC0gVXNlciBJRCB0byBnZXQgY29kZXMgZm9yXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5Pn0gQXJyYXkgb2YgZW1haWwgdmVyaWZpY2F0aW9uIGNvZGVzXG4gICAqL1xuICBhc3luYyBnZXRFbWFpbENvZGVzQnlVc2VySWQodXNlcklkKSB7XG4gICAgcmV0dXJuIGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oZW1haWxWZXJpZmljYXRpb25Db2Rlcykud2hlcmUoZXEoZW1haWxWZXJpZmljYXRpb25Db2Rlcy51c2VySWQsIHVzZXJJZCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhIHVzZXIgaW4gdGhlIGRhdGFiYXNlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB1c2VySWQgLSBVc2VyIElEIHRvIHVwZGF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gdXBkYXRlcyAtIFVwZGF0ZXMgdG8gYXBwbHlcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gVXBkYXRlZCB1c2VyXG4gICAqL1xuICBhc3luYyB1cGRhdGVVc2VyKHVzZXJJZCwgdXBkYXRlcykge1xuICAgIGNvbnN0IFt1c2VyXSA9IGF3YWl0IGRiLnVwZGF0ZSh1c2VycylcbiAgICAgIC5zZXQoeyAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfSlcbiAgICAgIC53aGVyZShlcSh1c2Vycy5pZCwgdXNlcklkKSlcbiAgICAgIC5yZXR1cm5pbmcoKTtcbiAgICByZXR1cm4gdXNlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSB1c2VyIGZyb20gdGhlIGRhdGFiYXNlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB1c2VySWQgLSBVc2VyIElEIHRvIGRlbGV0ZVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIGFzeW5jIGRlbGV0ZVVzZXIodXNlcklkKSB7XG4gICAgYXdhaXQgZGIuZGVsZXRlKHVzZXJzKS53aGVyZShlcSh1c2Vycy5pZCwgdXNlcklkKSk7XG4gICAgLy8gUmVtb3ZlIGZyb20gdHJhY2tpbmdcbiAgICB0aGlzLmNyZWF0ZWRVc2VycyA9IHRoaXMuY3JlYXRlZFVzZXJzLmZpbHRlcihpZCA9PiBpZCAhPT0gdXNlcklkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBzZXNzaW9uIGZyb20gdGhlIGRhdGFiYXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZXNzaW9uSWQgLSBTZXNzaW9uIElEIHRvIGRlbGV0ZVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIGFzeW5jIGRlbGV0ZVNlc3Npb24oc2Vzc2lvbklkKSB7XG4gICAgYXdhaXQgZGIuZGVsZXRlKHNlc3Npb25zKS53aGVyZShlcShzZXNzaW9ucy5pZCwgc2Vzc2lvbklkKSk7XG4gICAgLy8gUmVtb3ZlIGZyb20gdHJhY2tpbmdcbiAgICB0aGlzLmNyZWF0ZWRTZXNzaW9ucyA9IHRoaXMuY3JlYXRlZFNlc3Npb25zLmZpbHRlcihpZCA9PiBpZCAhPT0gc2Vzc2lvbklkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYW4gZW1haWwgdmVyaWZpY2F0aW9uIGNvZGUgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvZGVJZCAtIENvZGUgSUQgdG8gZGVsZXRlXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fVxuICAgKi9cbiAgYXN5bmMgZGVsZXRlRW1haWxDb2RlKGNvZGVJZCkge1xuICAgIGF3YWl0IGRiLmRlbGV0ZShlbWFpbFZlcmlmaWNhdGlvbkNvZGVzKS53aGVyZShlcShlbWFpbFZlcmlmaWNhdGlvbkNvZGVzLmlkLCBjb2RlSWQpKTtcbiAgICAvLyBSZW1vdmUgZnJvbSB0cmFja2luZ1xuICAgIHRoaXMuY3JlYXRlZEVtYWlsQ29kZXMgPSB0aGlzLmNyZWF0ZWRFbWFpbENvZGVzLmZpbHRlcihpZCA9PiBpZCAhPT0gY29kZUlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cCBhbGwgdGVzdCBkYXRhIGNyZWF0ZWQgYnkgdGhpcyBtYW5hZ2VyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fVxuICAgKi9cbiAgYXN5bmMgY2xlYW51cCgpIHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2xlYW4gdXAgZW1haWwgdmVyaWZpY2F0aW9uIGNvZGVzIGZpcnN0IChmb3JlaWduIGtleSBjb25zdHJhaW50cylcbiAgICAgIGZvciAoY29uc3QgY29kZUlkIG9mIHRoaXMuY3JlYXRlZEVtYWlsQ29kZXMpIHtcbiAgICAgICAgYXdhaXQgZGIuZGVsZXRlKGVtYWlsVmVyaWZpY2F0aW9uQ29kZXMpLndoZXJlKGVxKGVtYWlsVmVyaWZpY2F0aW9uQ29kZXMuaWQsIGNvZGVJZCkpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhbiB1cCBzZXNzaW9uc1xuICAgICAgZm9yIChjb25zdCBzZXNzaW9uSWQgb2YgdGhpcy5jcmVhdGVkU2Vzc2lvbnMpIHtcbiAgICAgICAgYXdhaXQgZGIuZGVsZXRlKHNlc3Npb25zKS53aGVyZShlcShzZXNzaW9ucy5pZCwgc2Vzc2lvbklkKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFuIHVwIHVzZXJzIGxhc3RcbiAgICAgIGZvciAoY29uc3QgdXNlcklkIG9mIHRoaXMuY3JlYXRlZFVzZXJzKSB7XG4gICAgICAgIGF3YWl0IGRiLmRlbGV0ZSh1c2Vycykud2hlcmUoZXEodXNlcnMuaWQsIHVzZXJJZCkpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXNldCB0cmFja2luZyBhcnJheXNcbiAgICAgIHRoaXMuY3JlYXRlZFVzZXJzID0gW107XG4gICAgICB0aGlzLmNyZWF0ZWRTZXNzaW9ucyA9IFtdO1xuICAgICAgdGhpcy5jcmVhdGVkRW1haWxDb2RlcyA9IFtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBjbGVhbnVwIGVycm9yOicsIGVycm9yKTtcbiAgICAgIC8vIFJlc2V0IHRyYWNraW5nIGFycmF5cyBldmVuIGlmIGNsZWFudXAgZmFpbHNcbiAgICAgIHRoaXMuY3JlYXRlZFVzZXJzID0gW107XG4gICAgICB0aGlzLmNyZWF0ZWRTZXNzaW9ucyA9IFtdO1xuICAgICAgdGhpcy5jcmVhdGVkRW1haWxDb2RlcyA9IFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgZGF0YWJhc2UgY29ubmVjdGlvbiBpcyB3b3JraW5nXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSBUcnVlIGlmIGNvbm5lY3Rpb24gaXMgd29ya2luZ1xuICAgKi9cbiAgYXN5bmMgaXNDb25uZWN0ZWQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFNpbXBsZSBxdWVyeSB0byB0ZXN0IGNvbm5lY3Rpb25cbiAgICAgIGF3YWl0IGRiLnNlbGVjdCgpLmZyb20odXNlcnMpLmxpbWl0KDEpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gdGVzdCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBkYXRhYmFzZSB0ZXN0IG1hbmFnZXIgaW5zdGFuY2VcbiAqIEByZXR1cm5zIHtEYXRhYmFzZVRlc3RNYW5hZ2VyfSBOZXcgZGF0YWJhc2UgdGVzdCBtYW5hZ2VyXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVEYXRhYmFzZVRlc3RNYW5hZ2VyID0gKCkgPT4ge1xuICByZXR1cm4gbmV3IERhdGFiYXNlVGVzdE1hbmFnZXIoKTtcbn07XG5cbi8qKlxuICogR2xvYmFsIGRhdGFiYXNlIHRlc3QgbWFuYWdlciBmb3Igc2hhcmVkIHVzZVxuICovXG5leHBvcnQgY29uc3QgZ2xvYmFsRGF0YWJhc2VUZXN0TWFuYWdlciA9IG5ldyBEYXRhYmFzZVRlc3RNYW5hZ2VyKCk7XG5cbmV4cG9ydCBkZWZhdWx0IERhdGFiYXNlVGVzdE1hbmFnZXI7Il0sIm5hbWVzIjpbImNyZWF0ZURhdGFiYXNlVGVzdE1hbmFnZXIiLCJnbG9iYWxEYXRhYmFzZVRlc3RNYW5hZ2VyIiwiRGF0YWJhc2VUZXN0TWFuYWdlciIsImNyZWF0ZWRVc2VycyIsImNyZWF0ZWRTZXNzaW9ucyIsImNyZWF0ZWRFbWFpbENvZGVzIiwiY3JlYXRlZFBsYW50cyIsImNyZWF0ZWRQbGFudEluc3RhbmNlcyIsImNyZWF0ZWRQcm9wYWdhdGlvbnMiLCJjcmVhdGVkQ2FyZUhpc3RvcnkiLCJjcmVhdGVUZXN0VXNlciIsInVzZXJEYXRhIiwidXNlciIsImRiIiwiaW5zZXJ0IiwidXNlcnMiLCJ2YWx1ZXMiLCJyZXR1cm5pbmciLCJwdXNoIiwiaWQiLCJjcmVhdGVUZXN0U2Vzc2lvbiIsInNlc3Npb25EYXRhIiwic2Vzc2lvbiIsInNlc3Npb25zIiwiY3JlYXRlVGVzdEVtYWlsQ29kZSIsImNvZGVEYXRhIiwiY29kZSIsImVtYWlsVmVyaWZpY2F0aW9uQ29kZXMiLCJjcmVhdGVUZXN0UGxhbnQiLCJwbGFudERhdGEiLCJwbGFudCIsInBsYW50cyIsImNyZWF0ZVRlc3RQbGFudEluc3RhbmNlIiwiaW5zdGFuY2VEYXRhIiwiaW5zdGFuY2UiLCJwbGFudEluc3RhbmNlcyIsImNyZWF0ZVRlc3RQcm9wYWdhdGlvbiIsInByb3BhZ2F0aW9uRGF0YSIsInByb3BhZ2F0aW9uIiwicHJvcGFnYXRpb25zIiwiY3JlYXRlVGVzdENhcmVIaXN0b3J5IiwiY2FyZURhdGEiLCJjYXJlIiwiY2FyZUhpc3RvcnkiLCJnZXRVc2VyQnlJZCIsInVzZXJJZCIsInNlbGVjdCIsImZyb20iLCJ3aGVyZSIsImVxIiwiZ2V0VXNlckJ5RW1haWwiLCJlbWFpbCIsInRvTG93ZXJDYXNlIiwiZ2V0U2Vzc2lvbkJ5SWQiLCJzZXNzaW9uSWQiLCJnZXRTZXNzaW9uc0J5VXNlcklkIiwiZ2V0RW1haWxDb2Rlc0J5VXNlcklkIiwidXBkYXRlVXNlciIsInVwZGF0ZXMiLCJ1cGRhdGUiLCJzZXQiLCJ1cGRhdGVkQXQiLCJEYXRlIiwiZGVsZXRlVXNlciIsImRlbGV0ZSIsImZpbHRlciIsImRlbGV0ZVNlc3Npb24iLCJkZWxldGVFbWFpbENvZGUiLCJjb2RlSWQiLCJjbGVhbnVwIiwiZXJyb3IiLCJjb25zb2xlIiwiaXNDb25uZWN0ZWQiLCJsaW1pdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7UUF1UGFBO2VBQUFBOztRQVNiO2VBQUE7O1FBRmFDO2VBQUFBOzs7UUE5UE47b0JBRVk7d0JBQ3dGOzRCQUN4RjtBQUVuQjs7O0NBR0MsR0FDRCxNQUFNQztJQUNKLGFBQWM7UUFDWixJQUFJLENBQUNDLFlBQVksR0FBRyxFQUFFO1FBQ3RCLElBQUksQ0FBQ0MsZUFBZSxHQUFHLEVBQUU7UUFDekIsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRyxFQUFFO1FBQzNCLElBQUksQ0FBQ0MsYUFBYSxHQUFHLEVBQUU7UUFDdkIsSUFBSSxDQUFDQyxxQkFBcUIsR0FBRyxFQUFFO1FBQy9CLElBQUksQ0FBQ0MsbUJBQW1CLEdBQUcsRUFBRTtRQUM3QixJQUFJLENBQUNDLGtCQUFrQixHQUFHLEVBQUU7SUFDOUI7SUFFQTs7OztHQUlDLEdBQ0QsTUFBTUMsZUFBZUMsUUFBUSxFQUFFO1FBQzdCLE1BQU0sQ0FBQ0MsS0FBSyxHQUFHLE1BQU1DLE1BQUUsQ0FBQ0MsTUFBTSxDQUFDQyxhQUFLLEVBQUVDLE1BQU0sQ0FBQ0wsVUFBVU0sU0FBUztRQUNoRSxJQUFJLENBQUNkLFlBQVksQ0FBQ2Us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