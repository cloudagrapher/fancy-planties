{"version":3,"sources":["/Users/stefanbekker/projects/fancy-planties/src/components/auth/LogoutButton.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\n\ninterface LogoutButtonProps {\n  className?: string;\n  children?: React.ReactNode;\n}\n\nexport default function LogoutButton({ \n  className = \"btn btn--ghost btn--danger\",\n  children = \"Sign Out\"\n}: LogoutButtonProps) {\n  const router = useRouter();\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleLogout = async () => {\n    if (isLoading) return;\n    \n    setIsLoading(true);\n    \n    try {\n      const response = await fetch('/api/auth/signout', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (response.ok) {\n        // Redirect to sign in page\n        router.push('/auth/signin');\n        router.refresh();\n      } else {\n        console.error('Logout failed');\n        // Still redirect on failure to ensure user is logged out client-side\n        router.push('/auth/signin');\n        router.refresh();\n      }\n    } catch (error) {\n      console.error('Logout error:', error);\n      // Still redirect on error to ensure user is logged out client-side\n      router.push('/auth/signin');\n      router.refresh();\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <button\n      onClick={handleLogout}\n      disabled={isLoading}\n      className={`${className} ${isLoading ? 'btn--loading' : ''}`}\n    >\n      {isLoading ? 'Signing out...' : children}\n    </button>\n  );\n}"],"names":["LogoutButton","className","children","router","useRouter","isLoading","setIsLoading","useState","handleLogout","response","fetch","method","headers","ok","push","refresh","console","error","button","onClick","disabled"],"mappings":"AAAA;;;;;+BAUA;;;eAAwBA;;;;uBARC;4BACC;AAOX,SAASA,aAAa,EACnCC,YAAY,4BAA4B,EACxCC,WAAW,UAAU,EACH;IAClB,MAAMC,SAASC,IAAAA,qBAAS;IACxB,MAAM,CAACC,WAAWC,aAAa,GAAGC,IAAAA,eAAQ,EAAC;IAE3C,MAAMC,eAAe;QACnB,IAAIH,WAAW;QAEfC,aAAa;QAEb,IAAI;YACF,MAAMG,WAAW,MAAMC,MAAM,qBAAqB;gBAChDC,QAAQ;gBACRC,SAAS;oBACP,gBAAgB;gBAClB;YACF;YAEA,IAAIH,SAASI,EAAE,EAAE;gBACf,2BAA2B;gBAC3BV,OAAOW,IAAI,CAAC;gBACZX,OAAOY,OAAO;YAChB,OAAO;gBACLC,QAAQC,KAAK,CAAC;gBACd,qEAAqE;gBACrEd,OAAOW,IAAI,CAAC;gBACZX,OAAOY,OAAO;YAChB;QACF,EAAE,OAAOE,OAAO;YACdD,QAAQC,KAAK,CAAC,iBAAiBA;YAC/B,mEAAmE;YACnEd,OAAOW,IAAI,CAAC;YACZX,OAAOY,OAAO;QAChB,SAAU;YACRT,aAAa;QACf;IACF;IAEA,qBACE,qBAACY;QACCC,SAASX;QACTY,UAAUf;QACVJ,WAAW,GAAGA,UAAU,CAAC,EAAEI,YAAY,iBAAiB,IAAI;kBAE3DA,YAAY,mBAAmBH;;AAGtC"}