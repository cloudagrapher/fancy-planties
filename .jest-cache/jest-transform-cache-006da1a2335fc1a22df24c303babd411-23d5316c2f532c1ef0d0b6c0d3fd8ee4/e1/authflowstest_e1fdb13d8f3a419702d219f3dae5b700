47a67ef46d72faf409ac93b742f0c1f5
// Authentication Flow Integration Tests
// Tests complete signup, login, and logout workflows
"use strict";
// Mock the navigation hooks before importing components
jest.mock('next/navigation', ()=>({
        useRouter: ()=>({
                push: mockPush,
                refresh: mockRefresh
            }),
        useSearchParams: ()=>({
                get: mockGet
            })
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _testutils = require("../../test-utils");
const _apihelpers = require("../../test-utils/helpers/api-helpers.js");
const _userfactory = require("../../test-utils/factories/user-factory.js");
const _SignUpForm = /*#__PURE__*/ _interop_require_default(require("../../components/auth/SignUpForm"));
const _SignInForm = /*#__PURE__*/ _interop_require_default(require("../../components/auth/SignInForm"));
const _LogoutButton = /*#__PURE__*/ _interop_require_default(require("../../components/auth/LogoutButton"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock Next.js router
const mockPush = jest.fn();
const mockRefresh = jest.fn();
const mockGet = jest.fn(()=>null);
describe('Authentication Flow Integration Tests', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        (0, _apihelpers.resetApiMocks)();
        mockPush.mockClear();
        mockRefresh.mockClear();
    });
    afterEach(()=>{
        (0, _apihelpers.resetApiMocks)();
    });
    describe('Complete Signup Workflow', ()=>{
        it('should complete full signup workflow from form submission to authenticated state', async ()=>{
            // Arrange
            const testUser = (0, _userfactory.createTestUser)({
                name: 'John Doe',
                email: 'john@example.com'
            });
            (0, _apihelpers.mockApiResponse)({
                'POST /api/auth/signup': {
                    status: 200,
                    data: {
                        success: true,
                        user: {
                            id: testUser.id,
                            email: testUser.email,
                            name: testUser.name
                        }
                    }
                }
            });
            const { user } = (0, _testutils.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SignUpForm.default, {}));
            // Act - Fill out signup form
            await _testutils.userInteractions.fillForm({
                'Full Name': 'John Doe',
                'Email Address': 'john@example.com',
                'Password': 'SecurePass123!'
            }, user);
            // Submit form
            await _testutils.userInteractions.submitForm(user, 'Create Account');
            // Assert - Verify API call was made with correct data
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/auth/signup', expect.objectContaining({
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: expect.stringContaining('john@example.com')
                }));
            });
            // Assert - Verify form shows loading state during submission
            expect(_react.screen.getByText('Creating account...')).toBeInTheDocument();
        });
        it('should handle signup validation errors properly', async ()=>{
            // Arrange
            (0, _apihelpers.mockApiResponse)({
                'POST /api/auth/signup': {
                    status: 400,
                    data: {
                        error: 'Validation failed',
                        errors: {
                            email: 'Email is already in use',
                            password: 'Password must be at least 8 characters'
                        }
                    }
                }
            });
            const { user } = (0, _testutils.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SignUpForm.default, {}));
            // Act - Submit form with valid client data but server errors
            await _testutils.userInteractions.fillForm({
                'Full Name': 'John Doe',
                'Email Address': 'existing@example.com',
                'Password': 'ValidPass123!'
            }, user);
            await _testutils.userInteractions.submitForm(user, 'Create Account');
            // Assert - Verify server error messages are displayed
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Email is already in use')).toBeInTheDocument();
                expect(_react.screen.getByText('Password must be at least 8 characters')).toBeInTheDocument();
            });
            // Assert - Verify no redirect occurred
            expect(mockPush).not.toHaveBeenCalled();
        });
        it('should handle signup server errors gracefully', async ()=>{
            // Arrange
            (0, _apihelpers.mockApiError)('/api/auth/signup', 500, {
                error: 'Internal server error'
            }, 'POST');
            const { user } = (0, _testutils.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SignUpForm.default, {}));
            // Act - Submit valid form data
            await _testutils.userInteractions.fillForm({
                'Full Name': 'John Doe',
                'Email Address': 'john@example.com',
                'Password': 'SecurePass123!'
            }, user);
            await _testutils.userInteractions.submitForm(user, 'Create Account');
            // Assert - Verify error message is displayed
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Internal server error')).toBeInTheDocument();
            });
            // Assert - Verify no redirect occurred
            expect(mockPush).not.toHaveBeenCalled();
        });
    });
    describe('Login Workflow with Session Persistence', ()=>{
        it('should complete login workflow with session persistence', async ()=>{
            // Arrange
            const testUser = (0, _userfactory.createTestUser)({
                email: 'john@example.com'
            });
            (0, _apihelpers.mockApiResponse)({
                'POST /api/auth/signin': {
                    status: 200,
                    data: {
                        success: true,
                        user: {
                            id: testUser.id,
                            email: testUser.email,
                            name: testUser.name
                        }
                    }
                }
            });
            const { user } = (0, _testutils.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SignInForm.default, {}));
            // Act - Fill out login form
            await _testutils.userInteractions.fillForm({
                'Email Address': 'john@example.com',
                'Password': 'SecurePass123!'
            }, user);
            // Submit form
            await _testutils.userInteractions.submitForm(user, 'Sign In');
            // Assert - Verify API call was made with correct credentials
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/auth/signin', expect.objectContaining({
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        email: 'john@example.com',
                        password: 'SecurePass123!'
                    })
                }));
            });
            // Assert - Verify redirect to dashboard
            await (0, _react.waitFor)(()=>{
                expect(mockPush).toHaveBeenCalledWith('/dashboard');
                expect(mockRefresh).toHaveBeenCalled();
            });
        });
        it('should handle login with redirect parameter', async ()=>{
            // Arrange
            const testUser = (0, _userfactory.createTestUser)();
            // Mock useSearchParams to return redirect parameter
            jest.doMock('next/navigation', ()=>({
                    useRouter: ()=>({
                            push: mockPush,
                            refresh: mockRefresh
                        }),
                    useSearchParams: ()=>({
                            get: jest.fn((param)=>param === 'redirect' ? '/dashboard/plants' : null)
                        })
                }));
            (0, _apihelpers.mockApiResponse)({
                'POST /api/auth/signin': {
                    status: 200,
                    data: {
                        success: true,
                        user: {
                            id: testUser.id,
                            email: testUser.email,
                            name: testUser.name
                        }
                    }
                }
            });
            const { user } = (0, _testutils.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SignInForm.default, {}));
            // Act - Complete login
            await _testutils.userInteractions.fillForm({
                'Email Address': 'john@example.com',
                'Password': 'SecurePass123!'
            }, user);
            await _testutils.userInteractions.submitForm(user, 'Sign In');
            // Assert - Verify redirect to intended page
            await (0, _react.waitFor)(()=>{
                expect(mockPush).toHaveBeenCalledWith('/dashboard/plants');
            });
        });
        it('should handle invalid login credentials', async ()=>{
            // Arrange
            (0, _apihelpers.mockApiResponse)({
                'POST /api/auth/signin': {
                    status: 401,
                    data: {
                        error: 'Invalid email or password'
                    }
                }
            });
            const { user } = (0, _testutils.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SignInForm.default, {}));
            // Act - Submit invalid credentials
            await _testutils.userInteractions.fillForm({
                'Email Address': 'wrong@example.com',
                'Password': 'wrongpassword'
            }, user);
            await _testutils.userInteractions.submitForm(user, 'Sign In');
            // Assert - Verify error message is displayed
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Invalid email or password')).toBeInTheDocument();
            });
            // Assert - Verify no redirect occurred
            expect(mockPush).not.toHaveBeenCalled();
        });
        it('should handle login validation errors', async ()=>{
            // Arrange
            (0, _apihelpers.mockApiResponse)({
                'POST /api/auth/signin': {
                    status: 400,
                    data: {
                        error: 'Validation failed',
                        errors: {
                            email: 'Please enter a valid email address',
                            password: 'Password is required'
                        }
                    }
                }
            });
            const { user } = (0, _testutils.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SignInForm.default, {}));
            // Act - Submit form with invalid data
            await _testutils.userInteractions.fillForm({
                'Email Address': 'invalid-email',
                'Password': 'validpass'
            }, user);
            await _testutils.userInteractions.submitForm(user, 'Sign In');
            // Assert - Verify field-specific errors are displayed
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Please enter a valid email address')).toBeInTheDocument();
                expect(_react.screen.getByText('Password is required')).toBeInTheDocument();
            });
        });
    });
    describe('Logout and Session Cleanup', ()=>{
        it('should complete logout workflow with proper session cleanup', async ()=>{
            // Arrange
            (0, _apihelpers.mockApiResponse)({
                'POST /api/auth/signout': {
                    status: 200,
                    data: {
                        success: true,
                        message: 'Signed out successfully'
                    }
                }
            });
            const { user } = (0, _testutils.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_LogoutButton.default, {}));
            // Act - Click logout button
            const logoutButton = _react.screen.getByRole('button', {
                name: /sign out/i
            });
            await user.click(logoutButton);
            // Assert - Verify API call was made
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/auth/signout', expect.objectContaining({
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                }));
            });
            // Assert - Verify redirect to signin page
            await (0, _react.waitFor)(()=>{
                expect(mockPush).toHaveBeenCalledWith('/auth/signin');
                expect(mockRefresh).toHaveBeenCalled();
            });
        });
        it('should handle logout when no active session exists', async ()=>{
            // Arrange
            (0, _apihelpers.mockApiResponse)({
                'POST /api/auth/signout': {
                    status: 401,
                    data: {
                        error: 'No active session'
                    }
                }
            });
            const { user } = (0, _testutils.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_LogoutButton.default, {}));
            // Act - Click logout button
            const logoutButton = _react.screen.getByRole('button', {
                name: /sign out/i
            });
            await user.click(logoutButton);
            // Assert - Verify redirect still occurs (client-side logout)
            await (0, _react.waitFor)(()=>{
                expect(mockPush).toHaveBeenCalledWith('/auth/signin');
                expect(mockRefresh).toHaveBeenCalled();
            });
        });
        it('should handle logout server errors gracefully', async ()=>{
            // Arrange
            (0, _apihelpers.mockApiError)('/api/auth/signout', 500, {
                error: 'Internal server error'
            }, 'POST');
            const { user } = (0, _testutils.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_LogoutButton.default, {}));
            // Act - Click logout button
            const logoutButton = _react.screen.getByRole('button', {
                name: /sign out/i
            });
            await user.click(logoutButton);
            // Assert - Verify redirect occurs even on server error (fail-safe logout)
            await (0, _react.waitFor)(()=>{
                expect(mockPush).toHaveBeenCalledWith('/auth/signin');
                expect(mockRefresh).toHaveBeenCalled();
            });
        });
        it('should show loading state during logout process', async ()=>{
            // Arrange
            let resolveLogout;
            const logoutPromise = new Promise((resolve)=>{
                resolveLogout = resolve;
            });
            global.fetch = jest.fn(()=>logoutPromise);
            const { user } = (0, _testutils.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_LogoutButton.default, {}));
            // Act - Click logout button
            const logoutButton = _react.screen.getByRole('button', {
                name: /sign out/i
            });
            await user.click(logoutButton);
            // Assert - Verify loading state is shown
            expect(_react.screen.getByText('Signing out...')).toBeInTheDocument();
            expect(logoutButton).toHaveClass('btn--loading');
            // Complete the logout
            resolveLogout({
                ok: true,
                status: 200,
                json: ()=>Promise.resolve({
                        success: true
                    })
            });
            // Assert - Verify loading state is cleared
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Signing out...')).not.toBeInTheDocument();
            });
        });
    });
    describe('End-to-End Authentication Flow', ()=>{
        it('should complete full authentication cycle: signup -> login -> logout', async ()=>{
            const testUser = (0, _userfactory.createTestUser)({
                name: 'Jane Doe',
                email: 'jane@example.com'
            });
            // Step 1: Signup
            (0, _apihelpers.mockApiResponse)({
                'POST /api/auth/signup': {
                    status: 200,
                    data: {
                        success: true,
                        user: {
                            id: testUser.id,
                            email: testUser.email,
                            name: testUser.name
                        }
                    }
                }
            });
            const { user: userEvent, rerender } = (0, _testutils.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SignUpForm.default, {}));
            // Complete signup
            await _testutils.userInteractions.fillForm({
                'Full Name': 'Jane Doe',
                'Email Address': 'jane@example.com',
                'Password': 'SecurePass123!'
            }, userEvent);
            await _testutils.userInteractions.submitForm(userEvent, 'Create Account');
            await (0, _react.waitFor)(()=>{
                expect(mockPush).toHaveBeenCalledWith('/dashboard');
            });
            // Reset mocks for next step
            jest.clearAllMocks();
            mockPush.mockClear();
            // Step 2: Login (simulate returning user)
            (0, _apihelpers.mockApiResponse)({
                'POST /api/auth/signin': {
                    status: 200,
                    data: {
                        success: true,
                        user: {
                            id: testUser.id,
                            email: testUser.email,
                            name: testUser.name
                        }
                    }
                }
            });
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SignInForm.default, {}));
            // Complete login
            await _testutils.userInteractions.fillForm({
                'Email Address': 'jane@example.com',
                'Password': 'SecurePass123!'
            }, userEvent);
            await _testutils.userInteractions.submitForm(userEvent, 'Sign In');
            await (0, _react.waitFor)(()=>{
                expect(mockPush).toHaveBeenCalledWith('/dashboard');
            });
            // Reset mocks for logout
            jest.clearAllMocks();
            mockPush.mockClear();
            // Step 3: Logout
            (0, _apihelpers.mockApiResponse)({
                'POST /api/auth/signout': {
                    status: 200,
                    data: {
                        success: true,
                        message: 'Signed out successfully'
                    }
                }
            });
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_LogoutButton.default, {}));
            // Complete logout
            const logoutButton = _react.screen.getByRole('button', {
                name: /sign out/i
            });
            await userEvent.click(logoutButton);
            await (0, _react.waitFor)(()=>{
                expect(mockPush).toHaveBeenCalledWith('/auth/signin');
            });
        });
        it('should maintain form state during validation errors', async ()=>{
            // Arrange
            (0, _apihelpers.mockApiResponse)({
                'POST /api/auth/signin': {
                    status: 400,
                    data: {
                        error: 'Validation failed',
                        errors: {
                            password: 'Password is required'
                        }
                    }
                }
            });
            const { user } = (0, _testutils.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SignInForm.default, {}));
            // Act - Fill form partially and submit
            await _testutils.userInteractions.fillForm({
                'Email Address': 'jane@example.com'
            }, user);
            await _testutils.userInteractions.submitForm(user, 'Sign In');
            // Assert - Verify form maintains email value after error
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByDisplayValue('jane@example.com')).toBeInTheDocument();
                expect(_react.screen.getByText('Password is required')).toBeInTheDocument();
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdGVmYW5iZWtrZXIvcHJvamVjdHMvZmFuY3ktcGxhbnRpZXMvc3JjL19fdGVzdHNfXy9pbnRlZ3JhdGlvbi9hdXRoLWZsb3dzLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQXV0aGVudGljYXRpb24gRmxvdyBJbnRlZ3JhdGlvbiBUZXN0c1xuLy8gVGVzdHMgY29tcGxldGUgc2lnbnVwLCBsb2dpbiwgYW5kIGxvZ291dCB3b3JrZmxvd3NcblxuaW1wb3J0IHsgc2NyZWVuLCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyByZW5kZXJXaXRoUHJvdmlkZXJzLCB1c2VySW50ZXJhY3Rpb25zLCB0ZXN0VXRpbHMgfSBmcm9tICdAL3Rlc3QtdXRpbHMnO1xuaW1wb3J0IHsgbW9ja0FwaVJlc3BvbnNlLCBtb2NrQXBpRXJyb3IsIHJlc2V0QXBpTW9ja3MgfSBmcm9tICdAL3Rlc3QtdXRpbHMvaGVscGVycy9hcGktaGVscGVycyc7XG5pbXBvcnQgeyBjcmVhdGVUZXN0VXNlciwgY3JlYXRlVGVzdFNlc3Npb24gfSBmcm9tICdAL3Rlc3QtdXRpbHMvZmFjdG9yaWVzL3VzZXItZmFjdG9yeSc7XG5pbXBvcnQgU2lnblVwRm9ybSBmcm9tICdAL2NvbXBvbmVudHMvYXV0aC9TaWduVXBGb3JtJztcbmltcG9ydCBTaWduSW5Gb3JtIGZyb20gJ0AvY29tcG9uZW50cy9hdXRoL1NpZ25JbkZvcm0nO1xuaW1wb3J0IExvZ291dEJ1dHRvbiBmcm9tICdAL2NvbXBvbmVudHMvYXV0aC9Mb2dvdXRCdXR0b24nO1xuXG4vLyBNb2NrIE5leHQuanMgcm91dGVyXG5jb25zdCBtb2NrUHVzaCA9IGplc3QuZm4oKTtcbmNvbnN0IG1vY2tSZWZyZXNoID0gamVzdC5mbigpO1xuY29uc3QgbW9ja0dldCA9IGplc3QuZm4oKCkgPT4gbnVsbCk7XG5cbi8vIE1vY2sgdGhlIG5hdmlnYXRpb24gaG9va3MgYmVmb3JlIGltcG9ydGluZyBjb21wb25lbnRzXG5qZXN0Lm1vY2soJ25leHQvbmF2aWdhdGlvbicsICgpID0+ICh7XG4gIHVzZVJvdXRlcjogKCkgPT4gKHtcbiAgICBwdXNoOiBtb2NrUHVzaCxcbiAgICByZWZyZXNoOiBtb2NrUmVmcmVzaCxcbiAgfSksXG4gIHVzZVNlYXJjaFBhcmFtczogKCkgPT4gKHtcbiAgICBnZXQ6IG1vY2tHZXQsXG4gIH0pLFxufSkpO1xuXG5kZXNjcmliZSgnQXV0aGVudGljYXRpb24gRmxvdyBJbnRlZ3JhdGlvbiBUZXN0cycsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgcmVzZXRBcGlNb2NrcygpO1xuICAgIG1vY2tQdXNoLm1vY2tDbGVhcigpO1xuICAgIG1vY2tSZWZyZXNoLm1vY2tDbGVhcigpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIHJlc2V0QXBpTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbXBsZXRlIFNpZ251cCBXb3JrZmxvdycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNvbXBsZXRlIGZ1bGwgc2lnbnVwIHdvcmtmbG93IGZyb20gZm9ybSBzdWJtaXNzaW9uIHRvIGF1dGhlbnRpY2F0ZWQgc3RhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB0ZXN0VXNlciA9IGNyZWF0ZVRlc3RVc2VyKHtcbiAgICAgICAgbmFtZTogJ0pvaG4gRG9lJyxcbiAgICAgICAgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBtb2NrQXBpUmVzcG9uc2Uoe1xuICAgICAgICAnUE9TVCAvYXBpL2F1dGgvc2lnbnVwJzoge1xuICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgIGlkOiB0ZXN0VXNlci5pZCxcbiAgICAgICAgICAgICAgZW1haWw6IHRlc3RVc2VyLmVtYWlsLFxuICAgICAgICAgICAgICBuYW1lOiB0ZXN0VXNlci5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgdXNlciB9ID0gcmVuZGVyV2l0aFByb3ZpZGVycyg8U2lnblVwRm9ybSAvPik7XG5cbiAgICAgIC8vIEFjdCAtIEZpbGwgb3V0IHNpZ251cCBmb3JtXG4gICAgICBhd2FpdCB1c2VySW50ZXJhY3Rpb25zLmZpbGxGb3JtKHtcbiAgICAgICAgJ0Z1bGwgTmFtZSc6ICdKb2huIERvZScsXG4gICAgICAgICdFbWFpbCBBZGRyZXNzJzogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICAnUGFzc3dvcmQnOiAnU2VjdXJlUGFzczEyMyEnLFxuICAgICAgfSwgdXNlcik7XG5cbiAgICAgIC8vIFN1Ym1pdCBmb3JtXG4gICAgICBhd2FpdCB1c2VySW50ZXJhY3Rpb25zLnN1Ym1pdEZvcm0odXNlciwgJ0NyZWF0ZSBBY2NvdW50Jyk7XG5cbiAgICAgIC8vIEFzc2VydCAtIFZlcmlmeSBBUEkgY2FsbCB3YXMgbWFkZSB3aXRoIGNvcnJlY3QgZGF0YVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICcvYXBpL2F1dGgvc2lnbnVwJyxcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnam9obkBleGFtcGxlLmNvbScpLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQXNzZXJ0IC0gVmVyaWZ5IGZvcm0gc2hvd3MgbG9hZGluZyBzdGF0ZSBkdXJpbmcgc3VibWlzc2lvblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0NyZWF0aW5nIGFjY291bnQuLi4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNpZ251cCB2YWxpZGF0aW9uIGVycm9ycyBwcm9wZXJseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tBcGlSZXNwb25zZSh7XG4gICAgICAgICdQT1NUIC9hcGkvYXV0aC9zaWdudXAnOiB7XG4gICAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZXJyb3I6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgICAgICBlcnJvcnM6IHtcbiAgICAgICAgICAgICAgZW1haWw6ICdFbWFpbCBpcyBhbHJlYWR5IGluIHVzZScsXG4gICAgICAgICAgICAgIHBhc3N3b3JkOiAnUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgdXNlciB9ID0gcmVuZGVyV2l0aFByb3ZpZGVycyg8U2lnblVwRm9ybSAvPik7XG5cbiAgICAgIC8vIEFjdCAtIFN1Ym1pdCBmb3JtIHdpdGggdmFsaWQgY2xpZW50IGRhdGEgYnV0IHNlcnZlciBlcnJvcnNcbiAgICAgIGF3YWl0IHVzZXJJbnRlcmFjdGlvbnMuZmlsbEZvcm0oe1xuICAgICAgICAnRnVsbCBOYW1lJzogJ0pvaG4gRG9lJyxcbiAgICAgICAgJ0VtYWlsIEFkZHJlc3MnOiAnZXhpc3RpbmdAZXhhbXBsZS5jb20nLFxuICAgICAgICAnUGFzc3dvcmQnOiAnVmFsaWRQYXNzMTIzIScsXG4gICAgICB9LCB1c2VyKTtcblxuICAgICAgYXdhaXQgdXNlckludGVyYWN0aW9ucy5zdWJtaXRGb3JtKHVzZXIsICdDcmVhdGUgQWNjb3VudCcpO1xuXG4gICAgICAvLyBBc3NlcnQgLSBWZXJpZnkgc2VydmVyIGVycm9yIG1lc3NhZ2VzIGFyZSBkaXNwbGF5ZWRcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRW1haWwgaXMgYWxyZWFkeSBpbiB1c2UnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Bhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQXNzZXJ0IC0gVmVyaWZ5IG5vIHJlZGlyZWN0IG9jY3VycmVkXG4gICAgICBleHBlY3QobW9ja1B1c2gpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzaWdudXAgc2VydmVyIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja0FwaUVycm9yKCcvYXBpL2F1dGgvc2lnbnVwJywgNTAwLCB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCAnUE9TVCcpO1xuXG4gICAgICBjb25zdCB7IHVzZXIgfSA9IHJlbmRlcldpdGhQcm92aWRlcnMoPFNpZ25VcEZvcm0gLz4pO1xuXG4gICAgICAvLyBBY3QgLSBTdWJtaXQgdmFsaWQgZm9ybSBkYXRhXG4gICAgICBhd2FpdCB1c2VySW50ZXJhY3Rpb25zLmZpbGxGb3JtKHtcbiAgICAgICAgJ0Z1bGwgTmFtZSc6ICdKb2huIERvZScsXG4gICAgICAgICdFbWFpbCBBZGRyZXNzJzogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICAnUGFzc3dvcmQnOiAnU2VjdXJlUGFzczEyMyEnLFxuICAgICAgfSwgdXNlcik7XG5cbiAgICAgIGF3YWl0IHVzZXJJbnRlcmFjdGlvbnMuc3VibWl0Rm9ybSh1c2VyLCAnQ3JlYXRlIEFjY291bnQnKTtcblxuICAgICAgLy8gQXNzZXJ0IC0gVmVyaWZ5IGVycm9yIG1lc3NhZ2UgaXMgZGlzcGxheWVkXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0ludGVybmFsIHNlcnZlciBlcnJvcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEFzc2VydCAtIFZlcmlmeSBubyByZWRpcmVjdCBvY2N1cnJlZFxuICAgICAgZXhwZWN0KG1vY2tQdXNoKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTG9naW4gV29ya2Zsb3cgd2l0aCBTZXNzaW9uIFBlcnNpc3RlbmNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY29tcGxldGUgbG9naW4gd29ya2Zsb3cgd2l0aCBzZXNzaW9uIHBlcnNpc3RlbmNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgdGVzdFVzZXIgPSBjcmVhdGVUZXN0VXNlcih7XG4gICAgICAgIGVtYWlsOiAnam9obkBleGFtcGxlLmNvbScsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbW9ja0FwaVJlc3BvbnNlKHtcbiAgICAgICAgJ1BPU1QgL2FwaS9hdXRoL3NpZ25pbic6IHtcbiAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICBpZDogdGVzdFVzZXIuaWQsXG4gICAgICAgICAgICAgIGVtYWlsOiB0ZXN0VXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgbmFtZTogdGVzdFVzZXIubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7IHVzZXIgfSA9IHJlbmRlcldpdGhQcm92aWRlcnMoPFNpZ25JbkZvcm0gLz4pO1xuXG4gICAgICAvLyBBY3QgLSBGaWxsIG91dCBsb2dpbiBmb3JtXG4gICAgICBhd2FpdCB1c2VySW50ZXJhY3Rpb25zLmZpbGxGb3JtKHtcbiAgICAgICAgJ0VtYWlsIEFkZHJlc3MnOiAnam9obkBleGFtcGxlLmNvbScsXG4gICAgICAgICdQYXNzd29yZCc6ICdTZWN1cmVQYXNzMTIzIScsXG4gICAgICB9LCB1c2VyKTtcblxuICAgICAgLy8gU3VibWl0IGZvcm1cbiAgICAgIGF3YWl0IHVzZXJJbnRlcmFjdGlvbnMuc3VibWl0Rm9ybSh1c2VyLCAnU2lnbiBJbicpO1xuXG4gICAgICAvLyBBc3NlcnQgLSBWZXJpZnkgQVBJIGNhbGwgd2FzIG1hZGUgd2l0aCBjb3JyZWN0IGNyZWRlbnRpYWxzXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJy9hcGkvYXV0aC9zaWduaW4nLFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICAgICAgcGFzc3dvcmQ6ICdTZWN1cmVQYXNzMTIzIScsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEFzc2VydCAtIFZlcmlmeSByZWRpcmVjdCB0byBkYXNoYm9hcmRcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja1B1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvZGFzaGJvYXJkJyk7XG4gICAgICAgIGV4cGVjdChtb2NrUmVmcmVzaCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBsb2dpbiB3aXRoIHJlZGlyZWN0IHBhcmFtZXRlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRlc3RVc2VyID0gY3JlYXRlVGVzdFVzZXIoKTtcbiAgICAgIFxuICAgICAgLy8gTW9jayB1c2VTZWFyY2hQYXJhbXMgdG8gcmV0dXJuIHJlZGlyZWN0IHBhcmFtZXRlclxuICAgICAgamVzdC5kb01vY2soJ25leHQvbmF2aWdhdGlvbicsICgpID0+ICh7XG4gICAgICAgIHVzZVJvdXRlcjogKCkgPT4gKHtcbiAgICAgICAgICBwdXNoOiBtb2NrUHVzaCxcbiAgICAgICAgICByZWZyZXNoOiBtb2NrUmVmcmVzaCxcbiAgICAgICAgfSksXG4gICAgICAgIHVzZVNlYXJjaFBhcmFtczogKCkgPT4gKHtcbiAgICAgICAgICBnZXQ6IGplc3QuZm4oKHBhcmFtKSA9PiBwYXJhbSA9PT0gJ3JlZGlyZWN0JyA/ICcvZGFzaGJvYXJkL3BsYW50cycgOiBudWxsKSxcbiAgICAgICAgfSksXG4gICAgICB9KSk7XG4gICAgICBcbiAgICAgIG1vY2tBcGlSZXNwb25zZSh7XG4gICAgICAgICdQT1NUIC9hcGkvYXV0aC9zaWduaW4nOiB7XG4gICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgaWQ6IHRlc3RVc2VyLmlkLFxuICAgICAgICAgICAgICBlbWFpbDogdGVzdFVzZXIuZW1haWwsXG4gICAgICAgICAgICAgIG5hbWU6IHRlc3RVc2VyLm5hbWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyB1c2VyIH0gPSByZW5kZXJXaXRoUHJvdmlkZXJzKDxTaWduSW5Gb3JtIC8+KTtcblxuICAgICAgLy8gQWN0IC0gQ29tcGxldGUgbG9naW5cbiAgICAgIGF3YWl0IHVzZXJJbnRlcmFjdGlvbnMuZmlsbEZvcm0oe1xuICAgICAgICAnRW1haWwgQWRkcmVzcyc6ICdqb2huQGV4YW1wbGUuY29tJyxcbiAgICAgICAgJ1Bhc3N3b3JkJzogJ1NlY3VyZVBhc3MxMjMhJyxcbiAgICAgIH0sIHVzZXIpO1xuXG4gICAgICBhd2FpdCB1c2VySW50ZXJhY3Rpb25zLnN1Ym1pdEZvcm0odXNlciwgJ1NpZ24gSW4nKTtcblxuICAgICAgLy8gQXNzZXJ0IC0gVmVyaWZ5IHJlZGlyZWN0IHRvIGludGVuZGVkIHBhZ2VcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja1B1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvZGFzaGJvYXJkL3BsYW50cycpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIGxvZ2luIGNyZWRlbnRpYWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja0FwaVJlc3BvbnNlKHtcbiAgICAgICAgJ1BPU1QgL2FwaS9hdXRoL3NpZ25pbic6IHtcbiAgICAgICAgICBzdGF0dXM6IDQwMSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyB1c2VyIH0gPSByZW5kZXJXaXRoUHJvdmlkZXJzKDxTaWduSW5Gb3JtIC8+KTtcblxuICAgICAgLy8gQWN0IC0gU3VibWl0IGludmFsaWQgY3JlZGVudGlhbHNcbiAgICAgIGF3YWl0IHVzZXJJbnRlcmFjdGlvbnMuZmlsbEZvcm0oe1xuICAgICAgICAnRW1haWwgQWRkcmVzcyc6ICd3cm9uZ0BleGFtcGxlLmNvbScsXG4gICAgICAgICdQYXNzd29yZCc6ICd3cm9uZ3Bhc3N3b3JkJyxcbiAgICAgIH0sIHVzZXIpO1xuXG4gICAgICBhd2FpdCB1c2VySW50ZXJhY3Rpb25zLnN1Ym1pdEZvcm0odXNlciwgJ1NpZ24gSW4nKTtcblxuICAgICAgLy8gQXNzZXJ0IC0gVmVyaWZ5IGVycm9yIG1lc3NhZ2UgaXMgZGlzcGxheWVkXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0ludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBc3NlcnQgLSBWZXJpZnkgbm8gcmVkaXJlY3Qgb2NjdXJyZWRcbiAgICAgIGV4cGVjdChtb2NrUHVzaCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxvZ2luIHZhbGlkYXRpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja0FwaVJlc3BvbnNlKHtcbiAgICAgICAgJ1BPU1QgL2FwaS9hdXRoL3NpZ25pbic6IHtcbiAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgICAgICAgIGVycm9yczoge1xuICAgICAgICAgICAgICBlbWFpbDogJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3MnLFxuICAgICAgICAgICAgICBwYXNzd29yZDogJ1Bhc3N3b3JkIGlzIHJlcXVpcmVkJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7IHVzZXIgfSA9IHJlbmRlcldpdGhQcm92aWRlcnMoPFNpZ25JbkZvcm0gLz4pO1xuXG4gICAgICAvLyBBY3QgLSBTdWJtaXQgZm9ybSB3aXRoIGludmFsaWQgZGF0YVxuICAgICAgYXdhaXQgdXNlckludGVyYWN0aW9ucy5maWxsRm9ybSh7XG4gICAgICAgICdFbWFpbCBBZGRyZXNzJzogJ2ludmFsaWQtZW1haWwnLFxuICAgICAgICAnUGFzc3dvcmQnOiAndmFsaWRwYXNzJyxcbiAgICAgIH0sIHVzZXIpO1xuXG4gICAgICBhd2FpdCB1c2VySW50ZXJhY3Rpb25zLnN1Ym1pdEZvcm0odXNlciwgJ1NpZ24gSW4nKTtcblxuICAgICAgLy8gQXNzZXJ0IC0gVmVyaWZ5IGZpZWxkLXNwZWNpZmljIGVycm9ycyBhcmUgZGlzcGxheWVkXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3MnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Bhc3N3b3JkIGlzIHJlcXVpcmVkJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0xvZ291dCBhbmQgU2Vzc2lvbiBDbGVhbnVwJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY29tcGxldGUgbG9nb3V0IHdvcmtmbG93IHdpdGggcHJvcGVyIHNlc3Npb24gY2xlYW51cCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tBcGlSZXNwb25zZSh7XG4gICAgICAgICdQT1NUIC9hcGkvYXV0aC9zaWdub3V0Jzoge1xuICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiAnU2lnbmVkIG91dCBzdWNjZXNzZnVsbHknLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyB1c2VyIH0gPSByZW5kZXJXaXRoUHJvdmlkZXJzKDxMb2dvdXRCdXR0b24gLz4pO1xuXG4gICAgICAvLyBBY3QgLSBDbGljayBsb2dvdXQgYnV0dG9uXG4gICAgICBjb25zdCBsb2dvdXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9zaWduIG91dC9pIH0pO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhsb2dvdXRCdXR0b24pO1xuXG4gICAgICAvLyBBc3NlcnQgLSBWZXJpZnkgQVBJIGNhbGwgd2FzIG1hZGVcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAnL2FwaS9hdXRoL3NpZ25vdXQnLFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEFzc2VydCAtIFZlcmlmeSByZWRpcmVjdCB0byBzaWduaW4gcGFnZVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrUHVzaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hdXRoL3NpZ25pbicpO1xuICAgICAgICBleHBlY3QobW9ja1JlZnJlc2gpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbG9nb3V0IHdoZW4gbm8gYWN0aXZlIHNlc3Npb24gZXhpc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja0FwaVJlc3BvbnNlKHtcbiAgICAgICAgJ1BPU1QgL2FwaS9hdXRoL3NpZ25vdXQnOiB7XG4gICAgICAgICAgc3RhdHVzOiA0MDEsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZXJyb3I6ICdObyBhY3RpdmUgc2Vzc2lvbicsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7IHVzZXIgfSA9IHJlbmRlcldpdGhQcm92aWRlcnMoPExvZ291dEJ1dHRvbiAvPik7XG5cbiAgICAgIC8vIEFjdCAtIENsaWNrIGxvZ291dCBidXR0b25cbiAgICAgIGNvbnN0IGxvZ291dEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NpZ24gb3V0L2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKGxvZ291dEJ1dHRvbik7XG5cbiAgICAgIC8vIEFzc2VydCAtIFZlcmlmeSByZWRpcmVjdCBzdGlsbCBvY2N1cnMgKGNsaWVudC1zaWRlIGxvZ291dClcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja1B1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXV0aC9zaWduaW4nKTtcbiAgICAgICAgZXhwZWN0KG1vY2tSZWZyZXNoKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxvZ291dCBzZXJ2ZXIgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrQXBpRXJyb3IoJy9hcGkvYXV0aC9zaWdub3V0JywgNTAwLCB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCAnUE9TVCcpO1xuXG4gICAgICBjb25zdCB7IHVzZXIgfSA9IHJlbmRlcldpdGhQcm92aWRlcnMoPExvZ291dEJ1dHRvbiAvPik7XG5cbiAgICAgIC8vIEFjdCAtIENsaWNrIGxvZ291dCBidXR0b25cbiAgICAgIGNvbnN0IGxvZ291dEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NpZ24gb3V0L2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKGxvZ291dEJ1dHRvbik7XG5cbiAgICAgIC8vIEFzc2VydCAtIFZlcmlmeSByZWRpcmVjdCBvY2N1cnMgZXZlbiBvbiBzZXJ2ZXIgZXJyb3IgKGZhaWwtc2FmZSBsb2dvdXQpXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tQdXNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2F1dGgvc2lnbmluJyk7XG4gICAgICAgIGV4cGVjdChtb2NrUmVmcmVzaCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgbG9hZGluZyBzdGF0ZSBkdXJpbmcgbG9nb3V0IHByb2Nlc3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBsZXQgcmVzb2x2ZUxvZ291dDtcbiAgICAgIGNvbnN0IGxvZ291dFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICByZXNvbHZlTG9nb3V0ID0gcmVzb2x2ZTtcbiAgICAgIH0pO1xuXG4gICAgICBnbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCgpID0+IGxvZ291dFByb21pc2UpO1xuXG4gICAgICBjb25zdCB7IHVzZXIgfSA9IHJlbmRlcldpdGhQcm92aWRlcnMoPExvZ291dEJ1dHRvbiAvPik7XG5cbiAgICAgIC8vIEFjdCAtIENsaWNrIGxvZ291dCBidXR0b25cbiAgICAgIGNvbnN0IGxvZ291dEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NpZ24gb3V0L2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKGxvZ291dEJ1dHRvbik7XG5cbiAgICAgIC8vIEFzc2VydCAtIFZlcmlmeSBsb2FkaW5nIHN0YXRlIGlzIHNob3duXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2lnbmluZyBvdXQuLi4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChsb2dvdXRCdXR0b24pLnRvSGF2ZUNsYXNzKCdidG4tLWxvYWRpbmcnKTtcblxuICAgICAgLy8gQ29tcGxldGUgdGhlIGxvZ291dFxuICAgICAgcmVzb2x2ZUxvZ291dCh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSB9KSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBc3NlcnQgLSBWZXJpZnkgbG9hZGluZyBzdGF0ZSBpcyBjbGVhcmVkXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnU2lnbmluZyBvdXQuLi4nKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7ICBkZXNjcmliZVxuKCdFbmQtdG8tRW5kIEF1dGhlbnRpY2F0aW9uIEZsb3cnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjb21wbGV0ZSBmdWxsIGF1dGhlbnRpY2F0aW9uIGN5Y2xlOiBzaWdudXAgLT4gbG9naW4gLT4gbG9nb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdFVzZXIgPSBjcmVhdGVUZXN0VXNlcih7XG4gICAgICAgIG5hbWU6ICdKYW5lIERvZScsXG4gICAgICAgIGVtYWlsOiAnamFuZUBleGFtcGxlLmNvbScsXG4gICAgICB9KTtcblxuICAgICAgLy8gU3RlcCAxOiBTaWdudXBcbiAgICAgIG1vY2tBcGlSZXNwb25zZSh7XG4gICAgICAgICdQT1NUIC9hcGkvYXV0aC9zaWdudXAnOiB7XG4gICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgaWQ6IHRlc3RVc2VyLmlkLFxuICAgICAgICAgICAgICBlbWFpbDogdGVzdFVzZXIuZW1haWwsXG4gICAgICAgICAgICAgIG5hbWU6IHRlc3RVc2VyLm5hbWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyB1c2VyOiB1c2VyRXZlbnQsIHJlcmVuZGVyIH0gPSByZW5kZXJXaXRoUHJvdmlkZXJzKDxTaWduVXBGb3JtIC8+KTtcblxuICAgICAgLy8gQ29tcGxldGUgc2lnbnVwXG4gICAgICBhd2FpdCB1c2VySW50ZXJhY3Rpb25zLmZpbGxGb3JtKHtcbiAgICAgICAgJ0Z1bGwgTmFtZSc6ICdKYW5lIERvZScsXG4gICAgICAgICdFbWFpbCBBZGRyZXNzJzogJ2phbmVAZXhhbXBsZS5jb20nLFxuICAgICAgICAnUGFzc3dvcmQnOiAnU2VjdXJlUGFzczEyMyEnLFxuICAgICAgfSwgdXNlckV2ZW50KTtcblxuICAgICAgYXdhaXQgdXNlckludGVyYWN0aW9ucy5zdWJtaXRGb3JtKHVzZXJFdmVudCwgJ0NyZWF0ZSBBY2NvdW50Jyk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja1B1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvZGFzaGJvYXJkJyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gUmVzZXQgbW9ja3MgZm9yIG5leHQgc3RlcFxuICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgICBtb2NrUHVzaC5tb2NrQ2xlYXIoKTtcblxuICAgICAgLy8gU3RlcCAyOiBMb2dpbiAoc2ltdWxhdGUgcmV0dXJuaW5nIHVzZXIpXG4gICAgICBtb2NrQXBpUmVzcG9uc2Uoe1xuICAgICAgICAnUE9TVCAvYXBpL2F1dGgvc2lnbmluJzoge1xuICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgIGlkOiB0ZXN0VXNlci5pZCxcbiAgICAgICAgICAgICAgZW1haWw6IHRlc3RVc2VyLmVtYWlsLFxuICAgICAgICAgICAgICBuYW1lOiB0ZXN0VXNlci5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJlcmVuZGVyKDxTaWduSW5Gb3JtIC8+KTtcblxuICAgICAgLy8gQ29tcGxldGUgbG9naW5cbiAgICAgIGF3YWl0IHVzZXJJbnRlcmFjdGlvbnMuZmlsbEZvcm0oe1xuICAgICAgICAnRW1haWwgQWRkcmVzcyc6ICdqYW5lQGV4YW1wbGUuY29tJyxcbiAgICAgICAgJ1Bhc3N3b3JkJzogJ1NlY3VyZVBhc3MxMjMhJyxcbiAgICAgIH0sIHVzZXJFdmVudCk7XG5cbiAgICAgIGF3YWl0IHVzZXJJbnRlcmFjdGlvbnMuc3VibWl0Rm9ybSh1c2VyRXZlbnQsICdTaWduIEluJyk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja1B1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvZGFzaGJvYXJkJyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gUmVzZXQgbW9ja3MgZm9yIGxvZ291dFxuICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgICBtb2NrUHVzaC5tb2NrQ2xlYXIoKTtcblxuICAgICAgLy8gU3RlcCAzOiBMb2dvdXRcbiAgICAgIG1vY2tBcGlSZXNwb25zZSh7XG4gICAgICAgICdQT1NUIC9hcGkvYXV0aC9zaWdub3V0Jzoge1xuICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiAnU2lnbmVkIG91dCBzdWNjZXNzZnVsbHknLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmVyZW5kZXIoPExvZ291dEJ1dHRvbiAvPik7XG5cbiAgICAgIC8vIENvbXBsZXRlIGxvZ291dFxuICAgICAgY29uc3QgbG9nb3V0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvc2lnbiBvdXQvaSB9KTtcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhsb2dvdXRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tQdXNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2F1dGgvc2lnbmluJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gZm9ybSBzdGF0ZSBkdXJpbmcgdmFsaWRhdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrQXBpUmVzcG9uc2Uoe1xuICAgICAgICAnUE9TVCAvYXBpL2F1dGgvc2lnbmluJzoge1xuICAgICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGVycm9yOiAnVmFsaWRhdGlvbiBmYWlsZWQnLFxuICAgICAgICAgICAgZXJyb3JzOiB7XG4gICAgICAgICAgICAgIHBhc3N3b3JkOiAnUGFzc3dvcmQgaXMgcmVxdWlyZWQnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgdXNlciB9ID0gcmVuZGVyV2l0aFByb3ZpZGVycyg8U2lnbkluRm9ybSAvPik7XG5cbiAgICAgIC8vIEFjdCAtIEZpbGwgZm9ybSBwYXJ0aWFsbHkgYW5kIHN1Ym1pdFxuICAgICAgYXdhaXQgdXNlckludGVyYWN0aW9ucy5maWxsRm9ybSh7XG4gICAgICAgICdFbWFpbCBBZGRyZXNzJzogJ2phbmVAZXhhbXBsZS5jb20nLFxuICAgICAgfSwgdXNlcik7XG5cbiAgICAgIGF3YWl0IHVzZXJJbnRlcmFjdGlvbnMuc3VibWl0Rm9ybSh1c2VyLCAnU2lnbiBJbicpO1xuXG4gICAgICAvLyBBc3NlcnQgLSBWZXJpZnkgZm9ybSBtYWludGFpbnMgZW1haWwgdmFsdWUgYWZ0ZXIgZXJyb3JcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCdqYW5lQGV4YW1wbGUuY29tJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQYXNzd29yZCBpcyByZXF1aXJlZCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwidXNlUm91dGVyIiwicHVzaCIsIm1vY2tQdXNoIiwicmVmcmVzaCIsIm1vY2tSZWZyZXNoIiwidXNlU2VhcmNoUGFyYW1zIiwiZ2V0IiwibW9ja0dldCIsImZuIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsInJlc2V0QXBpTW9ja3MiLCJtb2NrQ2xlYXIiLCJhZnRlckVhY2giLCJpdCIsInRlc3RVc2VyIiwiY3JlYXRlVGVzdFVzZXIiLCJuYW1lIiwiZW1haWwiLCJtb2NrQXBpUmVzcG9uc2UiLCJzdGF0dXMiLCJkYXRhIiwic3VjY2VzcyIsInVzZXIiLCJpZCIsInJlbmRlcldpdGhQcm92aWRlcnMiLCJTaWduVXBGb3JtIiwidXNlckludGVyYWN0aW9ucyIsImZpbGxGb3JtIiwic3VibWl0Rm9ybSIsIndhaXRGb3IiLCJleHBlY3QiLCJnbG9iYWwiLCJmZXRjaCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwib2JqZWN0Q29udGFpbmluZyIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5Iiwic3RyaW5nQ29udGFpbmluZyIsInNjcmVlbiIsImdldEJ5VGV4dCIsInRvQmVJblRoZURvY3VtZW50IiwiZXJyb3IiLCJlcnJvcnMiLCJwYXNzd29yZCIsIm5vdCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJtb2NrQXBpRXJyb3IiLCJTaWduSW5Gb3JtIiwiSlNPTiIsInN0cmluZ2lmeSIsImRvTW9jayIsInBhcmFtIiwibWVzc2FnZSIsIkxvZ291dEJ1dHRvbiIsImxvZ291dEJ1dHRvbiIsImdldEJ5Um9sZSIsImNsaWNrIiwicmVzb2x2ZUxvZ291dCIsImxvZ291dFByb21pc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRvSGF2ZUNsYXNzIiwib2siLCJqc29uIiwicXVlcnlCeVRleHQiLCJ1c2VyRXZlbnQiLCJyZXJlbmRlciIsImdldEJ5RGlzcGxheVZhbHVlIl0sIm1hcHBpbmdzIjoiQUFBQSx3Q0FBd0M7QUFDeEMscURBQXFEOztBQWVyRCx3REFBd0Q7QUFDeERBLEtBQUtDLElBQUksQ0FBQyxtQkFBbUIsSUFBTyxDQUFBO1FBQ2xDQyxXQUFXLElBQU8sQ0FBQTtnQkFDaEJDLE1BQU1DO2dCQUNOQyxTQUFTQztZQUNYLENBQUE7UUFDQUMsaUJBQWlCLElBQU8sQ0FBQTtnQkFDdEJDLEtBQUtDO1lBQ1AsQ0FBQTtJQUNGLENBQUE7Ozs7O3VCQXRCZ0M7MkJBQ2lDOzRCQUNKOzZCQUNYO21FQUMzQjttRUFDQTtxRUFDRTs7Ozs7O0FBRXpCLHNCQUFzQjtBQUN0QixNQUFNTCxXQUFXSixLQUFLVSxFQUFFO0FBQ3hCLE1BQU1KLGNBQWNOLEtBQUtVLEVBQUU7QUFDM0IsTUFBTUQsVUFBVVQsS0FBS1Us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