{"version":3,"sources":["/Users/stefanbekker/projects/fancy-planties/src/test-utils/mocks/service-mocks.js"],"sourcesContent":["// Service mocking utilities\n\n/**\n * Mock browser APIs for testing\n */\nexport const mockBrowserAPIs = () => {\n  // Mock localStorage\n  const localStorageMock = {\n    getItem: jest.fn(),\n    setItem: jest.fn(),\n    removeItem: jest.fn(),\n    clear: jest.fn(),\n    key: jest.fn(),\n    length: 0,\n  };\n  \n  Object.defineProperty(window, 'localStorage', {\n    value: localStorageMock,\n    writable: true,\n  });\n\n  // Mock sessionStorage\n  const sessionStorageMock = {\n    getItem: jest.fn(),\n    setItem: jest.fn(),\n    removeItem: jest.fn(),\n    clear: jest.fn(),\n    key: jest.fn(),\n    length: 0,\n  };\n  \n  Object.defineProperty(window, 'sessionStorage', {\n    value: sessionStorageMock,\n    writable: true,\n  });\n\n  // Mock navigator\n  Object.defineProperty(navigator, 'vibrate', {\n    value: jest.fn(),\n    configurable: true,\n    writable: true,\n  });\n\n  Object.defineProperty(navigator, 'serviceWorker', {\n    value: {\n      register: jest.fn().mockResolvedValue({}),\n      ready: Promise.resolve({}),\n      controller: null,\n    },\n    configurable: true,\n    writable: true,\n  });\n\n  // Mock geolocation\n  Object.defineProperty(navigator, 'geolocation', {\n    value: {\n      getCurrentPosition: jest.fn(),\n      watchPosition: jest.fn(),\n      clearWatch: jest.fn(),\n    },\n    configurable: true,\n    writable: true,\n  });\n\n  // Mock IntersectionObserver\n  global.IntersectionObserver = jest.fn().mockImplementation((callback) => ({\n    observe: jest.fn(),\n    unobserve: jest.fn(),\n    disconnect: jest.fn(),\n    root: null,\n    rootMargin: '',\n    thresholds: [],\n  }));\n\n  // Mock ResizeObserver\n  global.ResizeObserver = jest.fn().mockImplementation((callback) => ({\n    observe: jest.fn(),\n    unobserve: jest.fn(),\n    disconnect: jest.fn(),\n  }));\n\n  // Mock matchMedia\n  Object.defineProperty(window, 'matchMedia', {\n    value: jest.fn().mockImplementation((query) => ({\n      matches: false,\n      media: query,\n      onchange: null,\n      addListener: jest.fn(),\n      removeListener: jest.fn(),\n      addEventListener: jest.fn(),\n      removeEventListener: jest.fn(),\n      dispatchEvent: jest.fn(),\n    })),\n    writable: true,\n  });\n\n  return {\n    localStorage: localStorageMock,\n    sessionStorage: sessionStorageMock,\n  };\n};\n\n/**\n * Mock file system operations\n */\nexport const mockFileSystem = () => {\n  // Mock File API\n  global.File = jest.fn().mockImplementation((fileBits, fileName, options) => ({\n    name: fileName,\n    size: fileBits.reduce((acc, bit) => acc + bit.length, 0),\n    type: options?.type || 'text/plain',\n    lastModified: Date.now(),\n    arrayBuffer: jest.fn().mockResolvedValue(new ArrayBuffer(8)),\n    text: jest.fn().mockResolvedValue(fileBits.join('')),\n    stream: jest.fn(),\n    slice: jest.fn(),\n  }));\n\n  // Mock FileReader\n  global.FileReader = jest.fn().mockImplementation(() => ({\n    readAsText: jest.fn(),\n    readAsDataURL: jest.fn(),\n    readAsArrayBuffer: jest.fn(),\n    abort: jest.fn(),\n    result: null,\n    error: null,\n    onload: null,\n    onerror: null,\n    onabort: null,\n    onloadstart: null,\n    onloadend: null,\n    onprogress: null,\n    readyState: 0,\n    EMPTY: 0,\n    LOADING: 1,\n    DONE: 2,\n  }));\n\n  // Mock Blob\n  global.Blob = jest.fn().mockImplementation((blobParts, options) => ({\n    size: blobParts?.reduce((acc, part) => acc + part.length, 0) || 0,\n    type: options?.type || '',\n    arrayBuffer: jest.fn().mockResolvedValue(new ArrayBuffer(8)),\n    text: jest.fn().mockResolvedValue(blobParts?.join('') || ''),\n    stream: jest.fn(),\n    slice: jest.fn(),\n  }));\n\n  // Mock URL.createObjectURL\n  global.URL.createObjectURL = jest.fn().mockReturnValue('blob:mock-url');\n  global.URL.revokeObjectURL = jest.fn();\n};\n\n/**\n * Mock performance APIs\n */\nexport const mockPerformanceAPIs = () => {\n  // Mock performance.now\n  Object.defineProperty(performance, 'now', {\n    value: jest.fn().mockReturnValue(Date.now()),\n    writable: true,\n  });\n\n  // Mock performance.mark\n  Object.defineProperty(performance, 'mark', {\n    value: jest.fn(),\n    writable: true,\n  });\n\n  // Mock performance.measure\n  Object.defineProperty(performance, 'measure', {\n    value: jest.fn(),\n    writable: true,\n  });\n\n  // Mock performance.getEntriesByType\n  Object.defineProperty(performance, 'getEntriesByType', {\n    value: jest.fn().mockReturnValue([]),\n    writable: true,\n  });\n};\n\n/**\n * Mock network-related APIs\n */\nexport const mockNetworkAPIs = () => {\n  // Mock fetch (if not already mocked)\n  if (!global.fetch) {\n    global.fetch = jest.fn().mockResolvedValue({\n      ok: true,\n      status: 200,\n      json: jest.fn().mockResolvedValue({}),\n      text: jest.fn().mockResolvedValue(''),\n      blob: jest.fn().mockResolvedValue(new Blob()),\n    });\n  }\n\n  // Mock WebSocket\n  global.WebSocket = jest.fn().mockImplementation(() => ({\n    send: jest.fn(),\n    close: jest.fn(),\n    addEventListener: jest.fn(),\n    removeEventListener: jest.fn(),\n    readyState: 1, // OPEN\n    CONNECTING: 0,\n    OPEN: 1,\n    CLOSING: 2,\n    CLOSED: 3,\n  }));\n\n  // Mock EventSource\n  global.EventSource = jest.fn().mockImplementation(() => ({\n    addEventListener: jest.fn(),\n    removeEventListener: jest.fn(),\n    close: jest.fn(),\n    readyState: 1, // OPEN\n    CONNECTING: 0,\n    OPEN: 1,\n    CLOSED: 2,\n  }));\n};\n\n/**\n * Mock image-related APIs\n */\nexport const mockImageAPIs = () => {\n  // Mock Image constructor\n  global.Image = jest.fn().mockImplementation(() => ({\n    addEventListener: jest.fn(),\n    removeEventListener: jest.fn(),\n    src: '',\n    alt: '',\n    width: 0,\n    height: 0,\n    complete: true,\n    naturalWidth: 100,\n    naturalHeight: 100,\n    onload: null,\n    onerror: null,\n  }));\n\n  // Mock canvas APIs\n  HTMLCanvasElement.prototype.getContext = jest.fn().mockReturnValue({\n    fillRect: jest.fn(),\n    clearRect: jest.fn(),\n    getImageData: jest.fn().mockReturnValue({\n      data: new Uint8ClampedArray(4),\n      width: 1,\n      height: 1,\n    }),\n    putImageData: jest.fn(),\n    createImageData: jest.fn().mockReturnValue({\n      data: new Uint8ClampedArray(4),\n      width: 1,\n      height: 1,\n    }),\n    setTransform: jest.fn(),\n    drawImage: jest.fn(),\n    save: jest.fn(),\n    restore: jest.fn(),\n    beginPath: jest.fn(),\n    moveTo: jest.fn(),\n    lineTo: jest.fn(),\n    closePath: jest.fn(),\n    stroke: jest.fn(),\n    fill: jest.fn(),\n  });\n\n  HTMLCanvasElement.prototype.toDataURL = jest.fn().mockReturnValue('data:image/png;base64,mock');\n  HTMLCanvasElement.prototype.toBlob = jest.fn().mockImplementation((callback) => {\n    callback(new Blob(['mock'], { type: 'image/png' }));\n  });\n};\n\n/**\n * Mock crypto APIs\n */\nexport const mockCryptoAPIs = () => {\n  // Mock crypto.randomUUID\n  Object.defineProperty(crypto, 'randomUUID', {\n    value: jest.fn().mockReturnValue('mock-uuid-1234-5678-9012'),\n    writable: true,\n  });\n\n  // Mock crypto.getRandomValues\n  Object.defineProperty(crypto, 'getRandomValues', {\n    value: jest.fn().mockImplementation((array) => {\n      for (let i = 0; i < array.length; i++) {\n        array[i] = Math.floor(Math.random() * 256);\n      }\n      return array;\n    }),\n    writable: true,\n  });\n};\n\n/**\n * Mock date and time APIs\n */\nexport const mockDateTimeAPIs = () => {\n  // Mock Date.now to return consistent values\n  const mockNow = jest.spyOn(Date, 'now').mockReturnValue(1640995200000); // 2022-01-01 00:00:00 UTC\n  \n  // Mock setTimeout and setInterval for testing\n  jest.useFakeTimers();\n  \n  return {\n    mockNow,\n    advanceTime: (ms) => jest.advanceTimersByTime(ms),\n    runAllTimers: () => jest.runAllTimers(),\n    clearAllTimers: () => jest.clearAllTimers(),\n    restoreTimers: () => jest.useRealTimers(),\n  };\n};\n\n/**\n * Apply all common service mocks\n */\nexport const applyAllServiceMocks = () => {\n  mockBrowserAPIs();\n  mockFileSystem();\n  mockPerformanceAPIs();\n  mockNetworkAPIs();\n  mockImageAPIs();\n  mockCryptoAPIs();\n  \n  return mockDateTimeAPIs();\n};\n\n/**\n * Reset all service mocks\n */\nexport const resetServiceMocks = () => {\n  jest.restoreAllMocks();\n  jest.clearAllMocks();\n  jest.useRealTimers();\n  \n  // Clear any global mocks\n  delete global.fetch;\n  delete global.WebSocket;\n  delete global.EventSource;\n  delete global.IntersectionObserver;\n  delete global.ResizeObserver;\n};"],"names":["applyAllServiceMocks","mockBrowserAPIs","mockCryptoAPIs","mockDateTimeAPIs","mockFileSystem","mockImageAPIs","mockNetworkAPIs","mockPerformanceAPIs","resetServiceMocks","localStorageMock","getItem","jest","fn","setItem","removeItem","clear","key","length","Object","defineProperty","window","value","writable","sessionStorageMock","navigator","configurable","register","mockResolvedValue","ready","Promise","resolve","controller","getCurrentPosition","watchPosition","clearWatch","global","IntersectionObserver","mockImplementation","callback","observe","unobserve","disconnect","root","rootMargin","thresholds","ResizeObserver","query","matches","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent","localStorage","sessionStorage","File","fileBits","fileName","options","name","size","reduce","acc","bit","type","lastModified","Date","now","arrayBuffer","ArrayBuffer","text","join","stream","slice","FileReader","readAsText","readAsDataURL","readAsArrayBuffer","abort","result","error","onload","onerror","onabort","onloadstart","onloadend","onprogress","readyState","EMPTY","LOADING","DONE","Blob","blobParts","part","URL","createObjectURL","mockReturnValue","revokeObjectURL","performance","fetch","ok","status","json","blob","WebSocket","send","close","CONNECTING","OPEN","CLOSING","CLOSED","EventSource","Image","src","alt","width","height","complete","naturalWidth","naturalHeight","HTMLCanvasElement","prototype","getContext","fillRect","clearRect","getImageData","data","Uint8ClampedArray","putImageData","createImageData","setTransform","drawImage","save","restore","beginPath","moveTo","lineTo","closePath","stroke","fill","toDataURL","toBlob","crypto","array","i","Math","floor","random","mockNow","spyOn","useFakeTimers","advanceTime","ms","advanceTimersByTime","runAllTimers","clearAllTimers","restoreTimers","useRealTimers","restoreAllMocks","clearAllMocks"],"mappings":"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"}