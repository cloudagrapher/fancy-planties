{"version":3,"sources":["/Users/stefanbekker/projects/fancy-planties/src/test-utils/setup/browser-mocks.js"],"sourcesContent":["// Essential browser API mocks for Jest environment\n\n// Mock IntersectionObserver\nglobal.IntersectionObserver = class IntersectionObserver {\n  constructor() {}\n  observe() {}\n  unobserve() {}\n  disconnect() {}\n};\n\n// Mock ResizeObserver\nglobal.ResizeObserver = class ResizeObserver {\n  constructor() {}\n  observe() {}\n  unobserve() {}\n  disconnect() {}\n};\n\n// Mock matchMedia\nif (typeof window !== 'undefined') {\n  Object.defineProperty(window, 'matchMedia', {\n    writable: true,\n    value: jest.fn().mockImplementation(query => ({\n      matches: false,\n      media: query,\n      onchange: null,\n      addListener: jest.fn(),\n      removeListener: jest.fn(),\n      addEventListener: jest.fn(),\n      removeEventListener: jest.fn(),\n      dispatchEvent: jest.fn(),\n    })),\n  });\n}\n\n// Mock navigator APIs\nconst mockNavigator = {\n  vibrate: jest.fn(() => true),\n  serviceWorker: {\n    register: jest.fn(() => Promise.resolve({\n      unregister: jest.fn(() => Promise.resolve(true)),\n      update: jest.fn(() => Promise.resolve()),\n    })),\n    ready: Promise.resolve({\n      unregister: jest.fn(() => Promise.resolve(true)),\n      update: jest.fn(() => Promise.resolve()),\n    }),\n    controller: null,\n  },\n  onLine: true,\n  userAgent: 'Mozilla/5.0 (Test Environment)',\n  platform: 'MacIntel',\n  language: 'en-US',\n  languages: ['en-US', 'en'],\n  cookieEnabled: true,\n  geolocation: {\n    getCurrentPosition: jest.fn(),\n    watchPosition: jest.fn(() => 1),\n    clearWatch: jest.fn(),\n  },\n  permissions: {\n    query: jest.fn(() => Promise.resolve({ state: 'granted' })),\n  },\n  clipboard: {\n    writeText: jest.fn(() => Promise.resolve()),\n    readText: jest.fn(() => Promise.resolve('')),\n  },\n};\n\n// Apply navigator mock\nif (typeof global !== 'undefined') {\n  Object.defineProperty(global, 'navigator', {\n    value: mockNavigator,\n    writable: true,\n    configurable: true,\n  });\n}\n\nif (typeof window !== 'undefined') {\n  Object.defineProperty(window, 'navigator', {\n    value: mockNavigator,\n    writable: true,\n    configurable: true,\n  });\n}\n\n// Mock performance\nlet performanceCounter = 0;\nconst mockPerformance = {\n  now: jest.fn(() => {\n    performanceCounter += Math.random() * 10 + 1; // Add 1-11ms each call\n    return performanceCounter;\n  }),\n  mark: jest.fn(),\n  measure: jest.fn(),\n  getEntriesByType: jest.fn(() => []),\n  getEntriesByName: jest.fn(() => []),\n};\n\nif (typeof window !== 'undefined') {\n  Object.defineProperty(window, 'performance', {\n    writable: true,\n    value: mockPerformance,\n  });\n}\n\nif (typeof global !== 'undefined') {\n  Object.defineProperty(global, 'performance', {\n    writable: true,\n    value: mockPerformance,\n    configurable: true,\n  });\n}\n\n// Mock fetch globally (will be overridden by individual tests)\nif (!global.fetch) {\n  global.fetch = jest.fn(() =>\n    Promise.resolve({\n      ok: true,\n      status: 200,\n      statusText: 'OK',\n      headers: new Map([['content-type', 'application/json']]),\n      json: () => Promise.resolve({ success: true, data: {} }),\n      text: () => Promise.resolve('{}'),\n      blob: () => Promise.resolve(new Blob()),\n      arrayBuffer: () => Promise.resolve(new ArrayBuffer(0)),\n      clone: function() { return this; },\n      body: null,\n      bodyUsed: false,\n    })\n  );\n}\n\n// Mock localStorage and sessionStorage\nconst createStorageMock = () => {\n  const store = new Map();\n  \n  return {\n    getItem: jest.fn((key) => store.get(key) || null),\n    setItem: jest.fn((key, value) => store.set(key, String(value))),\n    removeItem: jest.fn((key) => store.delete(key)),\n    clear: jest.fn(() => store.clear()),\n    key: jest.fn((index) => {\n      const keys = Array.from(store.keys());\n      return keys[index] || null;\n    }),\n    get length() {\n      return store.size;\n    },\n  };\n};\n\nif (typeof window !== 'undefined') {\n  Object.defineProperty(window, 'localStorage', {\n    value: createStorageMock(),\n    writable: true,\n  });\n\n  Object.defineProperty(window, 'sessionStorage', {\n    value: createStorageMock(),\n    writable: true,\n  });\n}"],"names":["global","IntersectionObserver","observe","unobserve","disconnect","ResizeObserver","window","Object","defineProperty","writable","value","jest","fn","mockImplementation","query","matches","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent","mockNavigator","vibrate","serviceWorker","register","Promise","resolve","unregister","update","ready","controller","onLine","userAgent","platform","language","languages","cookieEnabled","geolocation","getCurrentPosition","watchPosition","clearWatch","permissions","state","clipboard","writeText","readText","configurable","performanceCounter","mockPerformance","now","Math","random","mark","measure","getEntriesByType","getEntriesByName","fetch","ok","status","statusText","headers","Map","json","success","data","text","blob","Blob","arrayBuffer","ArrayBuffer","clone","body","bodyUsed","createStorageMock","store","getItem","key","get","setItem","set","String","removeItem","delete","clear","index","keys","Array","from","length","size"],"mappings":"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"}