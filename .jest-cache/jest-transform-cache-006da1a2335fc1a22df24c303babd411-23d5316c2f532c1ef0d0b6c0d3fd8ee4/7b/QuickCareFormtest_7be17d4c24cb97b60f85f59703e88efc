e016e6275eb5870db5b1a3a1c4917d7a
/**
 * @jest-environment jsdom
 */ "use strict";
jest.mock('@/hooks/useOffline', ()=>({
        useOffline: mockUseOffline
    }));
jest.mock('@/lib/utils/service-worker', ()=>({
        useServiceWorker: ()=>({
                registerBackgroundSync: mockRegisterBackgroundSync
            })
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _userevent = /*#__PURE__*/ _interop_require_default(require("@testing-library/user-event"));
const _renderhelpers = require("../../../test-utils/helpers/render-helpers.js");
const _QuickCareForm = /*#__PURE__*/ _interop_require_default(require("../../../components/care/QuickCareForm"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock the offline hook
const mockAddPendingCareEntry = jest.fn();
const mockRegisterBackgroundSync = jest.fn();
const mockUseOffline = jest.fn(()=>({
        isOnline: true,
        addPendingCareEntry: mockAddPendingCareEntry
    }));
describe('QuickCareForm', ()=>{
    const defaultProps = {
        plantInstanceId: 1,
        onSuccess: jest.fn(),
        onCancel: jest.fn(),
        defaultCareType: 'fertilizer'
    };
    beforeEach(()=>{
        jest.clearAllMocks();
        // Mock successful API response by default
        (0, _renderhelpers.mockApiResponses)({
            '/api/care/log': {
                success: true,
                data: {
                    id: 1
                }
            }
        });
        // Reset offline hook to online state
        mockUseOffline.mockReturnValue({
            isOnline: true,
            addPendingCareEntry: mockAddPendingCareEntry
        });
    });
    describe('Form Rendering', ()=>{
        it('renders all care type options', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByText('🌱')).toBeInTheDocument(); // Fertilizer
            expect(_react1.screen.getByText('💧')).toBeInTheDocument(); // Water
            expect(_react1.screen.getByText('🪴')).toBeInTheDocument(); // Repot
            expect(_react1.screen.getByText('✂️')).toBeInTheDocument(); // Prune
            expect(_react1.screen.getByText('🔍')).toBeInTheDocument(); // Inspect
            expect(_react1.screen.getByText('📝')).toBeInTheDocument(); // Other
            expect(_react1.screen.getByText('Fertilizer')).toBeInTheDocument();
            expect(_react1.screen.getByText('Water')).toBeInTheDocument();
            expect(_react1.screen.getByText('Repot')).toBeInTheDocument();
            expect(_react1.screen.getByText('Prune')).toBeInTheDocument();
            expect(_react1.screen.getByText('Inspect')).toBeInTheDocument();
            expect(_react1.screen.getByText('Other')).toBeInTheDocument();
        });
        it('renders care date field with today as default', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const dateInput = _react1.screen.getByLabelText(/care date/i);
            const today = new Date().toISOString().split('T')[0];
            expect(dateInput).toBeInTheDocument();
            expect(dateInput).toHaveValue(today);
            expect(dateInput).toHaveAttribute('max', today); // Cannot be in future
        });
        it('renders notes field', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const notesField = _react1.screen.getByLabelText(/notes/i);
            expect(notesField).toBeInTheDocument();
            expect(notesField).toHaveAttribute('placeholder', 'Any additional observations or notes...');
        });
        it('renders submit button', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByRole('button', {
                name: /log care/i
            })).toBeInTheDocument();
        });
        it('selects default care type', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps,
                defaultCareType: "water"
            }));
            const waterButton = _react1.screen.getByRole('button', {
                name: /water/i
            });
            expect(waterButton).toHaveClass('btn--primary');
        });
    });
    describe('Care Type Selection', ()=>{
        it('allows selecting different care types', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const waterButton = _react1.screen.getByRole('button', {
                name: /water/i
            });
            await user.click(waterButton);
            expect(waterButton).toHaveClass('btn--primary');
        });
        it('shows conditional fields for fertilizer type', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps,
                defaultCareType: "fertilizer"
            }));
            expect(_react1.screen.getByLabelText(/fertilizer type/i)).toBeInTheDocument();
            expect(_react1.screen.getByPlaceholderText(/liquid fertilizer, slow-release pellets/i)).toBeInTheDocument();
        });
        it('shows conditional fields for repotting', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const repotButton = _react1.screen.getByRole('button', {
                name: /repot/i
            });
            await user.click(repotButton);
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByLabelText(/pot size/i)).toBeInTheDocument();
                expect(_react1.screen.getByLabelText(/soil type/i)).toBeInTheDocument();
            });
        });
        it('hides conditional fields when switching care types', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps,
                defaultCareType: "fertilizer"
            }));
            // Initially shows fertilizer field
            expect(_react1.screen.getByLabelText(/fertilizer type/i)).toBeInTheDocument();
            // Switch to water
            const waterButton = _react1.screen.getByRole('button', {
                name: /water/i
            });
            await user.click(waterButton);
            // Fertilizer field should be hidden
            expect(_react1.screen.queryByLabelText(/fertilizer type/i)).not.toBeInTheDocument();
        });
        it('shows care type description', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps,
                defaultCareType: "fertilizer"
            }));
            const description = _react1.screen.getByText(/🌱 fertilizer:/i);
            expect(description).toBeInTheDocument();
        });
    });
    describe('Date Validation', ()=>{
        it('prevents selecting future dates', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const dateInput = _react1.screen.getByLabelText(/care date/i);
            const today = new Date().toISOString().split('T')[0];
            expect(dateInput).toHaveAttribute('max', today);
        });
        it('allows selecting past dates', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const dateInput = _react1.screen.getByLabelText(/care date/i);
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayString = yesterday.toISOString().split('T')[0];
            await user.clear(dateInput);
            await user.type(dateInput, yesterdayString);
            expect(dateInput).toHaveValue(yesterdayString);
        });
    });
    describe('Form Submission', ()=>{
        it('submits form with correct data', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            // Fill form
            await user.type(_react1.screen.getByLabelText(/notes/i), 'Plant looks healthy');
            // Submit
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/care/log', expect.objectContaining({
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: expect.stringContaining('fertilizer')
                }));
            });
            expect(defaultProps.onSuccess).toHaveBeenCalled();
        });
        it('includes conditional field data in submission', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps,
                defaultCareType: "fertilizer"
            }));
            await user.type(_react1.screen.getByLabelText(/fertilizer type/i), 'Liquid fertilizer');
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                const fetchCall = global.fetch.mock.calls[0];
                const requestBody = JSON.parse(fetchCall[1].body);
                expect(requestBody.fertilizerType).toBe('Liquid fertilizer');
            });
        });
        it('includes repot-specific data in submission', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            // Select repot care type
            await user.click(_react1.screen.getByRole('button', {
                name: /repot/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByLabelText(/pot size/i)).toBeInTheDocument();
            });
            await user.type(_react1.screen.getByLabelText(/pot size/i), '6 inch');
            await user.type(_react1.screen.getByLabelText(/soil type/i), 'Potting mix');
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                const fetchCall = global.fetch.mock.calls[0];
                const requestBody = JSON.parse(fetchCall[1].body);
                expect(requestBody.potSize).toBe('6 inch');
                expect(requestBody.soilType).toBe('Potting mix');
            });
        });
        it('resets form after successful submission', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            // Fill form
            await user.type(_react1.screen.getByLabelText(/notes/i), 'Test notes');
            // Submit
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(defaultProps.onSuccess).toHaveBeenCalled();
            });
            // Form should be reset
            expect(_react1.screen.getByLabelText(/notes/i)).toHaveValue('');
        });
        it('shows loading state during submission', async ()=>{
            const user = _userevent.default.setup();
            // Mock delayed response
            global.fetch = jest.fn(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: ()=>Promise.resolve({
                                    success: true
                                })
                        }), 100)));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const submitButton = _react1.screen.getByRole('button', {
                name: /log care/i
            });
            await user.click(submitButton);
            // Check loading state
            expect(submitButton).toBeDisabled();
            expect(_react1.screen.getByText(/logging/i)).toBeInTheDocument();
        });
    });
    describe('Offline Mode', ()=>{
        beforeEach(()=>{
            // Mock offline state
            mockUseOffline.mockReturnValue({
                isOnline: false,
                addPendingCareEntry: mockAddPendingCareEntry
            });
        });
        it('shows offline mode indicator', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByText(/offline mode/i)).toBeInTheDocument();
            expect(_react1.screen.getByText(/care will be logged when you're back online/i)).toBeInTheDocument();
        });
        it('changes submit button text in offline mode', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByRole('button', {
                name: /queue for sync/i
            })).toBeInTheDocument();
        });
        it('queues care entry when offline', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            await user.type(_react1.screen.getByLabelText(/notes/i), 'Offline care entry');
            await user.click(_react1.screen.getByRole('button', {
                name: /queue for sync/i
            }));
            expect(mockAddPendingCareEntry).toHaveBeenCalledWith({
                plantInstanceId: 1,
                careType: 'fertilizer',
                notes: 'Offline care entry'
            });
            expect(mockRegisterBackgroundSync).toHaveBeenCalled();
            expect(defaultProps.onSuccess).toHaveBeenCalled();
        });
        it('does not make API call when offline', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            await user.click(_react1.screen.getByRole('button', {
                name: /queue for sync/i
            }));
            expect(global.fetch).not.toHaveBeenCalled();
        });
    });
    describe('Error Handling', ()=>{
        it('displays API error messages', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.mockApiError)('/api/care/log', 400, {
                error: 'Invalid care data'
            });
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText('Invalid care data')).toBeInTheDocument();
            });
            expect(defaultProps.onSuccess).not.toHaveBeenCalled();
        });
        it('handles network errors gracefully', async ()=>{
            const user = _userevent.default.setup();
            // Mock network error
            global.fetch = jest.fn(()=>Promise.reject(new Error('Network error')));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText(/failed to log care/i)).toBeInTheDocument();
            });
        });
        it('clears errors on retry', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.mockApiError)('/api/care/log', 400, {
                error: 'Invalid care data'
            });
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            // First submission with error
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText('Invalid care data')).toBeInTheDocument();
            });
            // Mock successful response for retry
            (0, _renderhelpers.mockApiResponses)({
                '/api/care/log': {
                    success: true
                }
            });
            // Retry submission
            await user.click(_react1.screen.getByRole('button', {
                name: /log care/i
            }));
            // Error should be cleared
            expect(_react1.screen.queryByText('Invalid care data')).not.toBeInTheDocument();
        });
    });
    describe('Plant Selection (when no plantInstanceId provided)', ()=>{
        it('shows plant selection dropdown when plantInstanceId not provided', ()=>{
            const propsWithoutPlant = {
                ...defaultProps
            };
            delete propsWithoutPlant.plantInstanceId;
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...propsWithoutPlant
            }));
            expect(_react1.screen.getByLabelText(/plant/i)).toBeInTheDocument();
            expect(_react1.screen.getByText(/select a plant/i)).toBeInTheDocument();
        });
        it('disables submit button when no plant selected', ()=>{
            const propsWithoutPlant = {
                ...defaultProps
            };
            delete propsWithoutPlant.plantInstanceId;
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...propsWithoutPlant
            }));
            const submitButton = _react1.screen.getByRole('button', {
                name: /log care/i
            });
            expect(submitButton).toBeDisabled();
        });
        it('shows implementation note for plant selection', ()=>{
            const propsWithoutPlant = {
                ...defaultProps
            };
            delete propsWithoutPlant.plantInstanceId;
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...propsWithoutPlant
            }));
            expect(_react1.screen.getByText(/plant selection will be implemented when plant instances are available/i)).toBeInTheDocument();
        });
    });
    describe('Cancel Functionality', ()=>{
        it('shows cancel button when onCancel provided', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByRole('button', {
                name: /cancel/i
            })).toBeInTheDocument();
        });
        it('calls onCancel when cancel button clicked', async ()=>{
            const user = _userevent.default.setup();
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            await user.click(_react1.screen.getByRole('button', {
                name: /cancel/i
            }));
            expect(defaultProps.onCancel).toHaveBeenCalled();
        });
        it('does not show cancel button when onCancel not provided', ()=>{
            const propsWithoutCancel = {
                ...defaultProps
            };
            delete propsWithoutCancel.onCancel;
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...propsWithoutCancel
            }));
            expect(_react1.screen.queryByRole('button', {
                name: /cancel/i
            })).not.toBeInTheDocument();
        });
    });
    describe('Accessibility', ()=>{
        it('has proper form structure', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByRole('form', {
                hidden: true
            })).toBeInTheDocument();
        });
        it('has proper labels for all inputs', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            expect(_react1.screen.getByLabelText(/care type/i)).toBeInTheDocument();
            expect(_react1.screen.getByLabelText(/care date/i)).toBeInTheDocument();
            expect(_react1.screen.getByLabelText(/notes/i)).toBeInTheDocument();
        });
        it('has required attribute on date field', ()=>{
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const dateInput = _react1.screen.getByLabelText(/care date/i);
            expect(dateInput).toHaveAttribute('required');
        });
        it('disables form elements during submission', async ()=>{
            const user = _userevent.default.setup();
            // Mock delayed response
            global.fetch = jest.fn(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: ()=>Promise.resolve({
                                    success: true
                                })
                        }), 100)));
            (0, _renderhelpers.renderWithProviders)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_QuickCareForm.default, {
                ...defaultProps
            }));
            const submitButton = _react1.screen.getByRole('button', {
                name: /log care/i
            });
            await user.click(submitButton);
            // All care type buttons should be disabled
            const careTypeButtons = _react1.screen.getAllByRole('button').filter((btn)=>btn.textContent?.includes('Fertilizer') || btn.textContent?.includes('Water') || btn.textContent?.includes('Repot'));
            careTypeButtons.forEach((button)=>{
                expect(button).toBeDisabled();
            });
            // Date input should be disabled
            expect(_react1.screen.getByLabelText(/care date/i)).toBeDisabled();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdGVmYW5iZWtrZXIvcHJvamVjdHMvZmFuY3ktcGxhbnRpZXMvc3JjL19fdGVzdHNfXy9jb21wb25lbnRzL2Zvcm1zL1F1aWNrQ2FyZUZvcm0udGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBqZXN0LWVudmlyb25tZW50IGpzZG9tXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHNjcmVlbiwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHVzZXJFdmVudCBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3VzZXItZXZlbnQnO1xuaW1wb3J0IHsgcmVuZGVyV2l0aFByb3ZpZGVycywgbW9ja0FwaVJlc3BvbnNlcywgbW9ja0FwaUVycm9yIH0gZnJvbSAnQC90ZXN0LXV0aWxzL2hlbHBlcnMvcmVuZGVyLWhlbHBlcnMnO1xuaW1wb3J0IFF1aWNrQ2FyZUZvcm0gZnJvbSAnQC9jb21wb25lbnRzL2NhcmUvUXVpY2tDYXJlRm9ybSc7XG5cbi8vIE1vY2sgdGhlIG9mZmxpbmUgaG9va1xuY29uc3QgbW9ja0FkZFBlbmRpbmdDYXJlRW50cnkgPSBqZXN0LmZuKCk7XG5jb25zdCBtb2NrUmVnaXN0ZXJCYWNrZ3JvdW5kU3luYyA9IGplc3QuZm4oKTtcbmNvbnN0IG1vY2tVc2VPZmZsaW5lID0gamVzdC5mbigoKSA9PiAoe1xuICBpc09ubGluZTogdHJ1ZSxcbiAgYWRkUGVuZGluZ0NhcmVFbnRyeTogbW9ja0FkZFBlbmRpbmdDYXJlRW50cnksXG59KSk7XG5cbmplc3QubW9jaygnQC9ob29rcy91c2VPZmZsaW5lJywgKCkgPT4gKHtcbiAgdXNlT2ZmbGluZTogbW9ja1VzZU9mZmxpbmUsXG59KSk7XG5cbmplc3QubW9jaygnQC9saWIvdXRpbHMvc2VydmljZS13b3JrZXInLCAoKSA9PiAoe1xuICB1c2VTZXJ2aWNlV29ya2VyOiAoKSA9PiAoe1xuICAgIHJlZ2lzdGVyQmFja2dyb3VuZFN5bmM6IG1vY2tSZWdpc3RlckJhY2tncm91bmRTeW5jLFxuICB9KSxcbn0pKTtcblxuZGVzY3JpYmUoJ1F1aWNrQ2FyZUZvcm0nLCAoKSA9PiB7XG4gIGNvbnN0IGRlZmF1bHRQcm9wcyA9IHtcbiAgICBwbGFudEluc3RhbmNlSWQ6IDEsXG4gICAgb25TdWNjZXNzOiBqZXN0LmZuKCksXG4gICAgb25DYW5jZWw6IGplc3QuZm4oKSxcbiAgICBkZWZhdWx0Q2FyZVR5cGU6ICdmZXJ0aWxpemVyJyxcbiAgfTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBcbiAgICAvLyBNb2NrIHN1Y2Nlc3NmdWwgQVBJIHJlc3BvbnNlIGJ5IGRlZmF1bHRcbiAgICBtb2NrQXBpUmVzcG9uc2VzKHtcbiAgICAgICcvYXBpL2NhcmUvbG9nJzogeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB7IGlkOiAxIH0gfSxcbiAgICB9KTtcblxuICAgIC8vIFJlc2V0IG9mZmxpbmUgaG9vayB0byBvbmxpbmUgc3RhdGVcbiAgICBtb2NrVXNlT2ZmbGluZS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgaXNPbmxpbmU6IHRydWUsXG4gICAgICBhZGRQZW5kaW5nQ2FyZUVudHJ5OiBtb2NrQWRkUGVuZGluZ0NhcmVFbnRyeSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Zvcm0gUmVuZGVyaW5nJywgKCkgPT4ge1xuICAgIGl0KCdyZW5kZXJzIGFsbCBjYXJlIHR5cGUgb3B0aW9ucycsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn8J+MsScpKS50b0JlSW5UaGVEb2N1bWVudCgpOyAvLyBGZXJ0aWxpemVyXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn8J+SpycpKS50b0JlSW5UaGVEb2N1bWVudCgpOyAvLyBXYXRlclxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ/CfqrQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTsgLy8gUmVwb3RcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfinILvuI8nKSkudG9CZUluVGhlRG9jdW1lbnQoKTsgLy8gUHJ1bmVcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfwn5SNJykpLnRvQmVJblRoZURvY3VtZW50KCk7IC8vIEluc3BlY3RcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfwn5OdJykpLnRvQmVJblRoZURvY3VtZW50KCk7IC8vIE90aGVyXG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdGZXJ0aWxpemVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnV2F0ZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdSZXBvdCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1BydW5lJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSW5zcGVjdCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ090aGVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgncmVuZGVycyBjYXJlIGRhdGUgZmllbGQgd2l0aCB0b2RheSBhcyBkZWZhdWx0JywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGNvbnN0IGRhdGVJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvY2FyZSBkYXRlL2kpO1xuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGRhdGVJbnB1dCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChkYXRlSW5wdXQpLnRvSGF2ZVZhbHVlKHRvZGF5KTtcbiAgICAgIGV4cGVjdChkYXRlSW5wdXQpLnRvSGF2ZUF0dHJpYnV0ZSgnbWF4JywgdG9kYXkpOyAvLyBDYW5ub3QgYmUgaW4gZnV0dXJlXG4gICAgfSk7XG5cbiAgICBpdCgncmVuZGVycyBub3RlcyBmaWVsZCcsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBjb25zdCBub3Rlc0ZpZWxkID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9ub3Rlcy9pKTtcbiAgICAgIGV4cGVjdChub3Rlc0ZpZWxkKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KG5vdGVzRmllbGQpLnRvSGF2ZUF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAnQW55IGFkZGl0aW9uYWwgb2JzZXJ2YXRpb25zIG9yIG5vdGVzLi4uJyk7XG4gICAgfSk7XG5cbiAgICBpdCgncmVuZGVycyBzdWJtaXQgYnV0dG9uJywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9sb2cgY2FyZS9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NlbGVjdHMgZGVmYXVsdCBjYXJlIHR5cGUnLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IGRlZmF1bHRDYXJlVHlwZT1cIndhdGVyXCIgLz4pO1xuXG4gICAgICBjb25zdCB3YXRlckJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3dhdGVyL2kgfSk7XG4gICAgICBleHBlY3Qod2F0ZXJCdXR0b24pLnRvSGF2ZUNsYXNzKCdidG4tLXByaW1hcnknKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NhcmUgVHlwZSBTZWxlY3Rpb24nLCAoKSA9PiB7XG4gICAgaXQoJ2FsbG93cyBzZWxlY3RpbmcgZGlmZmVyZW50IGNhcmUgdHlwZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgY29uc3Qgd2F0ZXJCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC93YXRlci9pIH0pO1xuICAgICAgYXdhaXQgdXNlci5jbGljayh3YXRlckJ1dHRvbik7XG5cbiAgICAgIGV4cGVjdCh3YXRlckJ1dHRvbikudG9IYXZlQ2xhc3MoJ2J0bi0tcHJpbWFyeScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3dzIGNvbmRpdGlvbmFsIGZpZWxkcyBmb3IgZmVydGlsaXplciB0eXBlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSBkZWZhdWx0Q2FyZVR5cGU9XCJmZXJ0aWxpemVyXCIgLz4pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9mZXJ0aWxpemVyIHR5cGUvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KC9saXF1aWQgZmVydGlsaXplciwgc2xvdy1yZWxlYXNlIHBlbGxldHMvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvd3MgY29uZGl0aW9uYWwgZmllbGRzIGZvciByZXBvdHRpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgY29uc3QgcmVwb3RCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9yZXBvdC9pIH0pO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhyZXBvdEJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9wb3Qgc2l6ZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvc29pbCB0eXBlL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnaGlkZXMgY29uZGl0aW9uYWwgZmllbGRzIHdoZW4gc3dpdGNoaW5nIGNhcmUgdHlwZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IGRlZmF1bHRDYXJlVHlwZT1cImZlcnRpbGl6ZXJcIiAvPik7XG5cbiAgICAgIC8vIEluaXRpYWxseSBzaG93cyBmZXJ0aWxpemVyIGZpZWxkXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9mZXJ0aWxpemVyIHR5cGUvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAgIC8vIFN3aXRjaCB0byB3YXRlclxuICAgICAgY29uc3Qgd2F0ZXJCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC93YXRlci9pIH0pO1xuICAgICAgYXdhaXQgdXNlci5jbGljayh3YXRlckJ1dHRvbik7XG5cbiAgICAgIC8vIEZlcnRpbGl6ZXIgZmllbGQgc2hvdWxkIGJlIGhpZGRlblxuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5TGFiZWxUZXh0KC9mZXJ0aWxpemVyIHR5cGUvaSkpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3dzIGNhcmUgdHlwZSBkZXNjcmlwdGlvbicsICgpID0+IHtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gZGVmYXVsdENhcmVUeXBlPVwiZmVydGlsaXplclwiIC8+KTtcblxuICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBzY3JlZW4uZ2V0QnlUZXh0KC/wn4yxIGZlcnRpbGl6ZXI6L2kpO1xuICAgICAgZXhwZWN0KGRlc2NyaXB0aW9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRGF0ZSBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdwcmV2ZW50cyBzZWxlY3RpbmcgZnV0dXJlIGRhdGVzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGNvbnN0IGRhdGVJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvY2FyZSBkYXRlL2kpO1xuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGRhdGVJbnB1dCkudG9IYXZlQXR0cmlidXRlKCdtYXgnLCB0b2RheSk7XG4gICAgfSk7XG5cbiAgICBpdCgnYWxsb3dzIHNlbGVjdGluZyBwYXN0IGRhdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGNvbnN0IGRhdGVJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvY2FyZSBkYXRlL2kpO1xuICAgICAgY29uc3QgeWVzdGVyZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgIHllc3RlcmRheS5zZXREYXRlKHllc3RlcmRheS5nZXREYXRlKCkgLSAxKTtcbiAgICAgIGNvbnN0IHllc3RlcmRheVN0cmluZyA9IHllc3RlcmRheS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG5cbiAgICAgIGF3YWl0IHVzZXIuY2xlYXIoZGF0ZUlucHV0KTtcbiAgICAgIGF3YWl0IHVzZXIudHlwZShkYXRlSW5wdXQsIHllc3RlcmRheVN0cmluZyk7XG5cbiAgICAgIGV4cGVjdChkYXRlSW5wdXQpLnRvSGF2ZVZhbHVlKHllc3RlcmRheVN0cmluZyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGb3JtIFN1Ym1pc3Npb24nLCAoKSA9PiB7XG4gICAgaXQoJ3N1Ym1pdHMgZm9ybSB3aXRoIGNvcnJlY3QgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICAvLyBGaWxsIGZvcm1cbiAgICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL25vdGVzL2kpLCAnUGxhbnQgbG9va3MgaGVhbHRoeScpO1xuICAgICAgXG4gICAgICAvLyBTdWJtaXRcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvbG9nIGNhcmUvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAnL2FwaS9jYXJlL2xvZycsXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ2ZlcnRpbGl6ZXInKSxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChkZWZhdWx0UHJvcHMub25TdWNjZXNzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnaW5jbHVkZXMgY29uZGl0aW9uYWwgZmllbGQgZGF0YSBpbiBzdWJtaXNzaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSBkZWZhdWx0Q2FyZVR5cGU9XCJmZXJ0aWxpemVyXCIgLz4pO1xuXG4gICAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9mZXJ0aWxpemVyIHR5cGUvaSksICdMaXF1aWQgZmVydGlsaXplcicpO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9sb2cgY2FyZS9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZldGNoQ2FsbCA9IGdsb2JhbC5mZXRjaC5tb2NrLmNhbGxzWzBdO1xuICAgICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IEpTT04ucGFyc2UoZmV0Y2hDYWxsWzFdLmJvZHkpO1xuICAgICAgICBleHBlY3QocmVxdWVzdEJvZHkuZmVydGlsaXplclR5cGUpLnRvQmUoJ0xpcXVpZCBmZXJ0aWxpemVyJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdpbmNsdWRlcyByZXBvdC1zcGVjaWZpYyBkYXRhIGluIHN1Ym1pc3Npb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgLy8gU2VsZWN0IHJlcG90IGNhcmUgdHlwZVxuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9yZXBvdC9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3BvdCBzaXplL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3BvdCBzaXplL2kpLCAnNiBpbmNoJyk7XG4gICAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9zb2lsIHR5cGUvaSksICdQb3R0aW5nIG1peCcpO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9sb2cgY2FyZS9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZldGNoQ2FsbCA9IGdsb2JhbC5mZXRjaC5tb2NrLmNhbGxzWzBdO1xuICAgICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IEpTT04ucGFyc2UoZmV0Y2hDYWxsWzFdLmJvZHkpO1xuICAgICAgICBleHBlY3QocmVxdWVzdEJvZHkucG90U2l6ZSkudG9CZSgnNiBpbmNoJyk7XG4gICAgICAgIGV4cGVjdChyZXF1ZXN0Qm9keS5zb2lsVHlwZSkudG9CZSgnUG90dGluZyBtaXgnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Jlc2V0cyBmb3JtIGFmdGVyIHN1Y2Nlc3NmdWwgc3VibWlzc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICAvLyBGaWxsIGZvcm1cbiAgICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL25vdGVzL2kpLCAnVGVzdCBub3RlcycpO1xuICAgICAgXG4gICAgICAvLyBTdWJtaXRcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvbG9nIGNhcmUvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZGVmYXVsdFByb3BzLm9uU3VjY2VzcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEZvcm0gc2hvdWxkIGJlIHJlc2V0XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9ub3Rlcy9pKSkudG9IYXZlVmFsdWUoJycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3dzIGxvYWRpbmcgc3RhdGUgZHVyaW5nIHN1Ym1pc3Npb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgZGVsYXllZCByZXNwb25zZVxuICAgICAgZ2xvYmFsLmZldGNoID0gamVzdC5mbigoKSA9PiBcbiAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdWNjZXNzOiB0cnVlIH0pXG4gICAgICAgICAgfSksIDEwMClcbiAgICAgICAgKVxuICAgICAgKTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2xvZyBjYXJlL2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHN1Ym1pdEJ1dHRvbik7XG5cbiAgICAgIC8vIENoZWNrIGxvYWRpbmcgc3RhdGVcbiAgICAgIGV4cGVjdChzdWJtaXRCdXR0b24pLnRvQmVEaXNhYmxlZCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL2xvZ2dpbmcvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdPZmZsaW5lIE1vZGUnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAvLyBNb2NrIG9mZmxpbmUgc3RhdGVcbiAgICAgIG1vY2tVc2VPZmZsaW5lLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzT25saW5lOiBmYWxzZSxcbiAgICAgICAgYWRkUGVuZGluZ0NhcmVFbnRyeTogbW9ja0FkZFBlbmRpbmdDYXJlRW50cnksXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG93cyBvZmZsaW5lIG1vZGUgaW5kaWNhdG9yJywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9vZmZsaW5lIG1vZGUvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvY2FyZSB3aWxsIGJlIGxvZ2dlZCB3aGVuIHlvdSdyZSBiYWNrIG9ubGluZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdjaGFuZ2VzIHN1Ym1pdCBidXR0b24gdGV4dCBpbiBvZmZsaW5lIG1vZGUnLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3F1ZXVlIGZvciBzeW5jL2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgncXVldWVzIGNhcmUgZW50cnkgd2hlbiBvZmZsaW5lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL25vdGVzL2kpLCAnT2ZmbGluZSBjYXJlIGVudHJ5Jyk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3F1ZXVlIGZvciBzeW5jL2kgfSkpO1xuXG4gICAgICBleHBlY3QobW9ja0FkZFBlbmRpbmdDYXJlRW50cnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgcGxhbnRJbnN0YW5jZUlkOiAxLFxuICAgICAgICBjYXJlVHlwZTogJ2ZlcnRpbGl6ZXInLFxuICAgICAgICBub3RlczogJ09mZmxpbmUgY2FyZSBlbnRyeScsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tSZWdpc3RlckJhY2tncm91bmRTeW5jKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoZGVmYXVsdFByb3BzLm9uU3VjY2VzcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RvZXMgbm90IG1ha2UgQVBJIGNhbGwgd2hlbiBvZmZsaW5lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvcXVldWUgZm9yIHN5bmMvaSB9KSk7XG5cbiAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnZGlzcGxheXMgQVBJIGVycm9yIG1lc3NhZ2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgbW9ja0FwaUVycm9yKCcvYXBpL2NhcmUvbG9nJywgNDAwLCB7IGVycm9yOiAnSW52YWxpZCBjYXJlIGRhdGEnIH0pO1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9sb2cgY2FyZS9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJbnZhbGlkIGNhcmUgZGF0YScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChkZWZhdWx0UHJvcHMub25TdWNjZXNzKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2hhbmRsZXMgbmV0d29yayBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIFxuICAgICAgLy8gTW9jayBuZXR3b3JrIGVycm9yXG4gICAgICBnbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCgpID0+IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKSk7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2xvZyBjYXJlL2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL2ZhaWxlZCB0byBsb2cgY2FyZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2NsZWFycyBlcnJvcnMgb24gcmV0cnknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICBtb2NrQXBpRXJyb3IoJy9hcGkvY2FyZS9sb2cnLCA0MDAsIHsgZXJyb3I6ICdJbnZhbGlkIGNhcmUgZGF0YScgfSk7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICAvLyBGaXJzdCBzdWJtaXNzaW9uIHdpdGggZXJyb3JcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvbG9nIGNhcmUvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSW52YWxpZCBjYXJlIGRhdGEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNb2NrIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgZm9yIHJldHJ5XG4gICAgICBtb2NrQXBpUmVzcG9uc2VzKHtcbiAgICAgICAgJy9hcGkvY2FyZS9sb2cnOiB7IHN1Y2Nlc3M6IHRydWUgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBSZXRyeSBzdWJtaXNzaW9uXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2xvZyBjYXJlL2kgfSkpO1xuXG4gICAgICAvLyBFcnJvciBzaG91bGQgYmUgY2xlYXJlZFxuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnSW52YWxpZCBjYXJlIGRhdGEnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQbGFudCBTZWxlY3Rpb24gKHdoZW4gbm8gcGxhbnRJbnN0YW5jZUlkIHByb3ZpZGVkKScsICgpID0+IHtcbiAgICBpdCgnc2hvd3MgcGxhbnQgc2VsZWN0aW9uIGRyb3Bkb3duIHdoZW4gcGxhbnRJbnN0YW5jZUlkIG5vdCBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BzV2l0aG91dFBsYW50ID0geyAuLi5kZWZhdWx0UHJvcHMgfTtcbiAgICAgIGRlbGV0ZSBwcm9wc1dpdGhvdXRQbGFudC5wbGFudEluc3RhbmNlSWQ7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLnByb3BzV2l0aG91dFBsYW50fSAvPik7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3BsYW50L2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL3NlbGVjdCBhIHBsYW50L2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2Rpc2FibGVzIHN1Ym1pdCBidXR0b24gd2hlbiBubyBwbGFudCBzZWxlY3RlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BzV2l0aG91dFBsYW50ID0geyAuLi5kZWZhdWx0UHJvcHMgfTtcbiAgICAgIGRlbGV0ZSBwcm9wc1dpdGhvdXRQbGFudC5wbGFudEluc3RhbmNlSWQ7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLnByb3BzV2l0aG91dFBsYW50fSAvPik7XG5cbiAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2xvZyBjYXJlL2kgfSk7XG4gICAgICBleHBlY3Qoc3VibWl0QnV0dG9uKS50b0JlRGlzYWJsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG93cyBpbXBsZW1lbnRhdGlvbiBub3RlIGZvciBwbGFudCBzZWxlY3Rpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wc1dpdGhvdXRQbGFudCA9IHsgLi4uZGVmYXVsdFByb3BzIH07XG4gICAgICBkZWxldGUgcHJvcHNXaXRob3V0UGxhbnQucGxhbnRJbnN0YW5jZUlkO1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5wcm9wc1dpdGhvdXRQbGFudH0gLz4pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvcGxhbnQgc2VsZWN0aW9uIHdpbGwgYmUgaW1wbGVtZW50ZWQgd2hlbiBwbGFudCBpbnN0YW5jZXMgYXJlIGF2YWlsYWJsZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NhbmNlbCBGdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xuICAgIGl0KCdzaG93cyBjYW5jZWwgYnV0dG9uIHdoZW4gb25DYW5jZWwgcHJvdmlkZWQnLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2NhbmNlbC9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2NhbGxzIG9uQ2FuY2VsIHdoZW4gY2FuY2VsIGJ1dHRvbiBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvY2FuY2VsL2kgfSkpO1xuXG4gICAgICBleHBlY3QoZGVmYXVsdFByb3BzLm9uQ2FuY2VsKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZG9lcyBub3Qgc2hvdyBjYW5jZWwgYnV0dG9uIHdoZW4gb25DYW5jZWwgbm90IHByb3ZpZGVkJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcHNXaXRob3V0Q2FuY2VsID0geyAuLi5kZWZhdWx0UHJvcHMgfTtcbiAgICAgIGRlbGV0ZSBwcm9wc1dpdGhvdXRDYW5jZWwub25DYW5jZWw7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcnMoPFF1aWNrQ2FyZUZvcm0gey4uLnByb3BzV2l0aG91dENhbmNlbH0gLz4pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9jYW5jZWwvaSB9KSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBY2Nlc3NpYmlsaXR5JywgKCkgPT4ge1xuICAgIGl0KCdoYXMgcHJvcGVyIGZvcm0gc3RydWN0dXJlJywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdmb3JtJywgeyBoaWRkZW46IHRydWUgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnaGFzIHByb3BlciBsYWJlbHMgZm9yIGFsbCBpbnB1dHMnLCAoKSA9PiB7XG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXJzKDxRdWlja0NhcmVGb3JtIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvY2FyZSB0eXBlL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvY2FyZSBkYXRlL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvbm90ZXMvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnaGFzIHJlcXVpcmVkIGF0dHJpYnV0ZSBvbiBkYXRlIGZpZWxkJywgKCkgPT4ge1xuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGNvbnN0IGRhdGVJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvY2FyZSBkYXRlL2kpO1xuICAgICAgZXhwZWN0KGRhdGVJbnB1dCkudG9IYXZlQXR0cmlidXRlKCdyZXF1aXJlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2Rpc2FibGVzIGZvcm0gZWxlbWVudHMgZHVyaW5nIHN1Ym1pc3Npb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgZGVsYXllZCByZXNwb25zZVxuICAgICAgZ2xvYmFsLmZldGNoID0gamVzdC5mbigoKSA9PiBcbiAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdWNjZXNzOiB0cnVlIH0pXG4gICAgICAgICAgfSksIDEwMClcbiAgICAgICAgKVxuICAgICAgKTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVycyg8UXVpY2tDYXJlRm9ybSB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2xvZyBjYXJlL2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHN1Ym1pdEJ1dHRvbik7XG5cbiAgICAgIC8vIEFsbCBjYXJlIHR5cGUgYnV0dG9ucyBzaG91bGQgYmUgZGlzYWJsZWRcbiAgICAgIGNvbnN0IGNhcmVUeXBlQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicpLmZpbHRlcihidG4gPT4gXG4gICAgICAgIGJ0bi50ZXh0Q29udGVudD8uaW5jbHVkZXMoJ0ZlcnRpbGl6ZXInKSB8fCBcbiAgICAgICAgYnRuLnRleHRDb250ZW50Py5pbmNsdWRlcygnV2F0ZXInKSB8fFxuICAgICAgICBidG4udGV4dENvbnRlbnQ/LmluY2x1ZGVzKCdSZXBvdCcpXG4gICAgICApO1xuXG4gICAgICBjYXJlVHlwZUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICBleHBlY3QoYnV0dG9uKS50b0JlRGlzYWJsZWQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBEYXRlIGlucHV0IHNob3VsZCBiZSBkaXNhYmxlZFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvY2FyZSBkYXRlL2kpKS50b0JlRGlzYWJsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJ1c2VPZmZsaW5lIiwibW9ja1VzZU9mZmxpbmUiLCJ1c2VTZXJ2aWNlV29ya2VyIiwicmVnaXN0ZXJCYWNrZ3JvdW5kU3luYyIsIm1vY2tSZWdpc3RlckJhY2tncm91bmRTeW5jIiwibW9ja0FkZFBlbmRpbmdDYXJlRW50cnkiLCJmbiIsImlzT25saW5lIiwiYWRkUGVuZGluZ0NhcmVFbnRyeSIsImRlc2NyaWJlIiwiZGVmYXVsdFByb3BzIiwicGxhbnRJbnN0YW5jZUlkIiwib25TdWNjZXNzIiwib25DYW5jZWwiLCJkZWZhdWx0Q2FyZVR5cGUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tBcGlSZXNwb25zZXMiLCJzdWNjZXNzIiwiZGF0YSIsImlkIiwibW9ja1JldHVyblZhbHVlIiwiaXQiLCJyZW5kZXJXaXRoUHJvdmlkZXJzIiwiUXVpY2tDYXJlRm9ybSIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGV4dCIsInRvQmVJblRoZURvY3VtZW50IiwiZGF0ZUlucHV0IiwiZ2V0QnlMYWJlbFRleHQiLCJ0b2RheSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwidG9IYXZlVmFsdWUiLCJ0b0hhdmVBdHRyaWJ1dGUiLCJub3Rlc0ZpZWxkIiwiZ2V0QnlSb2xlIiwibmFtZSIsIndhdGVyQnV0dG9uIiwidG9IYXZlQ2xhc3MiLCJ1c2VyIiwidXNlckV2ZW50Iiwic2V0dXAiLCJjbGljayIsImdldEJ5UGxhY2Vob2xkZXJUZXh0IiwicmVwb3RCdXR0b24iLCJ3YWl0Rm9yIiwicXVlcnlCeUxhYmVsVGV4dCIsIm5vdCIsImRlc2NyaXB0aW9uIiwieWVzdGVyZGF5Iiwic2V0RGF0ZSIsImdldERhdGUiLCJ5ZXN0ZXJkYXlTdHJpbmciLCJjbGVhciIsInR5cGUiLCJnbG9iYWwiLCJmZXRjaCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwib2JqZWN0Q29udGFpbmluZyIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5Iiwic3RyaW5nQ29udGFpbmluZyIsInRvSGF2ZUJlZW5DYWxsZWQiLCJmZXRjaENhbGwiLCJjYWxscyIsInJlcXVlc3RCb2R5IiwiSlNPTiIsInBhcnNlIiwiZmVydGlsaXplclR5cGUiLCJ0b0JlIiwicG90U2l6ZSIsInNvaWxUeXBlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0Iiwib2siLCJqc29uIiwic3VibWl0QnV0dG9uIiwidG9CZURpc2FibGVkIiwiY2FyZVR5cGUiLCJub3RlcyIsIm1vY2tBcGlFcnJvciIsImVycm9yIiwicmVqZWN0IiwiRXJyb3IiLCJxdWVyeUJ5VGV4dCIsInByb3BzV2l0aG91dFBsYW50IiwicHJvcHNXaXRob3V0Q2FuY2VsIiwicXVlcnlCeVJvbGUiLCJoaWRkZW4iLCJjYXJlVHlwZUJ1dHRvbnMiLCJnZXRBbGxCeVJvbGUiLCJmaWx0ZXIiLCJidG4iLCJ0ZXh0Q29udGVudCIsImluY2x1ZGVzIiwiZm9yRWFjaCIsImJ1dHRvbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0NBRUM7QUFnQkRBLEtBQUtDLElBQUksQ0FBQyxzQkFBc0IsSUFBTyxDQUFBO1FBQ3JDQyxZQUFZQztJQUNkLENBQUE7QUFFQUgsS0FBS0MsSUFBSSxDQUFDLDhCQUE4QixJQUFPLENBQUE7UUFDN0NHLGtCQUFrQixJQUFPLENBQUE7Z0JBQ3ZCQyx3QkFBd0JDO1lBQzFCLENBQUE7SUFDRixDQUFBOzs7Ozs4REF0QmtCO3dCQUNjO2tFQUNWOytCQUM4QztzRUFDMUM7Ozs7OztBQUUxQix3QkFBd0I7QUFDeEIsTUFBTUMsMEJBQTBCUCxLQUFLUSxFQUFFO0FBQ3ZDLE1BQU1GLDZCQUE2Qk4sS0FBS1EsRUFBRTtBQUMxQyxNQUFNTCxpQkFBaUJILEtBQUtRLEVBQUUsQ0FBQyxJQUFPLENBQUE7UUFDcENDLFVBQVU7UUFDVkMscUJBQXFCSDtJQUN2QixDQUFBO0FBWUFJLFNBQVMsaUJBQWlCO0lBQ3hCLE1BQU1DLGVBQWU7UUFDbkJDLGlCQUFpQjtRQUNqQkMsV0FBV2QsS0FBS1EsRUFBRTtRQUNsQk8sVUFBVWYsS0FBS1EsRUFBRTtRQUNqQlEsaUJBQWlCO0lBQ25CO0lBRUFDLFdBQVc7UUFDVGpCLEtBQUtrQixhQUFhO1FBRWxCLDBDQUEwQztRQUMxQ0MsSUFBQUEsK0JBQWdCLEVBQUM7WUFDZixpQkFBaUI7Z0JBQUVDLFNBQVM7Z0JBQU1DLE1BQU07b0JBQUVDLElBQUk7Z0JBQUU7WUFBRTtRQUNwRDtRQUVBLHFDQUFxQztRQUNyQ25CLGVBQWVvQixlQUFlLENBQUM7WUFDN0JkLFVBQVU7WUFDVkMscUJBQXFCSDtRQUN2QjtJQUNGO0lBRUFJLFNBQVMsa0JBQWtCO1FBQ3pCYSxHQUFHLGlDQUFpQztZQUNsQ0MsSUFBQUEsa0NBQW1CLGdCQUFDLHFCQUFDQyxzQkFBYTtnQkFBRSxHQUFHZCxZQUFZOztZQUVuRGUsT0FBT0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsT0FBT0MsaUJBQWlCLElBQUksYUFBYTtZQUNqRUgsT0FBT0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsT0FBT0MsaUJBQWlCLElBQUksUUFBUTtZQUM1REgsT0FBT0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsT0FBT0MsaUJBQWlCLElBQUksUUFBUTtZQUM1REgsT0FBT0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsT0FBT0MsaUJBQWlCLElBQUksUUFBUTtZQUM1REgsT0FBT0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsT0FBT0MsaUJBQWlCLElBQUksVUFBVTtZQUM5REgsT0FBT0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsT0FBT0MsaUJBQWlCLElBQUksUUFBUTtZQUU1REgsT0FBT0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsZUFBZUMsaUJBQWlCO1lBQ3hESCxPQUFPQyxjQUFNLENBQUNDLFNBQVMsQ0FBQyxVQUFVQyxpQkFBaUI7WUFDbkRILE9BQU9DLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLFVBQVVDLGlCQUFpQjtZQUNuREgsT0FBT0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsVUFBVUMsaUJBQWlCO1lBQ25ESCxPQUFPQyxjQUFNLENBQUNDLFNBQVMsQ0FBQyxZQUFZQyxpQkFBaUI7WUFDckRILE9BQU9DLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLFVBQVVDLGlCQUFpQjtRQUNyRDtRQUVBTixHQUFHLGlEQUFpRDtZQUNsREMsSUFBQUEsa0NBQW1CLGdCQUFDLHFCQUFDQyxzQkFBYTtnQkFBRSxHQUFHZCxZQUFZOztZQUVuRCxNQUFNbUIsWUFBWUgsY0FBTSxDQUFDSSxjQUFjLENBQUM7WUFDeEMsTUFBTUMsUUFBUSxJQUFJQyxPQUFPQyxXQUFXLEdBQUdDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUVwRFQsT0FBT0ksV0FBV0QsaUJBQWlCO1lBQ25DSCxPQUFPSSxXQUFXTSxXQUFXLENBQUNKO1lBQzlCTixPQUFPSSxXQUFXTyxlQUFlLENBQUMsT0FBT0wsUUFBUSxzQkFBc0I7UUFDekU7UUFFQVQsR0FBRyx1QkFBdUI7WUFDeEJDLElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR2QsWUFBWTs7WUFFbkQsTUFBTTJCLGFBQWFYLGNBQU0sQ0FBQ0ksY0FBYyxDQUFDO1lBQ3pDTCxPQUFPWSxZQUFZVCxpQkFBaUI7WUFDcENILE9BQU9ZLFlBQVlELGVBQWUsQ0FBQyxlQUFlO1FBQ3BEO1FBRUFkLEdBQUcseUJBQXlCO1lBQzFCQyxJQUFBQSxrQ0FBbUIsZ0JBQUMscUJBQUNDLHNCQUFhO2dCQUFFLEdBQUdkLFlBQVk7O1lBRW5EZSxPQUFPQyxjQUFNLENBQUNZLFNBQVMsQ0FBQyxVQUFVO2dCQUFFQyxNQUFNO1lBQVksSUFBSVgsaUJBQWlCO1FBQzdFO1FBRUFOLEdBQUcsNkJBQTZCO1lBQzlCQyxJQUFBQSxrQ0FBbUIsZ0JBQUMscUJBQUNDLHNCQUFhO2dCQUFFLEdBQUdkLFlBQVk7Z0JBQUVJLGlCQUFnQjs7WUFFckUsTUFBTTBCLGNBQWNkLGNBQU0sQ0FBQ1ksU0FBUyxDQUFDLFVBQVU7Z0JBQUVDLE1BQU07WUFBUztZQUNoRWQsT0FBT2UsYUFBYUMsV0FBVyxDQUFDO1FBQ2xDO0lBQ0Y7SUFFQWhDLFNBQVMsdUJBQXVCO1FBQzlCYSxHQUFHLHlDQUF5QztZQUMxQyxNQUFNb0IsT0FBT0Msa0JBQVMsQ0FBQ0MsS0FBSztZQUM1QnJCLElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR2QsWUFBWTs7WUFFbkQsTUFBTThCLGNBQWNkLGNBQU0sQ0FBQ1ksU0FBUyxDQUFDLFVBQVU7Z0JBQUVDLE1BQU07WUFBUztZQUNoRSxNQUFNRyxLQUFLRyxLQUFLLENBQUNMO1lBRWpCZixPQUFPZSxhQUFhQyxXQUFXLENBQUM7UUFDbEM7UUFFQW5CLEdBQUcsZ0RBQWdEO1lBQ2pELE1BQU1vQixPQUFPQyxrQkFBUyxDQUFDQyxLQUFLO1lBQzVCckIsSUFBQUEsa0NBQW1CLGdCQUFDLHFCQUFDQyxzQkFBYTtnQkFBRSxHQUFHZCxZQUFZO2dCQUFFSSxpQkFBZ0I7O1lBRXJFVyxPQUFPQyxjQUFNLENBQUNJLGNBQWMsQ0FBQyxxQkFBcUJGLGlCQUFpQjtZQUNuRUgsT0FBT0MsY0FBTSxDQUFDb0Isb0JBQW9CLENBQUMsNkNBQTZDbEIsaUJBQWlCO1FBQ25HO1FBRUFOLEdBQUcsMENBQTBDO1lBQzNDLE1BQU1vQixPQUFPQyxrQkFBUyxDQUFDQyxLQUFLO1lBQzVCckIsSUFBQUEsa0NBQW1CLGdCQUFDLHFCQUFDQyxzQkFBYTtnQkFBRSxHQUFHZCxZQUFZOztZQUVuRCxNQUFNcUMsY0FBY3JCLGNBQU0sQ0FBQ1ksU0FBUyxDQUFDLFVBQVU7Z0JBQUVDLE1BQU07WUFBUztZQUNoRSxNQUFNRyxLQUFLRyxLQUFLLENBQUNFO1lBRWpCLE1BQU1DLElBQUFBLGVBQU8sRUFBQztnQkFDWnZCLE9BQU9DLGNBQU0sQ0FBQ0ksY0FBYyxDQUFDLGNBQWNGLGlCQUFpQjtnQkFDNURILE9BQU9DLGNBQU0sQ0FBQ0ksY0FBYyxDQUFDLGVBQWVGLGlCQUFpQjtZQUMvRDtRQUNGO1FBRUFOLEdBQUcsc0RBQXNEO1lBQ3ZELE1BQU1vQixPQUFPQyxrQkFBUyxDQUFDQyxLQUFLO1lBQzVCckIsSUFBQUEsa0NBQW1CLGdCQUFDLHFCQUFDQyxzQkFBYTtnQkFBRSxHQUFHZCxZQUFZO2dCQUFFSSxpQkFBZ0I7O1lBRXJFLG1DQUFtQztZQUNuQ1csT0FBT0MsY0FBTSxDQUFDSSxjQUFjLENBQUMscUJBQXFCRixpQkFBaUI7WUFFbkUsa0JBQWtCO1lBQ2xCLE1BQU1ZLGNBQWNkLGNBQU0sQ0FBQ1ksU0FBUyxDQUFDLFVBQVU7Z0JBQUVDLE1BQU07WUFBUztZQUNoRSxNQUFNRyxLQUFLRyxLQUFLLENBQUNMO1lBRWpCLG9DQUFvQztZQUNwQ2YsT0FBT0MsY0FBTSxDQUFDdUIsZ0JBQWdCLENBQUMscUJBQXFCQyxHQUFHLENBQUN0QixpQkFBaUI7UUFDM0U7UUFFQU4sR0FBRywrQkFBK0I7WUFDaENDLElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR2QsWUFBWTtnQkFBRUksaUJBQWdCOztZQUVyRSxNQUFNcUMsY0FBY3pCLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDO1lBQ3JDRixPQUFPMEIsYUFBYXZCLGlCQUFpQjtRQUN2QztJQUNGO0lBRUFuQixTQUFTLG1CQUFtQjtRQUMxQmEsR0FBRyxtQ0FBbUM7WUFDcENDLElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR2QsWUFBWTs7WUFFbkQsTUFBTW1CLFlBQVlILGNBQU0sQ0FBQ0ksY0FBYyxDQUFDO1lBQ3hDLE1BQU1DLFFBQVEsSUFBSUMsT0FBT0MsV0FBVyxHQUFHQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFFcERULE9BQU9JLFdBQVdPLGVBQWUsQ0FBQyxPQUFPTDtRQUMzQztRQUVBVCxHQUFHLCtCQUErQjtZQUNoQyxNQUFNb0IsT0FBT0Msa0JBQVMsQ0FBQ0MsS0FBSztZQUM1QnJCLElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR2QsWUFBWTs7WUFFbkQsTUFBTW1CLFlBQVlILGNBQU0sQ0FBQ0ksY0FBYyxDQUFDO1lBQ3hDLE1BQU1zQixZQUFZLElBQUlwQjtZQUN0Qm9CLFVBQVVDLE9BQU8sQ0FBQ0QsVUFBVUUsT0FBTyxLQUFLO1lBQ3hDLE1BQU1DLGtCQUFrQkgsVUFBVW5CLFdBQVcsR0FBR0MsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBRTdELE1BQU1RLEtBQUtjLEtBQUssQ0FBQzNCO1lBQ2pCLE1BQU1hLEtBQUtlLElBQUksQ0FBQzVCLFdBQVcwQjtZQUUzQjlCLE9BQU9JLFdBQVdNLFdBQVcsQ0FBQ29CO1FBQ2hDO0lBQ0Y7SUFFQTlDLFNBQVMsbUJBQW1CO1FBQzFCYSxHQUFHLGtDQUFrQztZQUNuQyxNQUFNb0IsT0FBT0Msa0JBQVMsQ0FBQ0MsS0FBSztZQUM1QnJCLElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR2QsWUFBWTs7WUFFbkQsWUFBWTtZQUNaLE1BQU1nQyxLQUFLZSxJQUFJLENBQUMvQixjQUFNLENBQUNJLGNBQWMsQ0FBQyxXQUFXO1lBRWpELFNBQVM7WUFDVCxNQUFNWSxLQUFLRyxLQUFLLENBQUNuQixjQUFNLENBQUNZLFNBQVMsQ0FBQyxVQUFVO2dCQUFFQyxNQUFNO1lBQVk7WUFFaEUsTUFBTVMsSUFBQUEsZUFBTyxFQUFDO2dCQUNadkIsT0FBT2lDLE9BQU9DLEtBQUssRUFBRUMsb0JBQW9CLENBQ3ZDLGlCQUNBbkMsT0FBT29DLGdCQUFnQixDQUFDO29CQUN0QkMsUUFBUTtvQkFDUkMsU0FBUzt3QkFDUCxnQkFBZ0I7b0JBQ2xCO29CQUNBQyxNQUFNdkMsT0FBT3dDLGdCQUFnQixDQUFDO2dCQUNoQztZQUVKO1lBRUF4QyxPQUFPZixhQUFhRSxTQUFTLEVBQUVzRCxnQkFBZ0I7UUFDakQ7UUFFQTVDLEdBQUcsaURBQWlEO1lBQ2xELE1BQU1vQixPQUFPQyxrQkFBUyxDQUFDQyxLQUFLO1lBQzVCckIsSUFBQUEsa0NBQW1CLGdCQUFDLHFCQUFDQyxzQkFBYTtnQkFBRSxHQUFHZCxZQUFZO2dCQUFFSSxpQkFBZ0I7O1lBRXJFLE1BQU00QixLQUFLZSxJQUFJLENBQUMvQixjQUFNLENBQUNJLGNBQWMsQ0FBQyxxQkFBcUI7WUFDM0QsTUFBTVksS0FBS0csS0FBSyxDQUFDbkIsY0FBTSxDQUFDWSxTQUFTLENBQUMsVUFBVTtnQkFBRUMsTUFBTTtZQUFZO1lBRWhFLE1BQU1TLElBQUFBLGVBQU8sRUFBQztnQkFDWixNQUFNbUIsWUFBWVQsT0FBT0MsS0FBSyxDQUFDNUQsSUFBSSxDQUFDcUUsS0FBSyxDQUFDLEVBQUU7Z0JBQzVDLE1BQU1DLGNBQWNDLEtBQUtDLEtBQUssQ0FBQ0osU0FBUyxDQUFDLEVBQUUsQ0FBQ0gsSUFBSTtnQkFDaER2QyxPQUFPNEMsWUFBWUcsY0FBYyxFQUFFQyxJQUFJLENBQUM7WUFDMUM7UUFDRjtRQUVBbkQsR0FBRyw4Q0FBOEM7WUFDL0MsTUFBTW9CLE9BQU9DLGtCQUFTLENBQUNDLEtBQUs7WUFDNUJyQixJQUFBQSxrQ0FBbUIsZ0JBQUMscUJBQUNDLHNCQUFhO2dCQUFFLEdBQUdkLFlBQVk7O1lBRW5ELHlCQUF5QjtZQUN6QixNQUFNZ0MsS0FBS0csS0FBSyxDQUFDbkIsY0FBTSxDQUFDWSxTQUFTLENBQUMsVUFBVTtnQkFBRUMsTUFBTTtZQUFTO1lBRTdELE1BQU1TLElBQUFBLGVBQU8sRUFBQztnQkFDWnZCLE9BQU9DLGNBQU0sQ0FBQ0ksY0FBYyxDQUFDLGNBQWNGLGlCQUFpQjtZQUM5RDtZQUVBLE1BQU1jLEtBQUtlLElBQUksQ0FBQy9CLGNBQU0sQ0FBQ0ksY0FBYyxDQUFDLGNBQWM7WUFDcEQsTUFBTVksS0FBS2UsSUFBSSxDQUFDL0IsY0FBTSxDQUFDSSxjQUFjLENBQUMsZUFBZTtZQUNyRCxNQUFNWSxLQUFLRyxLQUFLLENBQUNuQixjQUFNLENBQUNZLFNBQVMsQ0FBQyxVQUFVO2dCQUFFQyxNQUFNO1lBQVk7WUFFaEUsTUFBTVMsSUFBQUEsZUFBTyxFQUFDO2dCQUNaLE1BQU1tQixZQUFZVCxPQUFPQyxLQUFLLENBQUM1RCxJQUFJLENBQUNxRSxLQUFLLENBQUMsRUFBRTtnQkFDNUMsTUFBTUMsY0FBY0MsS0FBS0MsS0FBSyxDQUFDSixTQUFTLENBQUMsRUFBRSxDQUFDSCxJQUFJO2dCQUNoRHZDLE9BQU80QyxZQUFZSyxPQUFPLEVBQUVELElBQUksQ0FBQztnQkFDakNoRCxPQUFPNEMsWUFBWU0sUUFBUSxFQUFFRixJQUFJLENBQUM7WUFDcEM7UUFDRjtRQUVBbkQsR0FBRywyQ0FBMkM7WUFDNUMsTUFBTW9CLE9BQU9DLGtCQUFTLENBQUNDLEtBQUs7WUFDNUJyQixJQUFBQSxrQ0FBbUIsZ0JBQUMscUJBQUNDLHNCQUFhO2dCQUFFLEdBQUdkLFlBQVk7O1lBRW5ELFlBQVk7WUFDWixNQUFNZ0MsS0FBS2UsSUFBSSxDQUFDL0IsY0FBTSxDQUFDSSxjQUFjLENBQUMsV0FBVztZQUVqRCxTQUFTO1lBQ1QsTUFBTVksS0FBS0csS0FBSyxDQUFDbkIsY0FBTSxDQUFDWSxTQUFTLENBQUMsVUFBVTtnQkFBRUMsTUFBTTtZQUFZO1lBRWhFLE1BQU1TLElBQUFBLGVBQU8sRUFBQztnQkFDWnZCLE9BQU9mLGFBQWFFLFNBQVMsRUFBRXNELGdCQUFnQjtZQUNqRDtZQUVBLHVCQUF1QjtZQUN2QnpDLE9BQU9DLGNBQU0sQ0FBQ0ksY0FBYyxDQUFDLFdBQVdLLFdBQVcsQ0FBQztRQUN0RDtRQUVBYixHQUFHLHlDQUF5QztZQUMxQyxNQUFNb0IsT0FBT0Msa0JBQVMsQ0FBQ0MsS0FBSztZQUU1Qix3QkFBd0I7WUFDeEJjLE9BQU9DLEtBQUssR0FBRzdELEtBQUtRLEVBQUUsQ0FBQyxJQUNyQixJQUFJc0UsUUFBUUMsQ0FBQUEsVUFDVkMsV0FBVyxJQUFNRCxRQUFROzRCQUN2QkUsSUFBSTs0QkFDSkMsTUFBTSxJQUFNSixRQUFRQyxPQUFPLENBQUM7b0NBQUUzRCxTQUFTO2dDQUFLO3dCQUM5QyxJQUFJO1lBSVJLLElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR2QsWUFBWTs7WUFFbkQsTUFBTXVFLGVBQWV2RCxjQUFNLENBQUNZLFNBQVMsQ0FBQyxVQUFVO2dCQUFFQyxNQUFNO1lBQVk7WUFDcEUsTUFBTUcsS0FBS0csS0FBSyxDQUFDb0M7WUFFakIsc0JBQXNCO1lBQ3RCeEQsT0FBT3dELGNBQWNDLFlBQVk7WUFDakN6RCxPQUFPQyxjQUFNLENBQUNDLFNBQVMsQ0FBQyxhQUFhQyxpQkFBaUI7UUFDeEQ7SUFDRjtJQUVBbkIsU0FBUyxnQkFBZ0I7UUFDdkJNLFdBQVc7WUFDVCxxQkFBcUI7WUFDckJkLGVBQWVvQixlQUFlLENBQUM7Z0JBQzdCZCxVQUFVO2dCQUNWQyxxQkFBcUJIO1lBQ3ZCO1FBQ0Y7UUFFQWlCLEdBQUcsZ0NBQWdDO1lBQ2pDQyxJQUFBQSxrQ0FBbUIsZ0JBQUMscUJBQUNDLHNCQUFhO2dCQUFFLEdBQUdkLFlBQVk7O1lBRW5EZSxPQUFPQyxjQUFNLENBQUNDLFNBQVMsQ0FBQyxrQkFBa0JDLGlCQUFpQjtZQUMzREgsT0FBT0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsaURBQWlEQyxpQkFBaUI7UUFDNUY7UUFFQU4sR0FBRyw4Q0FBOEM7WUFDL0NDLElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR2QsWUFBWTs7WUFFbkRlLE9BQU9DLGNBQU0sQ0FBQ1ksU0FBUyxDQUFDLFVBQVU7Z0JBQUVDLE1BQU07WUFBa0IsSUFBSVgsaUJBQWlCO1FBQ25GO1FBRUFOLEdBQUcsa0NBQWtDO1lBQ25DLE1BQU1vQixPQUFPQyxrQkFBUyxDQUFDQyxLQUFLO1lBQzVCckIsSUFBQUEsa0NBQW1CLGdCQUFDLHFCQUFDQyxzQkFBYTtnQkFBRSxHQUFHZCxZQUFZOztZQUVuRCxNQUFNZ0MsS0FBS2UsSUFBSSxDQUFDL0IsY0FBTSxDQUFDSSxjQUFjLENBQUMsV0FBVztZQUNqRCxNQUFNWSxLQUFLRyxLQUFLLENBQUNuQixjQUFNLENBQUNZLFNBQVMsQ0FBQyxVQUFVO2dCQUFFQyxNQUFNO1lBQWtCO1lBRXRFZCxPQUFPcEIseUJBQXlCdUQsb0JBQW9CLENBQUM7Z0JBQ25EakQsaUJBQWlCO2dCQUNqQndFLFVBQVU7Z0JBQ1ZDLE9BQU87WUFDVDtZQUVBM0QsT0FBT3JCLDRCQUE0QjhELGdCQUFnQjtZQUNuRHpDLE9BQU9mLGFBQWFFLFNBQVMsRUFBRXNELGdCQUFnQjtRQUNqRDtRQUVBNUMsR0FBRyx1Q0FBdUM7WUFDeEMsTUFBTW9CLE9BQU9DLGtCQUFTLENBQUNDLEtBQUs7WUFDNUJyQixJQUFBQSxrQ0FBbUIsZ0JBQUMscUJBQUNDLHNCQUFhO2dCQUFFLEdBQUdkLFlBQVk7O1lBRW5ELE1BQU1nQyxLQUFLRyxLQUFLLENBQUNuQixjQUFNLENBQUNZLFNBQVMsQ0FBQyxVQUFVO2dCQUFFQyxNQUFNO1lBQWtCO1lBRXRFZCxPQUFPaUMsT0FBT0MsS0FBSyxFQUFFVCxHQUFHLENBQUNnQixnQkFBZ0I7UUFDM0M7SUFDRjtJQUVBekQsU0FBUyxrQkFBa0I7UUFDekJhLEdBQUcsK0JBQStCO1lBQ2hDLE1BQU1vQixPQUFPQyxrQkFBUyxDQUFDQyxLQUFLO1lBQzVCeUMsSUFBQUEsMkJBQVksRUFBQyxpQkFBaUIsS0FBSztnQkFBRUMsT0FBTztZQUFvQjtZQUVoRS9ELElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR2QsWUFBWTs7WUFFbkQsTUFBTWdDLEtBQUtHLEtBQUssQ0FBQ25CLGNBQU0sQ0FBQ1ksU0FBUyxDQUFDLFVBQVU7Z0JBQUVDLE1BQU07WUFBWTtZQUVoRSxNQUFNUyxJQUFBQSxlQUFPLEVBQUM7Z0JBQ1p2QixPQUFPQyxjQUFNLENBQUNDLFNBQVMsQ0FBQyxzQkFBc0JDLGlCQUFpQjtZQUNqRTtZQUVBSCxPQUFPZixhQUFhRSxTQUFTLEVBQUVzQyxHQUFHLENBQUNnQixnQkFBZ0I7UUFDckQ7UUFFQTVDLEdBQUcscUNBQXFDO1lBQ3RDLE1BQU1vQixPQUFPQyxrQkFBUyxDQUFDQyxLQUFLO1lBRTVCLHFCQUFxQjtZQUNyQmMsT0FBT0MsS0FBSyxHQUFHN0QsS0FBS1EsRUFBRSxDQUFDLElBQU1zRSxRQUFRVyxNQUFNLENBQUMsSUFBSUMsTUFBTTtZQUV0RGpFLElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR2QsWUFBWTs7WUFFbkQsTUFBTWdDLEtBQUtHLEtBQUssQ0FBQ25CLGNBQU0sQ0FBQ1ksU0FBUyxDQUFDLFVBQVU7Z0JBQUVDLE1BQU07WUFBWTtZQUVoRSxNQUFNUyxJQUFBQSxlQUFPLEVBQUM7Z0JBQ1p2QixPQUFPQyxjQUFNLENBQUNDLFNBQVMsQ0FBQyx3QkFBd0JDLGlCQUFpQjtZQUNuRTtRQUNGO1FBRUFOLEdBQUcsMEJBQTBCO1lBQzNCLE1BQU1vQixPQUFPQyxrQkFBUyxDQUFDQyxLQUFLO1lBQzVCeUMsSUFBQUEsMkJBQVksRUFBQyxpQkFBaUIsS0FBSztnQkFBRUMsT0FBTztZQUFvQjtZQUVoRS9ELElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR2QsWUFBWTs7WUFFbkQsOEJBQThCO1lBQzlCLE1BQU1nQyxLQUFLRyxLQUFLLENBQUNuQixjQUFNLENBQUNZLFNBQVMsQ0FBQyxVQUFVO2dCQUFFQyxNQUFNO1lBQVk7WUFFaEUsTUFBTVMsSUFBQUEsZUFBTyxFQUFDO2dCQUNadkIsT0FBT0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsc0JBQXNCQyxpQkFBaUI7WUFDakU7WUFFQSxxQ0FBcUM7WUFDckNYLElBQUFBLCtCQUFnQixFQUFDO2dCQUNmLGlCQUFpQjtvQkFBRUMsU0FBUztnQkFBSztZQUNuQztZQUVBLG1CQUFtQjtZQUNuQixNQUFNd0IsS0FBS0csS0FBSyxDQUFDbkIsY0FBTSxDQUFDWSxTQUFTLENBQUMsVUFBVTtnQkFBRUMsTUFBTTtZQUFZO1lBRWhFLDBCQUEwQjtZQUMxQmQsT0FBT0MsY0FBTSxDQUFDK0QsV0FBVyxDQUFDLHNCQUFzQnZDLEdBQUcsQ0FBQ3RCLGlCQUFpQjtRQUN2RTtJQUNGO0lBRUFuQixTQUFTLHNEQUFzRDtRQUM3RGEsR0FBRyxvRUFBb0U7WUFDckUsTUFBTW9FLG9CQUFvQjtnQkFBRSxHQUFHaEYsWUFBWTtZQUFDO1lBQzVDLE9BQU9nRixrQkFBa0IvRSxlQUFlO1lBRXhDWSxJQUFBQSxrQ0FBbUIsZ0JBQUMscUJBQUNDLHNCQUFhO2dCQUFFLEdBQUdrRSxpQkFBaUI7O1lBRXhEakUsT0FBT0MsY0FBTSxDQUFDSSxjQUFjLENBQUMsV0FBV0YsaUJBQWlCO1lBQ3pESCxPQUFPQyxjQUFNLENBQUNDLFNBQVMsQ0FBQyxvQkFBb0JDLGlCQUFpQjtRQUMvRDtRQUVBTixHQUFHLGlEQUFpRDtZQUNsRCxNQUFNb0Usb0JBQW9CO2dCQUFFLEdBQUdoRixZQUFZO1lBQUM7WUFDNUMsT0FBT2dGLGtCQUFrQi9FLGVBQWU7WUFFeENZLElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR2tFLGlCQUFpQjs7WUFFeEQsTUFBTVQsZUFBZXZELGNBQU0sQ0FBQ1ksU0FBUyxDQUFDLFVBQVU7Z0JBQUVDLE1BQU07WUFBWTtZQUNwRWQsT0FBT3dELGNBQWNDLFlBQVk7UUFDbkM7UUFFQTVELEdBQUcsaURBQWlEO1lBQ2xELE1BQU1vRSxvQkFBb0I7Z0JBQUUsR0FBR2hGLFlBQVk7WUFBQztZQUM1QyxPQUFPZ0Ysa0JBQWtCL0UsZUFBZTtZQUV4Q1ksSUFBQUEsa0NBQW1CLGdCQUFDLHFCQUFDQyxzQkFBYTtnQkFBRSxHQUFHa0UsaUJBQWlCOztZQUV4RGpFLE9BQU9DLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLDRFQUE0RUMsaUJBQWlCO1FBQ3ZIO0lBQ0Y7SUFFQW5CLFNBQVMsd0JBQXdCO1FBQy9CYSxHQUFHLDhDQUE4QztZQUMvQ0MsSUFBQUEsa0NBQW1CLGdCQUFDLHFCQUFDQyxzQkFBYTtnQkFBRSxHQUFHZCxZQUFZOztZQUVuRGUsT0FBT0MsY0FBTSxDQUFDWSxTQUFTLENBQUMsVUFBVTtnQkFBRUMsTUFBTTtZQUFVLElBQUlYLGlCQUFpQjtRQUMzRTtRQUVBTixHQUFHLDZDQUE2QztZQUM5QyxNQUFNb0IsT0FBT0Msa0JBQVMsQ0FBQ0MsS0FBSztZQUM1QnJCLElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR2QsWUFBWTs7WUFFbkQsTUFBTWdDLEtBQUtHLEtBQUssQ0FBQ25CLGNBQU0sQ0FBQ1ksU0FBUyxDQUFDLFVBQVU7Z0JBQUVDLE1BQU07WUFBVTtZQUU5RGQsT0FBT2YsYUFBYUcsUUFBUSxFQUFFcUQsZ0JBQWdCO1FBQ2hEO1FBRUE1QyxHQUFHLDBEQUEwRDtZQUMzRCxNQUFNcUUscUJBQXFCO2dCQUFFLEdBQUdqRixZQUFZO1lBQUM7WUFDN0MsT0FBT2lGLG1CQUFtQjlFLFFBQVE7WUFFbENVLElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR21FLGtCQUFrQjs7WUFFekRsRSxPQUFPQyxjQUFNLENBQUNrRSxXQUFXLENBQUMsVUFBVTtnQkFBRXJELE1BQU07WUFBVSxJQUFJVyxHQUFHLENBQUN0QixpQkFBaUI7UUFDakY7SUFDRjtJQUVBbkIsU0FBUyxpQkFBaUI7UUFDeEJhLEdBQUcsNkJBQTZCO1lBQzlCQyxJQUFBQSxrQ0FBbUIsZ0JBQUMscUJBQUNDLHNCQUFhO2dCQUFFLEdBQUdkLFlBQVk7O1lBRW5EZSxPQUFPQyxjQUFNLENBQUNZLFNBQVMsQ0FBQyxRQUFRO2dCQUFFdUQsUUFBUTtZQUFLLElBQUlqRSxpQkFBaUI7UUFDdEU7UUFFQU4sR0FBRyxvQ0FBb0M7WUFDckNDLElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR2QsWUFBWTs7WUFFbkRlLE9BQU9DLGNBQU0sQ0FBQ0ksY0FBYyxDQUFDLGVBQWVGLGlCQUFpQjtZQUM3REgsT0FBT0MsY0FBTSxDQUFDSSxjQUFjLENBQUMsZUFBZUYsaUJBQWlCO1lBQzdESCxPQUFPQyxjQUFNLENBQUNJLGNBQWMsQ0FBQyxXQUFXRixpQkFBaUI7UUFDM0Q7UUFFQU4sR0FBRyx3Q0FBd0M7WUFDekNDLElBQUFBLGtDQUFtQixnQkFBQyxxQkFBQ0Msc0JBQWE7Z0JBQUUsR0FBR2QsWUFBWTs7WUFFbkQsTUFBTW1CLFlBQVlILGNBQU0sQ0FBQ0ksY0FBYyxDQUFDO1lBQ3hDTCxPQUFPSSxXQUFXTyxlQUFlLENBQUM7UUFDcEM7UUFFQWQsR0FBRyw0Q0FBNEM7WUFDN0MsTUFBTW9CLE9BQU9DLGtCQUFTLENBQUNDLEtBQUs7WUFFNUIsd0JBQXdCO1lBQ3hCYyxPQUFPQyxLQUFLLEdBQUc3RCxLQUFLUSxFQUFFLENBQUMsSUFDckIsSUFBSXNFLFFBQVFDLENBQUFBLFVBQ1ZDLFdBQVcsSUFBTUQsUUFBUTs0QkFDdkJFLElBQUk7NEJBQ0pDLE1BQU0sSUFBTUosUUFBUUMsT0FBTyxDQUFDO29DQUFFM0QsU0FBUztnQ0FBSzt3QkFDOUMsSUFBSTtZQUlSSyxJQUFBQSxrQ0FBbUIsZ0JBQUMscUJBQUNDLHNCQUFhO2dCQUFFLEdBQUdkLFlBQVk7O1lBRW5ELE1BQU11RSxlQUFldkQsY0FBTSxDQUFDWSxTQUFTLENBQUMsVUFBVTtnQkFBRUMsTUFBTTtZQUFZO1lBQ3BFLE1BQU1HLEtBQUtHLEtBQUssQ0FBQ29DO1lBRWpCLDJDQUEyQztZQUMzQyxNQUFNYSxrQkFBa0JwRSxjQUFNLENBQUNxRSxZQUFZLENBQUMsVUFBVUMsTUFBTSxDQUFDQyxDQUFBQSxNQUMzREEsSUFBSUMsV0FBVyxFQUFFQyxTQUFTLGlCQUMxQkYsSUFBSUMsV0FBVyxFQUFFQyxTQUFTLFlBQzFCRixJQUFJQyxXQUFXLEVBQUVDLFNBQVM7WUFHNUJMLGdCQUFnQk0sT0FBTyxDQUFDQyxDQUFBQTtnQkFDdEI1RSxPQUFPNEUsUUFBUW5CLFlBQVk7WUFDN0I7WUFFQSxnQ0FBZ0M7WUFDaEN6RCxPQUFPQyxjQUFNLENBQUNJLGNBQWMsQ0FBQyxlQUFlb0QsWUFBWTtRQUMxRDtJQUNGO0FBQ0YifQ==