{"version":3,"names":["cov_5tff2rat8","actualCoverage","s","POST","request","f","user","_server1","requireAuthSession","body","json","validation","_careschemas","careValidation","validateQuickCareLog","careDate","Date","b","success","console","error","issues","_server","NextResponse","message","details","status","result","_careservice","CareService","quickCareLog","id","data","careHistory"],"sources":["/Users/stefanbekker/projects/fancy-planties/src/app/api/care/quick-log/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { requireAuthSession } from '@/lib/auth/server';\nimport { CareService } from '@/lib/services/care-service';\nimport { careValidation } from '@/lib/validation/care-schemas';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { user } = await requireAuthSession();\n    const body = await request.json();\n    \n    // Validate the quick care log data\n    const validation = careValidation.validateQuickCareLog({\n      ...body,\n      careDate: new Date(body.careDate || new Date()),\n    });\n    \n    if (!validation.success) {\n      console.error('Quick care validation error:', validation.error.issues);\n      return NextResponse.json(\n        { \n          error: validation.error.issues[0]?.message || 'Invalid quick care data',\n          details: validation.error.issues \n        },\n        { status: 400 }\n      );\n    }\n    \n    const result = await CareService.quickCareLog(user.id, validation.data);\n    \n    if (!result.success) {\n      return NextResponse.json(\n        { error: result.error },\n        { status: 400 }\n      );\n    }\n    \n    return NextResponse.json(result.careHistory);\n  } catch (error) {\n    console.error('Error with quick care log:', error);\n    return NextResponse.json(\n      { error: 'Failed to log quick care' },\n      { status: 500 }\n    );\n  }\n}"],"mappings":"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","ignoreList":[]}