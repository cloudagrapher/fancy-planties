{"version":3,"sources":["/Users/stefanbekker/projects/fancy-planties/src/components/care/CareHistoryTimeline.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport type { EnhancedCareHistory } from '@/lib/types/care-types';\nimport type { EnhancedPlantInstance } from '@/lib/types/plant-instance-types';\nimport { careHelpers } from '@/lib/types/care-types';\n\ninterface CareHistoryTimelineProps {\n  careHistory: EnhancedCareHistory[];\n  plantInstance: EnhancedPlantInstance;\n  limit?: number;\n  showPlantName?: boolean;\n}\n\nexport default function CareHistoryTimeline({ \n  careHistory,\n  plantInstance,\n  limit = 10, \n  showPlantName = false \n}: CareHistoryTimelineProps) {\n  // Display limited history if limit is specified\n  const displayHistory = limit ? careHistory.slice(0, limit) : careHistory;\n\n  if (displayHistory.length === 0) {\n    return (\n      <div className=\"text-center py-8\">\n        <div className=\"text-4xl mb-4\">üìù</div>\n        <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No Care History</h3>\n        <p className=\"text-gray-600 text-sm\">\n          Start logging care activities to see your plant&apos;s care timeline.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-4\">\n      <h3 className=\"text-lg font-semibold text-gray-900\">Care History</h3>\n      \n      <div className=\"relative\">\n        {/* Timeline line */}\n        <div className=\"absolute left-5 top-0 bottom-0 w-0.5 bg-gray-200\"></div>\n        \n        <div className=\"space-y-6\">\n          {displayHistory.map((care) => {\n            const careTypeDisplay = careHelpers.getCareTypeDisplay(care.careType as 'fertilizer' | 'water' | 'repot' | 'prune' | 'inspect' | 'other');\n\n            \n            return (\n              <div key={care.id} className=\"relative flex items-start space-x-4\">\n                {/* Timeline dot */}\n                <div className={`\n                  relative z-10 flex items-center justify-center w-10 h-10 rounded-full border-2 bg-white\n                  ${careTypeDisplay.color.includes('green') ? 'border-green-500' :\n                    careTypeDisplay.color.includes('blue') ? 'border-blue-500' :\n                    careTypeDisplay.color.includes('amber') ? 'border-amber-500' :\n                    careTypeDisplay.color.includes('purple') ? 'border-purple-500' :\n                    careTypeDisplay.color.includes('indigo') ? 'border-indigo-500' :\n                    'border-gray-500'\n                  }\n                `}>\n                  <span className=\"text-lg\">{careTypeDisplay.icon}</span>\n                </div>\n\n                {/* Care event content */}\n                <div className=\"flex-1 min-w-0 pb-6\">\n                  <div className=\"flex items-center justify-between mb-1\">\n                    <h4 className=\"text-sm font-medium text-gray-900\">\n                      {careTypeDisplay.label}\n                      {showPlantName && care.plantInstance && (\n                        <span className=\"text-gray-500 ml-2\">\n                          ‚Ä¢ {care.plantInstance.nickname || care.plantInstance.plant?.commonName}\n                        </span>\n                      )}\n                    </h4>\n                    <time className=\"text-xs text-gray-500\">\n                      {care.formattedDate}\n                    </time>\n                  </div>\n\n                  <p className=\"text-sm text-gray-600 mb-2\">\n                    {careTypeDisplay.description}\n                  </p>\n\n                  {/* Care details */}\n                  <div className=\"space-y-1\">\n                    {care.fertilizerType && (\n                      <p className=\"text-xs text-gray-500\">\n                        <span className=\"font-medium\">Fertilizer:</span> {care.fertilizerType}\n                      </p>\n                    )}\n                    {care.potSize && (\n                      <p className=\"text-xs text-gray-500\">\n                        <span className=\"font-medium\">Pot Size:</span> {care.potSize}\n                      </p>\n                    )}\n                    {care.soilType && (\n                      <p className=\"text-xs text-gray-500\">\n                        <span className=\"font-medium\">Soil Type:</span> {care.soilType}\n                      </p>\n                    )}\n                    {care.notes && (\n                      <p className=\"text-xs text-gray-700 bg-gray-50 rounded p-2 mt-2\">\n                        {care.notes}\n                      </p>\n                    )}\n                  </div>\n\n                  {/* Images */}\n                  {care.images && care.images.length > 0 && (\n                    <div className=\"flex space-x-2 mt-3\">\n                      {care.images.slice(0, 3).map((image, imgIndex) => (\n                        <img\n                          key={imgIndex}\n                          src={image}\n                          alt={`Care photo ${imgIndex + 1}`}\n                          className=\"w-12 h-12 rounded-lg object-cover border border-gray-200\"\n                        />\n                      ))}\n                      {care.images.length > 3 && (\n                        <div className=\"w-12 h-12 rounded-lg bg-gray-100 border border-gray-200 flex items-center justify-center\">\n                          <span className=\"text-xs text-gray-500\">+{care.images.length - 3}</span>\n                        </div>\n                      )}\n                    </div>\n                  )}\n\n                  {/* Care timing indicator */}\n                  <div className=\"flex items-center space-x-2 mt-2\">\n                    <div className={`\n                      w-2 h-2 rounded-full\n                      ${care.daysSinceCare <= 1 ? 'bg-green-400' :\n                        care.daysSinceCare <= 7 ? 'bg-yellow-400' :\n                        'bg-gray-400'\n                      }\n                    `}></div>\n                    <span className=\"text-xs text-gray-500\">\n                      {care.daysSinceCare === 0 ? 'Today' :\n                       care.daysSinceCare === 1 ? 'Yesterday' :\n                       `${care.daysSinceCare} days ago`}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {careHistory.length > limit && (\n        <div className=\"text-center pt-4 border-t border-gray-200\">\n          <p className=\"text-sm text-gray-500\">\n            Showing {displayHistory.length} of {careHistory.length} care events\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":["CareHistoryTimeline","careHistory","plantInstance","limit","showPlantName","displayHistory","slice","length","div","className","h3","p","map","care","careTypeDisplay","careHelpers","getCareTypeDisplay","careType","color","includes","span","icon","h4","label","nickname","plant","commonName","time","formattedDate","description","fertilizerType","potSize","soilType","notes","images","image","imgIndex","img","src","alt","daysSinceCare","id"],"mappings":"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"}