ec7bbcfe0d75124a4a41ebdd79c437b8
/**
 * @jest-environment node
 */ "use strict";
// Mock dependencies first, before importing the route
jest.mock('@/lib/auth/middleware', ()=>({
        requireAuth: jest.fn()
    }));
jest.mock('@/lib/services/email-verification-cleanup', ()=>({
        emailVerificationCleanupService: {
            getSystemStatus: jest.fn(),
            getCleanupStats: jest.fn(),
            forceCleanup: jest.fn()
        }
    }));
jest.mock('@/lib/services/email-service-monitor', ()=>({
        emailServiceMonitor: {
            getStats: jest.fn(),
            getHealthStatus: jest.fn(),
            getRecentEvents: jest.fn(),
            getErrorSummary: jest.fn(),
            isQuotaNearLimit: jest.fn(),
            forceReset: jest.fn()
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _server = require("next/server");
const _route = require("../../../app/api/admin/email-verification-monitor/route");
const _middleware = require("../../../lib/auth/middleware");
const _emailverificationcleanup = require("../../../lib/services/email-verification-cleanup");
const _emailservicemonitor = require("../../../lib/services/email-service-monitor");
const mockRequireAuth = _middleware.requireAuth;
const mockCleanupService = _emailverificationcleanup.emailVerificationCleanupService;
const mockEmailServiceMonitor = _emailservicemonitor.emailServiceMonitor;
describe('/api/admin/email-verification-monitor', ()=>{
    const mockUser = {
        id: 1,
        email: 'admin@example.com',
        name: 'Admin'
    };
    beforeEach(()=>{
        jest.clearAllMocks();
        // Mock authentication
        mockRequireAuth.mockResolvedValue({
            user: mockUser
        });
        // Mock system status
        mockCleanupService.getSystemStatus.mockResolvedValue({
            verificationCodes: {
                totalActive: 10,
                expiredCount: 2,
                highAttemptCount: 1
            },
            rateLimits: {
                verificationAttempts: 5,
                resendRequests: 3,
                emailVerificationActivity: 8,
                resendCooldowns: 1,
                securityEvents: 0
            },
            emailService: {
                health: 'healthy',
                quotaUsage: 45,
                successRate: 98.5,
                totalSent: 200,
                totalFailed: 3,
                averageResponseTime: 150,
                issues: [],
                recommendations: []
            },
            cleanup: {
                lastCleanup: Date.now() - 30 * 60 * 1000,
                isRunning: false,
                nextCleanupDue: Date.now() + 30 * 60 * 1000
            }
        });
        // Mock email service monitor
        mockEmailServiceMonitor.getStats.mockReturnValue({
            totalSent: 200,
            totalFailed: 3,
            quotaUsed: 45,
            quotaLimit: 100,
            errorsByType: {
                API_ERROR: 2,
                NETWORK_ERROR: 1
            },
            successRate: 98.5,
            averageResponseTime: 150,
            lastResetTime: Date.now() - 2 * 60 * 60 * 1000
        });
        mockEmailServiceMonitor.getHealthStatus.mockReturnValue({
            status: 'healthy',
            issues: [],
            recommendations: []
        });
        mockEmailServiceMonitor.getRecentEvents.mockReturnValue([
            {
                type: 'success',
                timestamp: Date.now() - 5 * 60 * 1000,
                responseTime: 120
            },
            {
                type: 'error',
                timestamp: Date.now() - 10 * 60 * 1000,
                responseTime: 300,
                error: {
                    message: 'API Error',
                    code: 'API_ERROR'
                }
            }
        ]);
        mockEmailServiceMonitor.getErrorSummary.mockReturnValue({
            totalErrors: 3,
            errorsByType: {
                API_ERROR: 2,
                NETWORK_ERROR: 1
            },
            recentErrors: [
                {
                    type: 'error',
                    timestamp: Date.now() - 10 * 60 * 1000,
                    responseTime: 300,
                    error: {
                        message: 'API Error',
                        code: 'API_ERROR'
                    }
                }
            ],
            criticalErrors: []
        });
        mockEmailServiceMonitor.isQuotaNearLimit.mockReturnValue(false);
        mockCleanupService.getCleanupStats.mockReturnValue({
            lastCleanup: Date.now() - 30 * 60 * 1000,
            isRunning: false,
            recentStats: [
                {
                    expiredCodes: 5,
                    rateLimitData: 3,
                    timestamp: Date.now() - 30 * 60 * 1000
                }
            ],
            totalExpiredCodes: 25,
            totalRateLimitData: 15
        });
    });
    describe('GET', ()=>{
        it('should return comprehensive monitoring data', async ()=>{
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor');
            const response = await (0, _route.GET)(request);
            expect(response.status).toBe(200);
            const data = await response.json();
            expect(data).toMatchObject({
                timestamp: expect.any(Number),
                systemStatus: expect.objectContaining({
                    verificationCodes: expect.any(Object),
                    rateLimits: expect.any(Object),
                    emailService: expect.any(Object),
                    cleanup: expect.any(Object)
                }),
                emailService: expect.objectContaining({
                    stats: expect.any(Object),
                    health: expect.any(Object),
                    recentEvents: expect.any(Array),
                    errorSummary: expect.any(Object),
                    quotaWarning: expect.any(Boolean),
                    quotaCritical: expect.any(Boolean)
                }),
                cleanup: expect.any(Object),
                alerts: expect.any(Array)
            });
            expect(mockRequireAuth).toHaveBeenCalledWith();
            expect(mockCleanupService.getSystemStatus).toHaveBeenCalledWith();
            expect(mockEmailServiceMonitor.getStats).toHaveBeenCalledWith();
            expect(mockEmailServiceMonitor.getHealthStatus).toHaveBeenCalledWith();
            expect(mockEmailServiceMonitor.getRecentEvents).toHaveBeenCalledWith(50);
            expect(mockEmailServiceMonitor.getErrorSummary).toHaveBeenCalledWith();
        });
        it('should generate alerts for critical conditions', async ()=>{
            // Mock critical email service health
            mockCleanupService.getSystemStatus.mockResolvedValue({
                verificationCodes: {
                    totalActive: 10,
                    expiredCount: 2,
                    highAttemptCount: 1
                },
                rateLimits: {
                    verificationAttempts: 5,
                    resendRequests: 3,
                    emailVerificationActivity: 8,
                    resendCooldowns: 1,
                    securityEvents: 15
                },
                emailService: {
                    health: 'critical',
                    quotaUsage: 96,
                    successRate: 75,
                    totalSent: 200,
                    totalFailed: 50,
                    averageResponseTime: 150,
                    issues: [
                        'Critical quota usage',
                        'Low success rate'
                    ],
                    recommendations: [
                        'Immediate action required'
                    ]
                },
                cleanup: {
                    lastCleanup: Date.now() - 30 * 60 * 1000,
                    isRunning: false,
                    nextCleanupDue: Date.now() + 30 * 60 * 1000
                }
            });
            mockEmailServiceMonitor.getHealthStatus.mockReturnValue({
                status: 'critical',
                issues: [
                    'Critical quota usage',
                    'Low success rate'
                ],
                recommendations: [
                    'Immediate action required'
                ]
            });
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor');
            const response = await (0, _route.GET)(request);
            expect(response.status).toBe(200);
            const data = await response.json();
            expect(data.alerts.length).toBeGreaterThan(0);
            // Should have critical alerts
            const criticalAlerts = data.alerts.filter((alert)=>alert.level === 'critical');
            expect(criticalAlerts.length).toBeGreaterThan(0);
            // Should have quota alert
            const quotaAlert = data.alerts.find((alert)=>alert.message.includes('quota'));
            expect(quotaAlert).toBeDefined();
            expect(quotaAlert.level).toBe('critical');
            // Should have success rate alert
            const successRateAlert = data.alerts.find((alert)=>alert.message.includes('success rate'));
            expect(successRateAlert).toBeDefined();
            expect(successRateAlert.level).toBe('critical');
            // Should have security events alert
            const securityAlert = data.alerts.find((alert)=>alert.message.includes('security events'));
            expect(securityAlert).toBeDefined();
            expect(securityAlert.level).toBe('warning');
        });
        it('should handle authentication errors', async ()=>{
            mockRequireAuth.mockRejectedValue(new Error('Unauthorized'));
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor');
            const response = await (0, _route.GET)(request);
            expect(response.status).toBe(500);
            const data = await response.json();
            expect(data.error).toBe('Failed to fetch monitoring data');
        });
        it('should handle system status errors', async ()=>{
            mockCleanupService.getSystemStatus.mockRejectedValue(new Error('Database error'));
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor');
            const response = await (0, _route.GET)(request);
            expect(response.status).toBe(500);
            const data = await response.json();
            expect(data.error).toBe('Failed to fetch monitoring data');
            expect(data.details).toBe('Database error');
        });
    });
    describe('POST', ()=>{
        it('should handle force-cleanup action', async ()=>{
            const cleanupResult = {
                expiredCodes: 10,
                rateLimitData: 5,
                timestamp: Date.now()
            };
            mockCleanupService.forceCleanup.mockResolvedValue(cleanupResult);
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor', {
                method: 'POST',
                body: JSON.stringify({
                    action: 'force-cleanup'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(200);
            const data = await response.json();
            expect(data).toEqual({
                success: true,
                message: 'Cleanup completed successfully',
                result: cleanupResult
            });
            expect(mockCleanupService.forceCleanup).toHaveBeenCalledWith();
        });
        it('should handle reset-email-stats action', async ()=>{
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor', {
                method: 'POST',
                body: JSON.stringify({
                    action: 'reset-email-stats'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(200);
            const data = await response.json();
            expect(data).toEqual({
                success: true,
                message: 'Email service statistics reset successfully'
            });
            expect(mockEmailServiceMonitor.forceReset).toHaveBeenCalledWith();
        });
        it('should handle get-error-details action', async ()=>{
            const errorDetails = {
                totalErrors: 5,
                errorsByType: {
                    API_ERROR: 3,
                    NETWORK_ERROR: 2
                },
                recentErrors: [],
                criticalErrors: []
            };
            const recentEvents = [
                {
                    type: 'error',
                    timestamp: Date.now(),
                    responseTime: 200,
                    error: {
                        message: 'Error',
                        code: 'API_ERROR'
                    }
                }
            ];
            mockEmailServiceMonitor.getErrorSummary.mockReturnValue(errorDetails);
            mockEmailServiceMonitor.getRecentEvents.mockReturnValue(recentEvents);
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor', {
                method: 'POST',
                body: JSON.stringify({
                    action: 'get-error-details'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(200);
            const data = await response.json();
            expect(data).toEqual({
                success: true,
                errorDetails,
                recentEvents
            });
            expect(mockEmailServiceMonitor.getErrorSummary).toHaveBeenCalledWith();
            expect(mockEmailServiceMonitor.getRecentEvents).toHaveBeenCalledWith(200);
        });
        it('should handle invalid action', async ()=>{
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor', {
                method: 'POST',
                body: JSON.stringify({
                    action: 'invalid-action'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(400);
            const data = await response.json();
            expect(data.error).toBe('Invalid action specified');
        });
        it('should handle authentication errors', async ()=>{
            mockRequireAuth.mockRejectedValue(new Error('Unauthorized'));
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor', {
                method: 'POST',
                body: JSON.stringify({
                    action: 'force-cleanup'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(500);
            const data = await response.json();
            expect(data.error).toBe('Failed to perform admin action');
        });
        it('should handle cleanup errors', async ()=>{
            mockCleanupService.forceCleanup.mockRejectedValue(new Error('Cleanup failed'));
            const request = new _server.NextRequest('http://localhost/api/admin/email-verification-monitor', {
                method: 'POST',
                body: JSON.stringify({
                    action: 'force-cleanup'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const response = await (0, _route.POST)(request);
            expect(response.status).toBe(500);
            const data = await response.json();
            expect(data.error).toBe('Failed to perform admin action');
            expect(data.details).toBe('Cleanup failed');
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdGVmYW5iZWtrZXIvcHJvamVjdHMvZmFuY3ktcGxhbnRpZXMvc3JjL19fdGVzdHNfXy9hcGkvYWRtaW4vZW1haWwtdmVyaWZpY2F0aW9uLW1vbml0b3IudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBqZXN0LWVudmlyb25tZW50IG5vZGVcbiAqL1xuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJztcblxuLy8gTW9jayBkZXBlbmRlbmNpZXMgZmlyc3QsIGJlZm9yZSBpbXBvcnRpbmcgdGhlIHJvdXRlXG5qZXN0Lm1vY2soJ0AvbGliL2F1dGgvbWlkZGxld2FyZScsICgpID0+ICh7XG4gIHJlcXVpcmVBdXRoOiBqZXN0LmZuKCksXG59KSk7XG5qZXN0Lm1vY2soJ0AvbGliL3NlcnZpY2VzL2VtYWlsLXZlcmlmaWNhdGlvbi1jbGVhbnVwJywgKCkgPT4gKHtcbiAgZW1haWxWZXJpZmljYXRpb25DbGVhbnVwU2VydmljZToge1xuICAgIGdldFN5c3RlbVN0YXR1czogamVzdC5mbigpLFxuICAgIGdldENsZWFudXBTdGF0czogamVzdC5mbigpLFxuICAgIGZvcmNlQ2xlYW51cDogamVzdC5mbigpLFxuICB9LFxufSkpO1xuamVzdC5tb2NrKCdAL2xpYi9zZXJ2aWNlcy9lbWFpbC1zZXJ2aWNlLW1vbml0b3InLCAoKSA9PiAoe1xuICBlbWFpbFNlcnZpY2VNb25pdG9yOiB7XG4gICAgZ2V0U3RhdHM6IGplc3QuZm4oKSxcbiAgICBnZXRIZWFsdGhTdGF0dXM6IGplc3QuZm4oKSxcbiAgICBnZXRSZWNlbnRFdmVudHM6IGplc3QuZm4oKSxcbiAgICBnZXRFcnJvclN1bW1hcnk6IGplc3QuZm4oKSxcbiAgICBpc1F1b3RhTmVhckxpbWl0OiBqZXN0LmZuKCksXG4gICAgZm9yY2VSZXNldDogamVzdC5mbigpLFxuICB9LFxufSkpO1xuXG4vLyBOb3cgaW1wb3J0IHRoZSByb3V0ZSBhbmQgZGVwZW5kZW5jaWVzXG5pbXBvcnQgeyBHRVQsIFBPU1QgfSBmcm9tICdAL2FwcC9hcGkvYWRtaW4vZW1haWwtdmVyaWZpY2F0aW9uLW1vbml0b3Ivcm91dGUnO1xuaW1wb3J0IHsgcmVxdWlyZUF1dGggfSBmcm9tICdAL2xpYi9hdXRoL21pZGRsZXdhcmUnO1xuaW1wb3J0IHsgZW1haWxWZXJpZmljYXRpb25DbGVhbnVwU2VydmljZSB9IGZyb20gJ0AvbGliL3NlcnZpY2VzL2VtYWlsLXZlcmlmaWNhdGlvbi1jbGVhbnVwJztcbmltcG9ydCB7IGVtYWlsU2VydmljZU1vbml0b3IgfSBmcm9tICdAL2xpYi9zZXJ2aWNlcy9lbWFpbC1zZXJ2aWNlLW1vbml0b3InO1xuXG5jb25zdCBtb2NrUmVxdWlyZUF1dGggPSByZXF1aXJlQXV0aCBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiByZXF1aXJlQXV0aD47XG5jb25zdCBtb2NrQ2xlYW51cFNlcnZpY2UgPSBlbWFpbFZlcmlmaWNhdGlvbkNsZWFudXBTZXJ2aWNlIGFzIGplc3QuTW9ja2VkPHR5cGVvZiBlbWFpbFZlcmlmaWNhdGlvbkNsZWFudXBTZXJ2aWNlPjtcbmNvbnN0IG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yID0gZW1haWxTZXJ2aWNlTW9uaXRvciBhcyBqZXN0Lk1vY2tlZDx0eXBlb2YgZW1haWxTZXJ2aWNlTW9uaXRvcj47XG5cbmRlc2NyaWJlKCcvYXBpL2FkbWluL2VtYWlsLXZlcmlmaWNhdGlvbi1tb25pdG9yJywgKCkgPT4ge1xuICBjb25zdCBtb2NrVXNlciA9IHsgaWQ6IDEsIGVtYWlsOiAnYWRtaW5AZXhhbXBsZS5jb20nLCBuYW1lOiAnQWRtaW4nIH07XG4gIFxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBcbiAgICAvLyBNb2NrIGF1dGhlbnRpY2F0aW9uXG4gICAgbW9ja1JlcXVpcmVBdXRoLm1vY2tSZXNvbHZlZFZhbHVlKHsgdXNlcjogbW9ja1VzZXIgfSk7XG4gICAgXG4gICAgLy8gTW9jayBzeXN0ZW0gc3RhdHVzXG4gICAgbW9ja0NsZWFudXBTZXJ2aWNlLmdldFN5c3RlbVN0YXR1cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICB2ZXJpZmljYXRpb25Db2Rlczoge1xuICAgICAgICB0b3RhbEFjdGl2ZTogMTAsXG4gICAgICAgIGV4cGlyZWRDb3VudDogMixcbiAgICAgICAgaGlnaEF0dGVtcHRDb3VudDogMSxcbiAgICAgIH0sXG4gICAgICByYXRlTGltaXRzOiB7XG4gICAgICAgIHZlcmlmaWNhdGlvbkF0dGVtcHRzOiA1LFxuICAgICAgICByZXNlbmRSZXF1ZXN0czogMyxcbiAgICAgICAgZW1haWxWZXJpZmljYXRpb25BY3Rpdml0eTogOCxcbiAgICAgICAgcmVzZW5kQ29vbGRvd25zOiAxLFxuICAgICAgICBzZWN1cml0eUV2ZW50czogMCxcbiAgICAgIH0sXG4gICAgICBlbWFpbFNlcnZpY2U6IHtcbiAgICAgICAgaGVhbHRoOiAnaGVhbHRoeScsXG4gICAgICAgIHF1b3RhVXNhZ2U6IDQ1LFxuICAgICAgICBzdWNjZXNzUmF0ZTogOTguNSxcbiAgICAgICAgdG90YWxTZW50OiAyMDAsXG4gICAgICAgIHRvdGFsRmFpbGVkOiAzLFxuICAgICAgICBhdmVyYWdlUmVzcG9uc2VUaW1lOiAxNTAsXG4gICAgICAgIGlzc3VlczogW10sXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogW10sXG4gICAgICB9LFxuICAgICAgY2xlYW51cDoge1xuICAgICAgICBsYXN0Q2xlYW51cDogRGF0ZS5ub3coKSAtIDMwICogNjAgKiAxMDAwLCAvLyAzMCBtaW51dGVzIGFnb1xuICAgICAgICBpc1J1bm5pbmc6IGZhbHNlLFxuICAgICAgICBuZXh0Q2xlYW51cER1ZTogRGF0ZS5ub3coKSArIDMwICogNjAgKiAxMDAwLCAvLyAzMCBtaW51dGVzIGZyb20gbm93XG4gICAgICB9LFxuICAgIH0pO1xuICAgIFxuICAgIC8vIE1vY2sgZW1haWwgc2VydmljZSBtb25pdG9yXG4gICAgbW9ja0VtYWlsU2VydmljZU1vbml0b3IuZ2V0U3RhdHMubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIHRvdGFsU2VudDogMjAwLFxuICAgICAgdG90YWxGYWlsZWQ6IDMsXG4gICAgICBxdW90YVVzZWQ6IDQ1LFxuICAgICAgcXVvdGFMaW1pdDogMTAwLFxuICAgICAgZXJyb3JzQnlUeXBlOiB7IEFQSV9FUlJPUjogMiwgTkVUV09SS19FUlJPUjogMSB9LFxuICAgICAgc3VjY2Vzc1JhdGU6IDk4LjUsXG4gICAgICBhdmVyYWdlUmVzcG9uc2VUaW1lOiAxNTAsXG4gICAgICBsYXN0UmVzZXRUaW1lOiBEYXRlLm5vdygpIC0gMiAqIDYwICogNjAgKiAxMDAwLCAvLyAyIGhvdXJzIGFnb1xuICAgIH0pO1xuICAgIFxuICAgIG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yLmdldEhlYWx0aFN0YXR1cy5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgc3RhdHVzOiAnaGVhbHRoeScsXG4gICAgICBpc3N1ZXM6IFtdLFxuICAgICAgcmVjb21tZW5kYXRpb25zOiBbXSxcbiAgICB9KTtcbiAgICBcbiAgICBtb2NrRW1haWxTZXJ2aWNlTW9uaXRvci5nZXRSZWNlbnRFdmVudHMubW9ja1JldHVyblZhbHVlKFtcbiAgICAgIHtcbiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCkgLSA1ICogNjAgKiAxMDAwLFxuICAgICAgICByZXNwb25zZVRpbWU6IDEyMCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSAtIDEwICogNjAgKiAxMDAwLFxuICAgICAgICByZXNwb25zZVRpbWU6IDMwMCxcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0FQSSBFcnJvcicsIGNvZGU6ICdBUElfRVJST1InIH0sXG4gICAgICB9LFxuICAgIF0pO1xuICAgIFxuICAgIG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yLmdldEVycm9yU3VtbWFyeS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgdG90YWxFcnJvcnM6IDMsXG4gICAgICBlcnJvcnNCeVR5cGU6IHsgQVBJX0VSUk9SOiAyLCBORVRXT1JLX0VSUk9SOiAxIH0sXG4gICAgICByZWNlbnRFcnJvcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIC0gMTAgKiA2MCAqIDEwMDAsXG4gICAgICAgICAgcmVzcG9uc2VUaW1lOiAzMDAsXG4gICAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0FQSSBFcnJvcicsIGNvZGU6ICdBUElfRVJST1InIH0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgY3JpdGljYWxFcnJvcnM6IFtdLFxuICAgIH0pO1xuICAgIFxuICAgIG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yLmlzUXVvdGFOZWFyTGltaXQubW9ja1JldHVyblZhbHVlKGZhbHNlKTtcbiAgICBcbiAgICBtb2NrQ2xlYW51cFNlcnZpY2UuZ2V0Q2xlYW51cFN0YXRzLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBsYXN0Q2xlYW51cDogRGF0ZS5ub3coKSAtIDMwICogNjAgKiAxMDAwLFxuICAgICAgaXNSdW5uaW5nOiBmYWxzZSxcbiAgICAgIHJlY2VudFN0YXRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBleHBpcmVkQ29kZXM6IDUsXG4gICAgICAgICAgcmF0ZUxpbWl0RGF0YTogMyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCkgLSAzMCAqIDYwICogMTAwMCxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICB0b3RhbEV4cGlyZWRDb2RlczogMjUsXG4gICAgICB0b3RhbFJhdGVMaW1pdERhdGE6IDE1LFxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGNvbXByZWhlbnNpdmUgbW9uaXRvcmluZyBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdC9hcGkvYWRtaW4vZW1haWwtdmVyaWZpY2F0aW9uLW1vbml0b3InKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBleHBlY3QoZGF0YSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIHRpbWVzdGFtcDogZXhwZWN0LmFueShOdW1iZXIpLFxuICAgICAgICBzeXN0ZW1TdGF0dXM6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB2ZXJpZmljYXRpb25Db2RlczogZXhwZWN0LmFueShPYmplY3QpLFxuICAgICAgICAgIHJhdGVMaW1pdHM6IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgICAgICBlbWFpbFNlcnZpY2U6IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgICAgICBjbGVhbnVwOiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgIH0pLFxuICAgICAgICBlbWFpbFNlcnZpY2U6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBzdGF0czogZXhwZWN0LmFueShPYmplY3QpLFxuICAgICAgICAgIGhlYWx0aDogZXhwZWN0LmFueShPYmplY3QpLFxuICAgICAgICAgIHJlY2VudEV2ZW50czogZXhwZWN0LmFueShBcnJheSksXG4gICAgICAgICAgZXJyb3JTdW1tYXJ5OiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgICAgcXVvdGFXYXJuaW5nOiBleHBlY3QuYW55KEJvb2xlYW4pLFxuICAgICAgICAgIHF1b3RhQ3JpdGljYWw6IGV4cGVjdC5hbnkoQm9vbGVhbiksXG4gICAgICAgIH0pLFxuICAgICAgICBjbGVhbnVwOiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgIGFsZXJ0czogZXhwZWN0LmFueShBcnJheSksXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1vY2tSZXF1aXJlQXV0aCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoKTtcbiAgICAgIGV4cGVjdChtb2NrQ2xlYW51cFNlcnZpY2UuZ2V0U3lzdGVtU3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgpO1xuICAgICAgZXhwZWN0KG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yLmdldFN0YXRzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgpO1xuICAgICAgZXhwZWN0KG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yLmdldEhlYWx0aFN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoKTtcbiAgICAgIGV4cGVjdChtb2NrRW1haWxTZXJ2aWNlTW9uaXRvci5nZXRSZWNlbnRFdmVudHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDUwKTtcbiAgICAgIGV4cGVjdChtb2NrRW1haWxTZXJ2aWNlTW9uaXRvci5nZXRFcnJvclN1bW1hcnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIGFsZXJ0cyBmb3IgY3JpdGljYWwgY29uZGl0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgY3JpdGljYWwgZW1haWwgc2VydmljZSBoZWFsdGhcbiAgICAgIG1vY2tDbGVhbnVwU2VydmljZS5nZXRTeXN0ZW1TdGF0dXMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICB2ZXJpZmljYXRpb25Db2RlczogeyB0b3RhbEFjdGl2ZTogMTAsIGV4cGlyZWRDb3VudDogMiwgaGlnaEF0dGVtcHRDb3VudDogMSB9LFxuICAgICAgICByYXRlTGltaXRzOiB7IHZlcmlmaWNhdGlvbkF0dGVtcHRzOiA1LCByZXNlbmRSZXF1ZXN0czogMywgZW1haWxWZXJpZmljYXRpb25BY3Rpdml0eTogOCwgcmVzZW5kQ29vbGRvd25zOiAxLCBzZWN1cml0eUV2ZW50czogMTUgfSxcbiAgICAgICAgZW1haWxTZXJ2aWNlOiB7XG4gICAgICAgICAgaGVhbHRoOiAnY3JpdGljYWwnLFxuICAgICAgICAgIHF1b3RhVXNhZ2U6IDk2LFxuICAgICAgICAgIHN1Y2Nlc3NSYXRlOiA3NSxcbiAgICAgICAgICB0b3RhbFNlbnQ6IDIwMCxcbiAgICAgICAgICB0b3RhbEZhaWxlZDogNTAsXG4gICAgICAgICAgYXZlcmFnZVJlc3BvbnNlVGltZTogMTUwLFxuICAgICAgICAgIGlzc3VlczogWydDcml0aWNhbCBxdW90YSB1c2FnZScsICdMb3cgc3VjY2VzcyByYXRlJ10sXG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbJ0ltbWVkaWF0ZSBhY3Rpb24gcmVxdWlyZWQnXSxcbiAgICAgICAgfSxcbiAgICAgICAgY2xlYW51cDogeyBsYXN0Q2xlYW51cDogRGF0ZS5ub3coKSAtIDMwICogNjAgKiAxMDAwLCBpc1J1bm5pbmc6IGZhbHNlLCBuZXh0Q2xlYW51cER1ZTogRGF0ZS5ub3coKSArIDMwICogNjAgKiAxMDAwIH0sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbW9ja0VtYWlsU2VydmljZU1vbml0b3IuZ2V0SGVhbHRoU3RhdHVzLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHN0YXR1czogJ2NyaXRpY2FsJyxcbiAgICAgICAgaXNzdWVzOiBbJ0NyaXRpY2FsIHF1b3RhIHVzYWdlJywgJ0xvdyBzdWNjZXNzIHJhdGUnXSxcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbJ0ltbWVkaWF0ZSBhY3Rpb24gcmVxdWlyZWQnXSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0L2FwaS9hZG1pbi9lbWFpbC12ZXJpZmljYXRpb24tbW9uaXRvcicpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIFxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGV4cGVjdChkYXRhLmFsZXJ0cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGhhdmUgY3JpdGljYWwgYWxlcnRzXG4gICAgICBjb25zdCBjcml0aWNhbEFsZXJ0cyA9IGRhdGEuYWxlcnRzLmZpbHRlcigoYWxlcnQ6IGFueSkgPT4gYWxlcnQubGV2ZWwgPT09ICdjcml0aWNhbCcpO1xuICAgICAgZXhwZWN0KGNyaXRpY2FsQWxlcnRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgaGF2ZSBxdW90YSBhbGVydFxuICAgICAgY29uc3QgcXVvdGFBbGVydCA9IGRhdGEuYWxlcnRzLmZpbmQoKGFsZXJ0OiBhbnkpID0+IGFsZXJ0Lm1lc3NhZ2UuaW5jbHVkZXMoJ3F1b3RhJykpO1xuICAgICAgZXhwZWN0KHF1b3RhQWxlcnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocXVvdGFBbGVydC5sZXZlbCkudG9CZSgnY3JpdGljYWwnKTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGhhdmUgc3VjY2VzcyByYXRlIGFsZXJ0XG4gICAgICBjb25zdCBzdWNjZXNzUmF0ZUFsZXJ0ID0gZGF0YS5hbGVydHMuZmluZCgoYWxlcnQ6IGFueSkgPT4gYWxlcnQubWVzc2FnZS5pbmNsdWRlcygnc3VjY2VzcyByYXRlJykpO1xuICAgICAgZXhwZWN0KHN1Y2Nlc3NSYXRlQWxlcnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3Qoc3VjY2Vzc1JhdGVBbGVydC5sZXZlbCkudG9CZSgnY3JpdGljYWwnKTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGhhdmUgc2VjdXJpdHkgZXZlbnRzIGFsZXJ0XG4gICAgICBjb25zdCBzZWN1cml0eUFsZXJ0ID0gZGF0YS5hbGVydHMuZmluZCgoYWxlcnQ6IGFueSkgPT4gYWxlcnQubWVzc2FnZS5pbmNsdWRlcygnc2VjdXJpdHkgZXZlbnRzJykpO1xuICAgICAgZXhwZWN0KHNlY3VyaXR5QWxlcnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3Qoc2VjdXJpdHlBbGVydC5sZXZlbCkudG9CZSgnd2FybmluZycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYXV0aGVudGljYXRpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JlcXVpcmVBdXRoLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignVW5hdXRob3JpemVkJykpO1xuICAgICAgXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0L2FwaS9hZG1pbi9lbWFpbC12ZXJpZmljYXRpb24tbW9uaXRvcicpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIFxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yKS50b0JlKCdGYWlsZWQgdG8gZmV0Y2ggbW9uaXRvcmluZyBkYXRhJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzeXN0ZW0gc3RhdHVzIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGVhbnVwU2VydmljZS5nZXRTeXN0ZW1TdGF0dXMubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvcicpKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdC9hcGkvYWRtaW4vZW1haWwtdmVyaWZpY2F0aW9uLW1vbml0b3InKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDUwMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvcikudG9CZSgnRmFpbGVkIHRvIGZldGNoIG1vbml0b3JpbmcgZGF0YScpO1xuICAgICAgZXhwZWN0KGRhdGEuZGV0YWlscykudG9CZSgnRGF0YWJhc2UgZXJyb3InKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BPU1QnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZm9yY2UtY2xlYW51cCBhY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjbGVhbnVwUmVzdWx0ID0ge1xuICAgICAgICBleHBpcmVkQ29kZXM6IDEwLFxuICAgICAgICByYXRlTGltaXREYXRhOiA1LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB9O1xuICAgICAgXG4gICAgICBtb2NrQ2xlYW51cFNlcnZpY2UuZm9yY2VDbGVhbnVwLm1vY2tSZXNvbHZlZFZhbHVlKGNsZWFudXBSZXN1bHQpO1xuICAgICAgXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0L2FwaS9hZG1pbi9lbWFpbC12ZXJpZmljYXRpb24tbW9uaXRvcicsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYWN0aW9uOiAnZm9yY2UtY2xlYW51cCcgfSksXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUE9TVChyZXF1ZXN0KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgZXhwZWN0KGRhdGEpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnQ2xlYW51cCBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgcmVzdWx0OiBjbGVhbnVwUmVzdWx0LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrQ2xlYW51cFNlcnZpY2UuZm9yY2VDbGVhbnVwKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcmVzZXQtZW1haWwtc3RhdHMgYWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdC9hcGkvYWRtaW4vZW1haWwtdmVyaWZpY2F0aW9uLW1vbml0b3InLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGFjdGlvbjogJ3Jlc2V0LWVtYWlsLXN0YXRzJyB9KSxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBleHBlY3QoZGF0YSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdFbWFpbCBzZXJ2aWNlIHN0YXRpc3RpY3MgcmVzZXQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QobW9ja0VtYWlsU2VydmljZU1vbml0b3IuZm9yY2VSZXNldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGdldC1lcnJvci1kZXRhaWxzIGFjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVycm9yRGV0YWlscyA9IHtcbiAgICAgICAgdG90YWxFcnJvcnM6IDUsXG4gICAgICAgIGVycm9yc0J5VHlwZTogeyBBUElfRVJST1I6IDMsIE5FVFdPUktfRVJST1I6IDIgfSxcbiAgICAgICAgcmVjZW50RXJyb3JzOiBbXSxcbiAgICAgICAgY3JpdGljYWxFcnJvcnM6IFtdLFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVjZW50RXZlbnRzID0gW1xuICAgICAgICB7IHR5cGU6ICdlcnJvcicsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSwgcmVzcG9uc2VUaW1lOiAyMDAsIGVycm9yOiB7IG1lc3NhZ2U6ICdFcnJvcicsIGNvZGU6ICdBUElfRVJST1InIH0gfSxcbiAgICAgIF07XG4gICAgICBcbiAgICAgIG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yLmdldEVycm9yU3VtbWFyeS5tb2NrUmV0dXJuVmFsdWUoZXJyb3JEZXRhaWxzKTtcbiAgICAgIG1vY2tFbWFpbFNlcnZpY2VNb25pdG9yLmdldFJlY2VudEV2ZW50cy5tb2NrUmV0dXJuVmFsdWUocmVjZW50RXZlbnRzKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdC9hcGkvYWRtaW4vZW1haWwtdmVyaWZpY2F0aW9uLW1vbml0b3InLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGFjdGlvbjogJ2dldC1lcnJvci1kZXRhaWxzJyB9KSxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBleHBlY3QoZGF0YSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGVycm9yRGV0YWlscyxcbiAgICAgICAgcmVjZW50RXZlbnRzLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrRW1haWxTZXJ2aWNlTW9uaXRvci5nZXRFcnJvclN1bW1hcnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCk7XG4gICAgICBleHBlY3QobW9ja0VtYWlsU2VydmljZU1vbml0b3IuZ2V0UmVjZW50RXZlbnRzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgyMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBhY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0L2FwaS9hZG1pbi9lbWFpbC12ZXJpZmljYXRpb24tbW9uaXRvcicsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYWN0aW9uOiAnaW52YWxpZC1hY3Rpb24nIH0pLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIFxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yKS50b0JlKCdJbnZhbGlkIGFjdGlvbiBzcGVjaWZpZWQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGF1dGhlbnRpY2F0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSZXF1aXJlQXV0aC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1VuYXV0aG9yaXplZCcpKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdC9hcGkvYWRtaW4vZW1haWwtdmVyaWZpY2F0aW9uLW1vbml0b3InLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGFjdGlvbjogJ2ZvcmNlLWNsZWFudXAnIH0pLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIFxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yKS50b0JlKCdGYWlsZWQgdG8gcGVyZm9ybSBhZG1pbiBhY3Rpb24nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNsZWFudXAgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsZWFudXBTZXJ2aWNlLmZvcmNlQ2xlYW51cC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0NsZWFudXAgZmFpbGVkJykpO1xuICAgICAgXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0L2FwaS9hZG1pbi9lbWFpbC12ZXJpZmljYXRpb24tbW9uaXRvcicsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYWN0aW9uOiAnZm9yY2UtY2xlYW51cCcgfSksXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUE9TVChyZXF1ZXN0KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IpLnRvQmUoJ0ZhaWxlZCB0byBwZXJmb3JtIGFkbWluIGFjdGlvbicpO1xuICAgICAgZXhwZWN0KGRhdGEuZGV0YWlscykudG9CZSgnQ2xlYW51cCBmYWlsZWQnKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJyZXF1aXJlQXV0aCIsImZuIiwiZW1haWxWZXJpZmljYXRpb25DbGVhbnVwU2VydmljZSIsImdldFN5c3RlbVN0YXR1cyIsImdldENsZWFudXBTdGF0cyIsImZvcmNlQ2xlYW51cCIsImVtYWlsU2VydmljZU1vbml0b3IiLCJnZXRTdGF0cyIsImdldEhlYWx0aFN0YXR1cyIsImdldFJlY2VudEV2ZW50cyIsImdldEVycm9yU3VtbWFyeSIsImlzUXVvdGFOZWFyTGltaXQiLCJmb3JjZVJlc2V0IiwibW9ja1JlcXVpcmVBdXRoIiwibW9ja0NsZWFudXBTZXJ2aWNlIiwibW9ja0VtYWlsU2VydmljZU1vbml0b3IiLCJkZXNjcmliZSIsIm1vY2tVc2VyIiwiaWQiLCJlbWFpbCIsIm5hbWUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXNvbHZlZFZhbHVlIiwidXNlciIsInZlcmlmaWNhdGlvbkNvZGVzIiwidG90YWxBY3RpdmUiLCJleHBpcmVkQ291bnQiLCJoaWdoQXR0ZW1wdENvdW50IiwicmF0ZUxpbWl0cyIsInZlcmlmaWNhdGlvbkF0dGVtcHRzIiwicmVzZW5kUmVxdWVzdHMiLCJlbWFpbFZlcmlmaWNhdGlvbkFjdGl2aXR5IiwicmVzZW5kQ29vbGRvd25zIiwic2VjdXJpdHlFdmVudHMiLCJlbWFpbFNlcnZpY2UiLCJoZWFsdGgiLCJxdW90YVVzYWdlIiwic3VjY2Vzc1JhdGUiLCJ0b3RhbFNlbnQiLCJ0b3RhbEZhaWxlZCIsImF2ZXJhZ2VSZXNwb25zZVRpbWUiLCJpc3N1ZXMiLCJyZWNvbW1lbmRhdGlvbnMiLCJjbGVhbnVwIiwibGFzdENsZWFudXAiLCJEYXRlIiwibm93IiwiaXNSdW5uaW5nIiwibmV4dENsZWFudXBEdWUiLCJtb2NrUmV0dXJuVmFsdWUiLCJxdW90YVVzZWQiLCJxdW90YUxpbWl0IiwiZXJyb3JzQnlUeXBlIiwiQVBJX0VSUk9SIiwiTkVUV09SS19FUlJPUiIsImxhc3RSZXNldFRpbWUiLCJzdGF0dXMiLCJ0eXBlIiwidGltZXN0YW1wIiwicmVzcG9uc2VUaW1lIiwiZXJyb3IiLCJtZXNzYWdlIiwiY29kZSIsInRvdGFsRXJyb3JzIiwicmVjZW50RXJyb3JzIiwiY3JpdGljYWxFcnJvcnMiLCJyZWNlbnRTdGF0cyIsImV4cGlyZWRDb2RlcyIsInJhdGVMaW1pdERhdGEiLCJ0b3RhbEV4cGlyZWRDb2RlcyIsInRvdGFsUmF0ZUxpbWl0RGF0YSIsIml0IiwicmVxdWVzdCIsIk5leHRSZXF1ZXN0IiwicmVzcG9uc2UiLCJHRVQiLCJleHBlY3QiLCJ0b0JlIiwiZGF0YSIsImpzb24iLCJ0b01hdGNoT2JqZWN0IiwiYW55IiwiTnVtYmVyIiwic3lzdGVtU3RhdHVzIiwib2JqZWN0Q29udGFpbmluZyIsIk9iamVjdCIsInN0YXRzIiwicmVjZW50RXZlbnRzIiwiQXJyYXkiLCJlcnJvclN1bW1hcnkiLCJxdW90YVdhcm5pbmciLCJCb29sZWFuIiwicXVvdGFDcml0aWNhbCIsImFsZXJ0cyIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwibGVuZ3RoIiwidG9CZUdyZWF0ZXJUaGFuIiwiY3JpdGljYWxBbGVydHMiLCJmaWx0ZXIiLCJhbGVydCIsImxldmVsIiwicXVvdGFBbGVydCIsImZpbmQiLCJpbmNsdWRlcyIsInRvQmVEZWZpbmVkIiwic3VjY2Vzc1JhdGVBbGVydCIsInNlY3VyaXR5QWxlcnQiLCJtb2NrUmVqZWN0ZWRWYWx1ZSIsIkVycm9yIiwiZGV0YWlscyIsImNsZWFudXBSZXN1bHQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFjdGlvbiIsImhlYWRlcnMiLCJQT1NUIiwidG9FcXVhbCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJlcnJvckRldGFpbHMiXSwibWFwcGluZ3MiOiJBQUFBOztDQUVDO0FBSUQsc0RBQXNEO0FBQ3REQSxLQUFLQyxJQUFJLENBQUMseUJBQXlCLElBQU8sQ0FBQTtRQUN4Q0MsYUFBYUYsS0FBS0csRUFBRTtJQUN0QixDQUFBO0FBQ0FILEtBQUtDLElBQUksQ0FBQyw2Q0FBNkMsSUFBTyxDQUFBO1FBQzVERyxpQ0FBaUM7WUFDL0JDLGlCQUFpQkwsS0FBS0csRUFBRTtZQUN4QkcsaUJBQWlCTixLQUFLRyxFQUFFO1lBQ3hCSSxjQUFjUCxLQUFLRyxFQUFFO1FBQ3ZCO0lBQ0YsQ0FBQTtBQUNBSCxLQUFLQyxJQUFJLENBQUMsd0NBQXdDLElBQU8sQ0FBQTtRQUN2RE8scUJBQXFCO1lBQ25CQyxVQUFVVCxLQUFLRyxFQUFFO1lBQ2pCTyxpQkFBaUJWLEtBQUtHLEVBQUU7WUFDeEJRLGlCQUFpQlgsS0FBS0csRUFBRTtZQUN4QlMsaUJBQWlCWixLQUFLRyxFQUFFO1lBQ3hCVSxrQkFBa0JiLEtBQUtHLEVBQUU7WUFDekJXLFlBQVlkLEtB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